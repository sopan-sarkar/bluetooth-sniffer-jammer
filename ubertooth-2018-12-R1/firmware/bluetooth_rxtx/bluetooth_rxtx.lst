ARM GAS  /tmp/ccyBazZt.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 4
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"bluetooth_rxtx.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.reverse8,"ax",%progbits
  16              		.align	1
  17              		.syntax unified
  18              		.thumb
  19              		.thumb_func
  20              		.fpu softvfp
  22              	reverse8:
  23              	.LFB18:
  24              		.file 1 "bluetooth_rxtx.c"
   1:bluetooth_rxtx.c **** /*
   2:bluetooth_rxtx.c ****  * Copyright 2010-2013 Michael Ossmann
   3:bluetooth_rxtx.c ****  * Copyright 2011-2013 Dominic Spill
   4:bluetooth_rxtx.c ****  *
   5:bluetooth_rxtx.c ****  * This file is part of Project Ubertooth.
   6:bluetooth_rxtx.c ****  *
   7:bluetooth_rxtx.c ****  * This program is free software; you can redistribute it and/or modify
   8:bluetooth_rxtx.c ****  * it under the terms of the GNU General Public License as published by
   9:bluetooth_rxtx.c ****  * the Free Software Foundation; either version 2, or (at your option)
  10:bluetooth_rxtx.c ****  * any later version.
  11:bluetooth_rxtx.c ****  *
  12:bluetooth_rxtx.c ****  * This program is distributed in the hope that it will be useful,
  13:bluetooth_rxtx.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:bluetooth_rxtx.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:bluetooth_rxtx.c ****  * GNU General Public License for more details.
  16:bluetooth_rxtx.c ****  *
  17:bluetooth_rxtx.c ****  * You should have received a copy of the GNU General Public License
  18:bluetooth_rxtx.c ****  * along with this program; see the file COPYING.  If not, write to
  19:bluetooth_rxtx.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  20:bluetooth_rxtx.c ****  * Boston, MA 02110-1301, USA.
  21:bluetooth_rxtx.c ****  */
  22:bluetooth_rxtx.c **** 
  23:bluetooth_rxtx.c **** #include <string.h>
  24:bluetooth_rxtx.c **** 
  25:bluetooth_rxtx.c **** #include "ubertooth.h"
  26:bluetooth_rxtx.c **** #include "ubertooth_usb.h"
  27:bluetooth_rxtx.c **** #include "ubertooth_interface.h"
  28:bluetooth_rxtx.c **** #include "ubertooth_rssi.h"
  29:bluetooth_rxtx.c **** #include "ubertooth_cs.h"
  30:bluetooth_rxtx.c **** #include "ubertooth_dma.h"
  31:bluetooth_rxtx.c **** #include "ubertooth_clock.h"
  32:bluetooth_rxtx.c **** #include "bluetooth.h"
  33:bluetooth_rxtx.c **** #include "bluetooth_le.h"
  34:bluetooth_rxtx.c **** #include "cc2400_rangetest.h"
ARM GAS  /tmp/ccyBazZt.s 			page 2


  35:bluetooth_rxtx.c **** #include "ego.h"
  36:bluetooth_rxtx.c **** #include "debug_uart.h"
  37:bluetooth_rxtx.c **** 
  38:bluetooth_rxtx.c **** #define MIN(x,y)	((x)<(y)?(x):(y))
  39:bluetooth_rxtx.c **** #define MAX(x,y)	((x)>(y)?(x):(y))
  40:bluetooth_rxtx.c **** 
  41:bluetooth_rxtx.c **** /**************** Timer 2 stuffs **********************/
  42:bluetooth_rxtx.c **** //#define NOW T1TC
  43:bluetooth_rxtx.c **** #define USEC(X) ((X)*10)
  44:bluetooth_rxtx.c **** #define MSEC(X) ((X)*10000)
  45:bluetooth_rxtx.c **** #define SEC(X) ((X)*10000000)
  46:bluetooth_rxtx.c **** #define PACKET_DURATION(X) (USEC(40 + (X) * 8))
  47:bluetooth_rxtx.c **** // time for the radio to warmup + some timing slack
  48:bluetooth_rxtx.c **** #define TX_WARMUP_TIME USEC(66)
  49:bluetooth_rxtx.c **** /************ pre-declarations for utility stuff ******/
  50:bluetooth_rxtx.c **** static void timer2_start(void);
  51:bluetooth_rxtx.c **** static void timer2_stop(void);
  52:bluetooth_rxtx.c **** static void timer2_set_match(uint32_t match);
  53:bluetooth_rxtx.c **** static void timer2_clear_match(void);
  54:bluetooth_rxtx.c **** /**************** Timer 2 stuffs **********************/
  55:bluetooth_rxtx.c **** 
  56:bluetooth_rxtx.c **** 
  57:bluetooth_rxtx.c **** /* build info */
  58:bluetooth_rxtx.c **** const char compile_info[] =
  59:bluetooth_rxtx.c **** 	"ubertooth " GIT_REVISION " (" COMPILE_BY "@" COMPILE_HOST ") " TIMESTAMP;
  60:bluetooth_rxtx.c **** 
  61:bluetooth_rxtx.c **** /* hopping stuff */
  62:bluetooth_rxtx.c **** volatile uint8_t  hop_mode = HOP_NONE;
  63:bluetooth_rxtx.c **** volatile uint8_t  do_hop = 0;                  // set by timer interrupt
  64:bluetooth_rxtx.c **** volatile uint16_t channel = 2408; //sopan
  65:bluetooth_rxtx.c **** volatile uint16_t hop_direct_channel = 0;      // for hopping directly to a channel
  66:bluetooth_rxtx.c **** volatile uint16_t hop_timeout = 158;
  67:bluetooth_rxtx.c **** volatile uint16_t requested_channel = 0;
  68:bluetooth_rxtx.c **** volatile uint16_t le_adv_channel = 2402;
  69:bluetooth_rxtx.c **** volatile int      cancel_follow = 0;
  70:bluetooth_rxtx.c **** 
  71:bluetooth_rxtx.c **** /* bulk USB stuff */
  72:bluetooth_rxtx.c **** volatile uint8_t  idle_buf_clkn_high = 0;
  73:bluetooth_rxtx.c **** volatile uint32_t idle_buf_clk100ns = 0;
  74:bluetooth_rxtx.c **** volatile uint16_t idle_buf_channel = 0;
  75:bluetooth_rxtx.c **** volatile uint8_t  dma_discard = 0;
  76:bluetooth_rxtx.c **** volatile uint8_t  status = 0;
  77:bluetooth_rxtx.c **** 
  78:bluetooth_rxtx.c **** /* operation mode */
  79:bluetooth_rxtx.c **** volatile uint8_t mode = MODE_IDLE;
  80:bluetooth_rxtx.c **** volatile uint8_t requested_mode = MODE_IDLE;
  81:bluetooth_rxtx.c **** volatile uint8_t jam_mode = JAM_NONE;
  82:bluetooth_rxtx.c **** volatile uint8_t ego_mode = EGO_FOLLOW;
  83:bluetooth_rxtx.c **** 
  84:bluetooth_rxtx.c **** volatile uint8_t modulation = MOD_BT_BASIC_RATE;
  85:bluetooth_rxtx.c **** 
  86:bluetooth_rxtx.c **** /* specan stuff */
  87:bluetooth_rxtx.c **** volatile uint16_t low_freq = 2400;
  88:bluetooth_rxtx.c **** volatile uint16_t high_freq = 2483;
  89:bluetooth_rxtx.c **** volatile int8_t rssi_threshold = -30;  // -54dBm - 30 = -84dBm
  90:bluetooth_rxtx.c **** 
  91:bluetooth_rxtx.c **** /* This is specific to BLE scanning in connected state */
ARM GAS  /tmp/ccyBazZt.s 			page 3


  92:bluetooth_rxtx.c **** static uint16_t eindex = 0;
  93:bluetooth_rxtx.c **** static uint16_t time_array1[16]; // Array that saves time of appearance of the BLE connection in th
  94:bluetooth_rxtx.c **** static uint16_t time_array2[16];
  95:bluetooth_rxtx.c **** static uint16_t time_array3[16];
  96:bluetooth_rxtx.c **** static u8 count1, count2, count3, sync_count = 0; // Some variables used for counting and and maint
  97:bluetooth_rxtx.c **** u8 idx1 = 0; // channel index to start sniffing to
  98:bluetooth_rxtx.c **** u8 idx2 = 1; // channel index to jump next from idx1
  99:bluetooth_rxtx.c **** u8 idx3 = 2; // channel index to jump next from idx2
 100:bluetooth_rxtx.c **** static uint16_t ch_map_hopped[37], remapped_ch[37];
 101:bluetooth_rxtx.c **** static u8 mapped = 0;
 102:bluetooth_rxtx.c **** static u8 total_channel = 0;
 103:bluetooth_rxtx.c **** static u8 ch_count1 = 0;
 104:bluetooth_rxtx.c **** static u8 hopping_channel, channel_hopped = 0;
 105:bluetooth_rxtx.c **** static u8 do_count = 1;
 106:bluetooth_rxtx.c **** u16 time1, index1 = 0;
 107:bluetooth_rxtx.c **** static u8 remapped = 0;
 108:bluetooth_rxtx.c **** static u8 do_transmit = 0;
 109:bluetooth_rxtx.c **** static u8 send_clock = 0;
 110:bluetooth_rxtx.c **** uint32_t tx_anchor = 0;
 111:bluetooth_rxtx.c **** uint32_t anchor_timestamp = 0;
 112:bluetooth_rxtx.c **** static u8 anchor_set = 0;
 113:bluetooth_rxtx.c **** static u32 window_shift = 0;
 114:bluetooth_rxtx.c **** 
 115:bluetooth_rxtx.c **** /* Generic TX stuff */
 116:bluetooth_rxtx.c **** generic_tx_packet tx_pkt;
 117:bluetooth_rxtx.c **** 
 118:bluetooth_rxtx.c **** /* le slave stuff */
 119:bluetooth_rxtx.c **** uint8_t slave_mac_address[6] = { 0, };
 120:bluetooth_rxtx.c **** uint8_t le_adv_data[LE_ADV_MAX_LEN] = { 0x02, 0x01, 0x05 };
 121:bluetooth_rxtx.c **** unsigned le_adv_len = 3;
 122:bluetooth_rxtx.c **** 
 123:bluetooth_rxtx.c **** le_state_t le = {
 124:bluetooth_rxtx.c **** 	.access_address = 0x8e89bed6,           // advertising channel access address
 125:bluetooth_rxtx.c **** 	.synch = 0x6b7d,                        // bit-reversed adv channel AA
 126:bluetooth_rxtx.c **** 	.syncl = 0x9171,
 127:bluetooth_rxtx.c **** 	.crc_init  = 0x555555,                  // advertising channel CRCInit
 128:bluetooth_rxtx.c **** 	.crc_init_reversed = 0xAAAAAA,
 129:bluetooth_rxtx.c **** 	.crc_verify = 0,
 130:bluetooth_rxtx.c **** 
 131:bluetooth_rxtx.c **** 	.link_state = LINK_INACTIVE,
 132:bluetooth_rxtx.c **** 	.conn_epoch = 0,
 133:bluetooth_rxtx.c **** 	.do_follow = 1,
 134:bluetooth_rxtx.c **** 	.target_set = 0,
 135:bluetooth_rxtx.c **** 	.last_packet = 0,
 136:bluetooth_rxtx.c **** };
 137:bluetooth_rxtx.c **** 
 138:bluetooth_rxtx.c **** le_channel_remapping_t pending_remapping, remapping;
 139:bluetooth_rxtx.c **** 
 140:bluetooth_rxtx.c **** typedef struct _le_promisc_active_aa_t {
 141:bluetooth_rxtx.c **** 	u32 aa;
 142:bluetooth_rxtx.c **** 	int count;
 143:bluetooth_rxtx.c **** } le_promisc_active_aa_t;
 144:bluetooth_rxtx.c **** 
 145:bluetooth_rxtx.c **** typedef struct _le_promisc_state_t {
 146:bluetooth_rxtx.c **** 	// LFU cache of recently seen AA's
 147:bluetooth_rxtx.c **** 	le_promisc_active_aa_t active_aa[32];
 148:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccyBazZt.s 			page 4


 149:bluetooth_rxtx.c **** 	// recovering hop interval
 150:bluetooth_rxtx.c **** 	u32 smallest_hop_interval;
 151:bluetooth_rxtx.c **** 	int consec_intervals;
 152:bluetooth_rxtx.c **** } le_promisc_state_t;
 153:bluetooth_rxtx.c **** le_promisc_state_t le_promisc;
 154:bluetooth_rxtx.c **** #define AA_LIST_SIZE (int)(sizeof(le_promisc.active_aa) / sizeof(le_promisc_active_aa_t))
 155:bluetooth_rxtx.c **** 
 156:bluetooth_rxtx.c **** /* LE jamming */
 157:bluetooth_rxtx.c **** #define JAM_COUNT_DEFAULT 40
 158:bluetooth_rxtx.c **** int le_jam_count = 0;
 159:bluetooth_rxtx.c **** 
 160:bluetooth_rxtx.c **** /* set LE access address */
 161:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa);
 162:bluetooth_rxtx.c **** 
 163:bluetooth_rxtx.c **** typedef int (*data_cb_t)(char *);
 164:bluetooth_rxtx.c **** data_cb_t data_cb = NULL;
 165:bluetooth_rxtx.c **** 
 166:bluetooth_rxtx.c **** typedef void (*packet_cb_t)(u8 *);
 167:bluetooth_rxtx.c **** packet_cb_t packet_cb = NULL;
 168:bluetooth_rxtx.c **** 
 169:bluetooth_rxtx.c **** /* Unpacked symbol buffers (two rxbufs) */
 170:bluetooth_rxtx.c **** char unpacked[DMA_SIZE*8*2];
 171:bluetooth_rxtx.c **** 
 172:bluetooth_rxtx.c **** static int enqueue(uint8_t type, uint8_t* buf)
 173:bluetooth_rxtx.c **** {
 174:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 175:bluetooth_rxtx.c **** 
 176:bluetooth_rxtx.c **** 	/* fail if queue is full */
 177:bluetooth_rxtx.c **** 	if (f == NULL) {
 178:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 179:bluetooth_rxtx.c **** 		return 0;
 180:bluetooth_rxtx.c **** 	}
 181:bluetooth_rxtx.c **** 
 182:bluetooth_rxtx.c **** 	f->pkt_type = type;
 183:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 184:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 185:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 186:bluetooth_rxtx.c **** 	} else {
 187:bluetooth_rxtx.c **** 		f->clkn_high = idle_buf_clkn_high;
 188:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 189:bluetooth_rxtx.c **** 		f->channel = (uint8_t)((idle_buf_channel - 2402) & 0xff);
 190:bluetooth_rxtx.c **** 		f->rssi_min = rssi_min;
 191:bluetooth_rxtx.c **** 		f->rssi_max = rssi_max;
 192:bluetooth_rxtx.c **** 		f->rssi_avg = rssi_get_avg(idle_buf_channel);
 193:bluetooth_rxtx.c **** 		f->rssi_count = rssi_count;
 194:bluetooth_rxtx.c **** 	}
 195:bluetooth_rxtx.c **** 
 196:bluetooth_rxtx.c **** 	memcpy(f->data, buf, DMA_SIZE);
 197:bluetooth_rxtx.c **** 
 198:bluetooth_rxtx.c **** 	f->status = status;
 199:bluetooth_rxtx.c **** 	status = 0;
 200:bluetooth_rxtx.c **** 
 201:bluetooth_rxtx.c **** 	return 1;
 202:bluetooth_rxtx.c **** }
 203:bluetooth_rxtx.c **** 
 204:bluetooth_rxtx.c **** int enqueue_with_ts(uint8_t type, uint8_t* buf, uint32_t ts)
 205:bluetooth_rxtx.c **** {
ARM GAS  /tmp/ccyBazZt.s 			page 5


 206:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 207:bluetooth_rxtx.c **** 
 208:bluetooth_rxtx.c **** 	/* fail if queue is full */
 209:bluetooth_rxtx.c **** 	if (f == NULL) {
 210:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 211:bluetooth_rxtx.c **** 		return 0;
 212:bluetooth_rxtx.c **** 	}
 213:bluetooth_rxtx.c **** 
 214:bluetooth_rxtx.c **** 	f->pkt_type = type;
 215:bluetooth_rxtx.c **** 
 216:bluetooth_rxtx.c **** 	f->clkn_high = 0;
 217:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 218:bluetooth_rxtx.c **** 
 219:bluetooth_rxtx.c **** 	f->channel = (uint8_t)((channel - 2402) & 0xff);
 220:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 221:bluetooth_rxtx.c **** 	f->rssi_count = 0;
 222:bluetooth_rxtx.c **** 
 223:bluetooth_rxtx.c **** 	memcpy(f->data, buf, DMA_SIZE);
 224:bluetooth_rxtx.c **** 
 225:bluetooth_rxtx.c **** 	f->status = status;
 226:bluetooth_rxtx.c **** 	status = 0;
 227:bluetooth_rxtx.c **** 
 228:bluetooth_rxtx.c **** 	return 1;
 229:bluetooth_rxtx.c **** }
 230:bluetooth_rxtx.c **** 
 231:bluetooth_rxtx.c **** static void timer2_set_match(uint32_t match) {
 232:bluetooth_rxtx.c **** 	T0MR0 = match;
 233:bluetooth_rxtx.c **** 	T0MCR = TMCR_MR0I;
 234:bluetooth_rxtx.c **** 	//T0MR1 = match;
 235:bluetooth_rxtx.c **** 	//T0MCR = TMCR_MR1R | TMCR_MR1I;
 236:bluetooth_rxtx.c **** }
 237:bluetooth_rxtx.c **** 
 238:bluetooth_rxtx.c **** static void timer2_clear_match(void) {
 239:bluetooth_rxtx.c **** 	T0MCR = ~TMCR_MR0I;
 240:bluetooth_rxtx.c **** 	//T0MCR &= ~TMCR_MR1I;
 241:bluetooth_rxtx.c **** }
 242:bluetooth_rxtx.c **** 
 243:bluetooth_rxtx.c **** static int vendor_request_handler(uint8_t request, uint16_t* request_params, uint8_t* data, int* da
 244:bluetooth_rxtx.c **** {
 245:bluetooth_rxtx.c **** 	uint32_t clock;
 246:bluetooth_rxtx.c **** 	size_t length; // string length
 247:bluetooth_rxtx.c **** 	usb_pkt_rx* p = NULL;
 248:bluetooth_rxtx.c **** 	uint16_t reg_val;
 249:bluetooth_rxtx.c **** 	uint8_t i;
 250:bluetooth_rxtx.c **** 	unsigned data_in_len = request_params[2];
 251:bluetooth_rxtx.c **** 
 252:bluetooth_rxtx.c **** 	switch (request) {
 253:bluetooth_rxtx.c **** 
 254:bluetooth_rxtx.c **** 	case UBERTOOTH_PING:
 255:bluetooth_rxtx.c **** 		*data_len = 0;
 256:bluetooth_rxtx.c **** 		break;
 257:bluetooth_rxtx.c **** 
 258:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_SYMBOLS:
 259:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_SYMBOLS;
 260:bluetooth_rxtx.c **** 		*data_len = 0;
 261:bluetooth_rxtx.c **** 		break;
 262:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccyBazZt.s 			page 6


 263:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_SYMBOLS:
 264:bluetooth_rxtx.c **** 		hop_mode = HOP_BLUETOOTH;
 265:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_SYMBOLS;
 266:bluetooth_rxtx.c **** 		*data_len = 0;
 267:bluetooth_rxtx.c **** 		break;
 268:bluetooth_rxtx.c **** 
 269:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_USRLED:
 270:bluetooth_rxtx.c **** 		data[0] = (USRLED) ? 1 : 0;
 271:bluetooth_rxtx.c **** 		*data_len = 1;
 272:bluetooth_rxtx.c **** 		break;
 273:bluetooth_rxtx.c **** 
 274:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_USRLED:
 275:bluetooth_rxtx.c **** 		if (request_params[0])
 276:bluetooth_rxtx.c **** 			USRLED_SET;
 277:bluetooth_rxtx.c **** 		else
 278:bluetooth_rxtx.c **** 			USRLED_CLR;
 279:bluetooth_rxtx.c **** 		break;
 280:bluetooth_rxtx.c **** 
 281:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_RXLED:
 282:bluetooth_rxtx.c **** 		data[0] = (RXLED) ? 1 : 0;
 283:bluetooth_rxtx.c **** 		*data_len = 1;
 284:bluetooth_rxtx.c **** 		break;
 285:bluetooth_rxtx.c **** 
 286:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_RXLED:
 287:bluetooth_rxtx.c **** 		if (request_params[0])
 288:bluetooth_rxtx.c **** 			RXLED_SET;
 289:bluetooth_rxtx.c **** 		else
 290:bluetooth_rxtx.c **** 			RXLED_CLR;
 291:bluetooth_rxtx.c **** 		break;
 292:bluetooth_rxtx.c **** 
 293:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_TXLED:
 294:bluetooth_rxtx.c **** 		data[0] = (TXLED) ? 1 : 0;
 295:bluetooth_rxtx.c **** 		*data_len = 1;
 296:bluetooth_rxtx.c **** 		break;
 297:bluetooth_rxtx.c **** 
 298:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_TXLED:
 299:bluetooth_rxtx.c **** 		if (request_params[0])
 300:bluetooth_rxtx.c **** 			TXLED_SET;
 301:bluetooth_rxtx.c **** 
 302:bluetooth_rxtx.c **** 		else
 303:bluetooth_rxtx.c **** 			TXLED_CLR;
 304:bluetooth_rxtx.c **** 		break;
 305:bluetooth_rxtx.c **** 
 306:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_1V8:
 307:bluetooth_rxtx.c **** 		data[0] = (CC1V8) ? 1 : 0;
 308:bluetooth_rxtx.c **** 		*data_len = 1;
 309:bluetooth_rxtx.c **** 		break;
 310:bluetooth_rxtx.c **** 
 311:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_1V8:
 312:bluetooth_rxtx.c **** 		if (request_params[0])
 313:bluetooth_rxtx.c **** 			CC1V8_SET;
 314:bluetooth_rxtx.c **** 		else
 315:bluetooth_rxtx.c **** 			CC1V8_CLR;
 316:bluetooth_rxtx.c **** 		break;
 317:bluetooth_rxtx.c **** 
 318:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PARTNUM:
 319:bluetooth_rxtx.c **** 		get_part_num(data, data_len);
ARM GAS  /tmp/ccyBazZt.s 			page 7


 320:bluetooth_rxtx.c **** 		break;
 321:bluetooth_rxtx.c **** 
 322:bluetooth_rxtx.c **** 	case UBERTOOTH_RESET:
 323:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 324:bluetooth_rxtx.c **** 		break;
 325:bluetooth_rxtx.c **** 
 326:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SERIAL:
 327:bluetooth_rxtx.c **** 		get_device_serial(data, data_len);
 328:bluetooth_rxtx.c **** 		break;
 329:bluetooth_rxtx.c **** 
 330:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 331:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PAEN:
 332:bluetooth_rxtx.c **** 		data[0] = (PAEN) ? 1 : 0;
 333:bluetooth_rxtx.c **** 		*data_len = 1;
 334:bluetooth_rxtx.c **** 		break;
 335:bluetooth_rxtx.c **** 
 336:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PAEN:
 337:bluetooth_rxtx.c **** 		if (request_params[0])
 338:bluetooth_rxtx.c **** 			PAEN_SET;
 339:bluetooth_rxtx.c **** 		else
 340:bluetooth_rxtx.c **** 			PAEN_CLR;
 341:bluetooth_rxtx.c **** 		break;
 342:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_HGM:
 343:bluetooth_rxtx.c **** 		data[0] = (HGM) ? 1 : 0;
 344:bluetooth_rxtx.c **** 		*data_len = 1;
 345:bluetooth_rxtx.c **** 		break;
 346:bluetooth_rxtx.c **** 
 347:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_HGM:
 348:bluetooth_rxtx.c **** 		if (request_params[0])
 349:bluetooth_rxtx.c **** 			HGM_SET;
 350:bluetooth_rxtx.c **** 		else
 351:bluetooth_rxtx.c **** 			HGM_CLR;
 352:bluetooth_rxtx.c **** 		break;
 353:bluetooth_rxtx.c **** #endif
 354:bluetooth_rxtx.c **** 
 355:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 356:bluetooth_rxtx.c **** 
 357:bluetooth_rxtx.c **** 
 358:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_TEST:
 359:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_TEST;
 360:bluetooth_rxtx.c **** 		break;
 361:bluetooth_rxtx.c **** 
 362:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PALEVEL:
 363:bluetooth_rxtx.c **** 		data[0] = cc2400_get(FREND) & 0x7;
 364:bluetooth_rxtx.c **** 		*data_len = 1;
 365:bluetooth_rxtx.c **** 		break;
 366:bluetooth_rxtx.c **** 
 367:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PALEVEL:
 368:bluetooth_rxtx.c **** 		if( request_params[0] < 8 ) {
 369:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 370:bluetooth_rxtx.c **** 		} else {
 371:bluetooth_rxtx.c **** 			return 0;
 372:bluetooth_rxtx.c **** 		}
 373:bluetooth_rxtx.c **** 		break;
 374:bluetooth_rxtx.c **** 
 375:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_TEST:
 376:bluetooth_rxtx.c **** 		requested_mode = MODE_RANGE_TEST;
ARM GAS  /tmp/ccyBazZt.s 			page 8


 377:bluetooth_rxtx.c **** 		break;
 378:bluetooth_rxtx.c **** 
 379:bluetooth_rxtx.c **** 	case UBERTOOTH_REPEATER:
 380:bluetooth_rxtx.c **** 		requested_mode = MODE_REPEATER;
 381:bluetooth_rxtx.c **** 		break;
 382:bluetooth_rxtx.c **** #endif
 383:bluetooth_rxtx.c **** 
 384:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_CHECK:
 385:bluetooth_rxtx.c **** 		data[0] = rr.valid;
 386:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 387:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 388:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 389:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 390:bluetooth_rxtx.c **** 		*data_len = 5;
 391:bluetooth_rxtx.c **** 		break;
 392:bluetooth_rxtx.c **** 
 393:bluetooth_rxtx.c **** 	case UBERTOOTH_STOP:
 394:bluetooth_rxtx.c **** 		requested_mode = MODE_IDLE;
 395:bluetooth_rxtx.c **** 		break;
 396:bluetooth_rxtx.c **** 
 397:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_MOD:
 398:bluetooth_rxtx.c **** 		data[0] = modulation;
 399:bluetooth_rxtx.c **** 		*data_len = 1;
 400:bluetooth_rxtx.c **** 		break;
 401:bluetooth_rxtx.c **** 
 402:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_MOD:
 403:bluetooth_rxtx.c **** 		modulation = request_params[0];
 404:bluetooth_rxtx.c **** 		break;
 405:bluetooth_rxtx.c **** 
 406:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CHANNEL:
 407:bluetooth_rxtx.c **** 		data[0] = channel & 0xFF;
 408:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 409:bluetooth_rxtx.c **** 		*data_len = 2;
 410:bluetooth_rxtx.c **** 		break;
 411:bluetooth_rxtx.c **** 
 412:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CHANNEL:
 413:bluetooth_rxtx.c **** 		requested_channel = request_params[0];
 414:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 415:bluetooth_rxtx.c **** 		if (requested_channel > MAX_FREQ) {
 416:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 417:bluetooth_rxtx.c **** 			requested_channel = 2402;
 418:bluetooth_rxtx.c **** 		}
 419:bluetooth_rxtx.c **** 		/* fixed channel mode, can be outside bluetooth band */
 420:bluetooth_rxtx.c **** 		else {
 421:bluetooth_rxtx.c **** 			hop_mode = HOP_NONE;
 422:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 423:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 424:bluetooth_rxtx.c **** 		}
 425:bluetooth_rxtx.c **** 
 426:bluetooth_rxtx.c **** 		le_adv_channel = requested_channel;
 427:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE) {
 428:bluetooth_rxtx.c **** 			channel = requested_channel;
 429:bluetooth_rxtx.c **** 			requested_channel = 0;
 430:bluetooth_rxtx.c **** 
 431:bluetooth_rxtx.c **** 
 432:bluetooth_rxtx.c **** 
 433:bluetooth_rxtx.c **** 			/* CS threshold is mode-dependent. Update it after
ARM GAS  /tmp/ccyBazZt.s 			page 9


 434:bluetooth_rxtx.c **** 			 * possible mode change. TODO - kludgy. */
 435:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set(channel);
 436:bluetooth_rxtx.c **** 		}
 437:bluetooth_rxtx.c **** 
 438:bluetooth_rxtx.c **** 		break;
 439:bluetooth_rxtx.c **** 
 440:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ISP:
 441:bluetooth_rxtx.c **** 		set_isp();
 442:bluetooth_rxtx.c **** 		*data_len = 0; /* should never return */
 443:bluetooth_rxtx.c **** 		break;
 444:bluetooth_rxtx.c **** 
 445:bluetooth_rxtx.c **** 	case UBERTOOTH_FLASH:
 446:bluetooth_rxtx.c **** 		bootloader_ctrl = DFU_MODE;
 447:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 448:bluetooth_rxtx.c **** 		break;
 449:bluetooth_rxtx.c **** 
 450:bluetooth_rxtx.c **** 	case UBERTOOTH_SPECAN:
 451:bluetooth_rxtx.c **** 		if (request_params[0] < 2049 || request_params[0] > 3072 ||
 452:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 453:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 454:bluetooth_rxtx.c **** 			return 0;
 455:bluetooth_rxtx.c **** 		low_freq = request_params[0];
 456:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 457:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
 458:bluetooth_rxtx.c **** 		*data_len = 0;
 459:bluetooth_rxtx.c **** 		break;
 460:bluetooth_rxtx.c **** 
 461:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_GENERIC:
 462:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_GENERIC;
 463:bluetooth_rxtx.c **** 		*data_len = 0;
 464:bluetooth_rxtx.c **** 		break;
 465:bluetooth_rxtx.c **** 
 466:bluetooth_rxtx.c **** 	case UBERTOOTH_LED_SPECAN:
 467:bluetooth_rxtx.c **** 		if (request_params[0] > 256)
 468:bluetooth_rxtx.c **** 			return 0;
 469:bluetooth_rxtx.c **** 		rssi_threshold = 54 - request_params[0];
 470:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 471:bluetooth_rxtx.c **** 		*data_len = 0;
 472:bluetooth_rxtx.c **** 		break;
 473:bluetooth_rxtx.c **** 
 474:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_REV_NUM:
 475:bluetooth_rxtx.c **** 		data[0] = 0x00;
 476:bluetooth_rxtx.c **** 		data[1] = 0x00;
 477:bluetooth_rxtx.c **** 
 478:bluetooth_rxtx.c **** 		length = (u8)strlen(GIT_REVISION);
 479:bluetooth_rxtx.c **** 		data[2] = length;
 480:bluetooth_rxtx.c **** 
 481:bluetooth_rxtx.c **** 		memcpy(&data[3], GIT_REVISION, length);
 482:bluetooth_rxtx.c **** 
 483:bluetooth_rxtx.c **** 		*data_len = 2 + 1 + length;
 484:bluetooth_rxtx.c **** 		break;
 485:bluetooth_rxtx.c **** 
 486:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_COMPILE_INFO:
 487:bluetooth_rxtx.c **** 		length = (u8)strlen(compile_info);
 488:bluetooth_rxtx.c **** 		data[0] = length;
 489:bluetooth_rxtx.c **** 		memcpy(&data[1], compile_info, length);
 490:bluetooth_rxtx.c **** 		*data_len = 1 + length;
ARM GAS  /tmp/ccyBazZt.s 			page 10


 491:bluetooth_rxtx.c **** 		break;
 492:bluetooth_rxtx.c **** 
 493:bluetooth_rxtx.c **** 
 494:bluetooth_rxtx.c **** 
 495:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_BOARD_ID:
 496:bluetooth_rxtx.c **** 		data[0] = BOARD_ID;
 497:bluetooth_rxtx.c **** 		*data_len = 1;
 498:bluetooth_rxtx.c **** 		break;
 499:bluetooth_rxtx.c **** 
 500:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_SQUELCH:
 501:bluetooth_rxtx.c **** 		cs_threshold_req = (int8_t)request_params[0];
 502:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 503:bluetooth_rxtx.c **** 		break;
 504:bluetooth_rxtx.c **** 
 505:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SQUELCH:
 506:bluetooth_rxtx.c **** 		data[0] = cs_threshold_req;
 507:bluetooth_rxtx.c **** 		*data_len = 1;
 508:bluetooth_rxtx.c **** 		break;
 509:bluetooth_rxtx.c **** 
 510:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_BDADDR:
 511:bluetooth_rxtx.c **** 		target.address = 0;
 512:bluetooth_rxtx.c **** 		target.syncword = 0;
 513:bluetooth_rxtx.c **** 		for(int i=0; i < 8; i++) {
 514:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 515:bluetooth_rxtx.c **** 		}
 516:bluetooth_rxtx.c **** 		for(int i=0; i < 8; i++) {
 517:bluetooth_rxtx.c **** 			target.syncword |= (uint64_t)data[i+8] << 8*i;
 518:bluetooth_rxtx.c **** 		}
 519:bluetooth_rxtx.c **** 		precalc();
 520:bluetooth_rxtx.c **** 		break;
 521:bluetooth_rxtx.c **** 
 522:bluetooth_rxtx.c **** 	case UBERTOOTH_START_HOPPING:
 523:bluetooth_rxtx.c **** 		clkn_offset = 0;
 524:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 525:bluetooth_rxtx.c **** 			clkn_offset <<= 8;
 526:bluetooth_rxtx.c **** 			clkn_offset |= data[i];
 527:bluetooth_rxtx.c **** 		}
 528:bluetooth_rxtx.c **** 		hop_mode = HOP_BLUETOOTH;
 529:bluetooth_rxtx.c **** 		dma_discard = 1;
 530:bluetooth_rxtx.c **** 		DIO_SSEL_SET;
 531:bluetooth_rxtx.c **** 		clk100ns_offset = (data[4] << 8) | (data[5] << 0);
 532:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 533:bluetooth_rxtx.c **** 		break;
 534:bluetooth_rxtx.c **** 
 535:bluetooth_rxtx.c **** 	case UBERTOOTH_AFH:
 536:bluetooth_rxtx.c **** 		hop_mode = HOP_AFH;
 537:bluetooth_rxtx.c **** 		requested_mode = MODE_AFH;
 538:bluetooth_rxtx.c **** 
 539:bluetooth_rxtx.c **** 		for(int i=0; i < 10; i++) {
 540:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 541:bluetooth_rxtx.c **** 		}
 542:bluetooth_rxtx.c **** 		used_channels = 0;
 543:bluetooth_rxtx.c **** 		afh_enabled = 1;
 544:bluetooth_rxtx.c **** 		break;
 545:bluetooth_rxtx.c **** 
 546:bluetooth_rxtx.c **** 	case UBERTOOTH_HOP:
 547:bluetooth_rxtx.c **** 		do_hop = 1;
ARM GAS  /tmp/ccyBazZt.s 			page 11


 548:bluetooth_rxtx.c **** 		break;
 549:bluetooth_rxtx.c **** 
 550:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CLOCK:
 551:bluetooth_rxtx.c **** 		clock = data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24;
 552:bluetooth_rxtx.c **** 		clkn = clock;
 553:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 554:bluetooth_rxtx.c **** 		break;
 555:bluetooth_rxtx.c **** 
 556:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_AFHMAP:
 557:bluetooth_rxtx.c **** 		for(int i=0; i < 10; i++) {
 558:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 559:bluetooth_rxtx.c **** 		}
 560:bluetooth_rxtx.c **** 		afh_enabled = 1;
 561:bluetooth_rxtx.c **** 		*data_len = 10;
 562:bluetooth_rxtx.c **** 		break;
 563:bluetooth_rxtx.c **** 
 564:bluetooth_rxtx.c **** 	case UBERTOOTH_CLEAR_AFHMAP:
 565:bluetooth_rxtx.c **** 		for(int i=0; i < 10; i++) {
 566:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 567:bluetooth_rxtx.c **** 		}
 568:bluetooth_rxtx.c **** 		afh_enabled = 0;
 569:bluetooth_rxtx.c **** 		*data_len = 10;
 570:bluetooth_rxtx.c **** 		break;
 571:bluetooth_rxtx.c **** 
 572:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CLOCK:
 573:bluetooth_rxtx.c **** 		clock = clkn;
 574:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 575:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 576:bluetooth_rxtx.c **** 		}
 577:bluetooth_rxtx.c **** 		*data_len = 4;
 578:bluetooth_rxtx.c **** 		break;
 579:bluetooth_rxtx.c **** 
 580:bluetooth_rxtx.c **** 	case UBERTOOTH_TRIM_CLOCK:
 581:bluetooth_rxtx.c **** 
 582:bluetooth_rxtx.c **** 
 583:bluetooth_rxtx.c **** 		clk100ns_offset = (data[0] << 8) | (data[1] << 0);
 584:bluetooth_rxtx.c **** 		break;
 585:bluetooth_rxtx.c **** 
 586:bluetooth_rxtx.c **** 	case UBERTOOTH_FIX_CLOCK_DRIFT:
 587:bluetooth_rxtx.c **** 		clk_drift_ppm += (int16_t)(data[0] << 8) | (data[1] << 0);
 588:bluetooth_rxtx.c **** 
 589:bluetooth_rxtx.c **** 		// Too slow
 590:bluetooth_rxtx.c **** 		if (clk_drift_ppm < 0) {
 591:bluetooth_rxtx.c **** 			clk_drift_correction = 320 / (uint16_t)(-clk_drift_ppm);
 592:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 593:bluetooth_rxtx.c **** 		}
 594:bluetooth_rxtx.c **** 		// Too fast
 595:bluetooth_rxtx.c **** 		else if (clk_drift_ppm > 0) {
 596:bluetooth_rxtx.c **** 			clk_drift_correction = 320 / clk_drift_ppm;
 597:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 598:bluetooth_rxtx.c **** 		}
 599:bluetooth_rxtx.c **** 		// Don't trim
 600:bluetooth_rxtx.c **** 		else {
 601:bluetooth_rxtx.c **** 			clk_drift_correction = 0;
 602:bluetooth_rxtx.c **** 			clkn_next_drift_fix = 0;
 603:bluetooth_rxtx.c **** 		}
 604:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccyBazZt.s 			page 12


 605:bluetooth_rxtx.c **** 		break;
 606:bluetooth_rxtx.c **** 
 607:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SNIFFING:
 608:bluetooth_rxtx.c **** 		le.do_follow = request_params[0];
 609:bluetooth_rxtx.c **** 		*data_len = 0;
 610:bluetooth_rxtx.c **** 
 611:bluetooth_rxtx.c **** 		do_hop = 0;
 612:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 613:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 614:bluetooth_rxtx.c **** 
 615:bluetooth_rxtx.c **** 		usb_queue_init();
 616:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 617:bluetooth_rxtx.c **** 		break;
 618:bluetooth_rxtx.c **** 
 619:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_ACCESS_ADDRESS:
 620:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 621:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 622:bluetooth_rxtx.c **** 		}
 623:bluetooth_rxtx.c **** 		*data_len = 4;
 624:bluetooth_rxtx.c **** 		break;
 625:bluetooth_rxtx.c **** 
 626:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ACCESS_ADDRESS:
 627:bluetooth_rxtx.c **** 		le_set_access_address(data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24);
 628:bluetooth_rxtx.c **** 		le.target_set = 1;
 629:bluetooth_rxtx.c **** 		debug_printf("AA set\n");
 630:bluetooth_rxtx.c **** 		break;
 631:bluetooth_rxtx.c **** 
 632:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING:
 633:bluetooth_rxtx.c **** 		// do something! just don't commit anything here
 634:bluetooth_rxtx.c **** 		break;
 635:bluetooth_rxtx.c **** 
 636:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING_REPLY:
 637:bluetooth_rxtx.c **** 		// after you do something, tell me what you did!
 638:bluetooth_rxtx.c **** 		// don't commit here please
 639:bluetooth_rxtx.c **** 		data[0] = 0x13;
 640:bluetooth_rxtx.c **** 		data[1] = 0x37;
 641:bluetooth_rxtx.c **** 		*data_len = 2;
 642:bluetooth_rxtx.c **** 		break;
 643:bluetooth_rxtx.c **** 
 644:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CRC_VERIFY:
 645:bluetooth_rxtx.c **** 		data[0] = le.crc_verify ? 1 : 0;
 646:bluetooth_rxtx.c **** 		*data_len = 1;
 647:bluetooth_rxtx.c **** 		break;
 648:bluetooth_rxtx.c **** 
 649:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CRC_VERIFY:
 650:bluetooth_rxtx.c **** 		le.crc_verify = request_params[0] ? 1 : 0;
 651:bluetooth_rxtx.c **** 		break;
 652:bluetooth_rxtx.c **** 
 653:bluetooth_rxtx.c **** 	case UBERTOOTH_POLL:
 654:bluetooth_rxtx.c **** 		p = dequeue();
 655:bluetooth_rxtx.c **** 		if (p != NULL) {
 656:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 657:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 658:bluetooth_rxtx.c **** 		} else {
 659:bluetooth_rxtx.c **** 			data[0] = 0;
 660:bluetooth_rxtx.c **** 			*data_len = 1;
 661:bluetooth_rxtx.c **** 		}
ARM GAS  /tmp/ccyBazZt.s 			page 13


 662:bluetooth_rxtx.c **** 		break;
 663:bluetooth_rxtx.c **** 
 664:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_PROMISC:
 665:bluetooth_rxtx.c **** 		*data_len = 0;
 666:bluetooth_rxtx.c **** 
 667:bluetooth_rxtx.c **** 		hop_mode = HOP_NONE;
 668:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 669:bluetooth_rxtx.c **** 
 670:bluetooth_rxtx.c **** 		usb_queue_init();
 671:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 672:bluetooth_rxtx.c **** 		break;
 673:bluetooth_rxtx.c **** 
 674:bluetooth_rxtx.c **** 	case UBERTOOTH_READ_REGISTER:
 675:bluetooth_rxtx.c **** 		reg_val = cc2400_get(request_params[0]);
 676:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 677:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 678:bluetooth_rxtx.c **** 		*data_len = 2;
 679:bluetooth_rxtx.c **** 		break;
 680:bluetooth_rxtx.c **** 
 681:bluetooth_rxtx.c **** 	case UBERTOOTH_WRITE_REGISTER:
 682:bluetooth_rxtx.c **** 		cc2400_set(request_params[0] & 0xff, request_params[1]);
 683:bluetooth_rxtx.c **** 		break;
 684:bluetooth_rxtx.c **** 
 685:bluetooth_rxtx.c **** 	case UBERTOOTH_WRITE_REGISTERS:
 686:bluetooth_rxtx.c **** 		for(i=0; i<request_params[0]; i++) {
 687:bluetooth_rxtx.c **** 			reg_val = (data[(i*3)+1] << 8) | data[(i*3)+2];
 688:bluetooth_rxtx.c **** 			cc2400_set(data[i*3], reg_val);
 689:bluetooth_rxtx.c **** 		}
 690:bluetooth_rxtx.c **** 		break;
 691:bluetooth_rxtx.c **** 
 692:bluetooth_rxtx.c **** 	case UBERTOOTH_READ_ALL_REGISTERS:
 693:bluetooth_rxtx.c **** 		#define MAX_READ_REG 0x2d
 694:bluetooth_rxtx.c **** 		for(i=0; i<=MAX_READ_REG; i++) {
 695:bluetooth_rxtx.c **** 			reg_val = cc2400_get(i);
 696:bluetooth_rxtx.c **** 			data[i*3] = i;
 697:bluetooth_rxtx.c **** 			data[(i*3)+1] = (reg_val >> 8) & 0xff;
 698:bluetooth_rxtx.c **** 			data[(i*3)+2] = reg_val & 0xff;
 699:bluetooth_rxtx.c **** 		}
 700:bluetooth_rxtx.c **** 		*data_len = MAX_READ_REG*3;
 701:bluetooth_rxtx.c **** 		break;
 702:bluetooth_rxtx.c **** 
 703:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_GENERIC_PACKET:
 704:bluetooth_rxtx.c **** 		i = 7 + data[6];
 705:bluetooth_rxtx.c **** 		memcpy(&tx_pkt, data, i);
 706:bluetooth_rxtx.c **** 		//tx_pkt.channel = data[4] << 8 | data[5];
 707:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_GENERIC;
 708:bluetooth_rxtx.c **** 		*data_len = 0;
 709:bluetooth_rxtx.c **** 		break;
 710:bluetooth_rxtx.c **** 
 711:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SLAVE:
 712:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 713:bluetooth_rxtx.c **** 		break;
 714:bluetooth_rxtx.c **** ///////////////////////////////////////////////////////////////////////////// Sopan Sarkar
 715:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_TRANSMIT:
 716:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_TRANSMIT_LE;
 717:bluetooth_rxtx.c **** 		break;
 718:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_HOP_INTERVAL:
ARM GAS  /tmp/ccyBazZt.s 			page 14


 719:bluetooth_rxtx.c **** 		le.conn_interval = (data[0] | data[1] << 8);
 720:bluetooth_rxtx.c **** 		window_shift = ((300/1000000)*le.conn_interval*USEC(1250))/2;
 721:bluetooth_rxtx.c **** 		debug_printf("Hop interval set\n");
 722:bluetooth_rxtx.c **** 		break;
 723:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_HOP_INCREMENT:
 724:bluetooth_rxtx.c **** 		le.channel_increment = data[0];
 725:bluetooth_rxtx.c **** 		debug_printf("Hop increment set\n");
 726:bluetooth_rxtx.c **** 		break;
 727:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_LE_CHANNEL:
 728:bluetooth_rxtx.c **** 		//debug_printf("Transmitting on index: %d\n", data[0]);
 729:bluetooth_rxtx.c **** 		le.channel_idx = data[0];
 730:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 731:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 732:bluetooth_rxtx.c **** 		break;
 733:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ANCHOR:
 734:bluetooth_rxtx.c **** 		tx_anchor = data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24;
 735:bluetooth_rxtx.c **** 		debug_printf("Anchor: %d\n", tx_anchor);
 736:bluetooth_rxtx.c **** 		u32 now = tx_anchor + (le.conn_interval*USEC(1250)) - TX_WARMUP_TIME - PACKET_DURATION(2) - USEC(
 737:bluetooth_rxtx.c **** 		if (now > 3276800000)
 738:bluetooth_rxtx.c **** 			now -= 3276800000;
 739:bluetooth_rxtx.c **** 		timer2_clear_match();
 740:bluetooth_rxtx.c **** 		timer2_set_match(now);
 741:bluetooth_rxtx.c **** 		hop_mode = HOP_TRANSMIT_LE2;
 742:bluetooth_rxtx.c **** 		anchor_set = 1;
 743:bluetooth_rxtx.c **** 		break;
 744:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CRC_INIT:
 745:bluetooth_rxtx.c **** 		le.crc_init = data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24;
 746:bluetooth_rxtx.c **** 		//debug_printf("CRC set\n");
 747:bluetooth_rxtx.c **** 		break;
 748:bluetooth_rxtx.c **** /////////////////////////////////////////////////////////////////////////////
 749:bluetooth_rxtx.c **** 	case UBERTOOTH_LE_SET_ADV_DATA:
 750:bluetooth_rxtx.c **** 		// make sure the data fits in our buffer
 751:bluetooth_rxtx.c **** 		if (data_in_len > LE_ADV_MAX_LEN)
 752:bluetooth_rxtx.c **** 			return 0;
 753:bluetooth_rxtx.c **** 		le_adv_len = data_in_len;
 754:bluetooth_rxtx.c **** 		memcpy(le_adv_data, data, le_adv_len);
 755:bluetooth_rxtx.c **** 		break;
 756:bluetooth_rxtx.c **** 
 757:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SET_TARGET:
 758:bluetooth_rxtx.c **** 		// Addresses appear in packets in reverse-octet order.
 759:bluetooth_rxtx.c **** 		// Store the target address in reverse order so that we can do a simple memcmp later
 760:bluetooth_rxtx.c **** 		if (data[6] > 48) {
 761:bluetooth_rxtx.c **** 			return 0; // invalid mask
 762:bluetooth_rxtx.c **** 		}
 763:bluetooth_rxtx.c **** 		else if (data[6] == 0) {
 764:bluetooth_rxtx.c **** 			le.target_set = 0;
 765:bluetooth_rxtx.c **** 			memset(le.target, 0, 6);
 766:bluetooth_rxtx.c **** 			memset(le.target_mask, 0, 6);
 767:bluetooth_rxtx.c **** 		} else {
 768:bluetooth_rxtx.c **** 			unsigned last;
 769:bluetooth_rxtx.c **** 
 770:bluetooth_rxtx.c **** 			for (i = 0; i < 6; ++i)
 771:bluetooth_rxtx.c **** 				le.target[i] = data[5-i];
 772:bluetooth_rxtx.c **** 
 773:bluetooth_rxtx.c **** 			// compute mask
 774:bluetooth_rxtx.c **** 			memset(le.target_mask, 0, 6);
 775:bluetooth_rxtx.c **** 			for (i = 5; data[6] > 8; --i, data[6] -= 8) {
ARM GAS  /tmp/ccyBazZt.s 			page 15


 776:bluetooth_rxtx.c **** 				le.target_mask[i] = 0xff;
 777:bluetooth_rxtx.c **** 			}
 778:bluetooth_rxtx.c **** 			last = i;
 779:bluetooth_rxtx.c **** 
 780:bluetooth_rxtx.c **** 			if (data[6] > 0) {
 781:bluetooth_rxtx.c **** 				uint8_t final_byte = 0;
 782:bluetooth_rxtx.c **** 				for (i = 0; i < data[6]; ++i) {
 783:bluetooth_rxtx.c **** 					final_byte >>= 1;
 784:bluetooth_rxtx.c **** 					final_byte |= 0b10000000;
 785:bluetooth_rxtx.c **** 				}
 786:bluetooth_rxtx.c **** 				le.target_mask[last] = final_byte;
 787:bluetooth_rxtx.c **** 			}
 788:bluetooth_rxtx.c **** 
 789:bluetooth_rxtx.c **** 			// in case the user specifies a bad mask
 790:bluetooth_rxtx.c **** 			for (i = 0; i < 5; ++i)
 791:bluetooth_rxtx.c **** 				le.target[i] &= le.target_mask[i];
 792:bluetooth_rxtx.c **** 
 793:bluetooth_rxtx.c **** 			le.target_set = 1;
 794:bluetooth_rxtx.c **** 		}
 795:bluetooth_rxtx.c **** 		break;
 796:bluetooth_rxtx.c **** 
 797:bluetooth_rxtx.c **** 	case UBERTOOTH_CANCEL_FOLLOW:
 798:bluetooth_rxtx.c **** 		// cancel following an active connection
 799:bluetooth_rxtx.c **** 		cancel_follow = 1;
 800:bluetooth_rxtx.c **** 		break;
 801:bluetooth_rxtx.c **** 
 802:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 803:bluetooth_rxtx.c **** 	case UBERTOOTH_JAM_MODE:
 804:bluetooth_rxtx.c **** 		jam_mode = request_params[0];
 805:bluetooth_rxtx.c **** 		break;
 806:bluetooth_rxtx.c **** #endif
 807:bluetooth_rxtx.c **** 
 808:bluetooth_rxtx.c **** 	case UBERTOOTH_EGO:
 809:bluetooth_rxtx.c **** #ifndef TX_ENABLE
 810:bluetooth_rxtx.c **** 		if (ego_mode == EGO_JAM)
 811:bluetooth_rxtx.c **** 			return 0;
 812:bluetooth_rxtx.c **** #endif
 813:bluetooth_rxtx.c **** 		requested_mode = MODE_EGO;
 814:bluetooth_rxtx.c **** 		ego_mode = request_params[0];
 815:bluetooth_rxtx.c **** 		break;
 816:bluetooth_rxtx.c **** 
 817:bluetooth_rxtx.c **** 	default:
 818:bluetooth_rxtx.c **** 		return 0;
 819:bluetooth_rxtx.c **** 	}
 820:bluetooth_rxtx.c **** 	return 1;
 821:bluetooth_rxtx.c **** }
 822:bluetooth_rxtx.c **** 
 823:bluetooth_rxtx.c **** 
 824:bluetooth_rxtx.c **** /****************** Timer 1 declarations ***************************/
 825:bluetooth_rxtx.c **** /*
 826:bluetooth_rxtx.c **** static void timer2_start(void) {
 827:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Reset;
 828:bluetooth_rxtx.c **** 	T0PR = 4; // 100 ns
 829:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Enable;
 830:bluetooth_rxtx.c **** 
 831:bluetooth_rxtx.c **** 	// set up interrupt handler
 832:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_TIMER0;
ARM GAS  /tmp/ccyBazZt.s 			page 16


 833:bluetooth_rxtx.c **** }
 834:bluetooth_rxtx.c **** 
 835:bluetooth_rxtx.c **** static void timer2_stop(void) {
 836:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Reset;
 837:bluetooth_rxtx.c **** 
 838:bluetooth_rxtx.c **** 	// clear interrupt handler
 839:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_TIMER0;
 840:bluetooth_rxtx.c **** }
 841:bluetooth_rxtx.c **** */
 842:bluetooth_rxtx.c **** 
 843:bluetooth_rxtx.c **** /*
 844:bluetooth_rxtx.c **** void TIMER2_IRQHandler(void) {
 845:bluetooth_rxtx.c **** 	// MR1: connection events
 846:bluetooth_rxtx.c **** 	debug_printf("Timer 2\n");
 847:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR2_Interrupt) {
 848:bluetooth_rxtx.c **** 		T0IR = TIR_MR1_Interrupt;
 849:bluetooth_rxtx.c **** 		//T1MCR &= ~TMCR_MR1I;
 850:bluetooth_rxtx.c **** 		do_transmit = 1;
 851:bluetooth_rxtx.c **** 		timer2_clear_match();
 852:bluetooth_rxtx.c **** 		timer2_set_match(le.conn_interval*USEC(1250));
 853:bluetooth_rxtx.c **** 	}
 854:bluetooth_rxtx.c **** }
 855:bluetooth_rxtx.c **** */
 856:bluetooth_rxtx.c **** /****************** Timer 1 declarations ***************************/
 857:bluetooth_rxtx.c **** 
 858:bluetooth_rxtx.c **** /* Update CLKN. */
 859:bluetooth_rxtx.c **** void TIMER0_IRQHandler()
 860:bluetooth_rxtx.c **** {
 861:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 862:bluetooth_rxtx.c **** 		//clkn += clkn_offset + 1;
 863:bluetooth_rxtx.c **** 		//clkn_offset = 0;
 864:bluetooth_rxtx.c **** 
 865:bluetooth_rxtx.c **** 		uint32_t le_clk = (clkn - le.conn_epoch) & 0x03;
 866:bluetooth_rxtx.c **** 
 867:bluetooth_rxtx.c **** 		/* Trigger hop based on mode */
 868:bluetooth_rxtx.c **** 
 869:bluetooth_rxtx.c **** 		/* NONE or SWEEP -> 25 Hz */
 870:bluetooth_rxtx.c **** 		if (hop_mode == HOP_NONE || hop_mode == HOP_SWEEP) {
 871:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 872:bluetooth_rxtx.c **** 				do_hop = 1;
 873:bluetooth_rxtx.c **** 		}
 874:bluetooth_rxtx.c **** 		/* BLUETOOTH -> 1600 Hz */
 875:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BLUETOOTH) {
 876:bluetooth_rxtx.c **** 			if ((clkn & 0x1) == 0)
 877:bluetooth_rxtx.c **** 				do_hop = 1;
 878:bluetooth_rxtx.c **** 		}
 879:bluetooth_rxtx.c **** 		/* BLUETOOTH Low Energy -> 7.5ms - 4.0s in multiples of 1.25 ms */
 880:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BTLE) {
 881:bluetooth_rxtx.c **** 			// Only hop if connected
 882:bluetooth_rxtx.c **** 			if (le.link_state == LINK_CONNECTED && le_clk == 0) {
 883:bluetooth_rxtx.c **** 				--le.interval_timer;
 884:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 885:bluetooth_rxtx.c **** 					do_hop = 1;
 886:bluetooth_rxtx.c **** 					++le.conn_count;
 887:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 888:bluetooth_rxtx.c **** 				} else {
 889:bluetooth_rxtx.c **** 					TXLED_CLR; // hack!
ARM GAS  /tmp/ccyBazZt.s 			page 17


 890:bluetooth_rxtx.c **** 				}
 891:bluetooth_rxtx.c **** 			}
 892:bluetooth_rxtx.c **** 		}
 893:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_TRANSMIT_LE) {
 894:bluetooth_rxtx.c **** 			//debug_printf("I 1\n");
 895:bluetooth_rxtx.c **** 			// Only hop if connected
 896:bluetooth_rxtx.c **** 			if(le_clk == 0){
 897:bluetooth_rxtx.c **** 				--le.interval_timer;
 898:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 899:bluetooth_rxtx.c **** 					do_hop = 1;
 900:bluetooth_rxtx.c **** 					++le.conn_count;
 901:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 902:bluetooth_rxtx.c **** 				} else {
 903:bluetooth_rxtx.c **** 					TXLED_CLR; // hack!
 904:bluetooth_rxtx.c **** 				}
 905:bluetooth_rxtx.c **** 			}
 906:bluetooth_rxtx.c **** 		}
 907:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_TRANSMIT_LE2 && anchor_set == 1) {
 908:bluetooth_rxtx.c **** 			u32 now = CLK100NS;
 909:bluetooth_rxtx.c **** 			do_transmit = 1;
 910:bluetooth_rxtx.c **** 			timer2_clear_match();
 911:bluetooth_rxtx.c **** 			timer2_set_match(now + le.conn_interval*USEC(1250) - window_shift -USEC(15));
 912:bluetooth_rxtx.c **** 			//debug_printf("do_transmit = %d\n",do_transmit);
 913:bluetooth_rxtx.c **** 		}
 914:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_AFH) {
 915:bluetooth_rxtx.c **** 			if( (last_hop + hop_timeout) == clkn ) {
 916:bluetooth_rxtx.c **** 				do_hop = 1;
 917:bluetooth_rxtx.c **** 			}
 918:bluetooth_rxtx.c **** 	}
 919:bluetooth_rxtx.c **** /*
 920:bluetooth_rxtx.c **** 		// Fix linear clock drift deviation
 921:bluetooth_rxtx.c **** 		if(clkn_next_drift_fix != 0 && clk100ns_offset == 0) {
 922:bluetooth_rxtx.c **** 			if(clkn >= clkn_next_drift_fix) {
 923:bluetooth_rxtx.c **** 
 924:bluetooth_rxtx.c **** 				// Too fast
 925:bluetooth_rxtx.c **** 				if(clk_drift_ppm >= 0) {
 926:bluetooth_rxtx.c **** 					clk100ns_offset = 1;
 927:bluetooth_rxtx.c **** 				}
 928:bluetooth_rxtx.c **** 
 929:bluetooth_rxtx.c **** 				// Too slow
 930:bluetooth_rxtx.c **** 				else {
 931:bluetooth_rxtx.c **** 					clk100ns_offset = 6249;
 932:bluetooth_rxtx.c **** 				}
 933:bluetooth_rxtx.c **** 				clkn_last_drift_fix = clkn;
 934:bluetooth_rxtx.c **** 				clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 935:bluetooth_rxtx.c **** 			}
 936:bluetooth_rxtx.c **** 		}
 937:bluetooth_rxtx.c **** 
 938:bluetooth_rxtx.c **** 		// Negative clock correction
 939:bluetooth_rxtx.c **** 		if(clk100ns_offset > 3124)
 940:bluetooth_rxtx.c **** 			clkn += 2;
 941:bluetooth_rxtx.c **** 		
 942:bluetooth_rxtx.c **** 		clk100ns_offset = 0;
 943:bluetooth_rxtx.c **** */
 944:bluetooth_rxtx.c **** 		/* Ack interrupt */
 945:bluetooth_rxtx.c **** 		T0IR = TIR_MR0_Interrupt;
 946:bluetooth_rxtx.c **** 	}
ARM GAS  /tmp/ccyBazZt.s 			page 18


 947:bluetooth_rxtx.c **** /*
 948:bluetooth_rxtx.c **** 	// MR1: connection events
 949:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR1_Interrupt) {
 950:bluetooth_rxtx.c **** 		//debug_printf("I 2\n");
 951:bluetooth_rxtx.c **** 		T0IR = TIR_MR1_Interrupt;
 952:bluetooth_rxtx.c **** 		do_transmit = 1;
 953:bluetooth_rxtx.c **** 		//timer2_clear_match();
 954:bluetooth_rxtx.c **** 		timer2_set_match(le.conn_interval*USEC(1250));
 955:bluetooth_rxtx.c **** 	}
 956:bluetooth_rxtx.c **** */
 957:bluetooth_rxtx.c **** }
 958:bluetooth_rxtx.c **** 
 959:bluetooth_rxtx.c **** /* EINT3 handler is also defined in ubertooth.c for TC13BADGE. */
 960:bluetooth_rxtx.c **** #ifndef TC13BADGE
 961:bluetooth_rxtx.c **** void EINT3_IRQHandler()
 962:bluetooth_rxtx.c **** {
 963:bluetooth_rxtx.c **** 	/* TODO - check specific source of shared interrupt */
 964:bluetooth_rxtx.c **** 	IO2IntClr   = PIN_GIO6; // clear interrupt
 965:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;           // enable SPI
 966:bluetooth_rxtx.c **** 	cs_trigger  = 1;        // signal trigger
 967:bluetooth_rxtx.c **** 	if (hop_mode == HOP_BLUETOOTH)
 968:bluetooth_rxtx.c **** 		dma_discard = 0;
 969:bluetooth_rxtx.c **** 
 970:bluetooth_rxtx.c **** }
 971:bluetooth_rxtx.c **** #endif // TC13BADGE
 972:bluetooth_rxtx.c **** 
 973:bluetooth_rxtx.c **** /*
 974:bluetooth_rxtx.c ****  * Sleep (busy wait) for 'millis' milliseconds
 975:bluetooth_rxtx.c ****  * Needs clkn. Be sure to call clkn_init() before using it.
 976:bluetooth_rxtx.c ****  */
 977:bluetooth_rxtx.c **** static void msleep(uint32_t millis)
 978:bluetooth_rxtx.c **** {
 979:bluetooth_rxtx.c **** 	uint32_t now = (clkn & 0xffffff);
 980:bluetooth_rxtx.c **** 	uint32_t stop_at = now + millis * 10000 / 3125; // millis -> clkn ticks
 981:bluetooth_rxtx.c **** 
 982:bluetooth_rxtx.c **** 	// handle clkn overflow
 983:bluetooth_rxtx.c **** 	if (stop_at >= ((uint32_t)1<<28)) {
 984:bluetooth_rxtx.c **** 		stop_at -= ((uint32_t)1<<28);
 985:bluetooth_rxtx.c **** 		while ((clkn & 0xffffff) >= now || (clkn & 0xffffff) < stop_at);
 986:bluetooth_rxtx.c **** 	} else {
 987:bluetooth_rxtx.c **** 		while ((clkn & 0xffffff) < stop_at);
 988:bluetooth_rxtx.c **** 	}
 989:bluetooth_rxtx.c **** }
 990:bluetooth_rxtx.c **** 
 991:bluetooth_rxtx.c **** void legacy_DMA_IRQHandler();
 992:bluetooth_rxtx.c **** void le_DMA_IRQHandler();
 993:bluetooth_rxtx.c **** void DMA_IRQHandler(void) {
 994:bluetooth_rxtx.c **** 	if (mode == MODE_BT_FOLLOW_LE)
 995:bluetooth_rxtx.c **** 		le_DMA_IRQHandler();
 996:bluetooth_rxtx.c **** 	else
 997:bluetooth_rxtx.c **** 		legacy_DMA_IRQHandler();
 998:bluetooth_rxtx.c **** 
 999:bluetooth_rxtx.c **** 	// DMA channel 7: debug UART
1000:bluetooth_rxtx.c **** 	if (DMACIntStat & (1 << 7)) {
1001:bluetooth_rxtx.c **** 		// TC -- DMA completed, unset flag so another printf can occur
1002:bluetooth_rxtx.c **** 		if (DMACIntTCStat & (1 << 7)) {
1003:bluetooth_rxtx.c **** 			DMACIntTCClear = (1 << 7);
ARM GAS  /tmp/ccyBazZt.s 			page 19


1004:bluetooth_rxtx.c **** 			debug_dma_active = 0;
1005:bluetooth_rxtx.c **** 		}
1006:bluetooth_rxtx.c **** 		// error -- blow up
1007:bluetooth_rxtx.c **** 		if (DMACIntErrStat & (1 << 7)) {
1008:bluetooth_rxtx.c **** 			DMACIntErrClr = (1 << 7);
1009:bluetooth_rxtx.c **** 			// FIXME do something better here
1010:bluetooth_rxtx.c **** 			USRLED_SET;
1011:bluetooth_rxtx.c **** 			while (1) { }
1012:bluetooth_rxtx.c **** 		}
1013:bluetooth_rxtx.c **** 	}
1014:bluetooth_rxtx.c **** }
1015:bluetooth_rxtx.c **** 
1016:bluetooth_rxtx.c **** void legacy_DMA_IRQHandler()
1017:bluetooth_rxtx.c **** {
1018:bluetooth_rxtx.c **** 
1019:bluetooth_rxtx.c **** 	if ( mode == MODE_RX_SYMBOLS
1020:bluetooth_rxtx.c **** 	   || mode == MODE_BT_FOLLOW
1021:bluetooth_rxtx.c **** 	   || mode == MODE_SPECAN
1022:bluetooth_rxtx.c **** 	   || mode == MODE_BT_FOLLOW_LE
1023:bluetooth_rxtx.c **** 	   || mode == MODE_BT_PROMISC_LE
1024:bluetooth_rxtx.c **** 	   || mode == MODE_BT_TRANSMIT_LE
1025:bluetooth_rxtx.c **** 	   || mode == MODE_BT_SLAVE_LE
1026:bluetooth_rxtx.c **** 	   || mode == MODE_RX_GENERIC)
1027:bluetooth_rxtx.c **** 	{
1028:bluetooth_rxtx.c **** 		/* interrupt on channel 0 */
1029:bluetooth_rxtx.c **** 		if (DMACIntStat & (1 << 0)) {
1030:bluetooth_rxtx.c **** 			if (DMACIntTCStat & (1 << 0)) {
1031:bluetooth_rxtx.c **** 				DMACIntTCClear = (1 << 0);
1032:bluetooth_rxtx.c **** 
1033:bluetooth_rxtx.c **** 				if (hop_mode == HOP_BLUETOOTH)
1034:bluetooth_rxtx.c **** 					DIO_SSEL_SET;
1035:bluetooth_rxtx.c **** 
1036:bluetooth_rxtx.c **** 				idle_buf_clk100ns  = CLK100NS;
1037:bluetooth_rxtx.c **** 				idle_buf_clkn_high = (clkn >> 20) & 0xff;
1038:bluetooth_rxtx.c **** 				idle_buf_channel   = channel;
1039:bluetooth_rxtx.c **** 
1040:bluetooth_rxtx.c **** 				/* Keep buffer swapping in sync with DMA. */
1041:bluetooth_rxtx.c **** 				volatile uint8_t* tmp = active_rxbuf;
1042:bluetooth_rxtx.c **** 				active_rxbuf = idle_rxbuf;
1043:bluetooth_rxtx.c **** 				idle_rxbuf = tmp;
1044:bluetooth_rxtx.c **** 
1045:bluetooth_rxtx.c **** 				++rx_tc;
1046:bluetooth_rxtx.c **** 			}
1047:bluetooth_rxtx.c **** 			if (DMACIntErrStat & (1 << 0)) {
1048:bluetooth_rxtx.c **** 				DMACIntErrClr = (1 << 0);
1049:bluetooth_rxtx.c **** 				++rx_err;
1050:bluetooth_rxtx.c **** 			}
1051:bluetooth_rxtx.c **** 		}
1052:bluetooth_rxtx.c **** 	}
1053:bluetooth_rxtx.c **** }
1054:bluetooth_rxtx.c **** 
1055:bluetooth_rxtx.c **** static void cc2400_idle()
1056:bluetooth_rxtx.c **** {
1057:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
1058:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
1059:bluetooth_rxtx.c **** 
1060:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
ARM GAS  /tmp/ccyBazZt.s 			page 20


1061:bluetooth_rxtx.c **** 	PAEN_CLR;
1062:bluetooth_rxtx.c **** 	HGM_CLR;
1063:bluetooth_rxtx.c **** #endif
1064:bluetooth_rxtx.c **** 
1065:bluetooth_rxtx.c **** 	RXLED_CLR;
1066:bluetooth_rxtx.c **** 	TXLED_CLR;
1067:bluetooth_rxtx.c **** 	USRLED_CLR;
1068:bluetooth_rxtx.c **** 
1069:bluetooth_rxtx.c **** 	clkn_stop();
1070:bluetooth_rxtx.c **** 	dio_ssp_stop();
1071:bluetooth_rxtx.c **** 	cs_reset();
1072:bluetooth_rxtx.c **** 	rssi_reset();
1073:bluetooth_rxtx.c **** 
1074:bluetooth_rxtx.c **** 	/* hopping stuff */
1075:bluetooth_rxtx.c **** 	hop_mode = HOP_NONE;
1076:bluetooth_rxtx.c **** 	do_hop = 0;
1077:bluetooth_rxtx.c **** 	channel = 2441;
1078:bluetooth_rxtx.c **** 	hop_direct_channel = 0;
1079:bluetooth_rxtx.c **** 	hop_timeout = 158;
1080:bluetooth_rxtx.c **** 	requested_channel = 0;
1081:bluetooth_rxtx.c **** 	le_adv_channel = 2402;
1082:bluetooth_rxtx.c **** 
1083:bluetooth_rxtx.c **** 
1084:bluetooth_rxtx.c **** 	/* bulk USB stuff */
1085:bluetooth_rxtx.c **** 	idle_buf_clkn_high = 0;
1086:bluetooth_rxtx.c **** 	idle_buf_clk100ns = 0;
1087:bluetooth_rxtx.c **** 	idle_buf_channel = 0;
1088:bluetooth_rxtx.c **** 	dma_discard = 0;
1089:bluetooth_rxtx.c **** 	status = 0;
1090:bluetooth_rxtx.c **** 
1091:bluetooth_rxtx.c **** 	/* operation mode */
1092:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
1093:bluetooth_rxtx.c **** 	requested_mode = MODE_IDLE;
1094:bluetooth_rxtx.c **** 	jam_mode = JAM_NONE;
1095:bluetooth_rxtx.c **** 	ego_mode = EGO_FOLLOW;
1096:bluetooth_rxtx.c **** 
1097:bluetooth_rxtx.c **** 	modulation = MOD_BT_BASIC_RATE;
1098:bluetooth_rxtx.c **** 
1099:bluetooth_rxtx.c **** 	/* specan stuff */
1100:bluetooth_rxtx.c **** 	low_freq = 2400;
1101:bluetooth_rxtx.c **** 	high_freq = 2483;
1102:bluetooth_rxtx.c **** 	rssi_threshold = -30;
1103:bluetooth_rxtx.c **** 
1104:bluetooth_rxtx.c **** 	target.address = 0;
1105:bluetooth_rxtx.c **** 	target.syncword = 0;
1106:bluetooth_rxtx.c **** }
1107:bluetooth_rxtx.c **** 
1108:bluetooth_rxtx.c **** /* start un-buffered rx */
1109:bluetooth_rxtx.c **** static void cc2400_rx()
1110:bluetooth_rxtx.c **** {
1111:bluetooth_rxtx.c **** 	u16 mdmctrl = 0;
1112:bluetooth_rxtx.c **** 
1113:bluetooth_rxtx.c **** 	if((modulation == MOD_BT_BASIC_RATE) || (modulation == MOD_BT_LOW_ENERGY)) {
1114:bluetooth_rxtx.c **** 		if (modulation == MOD_BT_BASIC_RATE) {
1115:bluetooth_rxtx.c **** 			mdmctrl = 0x0029; // 160 kHz frequency deviation
1116:bluetooth_rxtx.c **** 		} else if (modulation == MOD_BT_LOW_ENERGY) {
1117:bluetooth_rxtx.c **** 			mdmctrl = 0x0040; // 250 kHz frequency deviation
ARM GAS  /tmp/ccyBazZt.s 			page 21


1118:bluetooth_rxtx.c **** 		}
1119:bluetooth_rxtx.c **** 		cc2400_set(MANAND,  0x7fff);
1120:bluetooth_rxtx.c **** 		cc2400_set(LMTST,   0x2b22);
1121:bluetooth_rxtx.c **** 		cc2400_set(MDMTST0, 0x134b); // without PRNG
1122:bluetooth_rxtx.c **** 		cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
1123:bluetooth_rxtx.c **** 		// 0 00 00 0 010 00 0 00 0 1
1124:bluetooth_rxtx.c **** 		//      |  | |   |  +--------> CRC off
1125:bluetooth_rxtx.c **** 		//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1126:bluetooth_rxtx.c **** 		//      |  | +---------------> 2 preamble bytes of 01010101
1127:bluetooth_rxtx.c **** 		//      |  +-----------------> not packet mode
1128:bluetooth_rxtx.c **** 			//      +--------------------> un-buffered mode
1129:bluetooth_rxtx.c **** 		cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
1130:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, mdmctrl);
1131:bluetooth_rxtx.c **** 	}
1132:bluetooth_rxtx.c **** 
1133:bluetooth_rxtx.c **** 	// Set up CS register
1134:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set(channel);
1135:bluetooth_rxtx.c **** 
1136:bluetooth_rxtx.c **** 	clkn_start();
1137:bluetooth_rxtx.c **** 
1138:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
1139:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
1140:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
1141:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
1142:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1143:bluetooth_rxtx.c **** 	PAEN_SET;
1144:bluetooth_rxtx.c **** 	HGM_SET;
1145:bluetooth_rxtx.c **** #endif
1146:bluetooth_rxtx.c **** }
1147:bluetooth_rxtx.c **** 
1148:bluetooth_rxtx.c **** /* start un-buffered rx */
1149:bluetooth_rxtx.c **** static void cc2400_rx_sync(u32 sync)
1150:bluetooth_rxtx.c **** {
1151:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
1152:bluetooth_rxtx.c **** 
1153:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
1154:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
1155:bluetooth_rxtx.c **** 		grmdm = 0x0461; // un-buffered mode, packet w/ sync word detection
1156:bluetooth_rxtx.c **** 		// 0 00 00 1 000 11 0 00 0 1
1157:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1158:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1159:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 0 preamble bytes of 01010101
1160:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1161:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1162:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1163:bluetooth_rxtx.c **** 
1164:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
1165:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
1166:bluetooth_rxtx.c **** 		grmdm = 0x0561; // un-buffered mode, packet w/ sync word detection
1167:bluetooth_rxtx.c **** 		// 0 00 00 1 010 11 0 00 0 1
1168:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1169:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1170:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 2 preamble bytes of 01010101
1171:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1172:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1173:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1174:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccyBazZt.s 			page 22


1175:bluetooth_rxtx.c **** 	} else {
1176:bluetooth_rxtx.c **** 		/* oops */
1177:bluetooth_rxtx.c **** 		return;
1178:bluetooth_rxtx.c **** 	}
1179:bluetooth_rxtx.c **** 
1180:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
1181:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
1182:bluetooth_rxtx.c **** 
1183:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b);
1184:bluetooth_rxtx.c **** 	// 1      2      4b
1185:bluetooth_rxtx.c **** 	// 00 0 1 0 0 10 01001011
1186:bluetooth_rxtx.c **** 	//    | | | | |  +---------> AFC_DELTA = ??
1187:bluetooth_rxtx.c **** 	//    | | | | +------------> AFC settling = 4 pairs (8 bit preamble)
1188:bluetooth_rxtx.c **** 	//    | | | +--------------> no AFC adjust on packet
1189:bluetooth_rxtx.c **** 	//    | | +----------------> do not invert data
1190:bluetooth_rxtx.c **** 	//    | +------------------> TX IF freq 1 0Hz
1191:bluetooth_rxtx.c **** 	//    +--------------------> PRNG off
1192:bluetooth_rxtx.c **** 	//
1193:bluetooth_rxtx.c **** 	// ref: CC2400 datasheet page 67
1194:bluetooth_rxtx.c **** 	// AFC settling explained page 41/42
1195:bluetooth_rxtx.c **** 
1196:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   grmdm);
1197:bluetooth_rxtx.c **** 
1198:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
1199:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
1200:bluetooth_rxtx.c **** 
1201:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
1202:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
1203:bluetooth_rxtx.c **** 
1204:bluetooth_rxtx.c **** 	// Set up CS register
1205:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set(channel);
1206:bluetooth_rxtx.c **** 
1207:bluetooth_rxtx.c **** 	clkn_start();
1208:bluetooth_rxtx.c **** 
1209:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
1210:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
1211:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
1212:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
1213:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1214:bluetooth_rxtx.c **** 	PAEN_SET;
1215:bluetooth_rxtx.c **** 	HGM_SET;
1216:bluetooth_rxtx.c **** #endif
1217:bluetooth_rxtx.c **** }
1218:bluetooth_rxtx.c **** 
1219:bluetooth_rxtx.c **** /* start buffered tx */
1220:bluetooth_rxtx.c **** static void cc2400_tx_sync(uint32_t sync)
1221:bluetooth_rxtx.c **** {
1222:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1223:bluetooth_rxtx.c **** 	// Bluetooth-like modulation
1224:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
1225:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
1226:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
1227:bluetooth_rxtx.c **** 
1228:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
1229:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1230:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1231:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
ARM GAS  /tmp/ccyBazZt.s 			page 23


1232:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1233:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1234:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1235:bluetooth_rxtx.c **** 
1236:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
1237:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
1238:bluetooth_rxtx.c **** 
1239:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel);
1240:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
1241:bluetooth_rxtx.c **** 
1242:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
1243:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0029);    // 160 kHz frequency deviation
1244:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
1245:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
1246:bluetooth_rxtx.c **** 	} else {
1247:bluetooth_rxtx.c **** 		/* oops */
1248:bluetooth_rxtx.c **** 		return;
1249:bluetooth_rxtx.c **** 	}
1250:bluetooth_rxtx.c **** 
1251:bluetooth_rxtx.c **** 	clkn_start();
1252:bluetooth_rxtx.c **** 
1253:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
1254:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
1255:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
1256:bluetooth_rxtx.c **** 
1257:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1258:bluetooth_rxtx.c **** 	PAEN_SET;
1259:bluetooth_rxtx.c **** #endif
1260:bluetooth_rxtx.c **** 
1261:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1262:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
1263:bluetooth_rxtx.c **** 
1264:bluetooth_rxtx.c **** #endif
1265:bluetooth_rxtx.c **** }
1266:bluetooth_rxtx.c **** 
1267:bluetooth_rxtx.c **** /*
1268:bluetooth_rxtx.c ****  * Transmit a BTLE packet with the specified access address.
1269:bluetooth_rxtx.c ****  *
1270:bluetooth_rxtx.c ****  * All modulation parameters are set within this function. The data
1271:bluetooth_rxtx.c ****  * should not be pre-whitened, but the CRC should be calculated and
1272:bluetooth_rxtx.c ****  * included in the data length.
1273:bluetooth_rxtx.c ****  *
1274:bluetooth_rxtx.c ****  * FIXME: Total packet len must be <= 32 bytes for Reasons. Longer
1275:bluetooth_rxtx.c ****  * packets will be quietly truncated.
1276:bluetooth_rxtx.c ****  */
1277:bluetooth_rxtx.c **** void le_transmit(u32 aa, u8 len, u8 *data)
1278:bluetooth_rxtx.c **** {
1279:bluetooth_rxtx.c **** 	unsigned i, j;
1280:bluetooth_rxtx.c **** 	int bit;
1281:bluetooth_rxtx.c **** 	u8 txbuf[40];//32
1282:bluetooth_rxtx.c **** 	u8 byte;
1283:bluetooth_rxtx.c **** 	uint32_t sync = rbit(aa);
1284:bluetooth_rxtx.c **** 
1285:bluetooth_rxtx.c **** 	// lol
1286:bluetooth_rxtx.c **** 	if (len > 40)//32
1287:bluetooth_rxtx.c **** 		len = 40;//32
1288:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccyBazZt.s 			page 24


1289:bluetooth_rxtx.c **** 	// whiten the data and copy it into the txbuf
1290:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel)];
1291:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
1292:bluetooth_rxtx.c **** 		byte = data[i];
1293:bluetooth_rxtx.c **** 		txbuf[i] = 0;
1294:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
1295:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
1296:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
1297:bluetooth_rxtx.c **** 			byte >>= 1;
1298:bluetooth_rxtx.c **** 			txbuf[i] |= bit << (7 - j);
1299:bluetooth_rxtx.c **** 		}
1300:bluetooth_rxtx.c **** 	}
1301:bluetooth_rxtx.c **** 
1302:bluetooth_rxtx.c **** 	// Bluetooth-like modulation
1303:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
1304:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
1305:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
1306:bluetooth_rxtx.c **** 
1307:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0ce1);
1308:bluetooth_rxtx.c **** 	// 0 00 01 1 001 11 0 00 0 1
1309:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1310:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: all 32 bits of SYNC_WORD
1311:bluetooth_rxtx.c **** 	//      |  | +---------------> 1 preamble byte of 01010101
1312:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1313:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1314:bluetooth_rxtx.c **** 
1315:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel);
1316:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
1317:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
1318:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0014);    // FIFO_THRESHOLD: 20 bytes
1319:bluetooth_rxtx.c **** 
1320:bluetooth_rxtx.c **** 	// set sync word to bit-reversed AA
1321:bluetooth_rxtx.c **** 
1322:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
1323:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
1324:bluetooth_rxtx.c **** 
1325:bluetooth_rxtx.c **** 	// turn on the radio
1326:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
1327:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
1328:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
1329:bluetooth_rxtx.c **** 	TXLED_SET;
1330:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1331:bluetooth_rxtx.c **** 	PAEN_SET;
1332:bluetooth_rxtx.c **** #endif
1333:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1334:bluetooth_rxtx.c **** 
1335:bluetooth_rxtx.c **** 	// copy the packet to the FIFO and strobe STX
1336:bluetooth_rxtx.c **** 	cc2400_fifo_write(len, txbuf);
1337:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
1338:bluetooth_rxtx.c **** 
1339:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1340:bluetooth_rxtx.c **** 	TXLED_CLR;
1341:bluetooth_rxtx.c **** 
1342:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
1343:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
1344:bluetooth_rxtx.c **** 
1345:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
ARM GAS  /tmp/ccyBazZt.s 			page 25


1346:bluetooth_rxtx.c **** 	PAEN_CLR;
1347:bluetooth_rxtx.c **** #endif
1348:bluetooth_rxtx.c **** }
1349:bluetooth_rxtx.c **** 
1350:bluetooth_rxtx.c **** void le_jam(void) {
1351:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1352:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
1353:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
1354:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x234b);    // PRNG, 1 MHz offset
1355:bluetooth_rxtx.c **** 
1356:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
1357:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1358:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1359:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1360:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1361:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1362:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1363:bluetooth_rxtx.c **** 
1364:bluetooth_rxtx.c **** 	// cc2400_set(FSDIV,   channel);
1365:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
1366:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
1367:bluetooth_rxtx.c **** 
1368:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
1369:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
1370:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
1371:bluetooth_rxtx.c **** 	TXLED_SET;
1372:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1373:bluetooth_rxtx.c **** 	PAEN_SET;
1374:bluetooth_rxtx.c **** #endif
1375:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1376:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
1377:bluetooth_rxtx.c **** #endif
1378:bluetooth_rxtx.c **** }
1379:bluetooth_rxtx.c **** 
1380:bluetooth_rxtx.c **** /* TODO - return whether hop happened, or should caller have to keep
1381:bluetooth_rxtx.c ****  * track of this? */
1382:bluetooth_rxtx.c **** 
1383:bluetooth_rxtx.c **** void hop(void)
1384:bluetooth_rxtx.c **** {   
1385:bluetooth_rxtx.c ****     //static count = 0;
1386:bluetooth_rxtx.c **** 	do_hop = 0;
1387:bluetooth_rxtx.c **** 	last_hop = clkn;
1388:bluetooth_rxtx.c **** 
1389:bluetooth_rxtx.c **** 	// No hopping, if channel is set correctly, do nothing
1390:bluetooth_rxtx.c **** 	if (hop_mode == HOP_NONE) {
1391:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
1392:bluetooth_rxtx.c **** 			return;
1393:bluetooth_rxtx.c **** 	}
1394:bluetooth_rxtx.c **** 	/* Slow sweep (100 hops/sec)
1395:bluetooth_rxtx.c **** 	 * only hop to currently used channels if AFH is enabled
1396:bluetooth_rxtx.c **** 	 */
1397:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_SWEEP) {
1398:bluetooth_rxtx.c **** 		do {
1399:bluetooth_rxtx.c **** 			channel += 32;
1400:bluetooth_rxtx.c **** 			if (channel > 2480)
1401:bluetooth_rxtx.c **** 				channel -= 79;
1402:bluetooth_rxtx.c **** 		} while ( used_channels != 0 && afh_enabled && !( afh_map[(channel-2402)/8] & 0x1<<((channel-2402
ARM GAS  /tmp/ccyBazZt.s 			page 26


1403:bluetooth_rxtx.c **** 	}
1404:bluetooth_rxtx.c **** 	/* AFH detection
1405:bluetooth_rxtx.c **** 	 * only hop to currently unused channesl
1406:bluetooth_rxtx.c **** 	 */
1407:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_AFH) {
1408:bluetooth_rxtx.c **** 		do {
1409:bluetooth_rxtx.c **** 			channel += 32;
1410:bluetooth_rxtx.c **** 			if (channel > 2480)
1411:bluetooth_rxtx.c **** 				channel -= 79;
1412:bluetooth_rxtx.c **** 		} while( used_channels != 79 && (afh_map[(channel-2402)/8] & 0x1<<((channel-2402)%8)) );
1413:bluetooth_rxtx.c **** 	}
1414:bluetooth_rxtx.c **** 
1415:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BLUETOOTH) {
1416:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
1417:bluetooth_rxtx.c **** 	}
1418:bluetooth_rxtx.c **** 	//Sopan Sarkar
1419:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_TRANSMIT_LE || hop_mode == HOP_TRANSMIT_LE2){
1420:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
1421:bluetooth_rxtx.c **** 		//do_transmit = 1;
1422:bluetooth_rxtx.c **** 		//debug_printf("channel: %d,	%d\n", channel,CLK100NS);
1423:bluetooth_rxtx.c **** 	}
1424:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BTLE) {
1425:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
1426:bluetooth_rxtx.c **** 		//debug_printf("channel: %d,	%d\n", channel,CLK100NS);
1427:bluetooth_rxtx.c ****         //u8 index = btle_channel_index(channel);
1428:bluetooth_rxtx.c **** /*
1429:bluetooth_rxtx.c ****         if(mapped == 1){
1430:bluetooth_rxtx.c ****             if(ch_map_hopped[index] != 1){
1431:bluetooth_rxtx.c ****                 u8 index2 = index % total_channel;
1432:bluetooth_rxtx.c ****                 channel = remapped_ch[index2];
1433:bluetooth_rxtx.c **** 				remapped = 1;
1434:bluetooth_rxtx.c ****             }
1435:bluetooth_rxtx.c **** 			else {
1436:bluetooth_rxtx.c **** 				remapped = 0;		
1437:bluetooth_rxtx.c **** 			}
1438:bluetooth_rxtx.c ****             hopping_channel++; 
1439:bluetooth_rxtx.c **** ///////////////////////////////////////////////// added
1440:bluetooth_rxtx.c **** 			if(channel_hopped > 0){
1441:bluetooth_rxtx.c **** 			    if(abs(hopping_channel - channel_hopped) > 3 && remapped == 0){
1442:bluetooth_rxtx.c **** 			        debug_printf("recalculating ch map %d\n",abs(hopping_channel - channel_hopped));
1443:bluetooth_rxtx.c **** 			        mapped = 0;
1444:bluetooth_rxtx.c **** 			        ch_count1 = 0;
1445:bluetooth_rxtx.c **** 			        total_channel = 0;
1446:bluetooth_rxtx.c **** 			        hopping_channel = 0;
1447:bluetooth_rxtx.c **** 			        channel_hopped = 0;
1448:bluetooth_rxtx.c **** 			        do_count = 1;
1449:bluetooth_rxtx.c **** 			        memset(ch_map_hopped, 0, sizeof ch_map_hopped);
1450:bluetooth_rxtx.c **** 			    }
1451:bluetooth_rxtx.c **** 			    hopping_channel = 0;
1452:bluetooth_rxtx.c **** 			    channel_hopped = 0;
1453:bluetooth_rxtx.c **** 			}
1454:bluetooth_rxtx.c **** ////////////////////////////////////////////////// added
1455:bluetooth_rxtx.c ****             if(hopping_channel> 37){
1456:bluetooth_rxtx.c ****                hopping_channel = 0;
1457:bluetooth_rxtx.c ****                channel_hopped = 0;             
1458:bluetooth_rxtx.c ****             }    */ 
1459:bluetooth_rxtx.c ****         //}
ARM GAS  /tmp/ccyBazZt.s 			page 27


1460:bluetooth_rxtx.c ****         // debug_printf("Channel: %d Mapped: %d\n", btle_channel_index(channel), mapped);
1461:bluetooth_rxtx.c ****         /*HOP_BTLE
1462:bluetooth_rxtx.c ****         else if(mapped == 2){
1463:bluetooth_rxtx.c ****             index = le_map_channel(index, &remapping);
1464:bluetooth_rxtx.c ****             channel = btle_channel_index_to_phys(index);  
1465:bluetooth_rxtx.c ****         }*/
1466:bluetooth_rxtx.c **** 	}
1467:bluetooth_rxtx.c **** 
1468:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_DIRECT) {
1469:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
1470:bluetooth_rxtx.c **** 	}
1471:bluetooth_rxtx.c **** 	/* IDLE mode, but leave amp on, so don't call cc2400_idle(). */
1472:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
1473:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
1474:bluetooth_rxtx.c **** 
1475:bluetooth_rxtx.c **** 	/* Retune */
1476:bluetooth_rxtx.c **** 	if(mode == MODE_TX_SYMBOLS)
1477:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channel);
1478:bluetooth_rxtx.c **** 	else
1479:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channel - 1);
1480:bluetooth_rxtx.c **** 
1481:bluetooth_rxtx.c **** 	/* Update CS register if hopping.  */
1482:bluetooth_rxtx.c **** 	if (hop_mode > 0) {
1483:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
1484:bluetooth_rxtx.c **** 	}
1485:bluetooth_rxtx.c **** 
1486:bluetooth_rxtx.c **** 	/* Wait for lock */
1487:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
1488:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
1489:bluetooth_rxtx.c **** 
1490:bluetooth_rxtx.c **** 	dma_discard = 1;
1491:bluetooth_rxtx.c **** 
1492:bluetooth_rxtx.c **** 	if(mode == MODE_TX_SYMBOLS)
1493:bluetooth_rxtx.c **** 		cc2400_strobe(STX);
1494:bluetooth_rxtx.c **** 	else
1495:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
1496:bluetooth_rxtx.c **** }
1497:bluetooth_rxtx.c **** 
1498:bluetooth_rxtx.c **** /* Bluetooth packet monitoring */
1499:bluetooth_rxtx.c **** void bt_stream_rx()
1500:bluetooth_rxtx.c **** {
1501:bluetooth_rxtx.c **** 	int8_t rssi;
1502:bluetooth_rxtx.c **** 	int8_t rssi_at_trigger;
1503:bluetooth_rxtx.c **** 
1504:bluetooth_rxtx.c **** 	RXLED_CLR;
1505:bluetooth_rxtx.c **** 
1506:bluetooth_rxtx.c **** 	usb_queue_init();
1507:bluetooth_rxtx.c **** 	dio_ssp_init();
1508:bluetooth_rxtx.c **** 	dma_init_rx_symbols();
1509:bluetooth_rxtx.c **** 	dio_ssp_start();
1510:bluetooth_rxtx.c **** 
1511:bluetooth_rxtx.c **** 	cc2400_rx();
1512:bluetooth_rxtx.c **** 
1513:bluetooth_rxtx.c **** 	cs_trigger_enable();
1514:bluetooth_rxtx.c **** 
1515:bluetooth_rxtx.c **** 	while ( requested_mode == MODE_RX_SYMBOLS || requested_mode == MODE_BT_FOLLOW )
1516:bluetooth_rxtx.c **** 	{
ARM GAS  /tmp/ccyBazZt.s 			page 28


1517:bluetooth_rxtx.c **** 
1518:bluetooth_rxtx.c **** 		RXLED_CLR;
1519:bluetooth_rxtx.c **** 
1520:bluetooth_rxtx.c **** 		/* Wait for DMA transfer. TODO - need more work on
1521:bluetooth_rxtx.c **** 		 * RSSI. Should send RSSI indications to host even
1522:bluetooth_rxtx.c **** 		 * when not transferring data. That would also keep
1523:bluetooth_rxtx.c **** 		 * the USB stream going. This loop runs 50-80 times
1524:bluetooth_rxtx.c **** 		 * while waiting for DMA, but RSSI sampling does not
1525:bluetooth_rxtx.c **** 		 * cover all the symbols in a DMA transfer. Can not do
1526:bluetooth_rxtx.c **** 		 * RSSI sampling in CS interrupt, but could log time
1527:bluetooth_rxtx.c **** 		 * at multiple trigger points there. The MAX() below
1528:bluetooth_rxtx.c **** 		 * helps with statistics in the case that cs_trigger
1529:bluetooth_rxtx.c **** 		 * happened before the loop started. */
1530:bluetooth_rxtx.c **** 		rssi_reset();
1531:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
1532:bluetooth_rxtx.c **** 		while (!rx_tc) {
1533:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
1534:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
1535:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
1536:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
1537:bluetooth_rxtx.c **** 			}
1538:bluetooth_rxtx.c **** 			rssi_add(rssi);
1539:bluetooth_rxtx.c **** 
1540:bluetooth_rxtx.c **** 			handle_usb(clkn);
1541:bluetooth_rxtx.c **** 
1542:bluetooth_rxtx.c **** 			/* If timer says time to hop, do it. */
1543:bluetooth_rxtx.c **** 			if (do_hop) {
1544:bluetooth_rxtx.c **** 				hop();
1545:bluetooth_rxtx.c **** 			} else {
1546:bluetooth_rxtx.c **** 				TXLED_CLR;
1547:bluetooth_rxtx.c **** 			}
1548:bluetooth_rxtx.c **** 			/* TODO - set per-channel carrier sense threshold.
1549:bluetooth_rxtx.c **** 			 * Set by firmware or host. */
1550:bluetooth_rxtx.c **** 		}
1551:bluetooth_rxtx.c **** 
1552:bluetooth_rxtx.c **** 		RXLED_SET;
1553:bluetooth_rxtx.c **** 
1554:bluetooth_rxtx.c **** 		if (rx_err) {
1555:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
1556:bluetooth_rxtx.c **** 		}
1557:bluetooth_rxtx.c **** 
1558:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
1559:bluetooth_rxtx.c **** 		if (rx_tc > 1)
1560:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
1561:bluetooth_rxtx.c **** 
1562:bluetooth_rxtx.c **** 		if (dma_discard) {
1563:bluetooth_rxtx.c **** 			status |= DISCARD;
1564:bluetooth_rxtx.c **** 			dma_discard = 0;
1565:bluetooth_rxtx.c **** 		}
1566:bluetooth_rxtx.c **** 
1567:bluetooth_rxtx.c **** 		rssi_iir_update(channel);
1568:bluetooth_rxtx.c **** 
1569:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
1570:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
1571:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
1572:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
1573:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
ARM GAS  /tmp/ccyBazZt.s 			page 29


1574:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
1575:bluetooth_rxtx.c **** 			cs_trigger = 0;
1576:bluetooth_rxtx.c **** 		}
1577:bluetooth_rxtx.c **** 
1578:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
1579:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
1580:bluetooth_rxtx.c **** 		}
1581:bluetooth_rxtx.c **** 
1582:bluetooth_rxtx.c **** 		enqueue(BR_PACKET, (uint8_t*)idle_rxbuf);
1583:bluetooth_rxtx.c **** 
1584:bluetooth_rxtx.c **** 		handle_usb(clkn);
1585:bluetooth_rxtx.c **** 		rx_tc = 0;
1586:bluetooth_rxtx.c **** 		rx_err = 0;
1587:bluetooth_rxtx.c **** 	}
1588:bluetooth_rxtx.c **** 
1589:bluetooth_rxtx.c **** 	dio_ssp_stop();
1590:bluetooth_rxtx.c **** 	cs_trigger_disable();
1591:bluetooth_rxtx.c **** }
1592:bluetooth_rxtx.c **** 
1593:bluetooth_rxtx.c **** static uint8_t reverse8(uint8_t data)
1594:bluetooth_rxtx.c **** {
  25              		.loc 1 1594 0
  26              		.cfi_startproc
  27              		@ args = 0, pretend = 0, frame = 0
  28              		@ frame_needed = 0, uses_anonymous_args = 0
  29              	.LVL0:
  30 0000 10B5     		push	{r4, lr}
  31              		.cfi_def_cfa_offset 8
  32              		.cfi_offset 4, -8
  33              		.cfi_offset 14, -4
  34              	.LVL1:
  35              	.LBB25:
1595:bluetooth_rxtx.c **** 	uint8_t reversed = 0;
1596:bluetooth_rxtx.c **** 
1597:bluetooth_rxtx.c **** 	for(size_t i=0; i<8; i++)
  36              		.loc 1 1597 0
  37 0002 0023     		movs	r3, #0
  38              	.LBE25:
1595:bluetooth_rxtx.c **** 	uint8_t reversed = 0;
  39              		.loc 1 1595 0
  40 0004 1A46     		mov	r2, r3
  41              	.LVL2:
  42              	.L2:
  43              	.LBB26:
1598:bluetooth_rxtx.c **** 	{
1599:bluetooth_rxtx.c **** 		reversed |= ((data >> i) & 0x01) << (7-i);
  44              		.loc 1 1599 0 discriminator 3
  45 0006 40FA03F1 		asr	r1, r0, r3
  46 000a C3F10704 		rsb	r4, r3, #7
  47 000e 01F00101 		and	r1, r1, #1
  48 0012 A140     		lsls	r1, r1, r4
1597:bluetooth_rxtx.c **** 	{
  49              		.loc 1 1597 0 discriminator 3
  50 0014 0133     		adds	r3, r3, #1
  51              	.LVL3:
  52              		.loc 1 1599 0 discriminator 3
  53 0016 0A43     		orrs	r2, r2, r1
ARM GAS  /tmp/ccyBazZt.s 			page 30


  54              	.LVL4:
1597:bluetooth_rxtx.c **** 	{
  55              		.loc 1 1597 0 discriminator 3
  56 0018 082B     		cmp	r3, #8
  57              		.loc 1 1599 0 discriminator 3
  58 001a D2B2     		uxtb	r2, r2
  59              	.LVL5:
1597:bluetooth_rxtx.c **** 	{
  60              		.loc 1 1597 0 discriminator 3
  61 001c F3D1     		bne	.L2
  62              	.LBE26:
1600:bluetooth_rxtx.c **** 	}
1601:bluetooth_rxtx.c **** 	return reversed;
1602:bluetooth_rxtx.c **** }
  63              		.loc 1 1602 0
  64 001e 1046     		mov	r0, r2
  65              	.LVL6:
  66 0020 10BD     		pop	{r4, pc}
  67              		.cfi_endproc
  68              	.LFE18:
  70              		.section	.text.connection_follow_cb,"ax",%progbits
  71              		.align	1
  72              		.global	connection_follow_cb
  73              		.syntax unified
  74              		.thumb
  75              		.thumb_func
  76              		.fpu softvfp
  78              	connection_follow_cb:
  79              	.LFB28:
1603:bluetooth_rxtx.c **** 
1604:bluetooth_rxtx.c **** static uint16_t reverse16(uint16_t data)
1605:bluetooth_rxtx.c **** {
1606:bluetooth_rxtx.c **** 	uint16_t reversed = 0;
1607:bluetooth_rxtx.c **** 
1608:bluetooth_rxtx.c **** 	for(size_t i=0; i<16; i++)
1609:bluetooth_rxtx.c **** 	{
1610:bluetooth_rxtx.c **** 		reversed |= ((data >> i) & 0x01) << (15-i);
1611:bluetooth_rxtx.c **** 	}
1612:bluetooth_rxtx.c **** 
1613:bluetooth_rxtx.c **** 	return reversed;
1614:bluetooth_rxtx.c **** }
1615:bluetooth_rxtx.c **** 
1616:bluetooth_rxtx.c **** /*
1617:bluetooth_rxtx.c ****  * Transmit a BTBR packet with the specified access code.
1618:bluetooth_rxtx.c ****  *
1619:bluetooth_rxtx.c ****  * All modulation parameters are set within this function.
1620:bluetooth_rxtx.c ****  */
1621:bluetooth_rxtx.c **** void br_transmit()
1622:bluetooth_rxtx.c **** {
1623:bluetooth_rxtx.c **** 	uint16_t gio_save;
1624:bluetooth_rxtx.c **** 
1625:bluetooth_rxtx.c **** 	uint32_t clkn_saved = 0;
1626:bluetooth_rxtx.c **** 
1627:bluetooth_rxtx.c **** 	uint16_t preamble = (target.syncword & 1) == 1 ? 0x5555 : 0xaaaa;
1628:bluetooth_rxtx.c **** 	uint8_t trailer = ((target.syncword >> 63) & 1) == 1 ? 0xaa : 0x55;
1629:bluetooth_rxtx.c **** 
1630:bluetooth_rxtx.c **** 	uint8_t data[16] = {
ARM GAS  /tmp/ccyBazZt.s 			page 31


1631:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
1632:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 8) & 0xFF),
1633:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 16) & 0xFF),
1634:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 24) & 0xFF),
1635:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 32) & 0xFF),
1636:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 40) & 0xFF),
1637:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 48) & 0xFF),
1638:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 56) & 0xFF),
1639:bluetooth_rxtx.c **** 		reverse8(trailer),
1640:bluetooth_rxtx.c **** 		reverse8(0x77),
1641:bluetooth_rxtx.c **** 		reverse8(0x66),
1642:bluetooth_rxtx.c **** 		reverse8(0x55),
1643:bluetooth_rxtx.c **** 		reverse8(0x44),
1644:bluetooth_rxtx.c **** 		reverse8(0x33),
1645:bluetooth_rxtx.c **** 		reverse8(0x22),
1646:bluetooth_rxtx.c **** 		reverse8(0x11)
1647:bluetooth_rxtx.c **** 	};
1648:bluetooth_rxtx.c **** 
1649:bluetooth_rxtx.c **** 	cc2400_tx_sync(reverse16(preamble));
1650:bluetooth_rxtx.c **** 
1651:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0014);    // FIFO_THRESHOLD: 20 bytes
1652:bluetooth_rxtx.c **** 
1653:bluetooth_rxtx.c **** 	// set GIO to FIFO_FULL
1654:bluetooth_rxtx.c **** 	gio_save = cc2400_get(IOCFG);
1655:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
1656:bluetooth_rxtx.c **** 
1657:bluetooth_rxtx.c **** 	while ( requested_mode == MODE_TX_SYMBOLS )
1658:bluetooth_rxtx.c **** 	{
1659:bluetooth_rxtx.c **** 
1660:bluetooth_rxtx.c **** 		while ((clkn >> 1) == (clkn_saved >> 1) || T0TC < 2250) {
1661:bluetooth_rxtx.c **** 
1662:bluetooth_rxtx.c **** 			// If timer says time to hop, do it.
1663:bluetooth_rxtx.c **** 			if (do_hop) {
1664:bluetooth_rxtx.c **** 				hop();
1665:bluetooth_rxtx.c **** 			}
1666:bluetooth_rxtx.c **** 		}
1667:bluetooth_rxtx.c **** 
1668:bluetooth_rxtx.c **** 		clkn_saved = clkn;
1669:bluetooth_rxtx.c **** 
1670:bluetooth_rxtx.c **** 		TXLED_SET;
1671:bluetooth_rxtx.c **** 
1672:bluetooth_rxtx.c **** 		cc2400_fifo_write(16, data);
1673:bluetooth_rxtx.c **** 
1674:bluetooth_rxtx.c **** 		while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1675:bluetooth_rxtx.c **** 		TXLED_CLR;
1676:bluetooth_rxtx.c **** 
1677:bluetooth_rxtx.c **** 		cc2400_strobe(SRFOFF);
1678:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
1679:bluetooth_rxtx.c **** 
1680:bluetooth_rxtx.c **** 		while (!(cc2400_status() & XOSC16M_STABLE));
1681:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
1682:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
1683:bluetooth_rxtx.c **** 
1684:bluetooth_rxtx.c **** 		while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
1685:bluetooth_rxtx.c **** 		cc2400_strobe(STX);
1686:bluetooth_rxtx.c **** 
1687:bluetooth_rxtx.c **** 		handle_usb(clkn);
ARM GAS  /tmp/ccyBazZt.s 			page 32


1688:bluetooth_rxtx.c **** 	}
1689:bluetooth_rxtx.c **** 
1690:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1691:bluetooth_rxtx.c **** 	PAEN_CLR;
1692:bluetooth_rxtx.c **** #endif
1693:bluetooth_rxtx.c **** 
1694:bluetooth_rxtx.c **** 	// reset GIO
1695:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, gio_save);
1696:bluetooth_rxtx.c **** }
1697:bluetooth_rxtx.c **** 
1698:bluetooth_rxtx.c **** /* set LE access address */
1699:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa) {
1700:bluetooth_rxtx.c **** 	u32 aa_rev;
1701:bluetooth_rxtx.c **** 
1702:bluetooth_rxtx.c **** 	le.access_address = aa;
1703:bluetooth_rxtx.c **** 	aa_rev = rbit(aa);
1704:bluetooth_rxtx.c **** 	le.syncl = aa_rev & 0xffff;
1705:bluetooth_rxtx.c **** 	le.synch = aa_rev >> 16;
1706:bluetooth_rxtx.c **** }
1707:bluetooth_rxtx.c **** 
1708:bluetooth_rxtx.c **** /* reset le state, called by bt_generic_le and bt_follow_le() */
1709:bluetooth_rxtx.c **** void reset_le() {
1710:bluetooth_rxtx.c **** 	le_set_access_address(0x8e89bed6);     // advertising channel access address
1711:bluetooth_rxtx.c **** 	le.crc_init  = 0x555555;               // advertising channel CRCInit
1712:bluetooth_rxtx.c **** 	le.crc_init_reversed = 0xAAAAAA;
1713:bluetooth_rxtx.c **** 	le.crc_verify = 0;
1714:bluetooth_rxtx.c **** 	le.last_packet = 0;
1715:bluetooth_rxtx.c **** 
1716:bluetooth_rxtx.c **** 	le.link_state = LINK_INACTIVE;
1717:bluetooth_rxtx.c **** 
1718:bluetooth_rxtx.c **** 	le.channel_idx = 0;
1719:bluetooth_rxtx.c **** 	le.channel_increment = 0;
1720:bluetooth_rxtx.c **** 
1721:bluetooth_rxtx.c **** 	le.conn_epoch = 0;
1722:bluetooth_rxtx.c **** 	le.interval_timer = 0;
1723:bluetooth_rxtx.c **** 	le.conn_interval = 0;
1724:bluetooth_rxtx.c **** 	le.conn_interval = 0;
1725:bluetooth_rxtx.c **** 	le.conn_count = 0;
1726:bluetooth_rxtx.c **** 
1727:bluetooth_rxtx.c **** 	le.win_size = 0;
1728:bluetooth_rxtx.c **** 	le.win_offset = 0;
1729:bluetooth_rxtx.c **** 
1730:bluetooth_rxtx.c **** 	le.update_pending = 0;
1731:bluetooth_rxtx.c ****     // channel_map_update_pending = 0;
1732:bluetooth_rxtx.c ****     // channel_map_update_instant = 0;
1733:bluetooth_rxtx.c **** 	le.update_instant = 0;
1734:bluetooth_rxtx.c **** 	le.interval_update = 0;
1735:bluetooth_rxtx.c **** 	le.win_size_update = 0;
1736:bluetooth_rxtx.c **** 	le.win_offset_update = 0;
1737:bluetooth_rxtx.c **** 
1738:bluetooth_rxtx.c **** 	do_hop = 0;
1739:bluetooth_rxtx.c **** }
1740:bluetooth_rxtx.c **** 
1741:bluetooth_rxtx.c **** // reset LE Promisc state
1742:bluetooth_rxtx.c **** void reset_le_promisc(void) {
1743:bluetooth_rxtx.c **** 	memset(&le_promisc, 0, sizeof(le_promisc));
1744:bluetooth_rxtx.c **** 	le_promisc.smallest_hop_interval = 0xffffffff;
ARM GAS  /tmp/ccyBazZt.s 			page 33


1745:bluetooth_rxtx.c **** }
1746:bluetooth_rxtx.c **** 
1747:bluetooth_rxtx.c **** /* generic le mode */
1748:bluetooth_rxtx.c **** void bt_generic_le(u8 active_mode)
1749:bluetooth_rxtx.c **** {
1750:bluetooth_rxtx.c **** 	u8 hold;
1751:bluetooth_rxtx.c ****   
1752:bluetooth_rxtx.c **** 	int i, j;
1753:bluetooth_rxtx.c **** 	int8_t rssi, rssi_at_trigger;
1754:bluetooth_rxtx.c **** 
1755:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
1756:bluetooth_rxtx.c **** 	mode = active_mode;
1757:bluetooth_rxtx.c **** 
1758:bluetooth_rxtx.c **** 	reset_le();
1759:bluetooth_rxtx.c **** 
1760:bluetooth_rxtx.c **** 	// enable USB interrupts
1761:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
1762:bluetooth_rxtx.c **** 
1763:bluetooth_rxtx.c **** 	RXLED_CLR;
1764:bluetooth_rxtx.c **** 
1765:bluetooth_rxtx.c **** 	usb_queue_init();
1766:bluetooth_rxtx.c **** 	dio_ssp_init();
1767:bluetooth_rxtx.c **** 	dma_init_rx_symbols();
1768:bluetooth_rxtx.c **** 	dio_ssp_start();
1769:bluetooth_rxtx.c **** 	cc2400_rx();
1770:bluetooth_rxtx.c **** 
1771:bluetooth_rxtx.c **** 	cs_trigger_enable();
1772:bluetooth_rxtx.c **** 
1773:bluetooth_rxtx.c **** 	hold = 0;
1774:bluetooth_rxtx.c **** 
1775:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
1776:bluetooth_rxtx.c **** 
1777:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
1778:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
1779:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
1780:bluetooth_rxtx.c **** 
1781:bluetooth_rxtx.c **** 			/* Retune */
1782:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
1783:bluetooth_rxtx.c **** 
1784:bluetooth_rxtx.c **** 			/* Wait for lock */
1785:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
1786:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
1787:bluetooth_rxtx.c **** 
1788:bluetooth_rxtx.c **** 			/* RX mode */
1789:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
1790:bluetooth_rxtx.c **** 
1791:bluetooth_rxtx.c **** 			requested_channel = 0;
1792:bluetooth_rxtx.c **** 		}
1793:bluetooth_rxtx.c **** 
1794:bluetooth_rxtx.c **** 		if (do_hop) {
1795:bluetooth_rxtx.c **** 			hop();
1796:bluetooth_rxtx.c **** 		} else {
1797:bluetooth_rxtx.c **** 			TXLED_CLR;
1798:bluetooth_rxtx.c **** 		}
1799:bluetooth_rxtx.c **** 
1800:bluetooth_rxtx.c **** 		RXLED_CLR;
1801:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccyBazZt.s 			page 34


1802:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1803:bluetooth_rxtx.c **** 		rssi_reset();
1804:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
1805:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
1806:bluetooth_rxtx.c **** 		{
1807:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
1808:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
1809:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
1810:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
1811:bluetooth_rxtx.c **** 			}
1812:bluetooth_rxtx.c **** 			rssi_add(rssi);
1813:bluetooth_rxtx.c **** 		}
1814:bluetooth_rxtx.c **** 
1815:bluetooth_rxtx.c **** 		if (rx_err) {
1816:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
1817:bluetooth_rxtx.c **** 		}
1818:bluetooth_rxtx.c **** 
1819:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1820:bluetooth_rxtx.c **** 		if (!rx_tc)
1821:bluetooth_rxtx.c **** 			goto rx_continue;
1822:bluetooth_rxtx.c **** 
1823:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
1824:bluetooth_rxtx.c **** 		if (rx_tc > 1)
1825:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
1826:bluetooth_rxtx.c **** 
1827:bluetooth_rxtx.c **** 		rssi_iir_update(channel);
1828:bluetooth_rxtx.c **** 
1829:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
1830:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
1831:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
1832:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
1833:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
1834:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
1835:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
1836:bluetooth_rxtx.c **** 			cs_trigger = 0;
1837:bluetooth_rxtx.c **** 		}
1838:bluetooth_rxtx.c **** 
1839:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
1840:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
1841:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
1842:bluetooth_rxtx.c **** 		}
1843:bluetooth_rxtx.c **** 
1844:bluetooth_rxtx.c **** 		/* Hold expired? Ignore data. */
1845:bluetooth_rxtx.c **** 		if (hold == 0) {
1846:bluetooth_rxtx.c **** 			goto rx_continue;
1847:bluetooth_rxtx.c **** 		}
1848:bluetooth_rxtx.c **** 		hold--;
1849:bluetooth_rxtx.c **** 
1850:bluetooth_rxtx.c **** 		// copy the previously unpacked symbols to the front of the buffer
1851:bluetooth_rxtx.c **** 		memcpy(unpacked, unpacked + DMA_SIZE*8, DMA_SIZE*8);
1852:bluetooth_rxtx.c **** 
1853:bluetooth_rxtx.c **** 		// unpack the new packet to the end of the buffer
1854:bluetooth_rxtx.c **** 		for (i = 0; i < DMA_SIZE; ++i) {
1855:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
1856:bluetooth_rxtx.c **** 			for (j = 0; j < 8; ++j) {
1857:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
1858:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
ARM GAS  /tmp/ccyBazZt.s 			page 35


1859:bluetooth_rxtx.c **** 			}
1860:bluetooth_rxtx.c **** 		}
1861:bluetooth_rxtx.c **** 
1862:bluetooth_rxtx.c **** 		int ret = data_cb(unpacked);
1863:bluetooth_rxtx.c **** 		if (!ret) break;
1864:bluetooth_rxtx.c **** 
1865:bluetooth_rxtx.c **** 	rx_continue:
1866:bluetooth_rxtx.c **** 		rx_tc = 0;
1867:bluetooth_rxtx.c **** 		rx_err = 0;
1868:bluetooth_rxtx.c **** 	}
1869:bluetooth_rxtx.c **** 
1870:bluetooth_rxtx.c **** 	// disable USB interrupts
1871:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
1872:bluetooth_rxtx.c **** 
1873:bluetooth_rxtx.c **** 	// reset the radio completelywww.trainingwithprecision.com
1874:bluetooth_rxtx.c **** 	cc2400_idle();
1875:bluetooth_rxtx.c **** 	dio_ssp_stop();
1876:bluetooth_rxtx.c **** 	cs_trigger_disable();
1877:bluetooth_rxtx.c **** 
1878:bluetooth_rxtx.c **** }
1879:bluetooth_rxtx.c **** 
1880:bluetooth_rxtx.c **** 
1881:bluetooth_rxtx.c **** void bt_le_sync(u8 active_mode)
1882:bluetooth_rxtx.c **** {
1883:bluetooth_rxtx.c **** 
1884:bluetooth_rxtx.c **** 	int i;
1885:bluetooth_rxtx.c **** 	int8_t rssi;
1886:bluetooth_rxtx.c **** 	static int restart_jamming = 0;
1887:bluetooth_rxtx.c **** 
1888:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
1889:bluetooth_rxtx.c **** 	mode = active_mode;
1890:bluetooth_rxtx.c **** 
1891:bluetooth_rxtx.c **** 	le.link_state = LINK_LISTENING;
1892:bluetooth_rxtx.c **** 
1893:bluetooth_rxtx.c **** 	// enable USB interrupts
1894:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
1895:bluetooth_rxtx.c **** 
1896:bluetooth_rxtx.c **** 	RXLED_CLR;
1897:bluetooth_rxtx.c **** 
1898:bluetooth_rxtx.c **** 	usb_queue_init();
1899:bluetooth_rxtx.c **** 	dio_ssp_init();
1900:bluetooth_rxtx.c **** 	dma_init_le();
1901:bluetooth_rxtx.c **** 	dio_ssp_start();
1902:bluetooth_rxtx.c **** 
1903:bluetooth_rxtx.c **** 	cc2400_rx_sync(rbit(le.access_address)); // bit-reversed access address
1904:bluetooth_rxtx.c **** 
1905:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
1906:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
1907:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
1908:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
1909:bluetooth_rxtx.c **** 
1910:bluetooth_rxtx.c **** 			/* Retune */
1911:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
1912:bluetooth_rxtx.c **** 
1913:bluetooth_rxtx.c **** 			/* Wait for lock */
1914:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
1915:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
ARM GAS  /tmp/ccyBazZt.s 			page 36


1916:bluetooth_rxtx.c **** 
1917:bluetooth_rxtx.c **** 			/* RX mode */
1918:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
1919:bluetooth_rxtx.c **** 
1920:bluetooth_rxtx.c **** 			requested_channel = 0;
1921:bluetooth_rxtx.c **** 		}
1922:bluetooth_rxtx.c **** 
1923:bluetooth_rxtx.c **** 		RXLED_CLR;
1924:bluetooth_rxtx.c **** 
1925:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1926:bluetooth_rxtx.c **** 		rssi_reset();
1927:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
1928:bluetooth_rxtx.c **** 			;
1929:bluetooth_rxtx.c **** 
1930:bluetooth_rxtx.c **** 		rssi = (int8_t)(cc2400_get(RSSI) >> 8);
1931:bluetooth_rxtx.c **** 		rssi_min = rssi_max = rssi;
1932:bluetooth_rxtx.c **** 
1933:bluetooth_rxtx.c **** 		if (requested_mode != active_mode) {
1934:bluetooth_rxtx.c **** 			goto cleanup;
1935:bluetooth_rxtx.c **** 		}
1936:bluetooth_rxtx.c **** 
1937:bluetooth_rxtx.c **** 		if (rx_err) {
1938:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
1939:bluetooth_rxtx.c **** 		}
1940:bluetooth_rxtx.c **** 
1941:bluetooth_rxtx.c **** 		if (do_hop)
1942:bluetooth_rxtx.c **** 			goto rx_flush;
1943:bluetooth_rxtx.c **** 
1944:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1945:bluetooth_rxtx.c **** 		if (!rx_tc)
1946:bluetooth_rxtx.c **** 			continue;
1947:bluetooth_rxtx.c **** 
1948:bluetooth_rxtx.c **** 		/////////////////////
1949:bluetooth_rxtx.c **** 		// process the packet
1950:bluetooth_rxtx.c **** 		
1951:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1] = { 0, };
1952:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
1953:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
1954:bluetooth_rxtx.c **** 
1955:bluetooth_rxtx.c **** 		if(send_clock){
1956:bluetooth_rxtx.c **** 			anchor_timestamp = CLK100NS;
1957:bluetooth_rxtx.c **** 			if (anchor_timestamp < le.last_packet)
1958:bluetooth_rxtx.c **** 				anchor_timestamp += 3276800000; // handle rollover
1959:bluetooth_rxtx.c **** 			le_promisc_state(5, &anchor_timestamp, 4);
1960:bluetooth_rxtx.c **** 			send_clock = 0;
1961:bluetooth_rxtx.c **** 			//debug_printf("anchor %d\n",anchor_timestamp);
1962:bluetooth_rxtx.c **** 		}
1963:bluetooth_rxtx.c **** 		debug_printf("channel_a: %d,	%d\n", channel,CLK100NS);
1964:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel)];
1965:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
1966:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
1967:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
1968:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
1969:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
1970:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
1971:bluetooth_rxtx.c **** 		}
1972:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccyBazZt.s 			page 37


1973:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
1974:bluetooth_rxtx.c **** 		if (len > 39)
1975:bluetooth_rxtx.c **** 			goto rx_flush;
1976:bluetooth_rxtx.c **** 
1977:bluetooth_rxtx.c **** 		// transfer the minimum number of bytes from the CC2400
1978:bluetooth_rxtx.c **** 		// this allows us enough time to resume RX for subsequent packets on the same channel
1979:bluetooth_rxtx.c **** 		unsigned total_transfers = ((len + 3) + 4 - 1) / 4;
1980:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
1981:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
1982:bluetooth_rxtx.c **** 				;
1983:bluetooth_rxtx.c **** 		} else { // max transfers? just wait till DMA's done
1984:bluetooth_rxtx.c **** 			while (DMACC0Config & DMACCxConfig_E && rx_err == 0)
1985:bluetooth_rxtx.c **** 				;
1986:bluetooth_rxtx.c **** 		}
1987:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
1988:bluetooth_rxtx.c **** 
1989:bluetooth_rxtx.c **** 		// strobe SFSON to allow the resync to occur while we process the packet
1990:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
1991:bluetooth_rxtx.c **** 
1992:bluetooth_rxtx.c **** 		// unwhiten the rest of the packet
1993:bluetooth_rxtx.c **** 		for (i = 4; i < 44; i += 4) {
1994:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
1995:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
1996:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
1997:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
1998:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
1999:bluetooth_rxtx.c **** 		}
2000:bluetooth_rxtx.c **** 
2001:bluetooth_rxtx.c **** 		if (le.crc_verify) {
2002:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
2003:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
2004:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
2005:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
2006:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
2007:bluetooth_rxtx.c **** 				goto rx_flush;
2008:bluetooth_rxtx.c **** 		}
2009:bluetooth_rxtx.c **** 
2010:bluetooth_rxtx.c **** 
2011:bluetooth_rxtx.c **** 		RXLED_SET;
2012:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
2013:bluetooth_rxtx.c ****         	if(btle_channel_index(channel) == idx3){
2014:bluetooth_rxtx.c ****             		count3++;  
2015:bluetooth_rxtx.c ****             	if(count3 > count2-1){
2016:bluetooth_rxtx.c ****                 	count3 = 0;
2017:bluetooth_rxtx.c ****             	}      
2018:bluetooth_rxtx.c ****         }
2019:bluetooth_rxtx.c **** 		// disable USB interrupts while we tpacketouch USB data structures
2020:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
2021:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
2022:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
2023:bluetooth_rxtx.c **** 
2024:bluetooth_rxtx.c **** 		le.last_packet = CLK100NS;
2025:bluetooth_rxtx.c **** 
2026:bluetooth_rxtx.c **** 	rx_flush:
2027:bluetooth_rxtx.c **** 		// this might happen twice, but it's safe to do so
2028:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
2029:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccyBazZt.s 			page 38


2030:bluetooth_rxtx.c **** 		// flush any excess bytes from the SSP's buffer
2031:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
2032:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
2033:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
2034:bluetooth_rxtx.c **** 		}
2035:bluetooth_rxtx.c **** 
2036:bluetooth_rxtx.c **** 		// timeout - FIXME this is an ugly hack
2037:bluetooth_rxtx.c **** 		u32 now = CLK100NS;
2038:bluetooth_rxtx.c **** 		if (now < le.last_packet)
2039:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
2040:bluetooth_rxtx.c **** 		if  ( // timeout
2041:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
2042:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
2043:bluetooth_rxtx.c **** 			// jam finished
2044:bluetooth_rxtx.c **** 			|| (le_jam_count == 1)
2045:bluetooth_rxtx.c **** 			)
2046:bluetooth_rxtx.c **** 		{
2047:bluetooth_rxtx.c **** 			reset_le();
2048:bluetooth_rxtx.c **** 			le_jam_count = 0;
2049:bluetooth_rxtx.c **** 			TXLED_CLR;
2050:bluetooth_rxtx.c **** 
2051:bluetooth_rxtx.c **** 			if (jam_mode == JAM_ONCE) {
2052:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
2053:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
2054:bluetooth_rxtx.c **** 				goto cleanup;
2055:bluetooth_rxtx.c **** 			}
2056:bluetooth_rxtx.c **** 
2057:bluetooth_rxtx.c **** 			// go back to promisc if the connection dies
2058:bluetooth_rxtx.c **** 			if (active_mode == MODE_BT_PROMISC_LE)
2059:bluetooth_rxtx.c **** 				goto cleanup;
2060:bluetooth_rxtx.c **** 
2061:bluetooth_rxtx.c **** 			le.link_state = LINK_LISTENING;
2062:bluetooth_rxtx.c **** 
2063:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
2064:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
2065:bluetooth_rxtx.c **** 
2066:bluetooth_rxtx.c **** 			/* Retune */
2067:bluetooth_rxtx.c **** 			channel = le_adv_channel != 0 ? le_adv_channel : 2402;
2068:bluetooth_rxtx.c **** 			restart_jamming = 1;
2069:bluetooth_rxtx.c **** 		}
2070:bluetooth_rxtx.c **** 
2071:bluetooth_rxtx.c **** 		cc2400_set(SYNCL, le.syncl);
2072:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
2073:bluetooth_rxtx.c **** 
2074:bluetooth_rxtx.c **** 		if (do_hop)
2075:bluetooth_rxtx.c **** 			hop();
2076:bluetooth_rxtx.c **** 
2077:bluetooth_rxtx.c **** 		// ♪ you can jam but you keep turning off the light ♪
2078:bluetooth_rxtx.c **** 		if (le_jam_count > 0) {
2079:bluetooth_rxtx.c **** 			le_jam();
2080:bluetooth_rxtx.c **** 			--le_jam_count;
2081:bluetooth_rxtx.c **** 		} else {
2082:bluetooth_rxtx.c **** 			/* RX mode */
2083:bluetooth_rxtx.c **** 			dma_init_le();
2084:bluetooth_rxtx.c **** 			dio_ssp_start();
2085:bluetooth_rxtx.c **** 
2086:bluetooth_rxtx.c **** 			if (restart_jamming) {
ARM GAS  /tmp/ccyBazZt.s 			page 39


2087:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
2088:bluetooth_rxtx.c **** 				restart_jamming = 0;
2089:bluetooth_rxtx.c **** 			} else {
2090:bluetooth_rxtx.c **** 				// wait till we're in FSLOCK before strobing RX
2091:bluetooth_rxtx.c **** 				while (!(cc2400_status() & FS_LOCK));
2092:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
2093:bluetooth_rxtx.c **** 			}
2094:bluetooth_rxtx.c **** 		}
2095:bluetooth_rxtx.c **** 
2096:bluetooth_rxtx.c **** 		rx_tc = 0;
2097:bluetooth_rxtx.c **** 		rx_err = 0;
2098:bluetooth_rxtx.c **** 	}
2099:bluetooth_rxtx.c **** 
2100:bluetooth_rxtx.c **** cleanup:
2101:bluetooth_rxtx.c **** 
2102:bluetooth_rxtx.c **** 	// disable USB interrupts
2103:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
2104:bluetooth_rxtx.c **** 
2105:bluetooth_rxtx.c **** 	// reset the radio completely
2106:bluetooth_rxtx.c **** 	cc2400_idle();
2107:bluetooth_rxtx.c **** 	dio_ssp_stop();
2108:bluetooth_rxtx.c **** 	cs_trigger_disable();
2109:bluetooth_rxtx.c **** }
2110:bluetooth_rxtx.c **** 
2111:bluetooth_rxtx.c **** 
2112:bluetooth_rxtx.c **** 
2113:bluetooth_rxtx.c **** /* low energy connection following
2114:bluetooth_rxtx.c ****  * follows a known AA around */
2115:bluetooth_rxtx.c **** int cb_follow_le() {
2116:bluetooth_rxtx.c **** 	debug_printf("I am in cb\n");
2117:bluetooth_rxtx.c **** 	int i, j, k;
2118:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel)];
2119:bluetooth_rxtx.c **** 
2120:bluetooth_rxtx.c **** 	u32 access_address = 0;
2121:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
2122:bluetooth_rxtx.c **** 		access_address >>= 1;
2123:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
2124:bluetooth_rxtx.c **** 	}
2125:bluetooth_rxtx.c **** 
2126:bluetooth_rxtx.c **** 	for (i = 31; i < DMA_SIZE * 8 + 32; i++) {
2127:bluetooth_rxtx.c **** 		access_address >>= 1;
2128:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
2129:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
2130:bluetooth_rxtx.c **** 
2131:bluetooth_rxtx.c **** 			for (j = 0; j < 46; ++j) {
2132:bluetooth_rxtx.c **** 				u8 byte = 0;
2133:bluetooth_rxtx.c **** 				for (k = 0; k < 8; k++) {
2134:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
2135:bluetooth_rxtx.c **** 					if (offset >= DMA_SIZE*8*2) break;
2136:bluetooth_rxtx.c **** 					int bit = unpacked[offset];
2137:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
2138:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
2139:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
2140:bluetooth_rxtx.c **** 					}
2141:bluetooth_rxtx.c **** 					byte |= bit << k;
2142:bluetooth_rxtx.c **** 				}
2143:bluetooth_rxtx.c **** 				idle_rxbuf[j] = byte;
ARM GAS  /tmp/ccyBazZt.s 			page 40


2144:bluetooth_rxtx.c **** 			}
2145:bluetooth_rxtx.c **** 
2146:bluetooth_rxtx.c **** 			// verify CRC
2147:bluetooth_rxtx.c **** 			if (le.crc_verify) {
2148:bluetooth_rxtx.c **** 				int len		 = (idle_rxbuf[5] & 0x3f) + 2;
2149:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, (uint8_t*)idle_rxbuf + 4, len);
2150:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
2151:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
2152:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
2153:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
2154:bluetooth_rxtx.c **** 					break;
2155:bluetooth_rxtx.c **** 			}
2156:bluetooth_rxtx.c **** 
2157:bluetooth_rxtx.c **** 			// send to PC
2158:bluetooth_rxtx.c **** 			enqueue(LE_PACKET, (uint8_t*)idle_rxbuf);
2159:bluetooth_rxtx.c **** 			RXLED_SET;
2160:bluetooth_rxtx.c **** 
2161:bluetooth_rxtx.c **** 			packet_cb((uint8_t*)idle_rxbuf);
2162:bluetooth_rxtx.c **** 
2163:bluetooth_rxtx.c **** 			break;
2164:bluetooth_rxtx.c **** 		}
2165:bluetooth_rxtx.c **** 	}
2166:bluetooth_rxtx.c **** 
2167:bluetooth_rxtx.c **** 	return 1;
2168:bluetooth_rxtx.c **** }
2169:bluetooth_rxtx.c **** //sopan
2170:bluetooth_rxtx.c **** u8 rearrange_channel(uint16_t array[]){
2171:bluetooth_rxtx.c ****     
2172:bluetooth_rxtx.c ****     static u8 m, n = 0;
2173:bluetooth_rxtx.c ****     static u16 a = 0;
2174:bluetooth_rxtx.c **** 
2175:bluetooth_rxtx.c ****     for(m=0; m< total_channel; ++m){
2176:bluetooth_rxtx.c ****         for(n=m+1; n<total_channel; ++n){
2177:bluetooth_rxtx.c ****             if(array[m] > array[n]){
2178:bluetooth_rxtx.c ****                 a = array[m];
2179:bluetooth_rxtx.c ****                 array[m] = array[n];
2180:bluetooth_rxtx.c ****                 array[n] = a;
2181:bluetooth_rxtx.c ****             }            
2182:bluetooth_rxtx.c ****         }
2183:bluetooth_rxtx.c ****     }
2184:bluetooth_rxtx.c ****     hopping_channel = 0;
2185:bluetooth_rxtx.c ****     channel_hopped = 0;
2186:bluetooth_rxtx.c ****     return 1;
2187:bluetooth_rxtx.c **** }
2188:bluetooth_rxtx.c **** /**
2189:bluetooth_rxtx.c ****  * Called when we receive a packet in connection following mode.
2190:bluetooth_rxtx.c ****  */
2191:bluetooth_rxtx.c **** 
2192:bluetooth_rxtx.c **** #define DIVIDE_ROUND(N, D) ((N) + (D)/2) / (D)
2193:bluetooth_rxtx.c **** 
2194:bluetooth_rxtx.c **** void connection_follow_cb(u8 *packet) {
  80              		.loc 1 2194 0
  81              		.cfi_startproc
  82              		@ args = 0, pretend = 0, frame = 0
  83              		@ frame_needed = 0, uses_anonymous_args = 0
  84              		@ link register save eliminated.
  85              	.LVL7:
ARM GAS  /tmp/ccyBazZt.s 			page 41


  86 0000 7047     		bx	lr
  87              		.cfi_endproc
  88              	.LFE28:
  90              		.section	.text.le_set_access_address,"ax",%progbits
  91              		.align	1
  92              		.syntax unified
  93              		.thumb
  94              		.thumb_func
  95              		.fpu softvfp
  97              	le_set_access_address:
  98              	.LFB21:
1699:bluetooth_rxtx.c **** 	u32 aa_rev;
  99              		.loc 1 1699 0
 100              		.cfi_startproc
 101              		@ args = 0, pretend = 0, frame = 0
 102              		@ frame_needed = 0, uses_anonymous_args = 0
 103              	.LVL8:
1699:bluetooth_rxtx.c **** 	u32 aa_rev;
 104              		.loc 1 1699 0
 105 0000 10B5     		push	{r4, lr}
 106              		.cfi_def_cfa_offset 8
 107              		.cfi_offset 4, -8
 108              		.cfi_offset 14, -4
1702:bluetooth_rxtx.c **** 	aa_rev = rbit(aa);
 109              		.loc 1 1702 0
 110 0002 044C     		ldr	r4, .L6
 111 0004 2060     		str	r0, [r4]
1703:bluetooth_rxtx.c **** 	le.syncl = aa_rev & 0xffff;
 112              		.loc 1 1703 0
 113 0006 FFF7FEFF 		bl	rbit
 114              	.LVL9:
1704:bluetooth_rxtx.c **** 	le.synch = aa_rev >> 16;
 115              		.loc 1 1704 0
 116 000a E080     		strh	r0, [r4, #6]	@ movhi
1705:bluetooth_rxtx.c **** }
 117              		.loc 1 1705 0
 118 000c 000C     		lsrs	r0, r0, #16
 119              	.LVL10:
 120 000e A080     		strh	r0, [r4, #4]	@ movhi
 121 0010 10BD     		pop	{r4, pc}
 122              	.L7:
 123 0012 00BF     		.align	2
 124              	.L6:
 125 0014 00000000 		.word	.LANCHOR0
 126              		.cfi_endproc
 127              	.LFE21:
 129              		.section	.text.cc2400_rx,"ax",%progbits
 130              		.align	1
 131              		.syntax unified
 132              		.thumb
 133              		.thumb_func
 134              		.fpu softvfp
 136              	cc2400_rx:
 137              	.LFB11:
1110:bluetooth_rxtx.c **** 	u16 mdmctrl = 0;
 138              		.loc 1 1110 0
 139              		.cfi_startproc
ARM GAS  /tmp/ccyBazZt.s 			page 42


 140              		@ args = 0, pretend = 0, frame = 0
 141              		@ frame_needed = 0, uses_anonymous_args = 0
 142 0000 38B5     		push	{r3, r4, r5, lr}
 143              		.cfi_def_cfa_offset 16
 144              		.cfi_offset 3, -16
 145              		.cfi_offset 4, -12
 146              		.cfi_offset 5, -8
 147              		.cfi_offset 14, -4
 148              	.LVL11:
1113:bluetooth_rxtx.c **** 		if (modulation == MOD_BT_BASIC_RATE) {
 149              		.loc 1 1113 0
 150 0002 264B     		ldr	r3, .L23
 151 0004 264C     		ldr	r4, .L23+4
 152 0006 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 153 0008 12B1     		cbz	r2, .L9
1113:bluetooth_rxtx.c **** 		if (modulation == MOD_BT_BASIC_RATE) {
 154              		.loc 1 1113 0 is_stmt 0 discriminator 1
 155 000a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 156 000c 012A     		cmp	r2, #1
 157 000e 26D1     		bne	.L10
 158              	.L9:
1114:bluetooth_rxtx.c **** 			mdmctrl = 0x0029; // 160 kHz frequency deviation
 159              		.loc 1 1114 0 is_stmt 1
 160 0010 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 161 0012 002A     		cmp	r2, #0
 162 0014 3FD0     		beq	.L14
1116:bluetooth_rxtx.c **** 			mdmctrl = 0x0040; // 250 kHz frequency deviation
 163              		.loc 1 1116 0
 164 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1117:bluetooth_rxtx.c **** 		}
 165              		.loc 1 1117 0
 166 0018 012B     		cmp	r3, #1
 167 001a 14BF     		ite	ne
 168 001c 0025     		movne	r5, #0
 169 001e 4025     		moveq	r5, #64
 170              	.L11:
 171              	.LVL12:
1119:bluetooth_rxtx.c **** 		cc2400_set(LMTST,   0x2b22);
 172              		.loc 1 1119 0
 173 0020 47F6FF71 		movw	r1, #32767
 174 0024 0D20     		movs	r0, #13
 175 0026 FFF7FEFF 		bl	cc2400_set
 176              	.LVL13:
1120:bluetooth_rxtx.c **** 		cc2400_set(MDMTST0, 0x134b); // without PRNG
 177              		.loc 1 1120 0
 178 002a 42F62231 		movw	r1, #11042
 179 002e 1220     		movs	r0, #18
 180 0030 FFF7FEFF 		bl	cc2400_set
 181              	.LVL14:
1121:bluetooth_rxtx.c **** 		cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 182              		.loc 1 1121 0
 183 0034 41F24B31 		movw	r1, #4939
 184 0038 1420     		movs	r0, #20
 185 003a FFF7FEFF 		bl	cc2400_set
 186              	.LVL15:
1122:bluetooth_rxtx.c **** 		// 0 00 00 0 010 00 0 00 0 1
 187              		.loc 1 1122 0
ARM GAS  /tmp/ccyBazZt.s 			page 43


 188 003e 40F20111 		movw	r1, #257
 189 0042 2020     		movs	r0, #32
 190 0044 FFF7FEFF 		bl	cc2400_set
 191              	.LVL16:
1129:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, mdmctrl);
 192              		.loc 1 1129 0
 193 0048 B4F84C10 		ldrh	r1, [r4, #76]
 194 004c 0220     		movs	r0, #2
 195 004e 0139     		subs	r1, r1, #1
 196 0050 89B2     		uxth	r1, r1
 197 0052 FFF7FEFF 		bl	cc2400_set
 198              	.LVL17:
1130:bluetooth_rxtx.c **** 	}
 199              		.loc 1 1130 0
 200 0056 2946     		mov	r1, r5
 201 0058 0320     		movs	r0, #3
 202 005a FFF7FEFF 		bl	cc2400_set
 203              	.LVL18:
 204              	.L10:
1134:bluetooth_rxtx.c **** 
 205              		.loc 1 1134 0
 206 005e B4F84C00 		ldrh	r0, [r4, #76]
 207 0062 80B2     		uxth	r0, r0
 208 0064 FFF7FEFF 		bl	cs_threshold_calc_and_set
 209              	.LVL19:
1136:bluetooth_rxtx.c **** 
 210              		.loc 1 1136 0
 211 0068 FFF7FEFF 		bl	clkn_start
 212              	.LVL20:
 213              	.L12:
1138:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 214              		.loc 1 1138 0 discriminator 1
 215 006c FFF7FEFF 		bl	cc2400_status
 216              	.LVL21:
 217 0070 4206     		lsls	r2, r0, #25
 218 0072 FBD5     		bpl	.L12
1139:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 219              		.loc 1 1139 0
 220 0074 6120     		movs	r0, #97
 221 0076 FFF7FEFF 		bl	cc2400_strobe
 222              	.LVL22:
 223              	.L13:
1140:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 224              		.loc 1 1140 0 discriminator 1
 225 007a FFF7FEFF 		bl	cc2400_status
 226              	.LVL23:
 227 007e 4307     		lsls	r3, r0, #29
 228 0080 FBD5     		bpl	.L13
1141:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 229              		.loc 1 1141 0
 230 0082 6220     		movs	r0, #98
 231 0084 FFF7FEFF 		bl	cc2400_strobe
 232              	.LVL24:
1143:bluetooth_rxtx.c **** 	HGM_SET;
 233              		.loc 1 1143 0
 234 0088 8022     		movs	r2, #128
 235 008a 064B     		ldr	r3, .L23+8
ARM GAS  /tmp/ccyBazZt.s 			page 44


 236 008c 1A60     		str	r2, [r3]
1144:bluetooth_rxtx.c **** #endif
 237              		.loc 1 1144 0
 238 008e 4FF48072 		mov	r2, #256
 239 0092 1A60     		str	r2, [r3]
 240 0094 38BD     		pop	{r3, r4, r5, pc}
 241              	.LVL25:
 242              	.L14:
1115:bluetooth_rxtx.c **** 		} else if (modulation == MOD_BT_LOW_ENERGY) {
 243              		.loc 1 1115 0
 244 0096 2925     		movs	r5, #41
 245 0098 C2E7     		b	.L11
 246              	.L24:
 247 009a 00BF     		.align	2
 248              	.L23:
 249 009c 00000000 		.word	.LANCHOR1
 250 00a0 00000000 		.word	.LANCHOR0
 251 00a4 58C00920 		.word	537509976
 252              		.cfi_endproc
 253              	.LFE11:
 255              		.section	.text.cc2400_rx_sync,"ax",%progbits
 256              		.align	1
 257              		.syntax unified
 258              		.thumb
 259              		.thumb_func
 260              		.fpu softvfp
 262              	cc2400_rx_sync:
 263              	.LFB12:
1150:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
 264              		.loc 1 1150 0
 265              		.cfi_startproc
 266              		@ args = 0, pretend = 0, frame = 0
 267              		@ frame_needed = 0, uses_anonymous_args = 0
 268              	.LVL26:
 269 0000 70B5     		push	{r4, r5, r6, lr}
 270              		.cfi_def_cfa_offset 16
 271              		.cfi_offset 4, -16
 272              		.cfi_offset 5, -12
 273              		.cfi_offset 6, -8
 274              		.cfi_offset 14, -4
1153:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 275              		.loc 1 1153 0
 276 0002 294B     		ldr	r3, .L35
1150:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
 277              		.loc 1 1150 0
 278 0004 0446     		mov	r4, r0
1153:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 279              		.loc 1 1153 0
 280 0006 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 281 0008 002A     		cmp	r2, #0
 282 000a 48D0     		beq	.L30
1164:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 283              		.loc 1 1164 0
 284 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 285 000e 012B     		cmp	r3, #1
 286 0010 44D1     		bne	.L25
1165:bluetooth_rxtx.c **** 		grmdm = 0x0561; // un-buffered mode, packet w/ sync word detection
ARM GAS  /tmp/ccyBazZt.s 			page 45


 287              		.loc 1 1165 0
 288 0012 4025     		movs	r5, #64
1166:bluetooth_rxtx.c **** 		// 0 00 00 1 010 11 0 00 0 1
 289              		.loc 1 1166 0
 290 0014 40F26156 		movw	r6, #1377
 291              	.L26:
 292              	.LVL27:
1180:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 293              		.loc 1 1180 0
 294 0018 47F6FF71 		movw	r1, #32767
 295 001c 0D20     		movs	r0, #13
 296              	.LVL28:
 297 001e FFF7FEFF 		bl	cc2400_set
 298              	.LVL29:
1181:bluetooth_rxtx.c **** 
 299              		.loc 1 1181 0
 300 0022 42F62231 		movw	r1, #11042
 301 0026 1220     		movs	r0, #18
 302 0028 FFF7FEFF 		bl	cc2400_set
 303              	.LVL30:
1183:bluetooth_rxtx.c **** 	// 1      2      4b
 304              		.loc 1 1183 0
 305 002c 41F24B21 		movw	r1, #4683
 306 0030 1420     		movs	r0, #20
 307 0032 FFF7FEFF 		bl	cc2400_set
 308              	.LVL31:
1196:bluetooth_rxtx.c **** 
 309              		.loc 1 1196 0
 310 0036 3146     		mov	r1, r6
 311 0038 2020     		movs	r0, #32
 312 003a FFF7FEFF 		bl	cc2400_set
 313              	.LVL32:
1198:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 314              		.loc 1 1198 0
 315 003e A1B2     		uxth	r1, r4
 316 0040 2C20     		movs	r0, #44
 317 0042 FFF7FEFF 		bl	cc2400_set
 318              	.LVL33:
1199:bluetooth_rxtx.c **** 
 319              		.loc 1 1199 0
 320 0046 210C     		lsrs	r1, r4, #16
1201:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 321              		.loc 1 1201 0
 322 0048 184C     		ldr	r4, .L35+4
 323              	.LVL34:
1199:bluetooth_rxtx.c **** 
 324              		.loc 1 1199 0
 325 004a 2D20     		movs	r0, #45
 326 004c FFF7FEFF 		bl	cc2400_set
 327              	.LVL35:
1201:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 328              		.loc 1 1201 0
 329 0050 B4F84C10 		ldrh	r1, [r4, #76]
 330 0054 0220     		movs	r0, #2
 331 0056 0139     		subs	r1, r1, #1
 332 0058 89B2     		uxth	r1, r1
 333 005a FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/ccyBazZt.s 			page 46


 334              	.LVL36:
1202:bluetooth_rxtx.c **** 
 335              		.loc 1 1202 0
 336 005e 2946     		mov	r1, r5
 337 0060 0320     		movs	r0, #3
 338 0062 FFF7FEFF 		bl	cc2400_set
 339              	.LVL37:
1205:bluetooth_rxtx.c **** 
 340              		.loc 1 1205 0
 341 0066 B4F84C00 		ldrh	r0, [r4, #76]
 342 006a 80B2     		uxth	r0, r0
 343 006c FFF7FEFF 		bl	cs_threshold_calc_and_set
 344              	.LVL38:
1207:bluetooth_rxtx.c **** 
 345              		.loc 1 1207 0
 346 0070 FFF7FEFF 		bl	clkn_start
 347              	.LVL39:
 348              	.L28:
1209:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 349              		.loc 1 1209 0 discriminator 1
 350 0074 FFF7FEFF 		bl	cc2400_status
 351              	.LVL40:
 352 0078 4206     		lsls	r2, r0, #25
 353 007a FBD5     		bpl	.L28
1210:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 354              		.loc 1 1210 0
 355 007c 6120     		movs	r0, #97
 356 007e FFF7FEFF 		bl	cc2400_strobe
 357              	.LVL41:
 358              	.L29:
1211:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 359              		.loc 1 1211 0 discriminator 1
 360 0082 FFF7FEFF 		bl	cc2400_status
 361              	.LVL42:
 362 0086 4307     		lsls	r3, r0, #29
 363 0088 FBD5     		bpl	.L29
1212:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 364              		.loc 1 1212 0
 365 008a 6220     		movs	r0, #98
 366 008c FFF7FEFF 		bl	cc2400_strobe
 367              	.LVL43:
1214:bluetooth_rxtx.c **** 	HGM_SET;
 368              		.loc 1 1214 0
 369 0090 8022     		movs	r2, #128
 370 0092 074B     		ldr	r3, .L35+8
 371 0094 1A60     		str	r2, [r3]
1215:bluetooth_rxtx.c **** #endif
 372              		.loc 1 1215 0
 373 0096 4FF48072 		mov	r2, #256
 374 009a 1A60     		str	r2, [r3]
 375              	.LVL44:
 376              	.L25:
 377 009c 70BD     		pop	{r4, r5, r6, pc}
 378              	.LVL45:
 379              	.L30:
1154:bluetooth_rxtx.c **** 		grmdm = 0x0461; // un-buffered mode, packet w/ sync word detection
 380              		.loc 1 1154 0
ARM GAS  /tmp/ccyBazZt.s 			page 47


 381 009e 2925     		movs	r5, #41
1155:bluetooth_rxtx.c **** 		// 0 00 00 1 000 11 0 00 0 1
 382              		.loc 1 1155 0
 383 00a0 40F26146 		movw	r6, #1121
 384 00a4 B8E7     		b	.L26
 385              	.L36:
 386 00a6 00BF     		.align	2
 387              	.L35:
 388 00a8 00000000 		.word	.LANCHOR1
 389 00ac 00000000 		.word	.LANCHOR0
 390 00b0 58C00920 		.word	537509976
 391              		.cfi_endproc
 392              	.LFE12:
 394              		.section	.text.enqueue,"ax",%progbits
 395              		.align	1
 396              		.syntax unified
 397              		.thumb
 398              		.thumb_func
 399              		.fpu softvfp
 401              	enqueue:
 402              	.LFB0:
 173:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 403              		.loc 1 173 0
 404              		.cfi_startproc
 405              		@ args = 0, pretend = 0, frame = 0
 406              		@ frame_needed = 0, uses_anonymous_args = 0
 407              	.LVL46:
 408 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 409              		.cfi_def_cfa_offset 24
 410              		.cfi_offset 3, -24
 411              		.cfi_offset 4, -20
 412              		.cfi_offset 5, -16
 413              		.cfi_offset 6, -12
 414              		.cfi_offset 7, -8
 415              		.cfi_offset 14, -4
 173:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 416              		.loc 1 173 0
 417 0002 0746     		mov	r7, r0
 418 0004 0E46     		mov	r6, r1
 174:bluetooth_rxtx.c **** 
 419              		.loc 1 174 0
 420 0006 FFF7FEFF 		bl	usb_enqueue
 421              	.LVL47:
 422 000a 1D4D     		ldr	r5, .L42
 177:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 423              		.loc 1 177 0
 424 000c 0446     		mov	r4, r0
 425 000e 20B9     		cbnz	r0, .L38
 178:bluetooth_rxtx.c **** 		return 0;
 426              		.loc 1 178 0
 427 0010 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 428 0012 43F00403 		orr	r3, r3, #4
 429 0016 6B70     		strb	r3, [r5, #1]
 179:bluetooth_rxtx.c **** 	}
 430              		.loc 1 179 0
 431 0018 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 432              	.LVL48:
ARM GAS  /tmp/ccyBazZt.s 			page 48


 433              	.L38:
 183:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 434              		.loc 1 183 0
 435 001a 042F     		cmp	r7, #4
 182:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 436              		.loc 1 182 0
 437 001c 0770     		strb	r7, [r0]
 183:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 438              		.loc 1 183 0
 439 001e 19D1     		bne	.L40
 185:bluetooth_rxtx.c **** 	} else {
 440              		.loc 1 185 0
 441 0020 40F63541 		movw	r1, #3125
 184:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 442              		.loc 1 184 0
 443 0024 174A     		ldr	r2, .L42+4
 444 0026 1368     		ldr	r3, [r2]
 445 0028 1B0D     		lsrs	r3, r3, #20
 446 002a C370     		strb	r3, [r0, #3]
 185:bluetooth_rxtx.c **** 	} else {
 447              		.loc 1 185 0
 448 002c 1368     		ldr	r3, [r2]
 449 002e 164A     		ldr	r2, .L42+8
 450 0030 C3F31303 		ubfx	r3, r3, #0, #20
 451 0034 1268     		ldr	r2, [r2]
 452 0036 01FB0323 		mla	r3, r1, r3, r2
 453 003a 4360     		str	r3, [r0, #4]
 454              	.LVL49:
 455              	.L41:
 196:bluetooth_rxtx.c **** 
 456              		.loc 1 196 0
 457 003c 3222     		movs	r2, #50
 458 003e 3146     		mov	r1, r6
 459 0040 04F10E00 		add	r0, r4, #14
 460 0044 FFF7FEFF 		bl	memcpy
 461              	.LVL50:
 198:bluetooth_rxtx.c **** 	status = 0;
 462              		.loc 1 198 0
 463 0048 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 201:bluetooth_rxtx.c **** }
 464              		.loc 1 201 0
 465 004a 0120     		movs	r0, #1
 198:bluetooth_rxtx.c **** 	status = 0;
 466              		.loc 1 198 0
 467 004c 6370     		strb	r3, [r4, #1]
 199:bluetooth_rxtx.c **** 
 468              		.loc 1 199 0
 469 004e 0023     		movs	r3, #0
 470 0050 6B70     		strb	r3, [r5, #1]
 202:bluetooth_rxtx.c **** 
 471              		.loc 1 202 0
 472 0052 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 473              	.LVL51:
 474              	.L40:
 187:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 475              		.loc 1 187 0
 476 0054 AB78     		ldrb	r3, [r5, #2]	@ zero_extendqisi2
ARM GAS  /tmp/ccyBazZt.s 			page 49


 477 0056 C370     		strb	r3, [r0, #3]
 188:bluetooth_rxtx.c **** 		f->channel = (uint8_t)((idle_buf_channel - 2402) & 0xff);
 478              		.loc 1 188 0
 479 0058 6B68     		ldr	r3, [r5, #4]
 480 005a 4360     		str	r3, [r0, #4]
 189:bluetooth_rxtx.c **** 		f->rssi_min = rssi_min;
 481              		.loc 1 189 0
 482 005c 2B89     		ldrh	r3, [r5, #8]
 483 005e 623B     		subs	r3, r3, #98
 484 0060 8370     		strb	r3, [r0, #2]
 190:bluetooth_rxtx.c **** 		f->rssi_max = rssi_max;
 485              		.loc 1 190 0
 486 0062 0A4B     		ldr	r3, .L42+12
 487 0064 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 488 0066 4372     		strb	r3, [r0, #9]
 191:bluetooth_rxtx.c **** 		f->rssi_avg = rssi_get_avg(idle_buf_channel);
 489              		.loc 1 191 0
 490 0068 094B     		ldr	r3, .L42+16
 491 006a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 492 006c 0372     		strb	r3, [r0, #8]
 192:bluetooth_rxtx.c **** 		f->rssi_count = rssi_count;
 493              		.loc 1 192 0
 494 006e 2889     		ldrh	r0, [r5, #8]
 495              	.LVL52:
 496 0070 80B2     		uxth	r0, r0
 497 0072 FFF7FEFF 		bl	rssi_get_avg
 498              	.LVL53:
 193:bluetooth_rxtx.c **** 	}
 499              		.loc 1 193 0
 500 0076 074B     		ldr	r3, .L42+20
 192:bluetooth_rxtx.c **** 		f->rssi_count = rssi_count;
 501              		.loc 1 192 0
 502 0078 A072     		strb	r0, [r4, #10]
 193:bluetooth_rxtx.c **** 	}
 503              		.loc 1 193 0
 504 007a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 505 007c E372     		strb	r3, [r4, #11]
 506 007e DDE7     		b	.L41
 507              	.L43:
 508              		.align	2
 509              	.L42:
 510 0080 00000000 		.word	.LANCHOR1
 511 0084 00000000 		.word	clkn
 512 0088 08400040 		.word	1073758216
 513 008c 00000000 		.word	rssi_min
 514 0090 00000000 		.word	rssi_max
 515 0094 00000000 		.word	rssi_count
 516              		.cfi_endproc
 517              	.LFE0:
 519              		.section	.text.cc2400_idle,"ax",%progbits
 520              		.align	1
 521              		.syntax unified
 522              		.thumb
 523              		.thumb_func
 524              		.fpu softvfp
 526              	cc2400_idle:
 527              	.LFB10:
ARM GAS  /tmp/ccyBazZt.s 			page 50


1056:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 528              		.loc 1 1056 0
 529              		.cfi_startproc
 530              		@ args = 0, pretend = 0, frame = 0
 531              		@ frame_needed = 0, uses_anonymous_args = 0
 532 0000 10B5     		push	{r4, lr}
 533              		.cfi_def_cfa_offset 8
 534              		.cfi_offset 4, -8
 535              		.cfi_offset 14, -4
1057:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 536              		.loc 1 1057 0
 537 0002 6420     		movs	r0, #100
 538 0004 FFF7FEFF 		bl	cc2400_strobe
 539              	.LVL54:
 540              	.L45:
1058:bluetooth_rxtx.c **** 
 541              		.loc 1 1058 0 discriminator 1
 542 0008 FFF7FEFF 		bl	cc2400_status
 543              	.LVL55:
 544 000c 10F00404 		ands	r4, r0, #4
 545 0010 FAD1     		bne	.L45
1061:bluetooth_rxtx.c **** 	HGM_CLR;
 546              		.loc 1 1061 0
 547 0012 8022     		movs	r2, #128
 548 0014 214B     		ldr	r3, .L47
1065:bluetooth_rxtx.c **** 	TXLED_CLR;
 549              		.loc 1 1065 0
 550 0016 1021     		movs	r1, #16
1061:bluetooth_rxtx.c **** 	HGM_CLR;
 551              		.loc 1 1061 0
 552 0018 1A60     		str	r2, [r3]
1062:bluetooth_rxtx.c **** #endif
 553              		.loc 1 1062 0
 554 001a 4FF48072 		mov	r2, #256
 555 001e 1A60     		str	r2, [r3]
1065:bluetooth_rxtx.c **** 	TXLED_CLR;
 556              		.loc 1 1065 0
 557 0020 43F8201C 		str	r1, [r3, #-32]
1066:bluetooth_rxtx.c **** 	USRLED_CLR;
 558              		.loc 1 1066 0
 559 0024 43F8202C 		str	r2, [r3, #-32]
1067:bluetooth_rxtx.c **** 
 560              		.loc 1 1067 0
 561 0028 0222     		movs	r2, #2
 562 002a 43F8202C 		str	r2, [r3, #-32]
1069:bluetooth_rxtx.c **** 	dio_ssp_stop();
 563              		.loc 1 1069 0
 564 002e FFF7FEFF 		bl	clkn_stop
 565              	.LVL56:
1070:bluetooth_rxtx.c **** 	cs_reset();
 566              		.loc 1 1070 0
 567 0032 FFF7FEFF 		bl	dio_ssp_stop
 568              	.LVL57:
1071:bluetooth_rxtx.c **** 	rssi_reset();
 569              		.loc 1 1071 0
 570 0036 FFF7FEFF 		bl	cs_reset
 571              	.LVL58:
ARM GAS  /tmp/ccyBazZt.s 			page 51


1072:bluetooth_rxtx.c **** 
 572              		.loc 1 1072 0
 573 003a FFF7FEFF 		bl	rssi_reset
 574              	.LVL59:
1077:bluetooth_rxtx.c **** 	hop_direct_channel = 0;
 575              		.loc 1 1077 0
 576 003e 40F68911 		movw	r1, #2441
1075:bluetooth_rxtx.c **** 	do_hop = 0;
 577              		.loc 1 1075 0
 578 0042 174B     		ldr	r3, .L47+4
1077:bluetooth_rxtx.c **** 	hop_direct_channel = 0;
 579              		.loc 1 1077 0
 580 0044 174A     		ldr	r2, .L47+8
1075:bluetooth_rxtx.c **** 	do_hop = 0;
 581              		.loc 1 1075 0
 582 0046 9C72     		strb	r4, [r3, #10]
1076:bluetooth_rxtx.c **** 	channel = 2441;
 583              		.loc 1 1076 0
 584 0048 DC72     		strb	r4, [r3, #11]
1077:bluetooth_rxtx.c **** 	hop_direct_channel = 0;
 585              		.loc 1 1077 0
 586 004a A2F84C10 		strh	r1, [r2, #76]	@ movhi
1079:bluetooth_rxtx.c **** 	requested_channel = 0;
 587              		.loc 1 1079 0
 588 004e 9E21     		movs	r1, #158
1078:bluetooth_rxtx.c **** 	hop_timeout = 158;
 589              		.loc 1 1078 0
 590 0050 9C81     		strh	r4, [r3, #12]	@ movhi
1079:bluetooth_rxtx.c **** 	requested_channel = 0;
 591              		.loc 1 1079 0
 592 0052 A2F84E10 		strh	r1, [r2, #78]	@ movhi
1081:bluetooth_rxtx.c **** 
 593              		.loc 1 1081 0
 594 0056 40F66211 		movw	r1, #2402
1080:bluetooth_rxtx.c **** 	le_adv_channel = 2402;
 595              		.loc 1 1080 0
 596 005a DC81     		strh	r4, [r3, #14]	@ movhi
1081:bluetooth_rxtx.c **** 
 597              		.loc 1 1081 0
 598 005c A2F85010 		strh	r1, [r2, #80]	@ movhi
1085:bluetooth_rxtx.c **** 	idle_buf_clk100ns = 0;
 599              		.loc 1 1085 0
 600 0060 9C70     		strb	r4, [r3, #2]
1086:bluetooth_rxtx.c **** 	idle_buf_channel = 0;
 601              		.loc 1 1086 0
 602 0062 5C60     		str	r4, [r3, #4]
1087:bluetooth_rxtx.c **** 	dma_discard = 0;
 603              		.loc 1 1087 0
 604 0064 1C81     		strh	r4, [r3, #8]	@ movhi
1088:bluetooth_rxtx.c **** 	status = 0;
 605              		.loc 1 1088 0
 606 0066 1C74     		strb	r4, [r3, #16]
1089:bluetooth_rxtx.c **** 
 607              		.loc 1 1089 0
 608 0068 5C70     		strb	r4, [r3, #1]
1092:bluetooth_rxtx.c **** 	requested_mode = MODE_IDLE;
 609              		.loc 1 1092 0
ARM GAS  /tmp/ccyBazZt.s 			page 52


 610 006a 5C74     		strb	r4, [r3, #17]
1093:bluetooth_rxtx.c **** 	jam_mode = JAM_NONE;
 611              		.loc 1 1093 0
 612 006c 9C74     		strb	r4, [r3, #18]
1094:bluetooth_rxtx.c **** 	ego_mode = EGO_FOLLOW;
 613              		.loc 1 1094 0
 614 006e DC74     		strb	r4, [r3, #19]
1095:bluetooth_rxtx.c **** 
 615              		.loc 1 1095 0
 616 0070 1C75     		strb	r4, [r3, #20]
1097:bluetooth_rxtx.c **** 
 617              		.loc 1 1097 0
 618 0072 1C70     		strb	r4, [r3]
1100:bluetooth_rxtx.c **** 	high_freq = 2483;
 619              		.loc 1 1100 0
 620 0074 4FF41663 		mov	r3, #2400
 621 0078 A2F85230 		strh	r3, [r2, #82]	@ movhi
1101:bluetooth_rxtx.c **** 	rssi_threshold = -30;
 622              		.loc 1 1101 0
 623 007c 40F6B313 		movw	r3, #2483
 624 0080 A2F85430 		strh	r3, [r2, #84]	@ movhi
1102:bluetooth_rxtx.c **** 
 625              		.loc 1 1102 0
 626 0084 E223     		movs	r3, #226
1104:bluetooth_rxtx.c **** 	target.syncword = 0;
 627              		.loc 1 1104 0
 628 0086 0020     		movs	r0, #0
 629 0088 0021     		movs	r1, #0
1102:bluetooth_rxtx.c **** 
 630              		.loc 1 1102 0
 631 008a 82F85630 		strb	r3, [r2, #86]
1104:bluetooth_rxtx.c **** 	target.syncword = 0;
 632              		.loc 1 1104 0
 633 008e 064B     		ldr	r3, .L47+12
 634 0090 C3E90001 		strd	r0, [r3]
1105:bluetooth_rxtx.c **** }
 635              		.loc 1 1105 0
 636 0094 C3E90201 		strd	r0, [r3, #8]
 637 0098 10BD     		pop	{r4, pc}
 638              	.L48:
 639 009a 00BF     		.align	2
 640              	.L47:
 641 009c 5CC00920 		.word	537509980
 642 00a0 00000000 		.word	.LANCHOR1
 643 00a4 00000000 		.word	.LANCHOR0
 644 00a8 00000000 		.word	target
 645              		.cfi_endproc
 646              	.LFE10:
 648              		.section	.text.cb_follow_le,"ax",%progbits
 649              		.align	1
 650              		.global	cb_follow_le
 651              		.syntax unified
 652              		.thumb
 653              		.thumb_func
 654              		.fpu softvfp
 656              	cb_follow_le:
 657              	.LFB26:
ARM GAS  /tmp/ccyBazZt.s 			page 53


2115:bluetooth_rxtx.c **** 	debug_printf("I am in cb\n");
 658              		.loc 1 2115 0
 659              		.cfi_startproc
 660              		@ args = 0, pretend = 0, frame = 0
 661              		@ frame_needed = 0, uses_anonymous_args = 0
 662 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 663              		.cfi_def_cfa_offset 40
 664              		.cfi_offset 3, -40
 665              		.cfi_offset 4, -36
 666              		.cfi_offset 5, -32
 667              		.cfi_offset 6, -28
 668              		.cfi_offset 7, -24
 669              		.cfi_offset 8, -20
 670              		.cfi_offset 9, -16
 671              		.cfi_offset 10, -12
 672              		.cfi_offset 11, -8
 673              		.cfi_offset 14, -4
2118:bluetooth_rxtx.c **** 
 674              		.loc 1 2118 0
 675 0004 3D4D     		ldr	r5, .L69
2116:bluetooth_rxtx.c **** 	int i, j, k;
 676              		.loc 1 2116 0
 677 0006 3E48     		ldr	r0, .L69+4
 678 0008 FFF7FEFF 		bl	debug_printf
 679              	.LVL60:
2118:bluetooth_rxtx.c **** 
 680              		.loc 1 2118 0
 681 000c B5F84C00 		ldrh	r0, [r5, #76]
 682 0010 3C4C     		ldr	r4, .L69+8
 683 0012 80B2     		uxth	r0, r0
 684 0014 FFF7FEFF 		bl	btle_channel_index
 685              	.LVL61:
2120:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 686              		.loc 1 2120 0
 687 0018 0022     		movs	r2, #0
2118:bluetooth_rxtx.c **** 
 688              		.loc 1 2118 0
 689 001a 215C     		ldrb	r1, [r4, r0]	@ zero_extendqisi2
 690              	.LVL62:
 691 001c 2846     		mov	r0, r5
2123:bluetooth_rxtx.c **** 	}
 692              		.loc 1 2123 0
 693 001e 3A4D     		ldr	r5, .L69+12
2121:bluetooth_rxtx.c **** 		access_address >>= 1;
 694              		.loc 1 2121 0
 695 0020 1346     		mov	r3, r2
 696 0022 A646     		mov	lr, r4
 697 0024 AC46     		mov	ip, r5
 698              	.LVL63:
 699              	.L50:
2123:bluetooth_rxtx.c **** 	}
 700              		.loc 1 2123 0 discriminator 3
 701 0026 5C5D     		ldrb	r4, [r3, r5]	@ zero_extendqisi2
2121:bluetooth_rxtx.c **** 		access_address >>= 1;
 702              		.loc 1 2121 0 discriminator 3
 703 0028 0133     		adds	r3, r3, #1
2123:bluetooth_rxtx.c **** 	}
ARM GAS  /tmp/ccyBazZt.s 			page 54


 704              		.loc 1 2123 0 discriminator 3
 705 002a E407     		lsls	r4, r4, #31
2121:bluetooth_rxtx.c **** 		access_address >>= 1;
 706              		.loc 1 2121 0 discriminator 3
 707 002c 1F2B     		cmp	r3, #31
2123:bluetooth_rxtx.c **** 	}
 708              		.loc 1 2123 0 discriminator 3
 709 002e 44EA5202 		orr	r2, r4, r2, lsr #1
 710              	.LVL64:
2121:bluetooth_rxtx.c **** 		access_address >>= 1;
 711              		.loc 1 2121 0 discriminator 3
 712 0032 F8D1     		bne	.L50
2129:bluetooth_rxtx.c **** 
 713              		.loc 1 2129 0
 714 0034 0568     		ldr	r5, [r0]
 715              	.L61:
 716              	.LVL65:
2128:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 717              		.loc 1 2128 0
 718 0036 1CF80340 		ldrb	r4, [ip, r3]	@ zero_extendqisi2
 719 003a E407     		lsls	r4, r4, #31
 720 003c 44EA5202 		orr	r2, r4, r2, lsr #1
 721              	.LVL66:
2129:bluetooth_rxtx.c **** 
 722              		.loc 1 2129 0
 723 0040 AA42     		cmp	r2, r5
 724 0042 56D1     		bne	.L67
 725              	.LBB27:
2143:bluetooth_rxtx.c **** 			}
 726              		.loc 1 2143 0
 727 0044 314E     		ldr	r6, .L69+16
 728              	.LBE27:
 729 0046 0024     		movs	r4, #0
 730              	.LBB32:
 731              	.LBB28:
2139:bluetooth_rxtx.c **** 					}
 732              		.loc 1 2139 0
 733 0048 4FF07F09 		mov	r9, #127
 734 004c 3546     		mov	r5, r6
 735              	.LVL67:
 736              	.L56:
 737              	.LBE28:
 738              	.LBE32:
2121:bluetooth_rxtx.c **** 		access_address >>= 1;
 739              		.loc 1 2121 0
 740 004e 4FF0000A 		mov	r10, #0
 741 0052 5746     		mov	r7, r10
 742 0054 03EBC408 		add	r8, r3, r4, lsl #3
 743              	.LVL68:
 744              	.L55:
 745              	.LBB33:
 746              	.LBB29:
2136:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
 747              		.loc 1 2136 0
 748 0058 07EB0802 		add	r2, r7, r8
 749 005c 6244     		add	r2, r2, ip
2137:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
ARM GAS  /tmp/ccyBazZt.s 			page 55


 750              		.loc 1 2137 0
 751 005e 032C     		cmp	r4, #3
2136:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
 752              		.loc 1 2136 0
 753 0060 12F81F2C 		ldrb	r2, [r2, #-31]	@ zero_extendqisi2
 754              	.LVL69:
2137:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
 755              		.loc 1 2137 0
 756 0064 0CDD     		ble	.L54
2138:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
 757              		.loc 1 2138 0
 758 0066 0EEB010B 		add	fp, lr, r1
 759 006a 9BF828B0 		ldrb	fp, [fp, #40]	@ zero_extendqisi2
2139:bluetooth_rxtx.c **** 					}
 760              		.loc 1 2139 0
 761 006e 0131     		adds	r1, r1, #1
 762              	.LVL70:
2138:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
 763              		.loc 1 2138 0
 764 0070 82EA0B02 		eor	r2, r2, fp
 765              	.LVL71:
2139:bluetooth_rxtx.c **** 					}
 766              		.loc 1 2139 0
 767 0074 B1FBF9FB 		udiv	fp, r1, r9
 768 0078 CBEBCB1B 		rsb	fp, fp, fp, lsl #7
 769 007c A1EB0B01 		sub	r1, r1, fp
 770              	.LVL72:
 771              	.L54:
2141:bluetooth_rxtx.c **** 				}
 772              		.loc 1 2141 0 discriminator 2
 773 0080 BA40     		lsls	r2, r2, r7
 774              	.LVL73:
 775              	.LBE29:
2133:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 776              		.loc 1 2133 0 discriminator 2
 777 0082 0137     		adds	r7, r7, #1
 778              	.LVL74:
 779              	.LBB30:
2141:bluetooth_rxtx.c **** 				}
 780              		.loc 1 2141 0 discriminator 2
 781 0084 42EA0A02 		orr	r2, r2, r10
 782              	.LBE30:
2133:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 783              		.loc 1 2133 0 discriminator 2
 784 0088 082F     		cmp	r7, #8
 785              	.LBB31:
2141:bluetooth_rxtx.c **** 				}
 786              		.loc 1 2141 0 discriminator 2
 787 008a 5FFA82FA 		uxtb	r10, r2
 788              	.LVL75:
 789              	.LBE31:
2133:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 790              		.loc 1 2133 0 discriminator 2
 791 008e E3D1     		bne	.L55
2143:bluetooth_rxtx.c **** 			}
 792              		.loc 1 2143 0 discriminator 2
 793 0090 3268     		ldr	r2, [r6]
ARM GAS  /tmp/ccyBazZt.s 			page 56


 794 0092 02F804A0 		strb	r10, [r2, r4]
 795              	.LBE33:
2131:bluetooth_rxtx.c **** 				u8 byte = 0;
 796              		.loc 1 2131 0 discriminator 2
 797 0096 0134     		adds	r4, r4, #1
 798              	.LVL76:
 799 0098 2E2C     		cmp	r4, #46
 800 009a D8D1     		bne	.L56
2147:bluetooth_rxtx.c **** 				int len		 = (idle_rxbuf[5] & 0x3f) + 2;
 801              		.loc 1 2147 0
 802 009c 0369     		ldr	r3, [r0, #16]
 803 009e 6BB9     		cbnz	r3, .L58
 804              	.LVL77:
 805              	.L60:
2158:bluetooth_rxtx.c **** 			RXLED_SET;
 806              		.loc 1 2158 0
 807 00a0 2968     		ldr	r1, [r5]
 808 00a2 0120     		movs	r0, #1
 809 00a4 FFF7FEFF 		bl	enqueue
 810              	.LVL78:
2159:bluetooth_rxtx.c **** 
 811              		.loc 1 2159 0
 812 00a8 1022     		movs	r2, #16
 813 00aa 194B     		ldr	r3, .L69+20
 814 00ac 1A60     		str	r2, [r3]
2161:bluetooth_rxtx.c **** 
 815              		.loc 1 2161 0
 816 00ae 194B     		ldr	r3, .L69+24
 817 00b0 2868     		ldr	r0, [r5]
 818 00b2 9B69     		ldr	r3, [r3, #24]
 819 00b4 9847     		blx	r3
 820              	.LVL79:
 821              	.L59:
2168:bluetooth_rxtx.c **** //sopan
 822              		.loc 1 2168 0
 823 00b6 0120     		movs	r0, #1
 824 00b8 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 825              	.LVL80:
 826              	.L58:
 827              	.LBB34:
2148:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, (uint8_t*)idle_rxbuf + 4, len);
 828              		.loc 1 2148 0
 829 00bc 3368     		ldr	r3, [r6]
2149:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 830              		.loc 1 2149 0
 831 00be C068     		ldr	r0, [r0, #12]
2148:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, (uint8_t*)idle_rxbuf + 4, len);
 832              		.loc 1 2148 0
 833 00c0 5C79     		ldrb	r4, [r3, #5]	@ zero_extendqisi2
 834              	.LVL81:
2149:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 835              		.loc 1 2149 0
 836 00c2 3168     		ldr	r1, [r6]
 837              	.LVL82:
2148:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, (uint8_t*)idle_rxbuf + 4, len);
 838              		.loc 1 2148 0
 839 00c4 04F03F04 		and	r4, r4, #63
ARM GAS  /tmp/ccyBazZt.s 			page 57


 840              	.LVL83:
2149:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 841              		.loc 1 2149 0
 842 00c8 A21C     		adds	r2, r4, #2
 843              	.LVL84:
 844 00ca 0431     		adds	r1, r1, #4
 845 00cc FFF7FEFF 		bl	btle_crcgen_lut
 846              	.LVL85:
2150:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
 847              		.loc 1 2150 0
 848 00d0 3268     		ldr	r2, [r6]
 849 00d2 04F10803 		add	r3, r4, #8
 850 00d6 D15C     		ldrb	r1, [r2, r3]	@ zero_extendqisi2
2151:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 851              		.loc 1 2151 0
 852 00d8 3268     		ldr	r2, [r6]
 853 00da E31D     		adds	r3, r4, #7
 854 00dc D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
2152:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 855              		.loc 1 2152 0
 856 00de 3268     		ldr	r2, [r6]
 857 00e0 0634     		adds	r4, r4, #6
 858              	.LVL86:
 859 00e2 125D     		ldrb	r2, [r2, r4]	@ zero_extendqisi2
 860              	.LVL87:
2151:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 861              		.loc 1 2151 0
 862 00e4 1B02     		lsls	r3, r3, #8
 863              	.LVL88:
 864 00e6 43EA0143 		orr	r3, r3, r1, lsl #16
2152:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 865              		.loc 1 2152 0
 866 00ea 1343     		orrs	r3, r3, r2
2153:bluetooth_rxtx.c **** 					break;
 867              		.loc 1 2153 0
 868 00ec 9842     		cmp	r0, r3
 869 00ee E2D1     		bne	.L59
 870 00f0 D6E7     		b	.L60
 871              	.LVL89:
 872              	.L67:
 873              	.LBE34:
2126:bluetooth_rxtx.c **** 		access_address >>= 1;
 874              		.loc 1 2126 0 discriminator 2
 875 00f2 0133     		adds	r3, r3, #1
 876              	.LVL90:
 877 00f4 B3F5D87F 		cmp	r3, #432
 878 00f8 9DD1     		bne	.L61
 879 00fa DCE7     		b	.L59
 880              	.L70:
 881              		.align	2
 882              	.L69:
 883 00fc 00000000 		.word	.LANCHOR0
 884 0100 00000000 		.word	.LC3
 885 0104 00000000 		.word	.LANCHOR2
 886 0108 00000000 		.word	unpacked
 887 010c 00000000 		.word	idle_rxbuf
 888 0110 38C00920 		.word	537509944
ARM GAS  /tmp/ccyBazZt.s 			page 58


 889 0114 00000000 		.word	.LANCHOR1
 890              		.cfi_endproc
 891              	.LFE26:
 893              		.global	__aeabi_llsl
 894              		.section	.text.vendor_request_handler,"ax",%progbits
 895              		.align	1
 896              		.syntax unified
 897              		.thumb
 898              		.thumb_func
 899              		.fpu softvfp
 901              	vendor_request_handler:
 902              	.LFB4:
 244:bluetooth_rxtx.c **** 	uint32_t clock;
 903              		.loc 1 244 0
 904              		.cfi_startproc
 905              		@ args = 0, pretend = 0, frame = 0
 906              		@ frame_needed = 0, uses_anonymous_args = 0
 907              	.LVL91:
 908 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 909              		.cfi_def_cfa_offset 24
 910              		.cfi_offset 3, -24
 911              		.cfi_offset 4, -20
 912              		.cfi_offset 5, -16
 913              		.cfi_offset 6, -12
 914              		.cfi_offset 7, -8
 915              		.cfi_offset 14, -4
 244:bluetooth_rxtx.c **** 	uint32_t clock;
 916              		.loc 1 244 0
 917 0002 0E46     		mov	r6, r1
 918              	.LVL92:
 919 0004 1546     		mov	r5, r2
 920 0006 1C46     		mov	r4, r3
 252:bluetooth_rxtx.c **** 
 921              		.loc 1 252 0
 922 0008 4D28     		cmp	r0, #77
 923 000a 00F2A783 		bhi	.L193
 924 000e DFE810F0 		tbh	[pc, r0, lsl #1]
 925              	.LVL93:
 926              	.L74:
 927 0012 6A00     		.2byte	(.L213-.L74)/2
 928 0014 6000     		.2byte	(.L75-.L74)/2
 929 0016 6600     		.2byte	(.L76-.L74)/2
 930 0018 6E00     		.2byte	(.L77-.L74)/2
 931 001a 7400     		.2byte	(.L78-.L74)/2
 932 001c 7A00     		.2byte	(.L79-.L74)/2
 933 001e 7F00     		.2byte	(.L80-.L74)/2
 934 0020 8200     		.2byte	(.L81-.L74)/2
 935 0022 8700     		.2byte	(.L82-.L74)/2
 936 0024 8B00     		.2byte	(.L83-.L74)/2
 937 0026 9000     		.2byte	(.L84-.L74)/2
 938 0028 E200     		.2byte	(.L85-.L74)/2
 939 002a ED00     		.2byte	(.L86-.L74)/2
 940 002c 2C01     		.2byte	(.L232-.L74)/2
 941 002e 9B00     		.2byte	(.L88-.L74)/2
 942 0030 9600     		.2byte	(.L89-.L74)/2
 943 0032 A000     		.2byte	(.L90-.L74)/2
 944 0034 A500     		.2byte	(.L91-.L74)/2
ARM GAS  /tmp/ccyBazZt.s 			page 59


 945 0036 AA00     		.2byte	(.L92-.L74)/2
 946 0038 AC00     		.2byte	(.L93-.L74)/2
 947 003a B200     		.2byte	(.L94-.L74)/2
 948 003c D900     		.2byte	(.L95-.L74)/2
 949 003e DB00     		.2byte	(.L96-.L74)/2
 950 0040 DE00     		.2byte	(.L97-.L74)/2
 951 0042 2601     		.2byte	(.L98-.L74)/2
 952 0044 2901     		.2byte	(.L99-.L74)/2
 953 0046 A503     		.2byte	(.L193-.L74)/2
 954 0048 2E01     		.2byte	(.L100-.L74)/2
 955 004a B600     		.2byte	(.L101-.L74)/2
 956 004c BE00     		.2byte	(.L102-.L74)/2
 957 004e CA00     		.2byte	(.L103-.L74)/2
 958 0050 C800     		.2byte	(.L104-.L74)/2
 959 0052 CC00     		.2byte	(.L105-.L74)/2
 960 0054 5801     		.2byte	(.L106-.L74)/2
 961 0056 4B01     		.2byte	(.L107-.L74)/2
 962 0058 7501     		.2byte	(.L108-.L74)/2
 963 005a 7901     		.2byte	(.L109-.L74)/2
 964 005c 8001     		.2byte	(.L110-.L74)/2
 965 005e 8201     		.2byte	(.L111-.L74)/2
 966 0060 CD01     		.2byte	(.L112-.L74)/2
 967 0062 0502     		.2byte	(.L113-.L74)/2
 968 0064 1E02     		.2byte	(.L114-.L74)/2
 969 0066 6002     		.2byte	(.L115-.L74)/2
 970 0068 7002     		.2byte	(.L116-.L74)/2
 971 006a 7B02     		.2byte	(.L117-.L74)/2
 972 006c 6C00     		.2byte	(.L184-.L74)/2
 973 006e 8502     		.2byte	(.L119-.L74)/2
 974 0070 8902     		.2byte	(.L120-.L74)/2
 975 0072 8F02     		.2byte	(.L121-.L74)/2
 976 0074 9602     		.2byte	(.L122-.L74)/2
 977 0076 A202     		.2byte	(.L123-.L74)/2
 978 0078 0902     		.2byte	(.L124-.L74)/2
 979 007a 1402     		.2byte	(.L125-.L74)/2
 980 007c AB02     		.2byte	(.L126-.L74)/2
 981 007e CE02     		.2byte	(.L127-.L74)/2
 982 0080 6801     		.2byte	(.L128-.L74)/2
 983 0082 4D03     		.2byte	(.L129-.L74)/2
 984 0084 A503     		.2byte	(.L193-.L74)/2
 985 0086 B202     		.2byte	(.L130-.L74)/2
 986 0088 9B03     		.2byte	(.L131-.L74)/2
 987 008a 9F03     		.2byte	(.L132-.L74)/2
 988 008c EF01     		.2byte	(.L133-.L74)/2
 989 008e 0102     		.2byte	(.L134-.L74)/2
 990 0090 2B02     		.2byte	(.L135-.L74)/2
 991 0092 A503     		.2byte	(.L193-.L74)/2
 992 0094 4E00     		.2byte	(.L136-.L74)/2
 993 0096 B502     		.2byte	(.L137-.L74)/2
 994 0098 4901     		.2byte	(.L138-.L74)/2
 995 009a C502     		.2byte	(.L139-.L74)/2
 996 009c 3202     		.2byte	(.L140-.L74)/2
 997 009e 9703     		.2byte	(.L141-.L74)/2
 998 00a0 1503     		.2byte	(.L142-.L74)/2
 999 00a2 D202     		.2byte	(.L143-.L74)/2
 1000 00a4 DD02     		.2byte	(.L144-.L74)/2
 1001 00a6 D002     		.2byte	(.L145-.L74)/2
ARM GAS  /tmp/ccyBazZt.s 			page 60


 1002 00a8 E202     		.2byte	(.L146-.L74)/2
 1003 00aa F002     		.2byte	(.L147-.L74)/2
 1004 00ac 1103     		.2byte	(.L148-.L74)/2
 1005              		.p2align 1
 1006              	.L136:
 252:bluetooth_rxtx.c **** 
 1007              		.loc 1 252 0 is_stmt 0 discriminator 1
 1008 00ae 0023     		movs	r3, #0
 1009              	.LVL94:
 1010              	.L149:
 1011              	.LBB35:
 686:bluetooth_rxtx.c **** 			reg_val = (data[(i*3)+1] << 8) | data[(i*3)+2];
 1012              		.loc 1 686 0 is_stmt 1 discriminator 1
 1013 00b0 3288     		ldrh	r2, [r6]
 1014 00b2 5C1C     		adds	r4, r3, #1
 1015 00b4 DBB2     		uxtb	r3, r3
 1016 00b6 9342     		cmp	r3, r2
 1017 00b8 17D2     		bcs	.L184
 687:bluetooth_rxtx.c **** 			cc2400_set(data[i*3], reg_val);
 1018              		.loc 1 687 0 discriminator 3
 1019 00ba 03EB4303 		add	r3, r3, r3, lsl #1
 1020              	.LVL95:
 1021 00be EA18     		adds	r2, r5, r3
 1022 00c0 5178     		ldrb	r1, [r2, #1]	@ zero_extendqisi2
 1023 00c2 9278     		ldrb	r2, [r2, #2]	@ zero_extendqisi2
 688:bluetooth_rxtx.c **** 		}
 1024              		.loc 1 688 0 discriminator 3
 1025 00c4 E85C     		ldrb	r0, [r5, r3]	@ zero_extendqisi2
 1026 00c6 42EA0121 		orr	r1, r2, r1, lsl #8
 1027 00ca FFF7FEFF 		bl	cc2400_set
 1028              	.LVL96:
 1029 00ce 2346     		mov	r3, r4
 1030 00d0 EEE7     		b	.L149
 1031              	.LVL97:
 1032              	.L75:
 259:bluetooth_rxtx.c **** 		*data_len = 0;
 1033              		.loc 1 259 0
 1034 00d2 0120     		movs	r0, #1
 1035              	.LVL98:
 1036 00d4 A64B     		ldr	r3, .L239
 1037 00d6 9874     		strb	r0, [r3, #18]
 260:bluetooth_rxtx.c **** 		break;
 1038              		.loc 1 260 0
 1039 00d8 0023     		movs	r3, #0
 1040              	.LVL99:
 1041              	.L209:
 561:bluetooth_rxtx.c **** 		break;
 1042              		.loc 1 561 0
 1043 00da 2360     		str	r3, [r4]
 562:bluetooth_rxtx.c **** 
 1044              		.loc 1 562 0
 1045 00dc F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1046              	.LVL100:
 1047              	.L76:
 264:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_SYMBOLS;
 1048              		.loc 1 264 0
 1049 00de 0222     		movs	r2, #2
ARM GAS  /tmp/ccyBazZt.s 			page 61


 1050              	.LVL101:
 1051 00e0 A34B     		ldr	r3, .L239
 1052 00e2 9A72     		strb	r2, [r3, #10]
 1053              	.LVL102:
 1054              	.L217:
 265:bluetooth_rxtx.c **** 		*data_len = 0;
 1055              		.loc 1 265 0
 1056 00e4 9A74     		strb	r2, [r3, #18]
 1057              	.L213:
 266:bluetooth_rxtx.c **** 		break;
 1058              		.loc 1 266 0
 1059 00e6 0023     		movs	r3, #0
 1060              	.LVL103:
 1061              	.L218:
 1062 00e8 2360     		str	r3, [r4]
 1063              	.LVL104:
 1064              	.L184:
 1065              	.LBE35:
 820:bluetooth_rxtx.c **** }
 1066              		.loc 1 820 0
 1067 00ea 0120     		movs	r0, #1
 1068 00ec F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1069              	.LVL105:
 1070              	.L77:
 1071              	.LBB57:
 270:bluetooth_rxtx.c **** 		*data_len = 1;
 1072              		.loc 1 270 0
 1073 00ee A14B     		ldr	r3, .L239+4
 1074 00f0 1B68     		ldr	r3, [r3]
 1075 00f2 C3F34003 		ubfx	r3, r3, #1, #1
 1076              	.L212:
 645:bluetooth_rxtx.c **** 		*data_len = 1;
 1077              		.loc 1 645 0
 1078 00f6 2B70     		strb	r3, [r5]
 1079              	.LVL106:
 1080 00f8 47E0     		b	.L210
 1081              	.LVL107:
 1082              	.L78:
 1083 00fa 0223     		movs	r3, #2
 275:bluetooth_rxtx.c **** 			USRLED_SET;
 1084              		.loc 1 275 0
 1085 00fc 0A88     		ldrh	r2, [r1]
 1086              	.LVL108:
 1087              	.L234:
 312:bluetooth_rxtx.c **** 			CC1V8_SET;
 1088              		.loc 1 312 0
 1089 00fe E2B1     		cbz	r2, .L153
 313:bluetooth_rxtx.c **** 		else
 1090              		.loc 1 313 0
 1091 0100 9D4A     		ldr	r2, .L239+8
 1092              	.L215:
 351:bluetooth_rxtx.c **** 		break;
 1093              		.loc 1 351 0
 1094 0102 1360     		str	r3, [r2]
 1095 0104 F1E7     		b	.L184
 1096              	.LVL109:
 1097              	.L79:
ARM GAS  /tmp/ccyBazZt.s 			page 62


 282:bluetooth_rxtx.c **** 		*data_len = 1;
 1098              		.loc 1 282 0
 1099 0106 9B4B     		ldr	r3, .L239+4
 1100 0108 1B68     		ldr	r3, [r3]
 1101 010a C3F30013 		ubfx	r3, r3, #4, #1
 1102 010e F2E7     		b	.L212
 1103              	.L80:
 287:bluetooth_rxtx.c **** 			RXLED_SET;
 1104              		.loc 1 287 0
 1105 0110 0A88     		ldrh	r2, [r1]
 1106              	.LVL110:
 1107 0112 1023     		movs	r3, #16
 1108 0114 F3E7     		b	.L234
 1109              	.LVL111:
 1110              	.L81:
 294:bluetooth_rxtx.c **** 		*data_len = 1;
 1111              		.loc 1 294 0
 1112 0116 974B     		ldr	r3, .L239+4
 1113              	.L229:
 343:bluetooth_rxtx.c **** 		*data_len = 1;
 1114              		.loc 1 343 0
 1115 0118 1B68     		ldr	r3, [r3]
 1116 011a C3F30023 		ubfx	r3, r3, #8, #1
 1117 011e EAE7     		b	.L212
 1118              	.L82:
 299:bluetooth_rxtx.c **** 			TXLED_SET;
 1119              		.loc 1 299 0
 1120 0120 0A88     		ldrh	r2, [r1]
 1121              	.LVL112:
 1122 0122 4FF48073 		mov	r3, #256
 1123 0126 EAE7     		b	.L234
 1124              	.LVL113:
 1125              	.L83:
 307:bluetooth_rxtx.c **** 		*data_len = 1;
 1126              		.loc 1 307 0
 1127 0128 924B     		ldr	r3, .L239+4
 1128 012a 1B68     		ldr	r3, [r3]
 1129 012c C3F34023 		ubfx	r3, r3, #9, #1
 1130 0130 E1E7     		b	.L212
 1131              	.L84:
 312:bluetooth_rxtx.c **** 			CC1V8_SET;
 1132              		.loc 1 312 0
 1133 0132 0A88     		ldrh	r2, [r1]
 1134              	.LVL114:
 1135 0134 4FF40073 		mov	r3, #512
 1136 0138 E1E7     		b	.L234
 1137              	.L153:
 315:bluetooth_rxtx.c **** 		break;
 1138              		.loc 1 315 0
 1139 013a 904A     		ldr	r2, .L239+12
 1140 013c E1E7     		b	.L215
 1141              	.LVL115:
 1142              	.L89:
 319:bluetooth_rxtx.c **** 		break;
 1143              		.loc 1 319 0
 1144 013e 2146     		mov	r1, r4
 1145              	.LVL116:
ARM GAS  /tmp/ccyBazZt.s 			page 63


 1146 0140 1046     		mov	r0, r2
 1147              	.LVL117:
 1148 0142 FFF7FEFF 		bl	get_part_num
 1149              	.LVL118:
 1150 0146 D0E7     		b	.L184
 1151              	.LVL119:
 1152              	.L88:
 327:bluetooth_rxtx.c **** 		break;
 1153              		.loc 1 327 0
 1154 0148 2146     		mov	r1, r4
 1155              	.LVL120:
 1156 014a 1046     		mov	r0, r2
 1157              	.LVL121:
 1158 014c FFF7FEFF 		bl	get_device_serial
 1159              	.LVL122:
 1160 0150 CBE7     		b	.L184
 1161              	.LVL123:
 1162              	.L90:
 332:bluetooth_rxtx.c **** 		*data_len = 1;
 1163              		.loc 1 332 0
 1164 0152 8B4B     		ldr	r3, .L239+16
 1165 0154 1B68     		ldr	r3, [r3]
 1166 0156 C3F3C013 		ubfx	r3, r3, #7, #1
 1167 015a CCE7     		b	.L212
 1168              	.L91:
 1169 015c 8023     		movs	r3, #128
 337:bluetooth_rxtx.c **** 			PAEN_SET;
 1170              		.loc 1 337 0
 1171 015e 0A88     		ldrh	r2, [r1]
 1172              	.LVL124:
 1173              	.L238:
 348:bluetooth_rxtx.c **** 			HGM_SET;
 1174              		.loc 1 348 0
 1175 0160 3AB1     		cbz	r2, .L155
 349:bluetooth_rxtx.c **** 		else
 1176              		.loc 1 349 0
 1177 0162 884A     		ldr	r2, .L239+20
 1178 0164 CDE7     		b	.L215
 1179              	.LVL125:
 1180              	.L92:
 343:bluetooth_rxtx.c **** 		*data_len = 1;
 1181              		.loc 1 343 0
 1182 0166 864B     		ldr	r3, .L239+16
 1183 0168 D6E7     		b	.L229
 1184              	.L93:
 348:bluetooth_rxtx.c **** 			HGM_SET;
 1185              		.loc 1 348 0
 1186 016a 0A88     		ldrh	r2, [r1]
 1187              	.LVL126:
 1188 016c 4FF48073 		mov	r3, #256
 1189 0170 F6E7     		b	.L238
 1190              	.L155:
 351:bluetooth_rxtx.c **** 		break;
 1191              		.loc 1 351 0
 1192 0172 854A     		ldr	r2, .L239+24
 1193 0174 C5E7     		b	.L215
 1194              	.LVL127:
ARM GAS  /tmp/ccyBazZt.s 			page 64


 1195              	.L94:
 359:bluetooth_rxtx.c **** 		break;
 1196              		.loc 1 359 0
 1197 0176 0322     		movs	r2, #3
 1198              	.LVL128:
 1199              	.L216:
 716:bluetooth_rxtx.c **** 		break;
 1200              		.loc 1 716 0
 1201 0178 7D4B     		ldr	r3, .L239
 1202 017a 9A74     		strb	r2, [r3, #18]
 1203 017c B5E7     		b	.L184
 1204              	.LVL129:
 1205              	.L101:
 363:bluetooth_rxtx.c **** 		*data_len = 1;
 1206              		.loc 1 363 0
 1207 017e 0520     		movs	r0, #5
 1208              	.LVL130:
 1209 0180 FFF7FEFF 		bl	cc2400_get
 1210              	.LVL131:
 1211 0184 00F00700 		and	r0, r0, #7
 1212 0188 2870     		strb	r0, [r5]
 1213              	.LVL132:
 1214              	.L210:
 660:bluetooth_rxtx.c **** 		}
 1215              		.loc 1 660 0
 1216 018a 0120     		movs	r0, #1
 1217 018c B8E0     		b	.L211
 1218              	.LVL133:
 1219              	.L102:
 368:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 1220              		.loc 1 368 0
 1221 018e 0988     		ldrh	r1, [r1]
 1222              	.LVL134:
 1223 0190 0729     		cmp	r1, #7
 1224 0192 00F2E382 		bhi	.L193
 369:bluetooth_rxtx.c **** 		} else {
 1225              		.loc 1 369 0
 1226 0196 0520     		movs	r0, #5
 1227              	.LVL135:
 1228 0198 41F00801 		orr	r1, r1, #8
 1229              	.L219:
 682:bluetooth_rxtx.c **** 		break;
 1230              		.loc 1 682 0
 1231 019c FFF7FEFF 		bl	cc2400_set
 1232              	.LVL136:
 1233 01a0 A3E7     		b	.L184
 1234              	.LVL137:
 1235              	.L104:
 376:bluetooth_rxtx.c **** 		break;
 1236              		.loc 1 376 0
 1237 01a2 0522     		movs	r2, #5
 1238              	.LVL138:
 1239 01a4 E8E7     		b	.L216
 1240              	.LVL139:
 1241              	.L103:
 380:bluetooth_rxtx.c **** 		break;
 1242              		.loc 1 380 0
ARM GAS  /tmp/ccyBazZt.s 			page 65


 1243 01a6 0622     		movs	r2, #6
 1244              	.LVL140:
 1245 01a8 E6E7     		b	.L216
 1246              	.LVL141:
 1247              	.L105:
 385:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 1248              		.loc 1 385 0
 1249 01aa 784B     		ldr	r3, .L239+28
 1250 01ac 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1251              	.LVL142:
 1252 01ae 2A70     		strb	r2, [r5]
 1253              	.LVL143:
 386:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 1254              		.loc 1 386 0
 1255 01b0 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 1256 01b2 6A70     		strb	r2, [r5, #1]
 387:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 1257              		.loc 1 387 0
 1258 01b4 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 1259 01b6 AA70     		strb	r2, [r5, #2]
 388:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 1260              		.loc 1 388 0
 1261 01b8 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 1262 01ba EA70     		strb	r2, [r5, #3]
 389:bluetooth_rxtx.c **** 		*data_len = 5;
 1263              		.loc 1 389 0
 1264 01bc 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
 1265 01be 2B71     		strb	r3, [r5, #4]
 390:bluetooth_rxtx.c **** 		break;
 1266              		.loc 1 390 0
 1267 01c0 0523     		movs	r3, #5
 1268 01c2 91E7     		b	.L218
 1269              	.LVL144:
 1270              	.L95:
 394:bluetooth_rxtx.c **** 		break;
 1271              		.loc 1 394 0
 1272 01c4 0022     		movs	r2, #0
 1273              	.LVL145:
 1274 01c6 D7E7     		b	.L216
 1275              	.LVL146:
 1276              	.L96:
 398:bluetooth_rxtx.c **** 		*data_len = 1;
 1277              		.loc 1 398 0
 1278 01c8 694B     		ldr	r3, .L239
 1279              	.L230:
 506:bluetooth_rxtx.c **** 		*data_len = 1;
 1280              		.loc 1 506 0
 1281 01ca 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1282 01cc 93E7     		b	.L212
 1283              	.L97:
 403:bluetooth_rxtx.c **** 		break;
 1284              		.loc 1 403 0
 1285 01ce 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 1286              	.LVL147:
 1287 01d0 674B     		ldr	r3, .L239
 1288 01d2 1A70     		strb	r2, [r3]
 1289 01d4 89E7     		b	.L184
ARM GAS  /tmp/ccyBazZt.s 			page 66


 1290              	.LVL148:
 1291              	.L85:
 407:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 1292              		.loc 1 407 0
 1293 01d6 6E4B     		ldr	r3, .L239+32
 1294 01d8 B3F84C20 		ldrh	r2, [r3, #76]
 1295              	.LVL149:
 1296 01dc 2A70     		strb	r2, [r5]
 1297              	.LVL150:
 408:bluetooth_rxtx.c **** 		*data_len = 2;
 1298              		.loc 1 408 0
 1299 01de B3F84C30 		ldrh	r3, [r3, #76]
 1300 01e2 C3F30723 		ubfx	r3, r3, #8, #8
 1301              	.L231:
 640:bluetooth_rxtx.c **** 		*data_len = 2;
 1302              		.loc 1 640 0
 1303 01e6 6B70     		strb	r3, [r5, #1]
 1304              	.LVL151:
 1305              	.L225:
 678:bluetooth_rxtx.c **** 		break;
 1306              		.loc 1 678 0
 1307 01e8 0223     		movs	r3, #2
 1308 01ea 7DE7     		b	.L218
 1309              	.LVL152:
 1310              	.L86:
 413:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 1311              		.loc 1 413 0
 1312 01ec 0A88     		ldrh	r2, [r1]
 1313              	.LVL153:
 415:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 1314              		.loc 1 415 0
 1315 01ee 40F6EA21 		movw	r1, #2794
 1316              	.LVL154:
 413:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 1317              		.loc 1 413 0
 1318 01f2 5F4B     		ldr	r3, .L239
 1319 01f4 DA81     		strh	r2, [r3, #14]	@ movhi
 415:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 1320              		.loc 1 415 0
 1321 01f6 DA89     		ldrh	r2, [r3, #14]
 1322 01f8 92B2     		uxth	r2, r2
 1323 01fa 8A42     		cmp	r2, r1
 1324 01fc 19D9     		bls	.L156
 416:bluetooth_rxtx.c **** 			requested_channel = 2402;
 1325              		.loc 1 416 0
 1326 01fe 0122     		movs	r2, #1
 1327 0200 9A72     		strb	r2, [r3, #10]
 417:bluetooth_rxtx.c **** 		}
 1328              		.loc 1 417 0
 1329 0202 40F66212 		movw	r2, #2402
 1330              	.L159:
 423:bluetooth_rxtx.c **** 		}
 1331              		.loc 1 423 0 discriminator 4
 1332 0206 DA81     		strh	r2, [r3, #14]	@ movhi
 426:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE) {
 1333              		.loc 1 426 0 discriminator 4
 1334 0208 D989     		ldrh	r1, [r3, #14]
ARM GAS  /tmp/ccyBazZt.s 			page 67


 1335 020a 614A     		ldr	r2, .L239+32
 1336 020c 89B2     		uxth	r1, r1
 1337 020e A2F85010 		strh	r1, [r2, #80]	@ movhi
 427:bluetooth_rxtx.c **** 			channel = requested_channel;
 1338              		.loc 1 427 0 discriminator 4
 1339 0212 597C     		ldrb	r1, [r3, #17]	@ zero_extendqisi2
 1340 0214 0929     		cmp	r1, #9
 1341 0216 3FF468AF 		beq	.L184
 428:bluetooth_rxtx.c **** 			requested_channel = 0;
 1342              		.loc 1 428 0
 1343 021a D989     		ldrh	r1, [r3, #14]
 1344 021c 89B2     		uxth	r1, r1
 1345 021e A2F84C10 		strh	r1, [r2, #76]	@ movhi
 429:bluetooth_rxtx.c **** 
 1346              		.loc 1 429 0
 1347 0222 0021     		movs	r1, #0
 1348 0224 D981     		strh	r1, [r3, #14]	@ movhi
 435:bluetooth_rxtx.c **** 		}
 1349              		.loc 1 435 0
 1350 0226 B2F84C00 		ldrh	r0, [r2, #76]
 1351              	.LVL155:
 1352              	.L220:
 671:bluetooth_rxtx.c **** 		break;
 1353              		.loc 1 671 0
 1354 022a 80B2     		uxth	r0, r0
 1355 022c FFF7FEFF 		bl	cs_threshold_calc_and_set
 1356              	.LVL156:
 1357 0230 5BE7     		b	.L184
 1358              	.LVL157:
 1359              	.L156:
 421:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 1360              		.loc 1 421 0
 1361 0232 0022     		movs	r2, #0
 1362 0234 9A72     		strb	r2, [r3, #10]
 422:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 1363              		.loc 1 422 0
 1364 0236 40F6DC02 		movw	r2, #2268
 1365 023a D989     		ldrh	r1, [r3, #14]
 1366 023c 89B2     		uxth	r1, r1
 1367 023e 9142     		cmp	r1, r2
 423:bluetooth_rxtx.c **** 		}
 1368              		.loc 1 423 0
 1369 0240 40F6E921 		movw	r1, #2793
 422:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 1370              		.loc 1 422 0
 1371 0244 84BF     		itt	hi
 1372 0246 DA89     		ldrhhi	r2, [r3, #14]
 1373 0248 92B2     		uxthhi	r2, r2
 1374 024a DA81     		strh	r2, [r3, #14]	@ movhi
 423:bluetooth_rxtx.c **** 		}
 1375              		.loc 1 423 0
 1376 024c DA89     		ldrh	r2, [r3, #14]
 1377 024e 92B2     		uxth	r2, r2
 1378 0250 8A42     		cmp	r2, r1
 1379 0252 96BF     		itet	ls
 1380 0254 DA89     		ldrhls	r2, [r3, #14]
 1381 0256 40F6EA22 		movwhi	r2, #2794
ARM GAS  /tmp/ccyBazZt.s 			page 68


 1382 025a 92B2     		uxthls	r2, r2
 1383 025c D3E7     		b	.L159
 1384              	.LVL158:
 1385              	.L98:
 441:bluetooth_rxtx.c **** 		*data_len = 0; /* should never return */
 1386              		.loc 1 441 0
 1387 025e FFF7FEFF 		bl	set_isp
 1388              	.LVL159:
 1389 0262 40E7     		b	.L213
 1390              	.LVL160:
 1391              	.L99:
 446:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 1392              		.loc 1 446 0
 1393 0264 4B4A     		ldr	r2, .L239+36
 1394              	.LVL161:
 1395 0266 4C4B     		ldr	r3, .L239+40
 1396 0268 1A60     		str	r2, [r3]
 1397              	.L232:
 447:bluetooth_rxtx.c **** 		break;
 1398              		.loc 1 447 0
 1399 026a 0B22     		movs	r2, #11
 1400 026c 84E7     		b	.L216
 1401              	.LVL162:
 1402              	.L100:
 451:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 1403              		.loc 1 451 0
 1404 026e 6FF40060 		mvn	r0, #2048
 1405              	.LVL163:
 1406 0272 0A88     		ldrh	r2, [r1]
 1407              	.LVL164:
 1408 0274 1318     		adds	r3, r2, r0
 1409 0276 B3F5806F 		cmp	r3, #1024
 1410 027a 80F06F82 		bcs	.L193
 452:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 1411              		.loc 1 452 0 discriminator 1
 1412 027e 4B88     		ldrh	r3, [r1, #2]
 451:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 1413              		.loc 1 451 0 discriminator 1
 1414 0280 6FF40061 		mvn	r1, #2048
 1415              	.LVL165:
 1416 0284 5918     		adds	r1, r3, r1
 1417 0286 B1F5806F 		cmp	r1, #1024
 1418 028a 80F06782 		bcs	.L193
 452:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 1419              		.loc 1 452 0 discriminator 1
 1420 028e 9A42     		cmp	r2, r3
 1421 0290 00F26482 		bhi	.L193
 455:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 1422              		.loc 1 455 0
 1423 0294 3E49     		ldr	r1, .L239+32
 1424 0296 A1F85220 		strh	r2, [r1, #82]	@ movhi
 457:bluetooth_rxtx.c **** 		*data_len = 0;
 1425              		.loc 1 457 0
 1426 029a 0422     		movs	r2, #4
 456:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
 1427              		.loc 1 456 0
 1428 029c A1F85430 		strh	r3, [r1, #84]	@ movhi
ARM GAS  /tmp/ccyBazZt.s 			page 69


 1429              	.LVL166:
 1430              	.L224:
 707:bluetooth_rxtx.c **** 		*data_len = 0;
 1431              		.loc 1 707 0
 1432 02a0 334B     		ldr	r3, .L239
 1433 02a2 1FE7     		b	.L217
 1434              	.LVL167:
 1435              	.L138:
 462:bluetooth_rxtx.c **** 		*data_len = 0;
 1436              		.loc 1 462 0
 1437 02a4 0F22     		movs	r2, #15
 1438              	.LVL168:
 1439 02a6 FBE7     		b	.L224
 1440              	.LVL169:
 1441              	.L107:
 467:bluetooth_rxtx.c **** 			return 0;
 1442              		.loc 1 467 0
 1443 02a8 0B88     		ldrh	r3, [r1]
 1444 02aa B3F5807F 		cmp	r3, #256
 1445 02ae 00F25582 		bhi	.L193
 469:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 1446              		.loc 1 469 0
 1447 02b2 374A     		ldr	r2, .L239+32
 1448              	.LVL170:
 1449 02b4 C3F13603 		rsb	r3, r3, #54
 1450 02b8 5BB2     		sxtb	r3, r3
 1451 02ba 82F85630 		strb	r3, [r2, #86]
 470:bluetooth_rxtx.c **** 		*data_len = 0;
 1452              		.loc 1 470 0
 1453 02be 0722     		movs	r2, #7
 1454 02c0 EEE7     		b	.L224
 1455              	.LVL171:
 1456              	.L106:
 475:bluetooth_rxtx.c **** 		data[1] = 0x00;
 1457              		.loc 1 475 0
 1458 02c2 0023     		movs	r3, #0
 478:bluetooth_rxtx.c **** 		data[2] = length;
 1459              		.loc 1 478 0
 1460 02c4 3548     		ldr	r0, .L239+44
 1461              	.LVL172:
 475:bluetooth_rxtx.c **** 		data[1] = 0x00;
 1462              		.loc 1 475 0
 1463 02c6 1370     		strb	r3, [r2]
 1464              	.LVL173:
 476:bluetooth_rxtx.c **** 
 1465              		.loc 1 476 0
 1466 02c8 5370     		strb	r3, [r2, #1]
 478:bluetooth_rxtx.c **** 		data[2] = length;
 1467              		.loc 1 478 0
 1468 02ca FFF7FEFF 		bl	strlen
 1469              	.LVL174:
 1470 02ce C6B2     		uxtb	r6, r0
 1471              	.LVL175:
 1472 02d0 A870     		strb	r0, [r5, #2]
 481:bluetooth_rxtx.c **** 
 1473              		.loc 1 481 0
 1474 02d2 3246     		mov	r2, r6
ARM GAS  /tmp/ccyBazZt.s 			page 70


 1475 02d4 3149     		ldr	r1, .L239+44
 1476 02d6 E81C     		adds	r0, r5, #3
 1477 02d8 FFF7FEFF 		bl	memcpy
 1478              	.LVL176:
 483:bluetooth_rxtx.c **** 		break;
 1479              		.loc 1 483 0
 1480 02dc 0336     		adds	r6, r6, #3
 1481              	.LVL177:
 1482              	.L221:
 490:bluetooth_rxtx.c **** 		break;
 1483              		.loc 1 490 0
 1484 02de 2660     		str	r6, [r4]
 1485 02e0 03E7     		b	.L184
 1486              	.LVL178:
 1487              	.L128:
 487:bluetooth_rxtx.c **** 		data[0] = length;
 1488              		.loc 1 487 0
 1489 02e2 2F48     		ldr	r0, .L239+48
 1490              	.LVL179:
 1491 02e4 FFF7FEFF 		bl	strlen
 1492              	.LVL180:
 1493 02e8 C6B2     		uxtb	r6, r0
 1494              	.LVL181:
 1495 02ea 05F8010B 		strb	r0, [r5], #1
 1496              	.LVL182:
 489:bluetooth_rxtx.c **** 		*data_len = 1 + length;
 1497              		.loc 1 489 0
 1498 02ee 3246     		mov	r2, r6
 1499 02f0 2B49     		ldr	r1, .L239+48
 1500 02f2 2846     		mov	r0, r5
 1501 02f4 FFF7FEFF 		bl	memcpy
 1502              	.LVL183:
 490:bluetooth_rxtx.c **** 		break;
 1503              		.loc 1 490 0
 1504 02f8 0136     		adds	r6, r6, #1
 1505              	.LVL184:
 1506 02fa F0E7     		b	.L221
 1507              	.LVL185:
 1508              	.L108:
 496:bluetooth_rxtx.c **** 		*data_len = 1;
 1509              		.loc 1 496 0
 1510 02fc 0120     		movs	r0, #1
 1511              	.LVL186:
 1512 02fe 1070     		strb	r0, [r2]
 1513              	.LVL187:
 1514              	.L211:
 660:bluetooth_rxtx.c **** 		}
 1515              		.loc 1 660 0
 1516 0300 2060     		str	r0, [r4]
 1517 0302 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1518              	.LVL188:
 1519              	.L109:
 501:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 1520              		.loc 1 501 0
 1521 0304 0A88     		ldrh	r2, [r1]
 1522              	.LVL189:
 1523 0306 274B     		ldr	r3, .L239+52
ARM GAS  /tmp/ccyBazZt.s 			page 71


 1524 0308 1A70     		strb	r2, [r3]
 1525              	.LVL190:
 1526              	.L222:
 671:bluetooth_rxtx.c **** 		break;
 1527              		.loc 1 671 0
 1528 030a 214B     		ldr	r3, .L239+32
 1529 030c B3F84C00 		ldrh	r0, [r3, #76]
 1530 0310 8BE7     		b	.L220
 1531              	.LVL191:
 1532              	.L110:
 506:bluetooth_rxtx.c **** 		*data_len = 1;
 1533              		.loc 1 506 0
 1534 0312 244B     		ldr	r3, .L239+52
 1535 0314 59E7     		b	.L230
 1536              	.L111:
 511:bluetooth_rxtx.c **** 		target.syncword = 0;
 1537              		.loc 1 511 0
 1538 0316 0022     		movs	r2, #0
 1539              	.LVL192:
 1540 0318 0023     		movs	r3, #0
 512:bluetooth_rxtx.c **** 		for(int i=0; i < 8; i++) {
 1541              		.loc 1 512 0
 1542 031a 0026     		movs	r6, #0
 511:bluetooth_rxtx.c **** 		target.syncword = 0;
 1543              		.loc 1 511 0
 1544 031c 224C     		ldr	r4, .L239+56
 1545              	.LVL193:
 1546 031e 6F1E     		subs	r7, r5, #1
 1547 0320 C4E90023 		strd	r2, [r4]
 512:bluetooth_rxtx.c **** 		for(int i=0; i < 8; i++) {
 1548              		.loc 1 512 0
 1549 0324 C4E90223 		strd	r2, [r4, #8]
 1550              	.LVL194:
 1551              	.L161:
 1552              	.LBB36:
 514:bluetooth_rxtx.c **** 		}
 1553              		.loc 1 514 0 discriminator 3
 1554 0328 3246     		mov	r2, r6
 1555 032a 17F8010F 		ldrb	r0, [r7, #1]!	@ zero_extendqisi2
 1556              	.LVL195:
 1557 032e 0021     		movs	r1, #0
 1558 0330 FFF7FEFF 		bl	__aeabi_llsl
 1559              	.LVL196:
 1560 0334 D4E90023 		ldrd	r2, [r4]
 1561 0338 0836     		adds	r6, r6, #8
 1562 033a 1043     		orrs	r0, r0, r2
 1563 033c 1943     		orrs	r1, r1, r3
 513:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 1564              		.loc 1 513 0 discriminator 3
 1565 033e 402E     		cmp	r6, #64
 514:bluetooth_rxtx.c **** 		}
 1566              		.loc 1 514 0 discriminator 3
 1567 0340 C4E90001 		strd	r0, [r4]
 1568              	.LVL197:
 513:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 1569              		.loc 1 513 0 discriminator 3
 1570 0344 F0D1     		bne	.L161
ARM GAS  /tmp/ccyBazZt.s 			page 72


 1571 0346 0026     		movs	r6, #0
 1572 0348 0735     		adds	r5, r5, #7
 1573              	.LVL198:
 1574              	.L162:
 1575              	.LBE36:
 1576              	.LBB37:
 517:bluetooth_rxtx.c **** 		}
 1577              		.loc 1 517 0 discriminator 3
 1578 034a 3246     		mov	r2, r6
 1579 034c 15F8010F 		ldrb	r0, [r5, #1]!	@ zero_extendqisi2
 1580              	.LVL199:
 1581 0350 0021     		movs	r1, #0
 1582 0352 FFF7FEFF 		bl	__aeabi_llsl
 1583              	.LVL200:
 1584 0356 D4E90223 		ldrd	r2, [r4, #8]
 1585 035a 0836     		adds	r6, r6, #8
 1586 035c 1043     		orrs	r0, r0, r2
 1587 035e 1943     		orrs	r1, r1, r3
 516:bluetooth_rxtx.c **** 			target.syncword |= (uint64_t)data[i+8] << 8*i;
 1588              		.loc 1 516 0 discriminator 3
 1589 0360 402E     		cmp	r6, #64
 517:bluetooth_rxtx.c **** 		}
 1590              		.loc 1 517 0 discriminator 3
 1591 0362 C4E90201 		strd	r0, [r4, #8]
 1592              	.LVL201:
 516:bluetooth_rxtx.c **** 			target.syncword |= (uint64_t)data[i+8] << 8*i;
 1593              		.loc 1 516 0 discriminator 3
 1594 0366 F0D1     		bne	.L162
 1595              	.LBE37:
 519:bluetooth_rxtx.c **** 		break;
 1596              		.loc 1 519 0
 1597 0368 FFF7FEFF 		bl	precalc
 1598              	.LVL202:
 1599 036c BDE6     		b	.L184
 1600              	.L240:
 1601 036e 00BF     		.align	2
 1602              	.L239:
 1603 0370 00000000 		.word	.LANCHOR1
 1604 0374 34C00920 		.word	537509940
 1605 0378 38C00920 		.word	537509944
 1606 037c 3CC00920 		.word	537509948
 1607 0380 54C00920 		.word	537509972
 1608 0384 58C00920 		.word	537509976
 1609 0388 5CC00920 		.word	537509980
 1610 038c 00000000 		.word	rr
 1611 0390 00000000 		.word	.LANCHOR0
 1612 0394 21BB0543 		.word	1124449057
 1613 0398 00000000 		.word	bootloader_ctrl
 1614 039c 0C000000 		.word	.LC4
 1615 03a0 A7000000 		.word	.LANCHOR2+167
 1616 03a4 00000000 		.word	cs_threshold_req
 1617 03a8 00000000 		.word	target
 1618              	.LVL203:
 1619              	.L112:
 523:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 1620              		.loc 1 523 0
 1621 03ac 0022     		movs	r2, #0
ARM GAS  /tmp/ccyBazZt.s 			page 73


 1622              	.LVL204:
 1623 03ae A94B     		ldr	r3, .L241
 1624 03b0 E81C     		adds	r0, r5, #3
 1625              	.LVL205:
 1626 03b2 1A60     		str	r2, [r3]
 1627              	.LVL206:
 1628 03b4 6A1E     		subs	r2, r5, #1
 1629              	.LVL207:
 1630              	.L163:
 1631              	.LBB38:
 525:bluetooth_rxtx.c **** 			clkn_offset |= data[i];
 1632              		.loc 1 525 0 discriminator 3
 1633 03b6 1968     		ldr	r1, [r3]
 1634 03b8 0902     		lsls	r1, r1, #8
 1635 03ba 1960     		str	r1, [r3]
 526:bluetooth_rxtx.c **** 		}
 1636              		.loc 1 526 0 discriminator 3
 1637 03bc 12F8011F 		ldrb	r1, [r2, #1]!	@ zero_extendqisi2
 1638              	.LVL208:
 1639 03c0 1C68     		ldr	r4, [r3]
 524:bluetooth_rxtx.c **** 			clkn_offset <<= 8;
 1640              		.loc 1 524 0 discriminator 3
 1641 03c2 8242     		cmp	r2, r0
 526:bluetooth_rxtx.c **** 		}
 1642              		.loc 1 526 0 discriminator 3
 1643 03c4 41EA0401 		orr	r1, r1, r4
 1644 03c8 1960     		str	r1, [r3]
 1645              	.LVL209:
 524:bluetooth_rxtx.c **** 			clkn_offset <<= 8;
 1646              		.loc 1 524 0 discriminator 3
 1647 03ca F4D1     		bne	.L163
 1648              	.LBE38:
 528:bluetooth_rxtx.c **** 		dma_discard = 1;
 1649              		.loc 1 528 0
 1650 03cc 0222     		movs	r2, #2
 1651              	.LVL210:
 529:bluetooth_rxtx.c **** 		DIO_SSEL_SET;
 1652              		.loc 1 529 0
 1653 03ce 0120     		movs	r0, #1
 530:bluetooth_rxtx.c **** 		clk100ns_offset = (data[4] << 8) | (data[5] << 0);
 1654              		.loc 1 530 0
 1655 03d0 4FF08051 		mov	r1, #268435456
 528:bluetooth_rxtx.c **** 		dma_discard = 1;
 1656              		.loc 1 528 0
 1657 03d4 A04B     		ldr	r3, .L241+4
 1658 03d6 9A72     		strb	r2, [r3, #10]
 530:bluetooth_rxtx.c **** 		clk100ns_offset = (data[4] << 8) | (data[5] << 0);
 1659              		.loc 1 530 0
 1660 03d8 A04A     		ldr	r2, .L241+8
 529:bluetooth_rxtx.c **** 		DIO_SSEL_SET;
 1661              		.loc 1 529 0
 1662 03da 1874     		strb	r0, [r3, #16]
 530:bluetooth_rxtx.c **** 		clk100ns_offset = (data[4] << 8) | (data[5] << 0);
 1663              		.loc 1 530 0
 1664 03dc 1160     		str	r1, [r2]
 531:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 1665              		.loc 1 531 0
ARM GAS  /tmp/ccyBazZt.s 			page 74


 1666 03de 2979     		ldrb	r1, [r5, #4]	@ zero_extendqisi2
 1667 03e0 6A79     		ldrb	r2, [r5, #5]	@ zero_extendqisi2
 1668 03e2 42EA0122 		orr	r2, r2, r1, lsl #8
 1669 03e6 9E49     		ldr	r1, .L241+12
 1670 03e8 0A80     		strh	r2, [r1]	@ movhi
 532:bluetooth_rxtx.c **** 		break;
 1671              		.loc 1 532 0
 1672 03ea 0822     		movs	r2, #8
 1673 03ec 9A74     		strb	r2, [r3, #18]
 533:bluetooth_rxtx.c **** 
 1674              		.loc 1 533 0
 1675 03ee F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1676              	.LVL211:
 1677              	.L133:
 536:bluetooth_rxtx.c **** 		requested_mode = MODE_AFH;
 1678              		.loc 1 536 0
 1679 03f0 0522     		movs	r2, #5
 1680              	.LVL212:
 1681 03f2 994B     		ldr	r3, .L241+4
 1682              	.LBB39:
 540:bluetooth_rxtx.c **** 		}
 1683              		.loc 1 540 0
 1684 03f4 9B49     		ldr	r1, .L241+16
 1685              	.LVL213:
 1686              	.LBE39:
 536:bluetooth_rxtx.c **** 		requested_mode = MODE_AFH;
 1687              		.loc 1 536 0
 1688 03f6 9A72     		strb	r2, [r3, #10]
 537:bluetooth_rxtx.c **** 
 1689              		.loc 1 537 0
 1690 03f8 0E22     		movs	r2, #14
 1691 03fa 9A74     		strb	r2, [r3, #18]
 1692              	.LVL214:
 1693              	.LBB40:
 539:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 1694              		.loc 1 539 0
 1695 03fc 0023     		movs	r3, #0
 540:bluetooth_rxtx.c **** 		}
 1696              		.loc 1 540 0
 1697 03fe 1A46     		mov	r2, r3
 1698              	.LVL215:
 1699              	.L164:
 540:bluetooth_rxtx.c **** 		}
 1700              		.loc 1 540 0 is_stmt 0 discriminator 3
 1701 0400 5A54     		strb	r2, [r3, r1]
 539:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 1702              		.loc 1 539 0 is_stmt 1 discriminator 3
 1703 0402 0133     		adds	r3, r3, #1
 1704              	.LVL216:
 1705 0404 0A2B     		cmp	r3, #10
 1706 0406 FBD1     		bne	.L164
 1707              	.LBE40:
 543:bluetooth_rxtx.c **** 		break;
 1708              		.loc 1 543 0
 1709 0408 0120     		movs	r0, #1
 1710              	.LVL217:
 542:bluetooth_rxtx.c **** 		afh_enabled = 1;
ARM GAS  /tmp/ccyBazZt.s 			page 75


 1711              		.loc 1 542 0
 1712 040a 974B     		ldr	r3, .L241+20
 1713              	.LVL218:
 1714 040c 1A70     		strb	r2, [r3]
 543:bluetooth_rxtx.c **** 		break;
 1715              		.loc 1 543 0
 1716 040e 974B     		ldr	r3, .L241+24
 1717 0410 1870     		strb	r0, [r3]
 544:bluetooth_rxtx.c **** 
 1718              		.loc 1 544 0
 1719 0412 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1720              	.LVL219:
 1721              	.L134:
 547:bluetooth_rxtx.c **** 		break;
 1722              		.loc 1 547 0
 1723 0414 0120     		movs	r0, #1
 1724              	.LVL220:
 1725 0416 904B     		ldr	r3, .L241+4
 1726 0418 D872     		strb	r0, [r3, #11]
 548:bluetooth_rxtx.c **** 
 1727              		.loc 1 548 0
 1728 041a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1729              	.LVL221:
 1730              	.L113:
 1731 041c 1268     		ldr	r2, [r2]	@ unaligned
 1732              	.LVL222:
 552:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 1733              		.loc 1 552 0
 1734 041e 944B     		ldr	r3, .L241+28
 1735 0420 1A60     		str	r2, [r3]
 1736 0422 72E7     		b	.L222
 1737              	.LVL223:
 1738              	.L124:
 1739              	.LBE57:
 252:bluetooth_rxtx.c **** 
 1740              		.loc 1 252 0 discriminator 3
 1741 0424 0023     		movs	r3, #0
 1742              	.LBB58:
 1743              	.LBB41:
 558:bluetooth_rxtx.c **** 		}
 1744              		.loc 1 558 0 discriminator 3
 1745 0426 8F4A     		ldr	r2, .L241+16
 1746              	.LVL224:
 1747              	.L165:
 1748 0428 E95C     		ldrb	r1, [r5, r3]	@ zero_extendqisi2
 1749 042a 9954     		strb	r1, [r3, r2]
 557:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 1750              		.loc 1 557 0 discriminator 3
 1751 042c 0133     		adds	r3, r3, #1
 1752              	.LVL225:
 1753 042e 0A2B     		cmp	r3, #10
 1754 0430 FAD1     		bne	.L165
 1755              	.LBE41:
 560:bluetooth_rxtx.c **** 		*data_len = 10;
 1756              		.loc 1 560 0
 1757 0432 0120     		movs	r0, #1
 1758              	.LVL226:
ARM GAS  /tmp/ccyBazZt.s 			page 76


 1759 0434 8D4A     		ldr	r2, .L241+24
 1760 0436 1070     		strb	r0, [r2]
 1761 0438 4FE6     		b	.L209
 1762              	.LVL227:
 1763              	.L125:
 1764              	.LBE58:
 252:bluetooth_rxtx.c **** 
 1765              		.loc 1 252 0 discriminator 3
 1766 043a 0023     		movs	r3, #0
 1767              	.LBB59:
 1768              	.LBB42:
 566:bluetooth_rxtx.c **** 		}
 1769              		.loc 1 566 0 discriminator 3
 1770 043c 1A46     		mov	r2, r3
 1771              	.LVL228:
 1772 043e 8949     		ldr	r1, .L241+16
 1773              	.LVL229:
 1774              	.L166:
 1775 0440 5A54     		strb	r2, [r3, r1]
 565:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 1776              		.loc 1 565 0 discriminator 3
 1777 0442 0133     		adds	r3, r3, #1
 1778              	.LVL230:
 1779 0444 0A2B     		cmp	r3, #10
 1780 0446 FBD1     		bne	.L166
 1781              	.LBE42:
 568:bluetooth_rxtx.c **** 		*data_len = 10;
 1782              		.loc 1 568 0
 1783 0448 8849     		ldr	r1, .L241+24
 1784 044a 0A70     		strb	r2, [r1]
 1785 044c 4CE6     		b	.L218
 1786              	.LVL231:
 1787              	.L114:
 573:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 1788              		.loc 1 573 0
 1789 044e 884B     		ldr	r3, .L241+28
 1790 0450 551E     		subs	r5, r2, #1
 1791 0452 1968     		ldr	r1, [r3]
 1792              	.LVL232:
 1793 0454 0023     		movs	r3, #0
 1794              	.LVL233:
 1795              	.L167:
 1796              	.LBB43:
 575:bluetooth_rxtx.c **** 		}
 1797              		.loc 1 575 0 discriminator 3
 1798 0456 21FA03F2 		lsr	r2, r1, r3
 1799 045a 0833     		adds	r3, r3, #8
 574:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 1800              		.loc 1 574 0 discriminator 3
 1801 045c 202B     		cmp	r3, #32
 575:bluetooth_rxtx.c **** 		}
 1802              		.loc 1 575 0 discriminator 3
 1803 045e 05F8012F 		strb	r2, [r5, #1]!
 1804              	.LVL234:
 574:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 1805              		.loc 1 574 0 discriminator 3
 1806 0462 F8D1     		bne	.L167
ARM GAS  /tmp/ccyBazZt.s 			page 77


 1807              	.LVL235:
 1808              	.L171:
 1809              	.LBE43:
 577:bluetooth_rxtx.c **** 		break;
 1810              		.loc 1 577 0
 1811 0464 0423     		movs	r3, #4
 1812 0466 3FE6     		b	.L218
 1813              	.LVL236:
 1814              	.L135:
 583:bluetooth_rxtx.c **** 		break;
 1815              		.loc 1 583 0
 1816 0468 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1817              	.LVL237:
 1818 046a 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 1819 046c 43EA0223 		orr	r3, r3, r2, lsl #8
 1820 0470 7B4A     		ldr	r2, .L241+12
 1821 0472 1380     		strh	r3, [r2]	@ movhi
 1822 0474 39E6     		b	.L184
 1823              	.LVL238:
 1824              	.L140:
 587:bluetooth_rxtx.c **** 
 1825              		.loc 1 587 0
 1826 0476 7F4A     		ldr	r2, .L241+32
 1827              	.LVL239:
 1828 0478 2878     		ldrb	r0, [r5]	@ zero_extendqisi2
 1829              	.LVL240:
 1830 047a 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 1831 047c 1188     		ldrh	r1, [r2]
 1832              	.LVL241:
 1833 047e 43EA0023 		orr	r3, r3, r0, lsl #8
 1834 0482 0B44     		add	r3, r3, r1
 1835 0484 1BB2     		sxth	r3, r3
 1836 0486 1380     		strh	r3, [r2]	@ movhi
 590:bluetooth_rxtx.c **** 			clk_drift_correction = 320 / (uint16_t)(-clk_drift_ppm);
 1837              		.loc 1 590 0
 1838 0488 1388     		ldrh	r3, [r2]
 1839 048a 7B49     		ldr	r1, .L241+36
 1840 048c 13F4004F 		tst	r3, #32768
 1841 0490 7A4B     		ldr	r3, .L241+40
 1842 0492 0ED0     		beq	.L168
 591:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 1843              		.loc 1 591 0
 1844 0494 4FF4A070 		mov	r0, #320
 1845 0498 1288     		ldrh	r2, [r2]
 1846 049a 5242     		negs	r2, r2
 1847 049c 92B2     		uxth	r2, r2
 1848 049e 90FBF2F2 		sdiv	r2, r0, r2
 1849              	.L223:
 596:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 1850              		.loc 1 596 0
 1851 04a2 1A80     		strh	r2, [r3]	@ movhi
 597:bluetooth_rxtx.c **** 		}
 1852              		.loc 1 597 0
 1853 04a4 764A     		ldr	r2, .L241+44
 1854 04a6 1B88     		ldrh	r3, [r3]
 1855 04a8 1268     		ldr	r2, [r2]
 1856 04aa 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccyBazZt.s 			page 78


 1857 04ac 1344     		add	r3, r3, r2
 1858 04ae 0B60     		str	r3, [r1]
 1859 04b0 1BE6     		b	.L184
 1860              	.L168:
 595:bluetooth_rxtx.c **** 			clk_drift_correction = 320 / clk_drift_ppm;
 1861              		.loc 1 595 0
 1862 04b2 1088     		ldrh	r0, [r2]
 1863 04b4 00B2     		sxth	r0, r0
 1864 04b6 0028     		cmp	r0, #0
 1865 04b8 07DD     		ble	.L169
 596:bluetooth_rxtx.c **** 			clkn_next_drift_fix = clkn_last_drift_fix + clk_drift_correction;
 1866              		.loc 1 596 0
 1867 04ba 1288     		ldrh	r2, [r2]
 1868 04bc 10B2     		sxth	r0, r2
 1869 04be 4FF4A072 		mov	r2, #320
 1870 04c2 92FBF0F2 		sdiv	r2, r2, r0
 1871 04c6 92B2     		uxth	r2, r2
 1872 04c8 EBE7     		b	.L223
 1873              	.L169:
 601:bluetooth_rxtx.c **** 			clkn_next_drift_fix = 0;
 1874              		.loc 1 601 0
 1875 04ca 0022     		movs	r2, #0
 1876 04cc 1A80     		strh	r2, [r3]	@ movhi
 602:bluetooth_rxtx.c **** 		}
 1877              		.loc 1 602 0
 1878 04ce 0A60     		str	r2, [r1]
 1879 04d0 0BE6     		b	.L184
 1880              	.LVL242:
 1881              	.L115:
 609:bluetooth_rxtx.c **** 
 1882              		.loc 1 609 0
 1883 04d2 0022     		movs	r2, #0
 1884              	.LVL243:
 608:bluetooth_rxtx.c **** 		*data_len = 0;
 1885              		.loc 1 608 0
 1886 04d4 0B88     		ldrh	r3, [r1]
 1887 04d6 6B4D     		ldr	r5, .L241+48
 1888              	.LVL244:
 1889 04d8 6B63     		str	r3, [r5, #52]
 611:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 1890              		.loc 1 611 0
 1891 04da 5F4B     		ldr	r3, .L241+4
 609:bluetooth_rxtx.c **** 
 1892              		.loc 1 609 0
 1893 04dc 2260     		str	r2, [r4]
 611:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 1894              		.loc 1 611 0
 1895 04de DA72     		strb	r2, [r3, #11]
 612:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 1896              		.loc 1 612 0
 1897 04e0 0322     		movs	r2, #3
 1898 04e2 9A72     		strb	r2, [r3, #10]
 613:bluetooth_rxtx.c **** 
 1899              		.loc 1 613 0
 1900 04e4 0922     		movs	r2, #9
 1901 04e6 9A74     		strb	r2, [r3, #18]
 615:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
ARM GAS  /tmp/ccyBazZt.s 			page 79


 1902              		.loc 1 615 0
 1903 04e8 FFF7FEFF 		bl	usb_queue_init
 1904              	.LVL245:
 616:bluetooth_rxtx.c **** 		break;
 1905              		.loc 1 616 0
 1906 04ec B5F84C00 		ldrh	r0, [r5, #76]
 1907 04f0 9BE6     		b	.L220
 1908              	.LVL246:
 1909              	.L116:
 1910              	.LBE59:
 252:bluetooth_rxtx.c **** 
 1911              		.loc 1 252 0 discriminator 3
 1912 04f2 0023     		movs	r3, #0
 1913              	.LBB60:
 1914              	.LBB44:
 621:bluetooth_rxtx.c **** 		}
 1915              		.loc 1 621 0 discriminator 3
 1916 04f4 6349     		ldr	r1, .L241+48
 1917              	.LVL247:
 1918 04f6 551E     		subs	r5, r2, #1
 1919              	.LVL248:
 1920              	.L170:
 1921 04f8 0A68     		ldr	r2, [r1]
 1922 04fa DA40     		lsrs	r2, r2, r3
 1923 04fc 0833     		adds	r3, r3, #8
 620:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 1924              		.loc 1 620 0 discriminator 3
 1925 04fe 202B     		cmp	r3, #32
 621:bluetooth_rxtx.c **** 		}
 1926              		.loc 1 621 0 discriminator 3
 1927 0500 05F8012F 		strb	r2, [r5, #1]!
 1928              	.LVL249:
 620:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 1929              		.loc 1 620 0 discriminator 3
 1930 0504 F8D1     		bne	.L170
 1931 0506 ADE7     		b	.L171
 1932              	.LVL250:
 1933              	.L117:
 1934              	.LBE44:
 628:bluetooth_rxtx.c **** 		debug_printf("AA set\n");
 1935              		.loc 1 628 0
 1936 0508 0124     		movs	r4, #1
 1937              	.LVL251:
 627:bluetooth_rxtx.c **** 		le.target_set = 1;
 1938              		.loc 1 627 0
 1939 050a 1068     		ldr	r0, [r2]	@ unaligned
 1940              	.LVL252:
 1941 050c FFF7FEFF 		bl	le_set_access_address
 1942              	.LVL253:
 628:bluetooth_rxtx.c **** 		debug_printf("AA set\n");
 1943              		.loc 1 628 0
 1944 0510 5C4B     		ldr	r3, .L241+48
 629:bluetooth_rxtx.c **** 		break;
 1945              		.loc 1 629 0
 1946 0512 5D48     		ldr	r0, .L241+52
 628:bluetooth_rxtx.c **** 		debug_printf("AA set\n");
 1947              		.loc 1 628 0
ARM GAS  /tmp/ccyBazZt.s 			page 80


 1948 0514 5C64     		str	r4, [r3, #68]
 1949              	.L214:
 725:bluetooth_rxtx.c **** 		break;
 1950              		.loc 1 725 0
 1951 0516 FFF7FEFF 		bl	debug_printf
 1952              	.LVL254:
 1953 051a E6E5     		b	.L184
 1954              	.LVL255:
 1955              	.L119:
 639:bluetooth_rxtx.c **** 		data[1] = 0x37;
 1956              		.loc 1 639 0
 1957 051c 1323     		movs	r3, #19
 1958 051e 1370     		strb	r3, [r2]
 1959              	.LVL256:
 640:bluetooth_rxtx.c **** 		*data_len = 2;
 1960              		.loc 1 640 0
 1961 0520 3723     		movs	r3, #55
 1962 0522 60E6     		b	.L231
 1963              	.LVL257:
 1964              	.L120:
 645:bluetooth_rxtx.c **** 		*data_len = 1;
 1965              		.loc 1 645 0
 1966 0524 574B     		ldr	r3, .L241+48
 1967 0526 1B69     		ldr	r3, [r3, #16]
 1968 0528 0033     		adds	r3, r3, #0
 1969 052a 18BF     		it	ne
 1970 052c 0123     		movne	r3, #1
 1971 052e E2E5     		b	.L212
 1972              	.L121:
 650:bluetooth_rxtx.c **** 		break;
 1973              		.loc 1 650 0
 1974 0530 0B88     		ldrh	r3, [r1]
 1975 0532 544A     		ldr	r2, .L241+48
 1976              	.LVL258:
 1977 0534 0033     		adds	r3, r3, #0
 1978 0536 18BF     		it	ne
 1979 0538 0123     		movne	r3, #1
 1980 053a 1361     		str	r3, [r2, #16]
 1981 053c D5E5     		b	.L184
 1982              	.LVL259:
 1983              	.L122:
 654:bluetooth_rxtx.c **** 		if (p != NULL) {
 1984              		.loc 1 654 0
 1985 053e FFF7FEFF 		bl	dequeue
 1986              	.LVL260:
 655:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 1987              		.loc 1 655 0
 1988 0542 0146     		mov	r1, r0
 1989 0544 28B1     		cbz	r0, .L172
 656:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 1990              		.loc 1 656 0
 1991 0546 4022     		movs	r2, #64
 1992 0548 2846     		mov	r0, r5
 1993              	.LVL261:
 1994 054a FFF7FEFF 		bl	memcpy
 1995              	.LVL262:
 657:bluetooth_rxtx.c **** 		} else {
ARM GAS  /tmp/ccyBazZt.s 			page 81


 1996              		.loc 1 657 0
 1997 054e 4023     		movs	r3, #64
 1998 0550 CAE5     		b	.L218
 1999              	.LVL263:
 2000              	.L172:
 659:bluetooth_rxtx.c **** 			*data_len = 1;
 2001              		.loc 1 659 0
 2002 0552 2870     		strb	r0, [r5]
 2003 0554 19E6     		b	.L210
 2004              	.LVL264:
 2005              	.L123:
 665:bluetooth_rxtx.c **** 
 2006              		.loc 1 665 0
 2007 0556 0022     		movs	r2, #0
 2008              	.LVL265:
 667:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 2009              		.loc 1 667 0
 2010 0558 3F4B     		ldr	r3, .L241+4
 665:bluetooth_rxtx.c **** 
 2011              		.loc 1 665 0
 2012 055a 2260     		str	r2, [r4]
 667:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 2013              		.loc 1 667 0
 2014 055c 9A72     		strb	r2, [r3, #10]
 668:bluetooth_rxtx.c **** 
 2015              		.loc 1 668 0
 2016 055e 0A22     		movs	r2, #10
 2017 0560 9A74     		strb	r2, [r3, #18]
 670:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 2018              		.loc 1 670 0
 2019 0562 FFF7FEFF 		bl	usb_queue_init
 2020              	.LVL266:
 2021 0566 D0E6     		b	.L222
 2022              	.LVL267:
 2023              	.L126:
 675:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 2024              		.loc 1 675 0
 2025 0568 0878     		ldrb	r0, [r1]	@ zero_extendqisi2
 2026              	.LVL268:
 2027 056a FFF7FEFF 		bl	cc2400_get
 2028              	.LVL269:
 676:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 2029              		.loc 1 676 0
 2030 056e 030A     		lsrs	r3, r0, #8
 2031 0570 2B70     		strb	r3, [r5]
 677:bluetooth_rxtx.c **** 		*data_len = 2;
 2032              		.loc 1 677 0
 2033 0572 6870     		strb	r0, [r5, #1]
 2034 0574 38E6     		b	.L225
 2035              	.LVL270:
 2036              	.L130:
 682:bluetooth_rxtx.c **** 		break;
 2037              		.loc 1 682 0
 2038 0576 4988     		ldrh	r1, [r1, #2]
 2039              	.LVL271:
 2040 0578 3078     		ldrb	r0, [r6]	@ zero_extendqisi2
 2041              	.LVL272:
ARM GAS  /tmp/ccyBazZt.s 			page 82


 2042 057a 0FE6     		b	.L219
 2043              	.LVL273:
 2044              	.L137:
 2045              	.LBE60:
 252:bluetooth_rxtx.c **** 
 2046              		.loc 1 252 0 discriminator 3
 2047 057c 0026     		movs	r6, #0
 2048              	.LVL274:
 2049              	.L175:
 2050 057e F7B2     		uxtb	r7, r6
 2051              	.LVL275:
 2052              	.LBB61:
 695:bluetooth_rxtx.c **** 			data[i*3] = i;
 2053              		.loc 1 695 0 discriminator 3
 2054 0580 3846     		mov	r0, r7
 2055 0582 FFF7FEFF 		bl	cc2400_get
 2056              	.LVL276:
 2057 0586 0136     		adds	r6, r6, #1
 697:bluetooth_rxtx.c **** 			data[(i*3)+2] = reg_val & 0xff;
 2058              		.loc 1 697 0 discriminator 3
 2059 0588 030A     		lsrs	r3, r0, #8
 694:bluetooth_rxtx.c **** 			reg_val = cc2400_get(i);
 2060              		.loc 1 694 0 discriminator 3
 2061 058a 2E2E     		cmp	r6, #46
 696:bluetooth_rxtx.c **** 			data[(i*3)+1] = (reg_val >> 8) & 0xff;
 2062              		.loc 1 696 0 discriminator 3
 2063 058c 2F70     		strb	r7, [r5]
 697:bluetooth_rxtx.c **** 			data[(i*3)+2] = reg_val & 0xff;
 2064              		.loc 1 697 0 discriminator 3
 2065 058e 6B70     		strb	r3, [r5, #1]
 698:bluetooth_rxtx.c **** 		}
 2066              		.loc 1 698 0 discriminator 3
 2067 0590 A870     		strb	r0, [r5, #2]
 2068              	.LVL277:
 2069 0592 05F10305 		add	r5, r5, #3
 694:bluetooth_rxtx.c **** 			reg_val = cc2400_get(i);
 2070              		.loc 1 694 0 discriminator 3
 2071 0596 F2D1     		bne	.L175
 700:bluetooth_rxtx.c **** 		break;
 2072              		.loc 1 700 0
 2073 0598 8723     		movs	r3, #135
 2074 059a A5E5     		b	.L218
 2075              	.LVL278:
 2076              	.L139:
 704:bluetooth_rxtx.c **** 		memcpy(&tx_pkt, data, i);
 2077              		.loc 1 704 0
 2078 059c 9279     		ldrb	r2, [r2, #6]	@ zero_extendqisi2
 2079              	.LVL279:
 705:bluetooth_rxtx.c **** 		//tx_pkt.channel = data[4] << 8 | data[5];
 2080              		.loc 1 705 0
 2081 059e 2946     		mov	r1, r5
 2082              	.LVL280:
 704:bluetooth_rxtx.c **** 		memcpy(&tx_pkt, data, i);
 2083              		.loc 1 704 0
 2084 05a0 0732     		adds	r2, r2, #7
 705:bluetooth_rxtx.c **** 		//tx_pkt.channel = data[4] << 8 | data[5];
 2085              		.loc 1 705 0
ARM GAS  /tmp/ccyBazZt.s 			page 83


 2086 05a2 D2B2     		uxtb	r2, r2
 2087 05a4 3948     		ldr	r0, .L241+56
 2088              	.LVL281:
 2089 05a6 FFF7FEFF 		bl	memcpy
 2090              	.LVL282:
 707:bluetooth_rxtx.c **** 		*data_len = 0;
 2091              		.loc 1 707 0
 2092 05aa 1022     		movs	r2, #16
 2093 05ac 78E6     		b	.L224
 2094              	.LVL283:
 2095              	.L127:
 712:bluetooth_rxtx.c **** 		break;
 2096              		.loc 1 712 0
 2097 05ae 0C22     		movs	r2, #12
 2098              	.LVL284:
 2099 05b0 E2E5     		b	.L216
 2100              	.LVL285:
 2101              	.L145:
 716:bluetooth_rxtx.c **** 		break;
 2102              		.loc 1 716 0
 2103 05b2 1122     		movs	r2, #17
 2104              	.LVL286:
 2105 05b4 E0E5     		b	.L216
 2106              	.LVL287:
 2107              	.L143:
 719:bluetooth_rxtx.c **** 		window_shift = ((300/1000000)*le.conn_interval*USEC(1250))/2;
 2108              		.loc 1 719 0
 2109 05b6 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 2110              	.LVL288:
 2111 05b8 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 721:bluetooth_rxtx.c **** 		break;
 2112              		.loc 1 721 0
 2113 05ba 3548     		ldr	r0, .L241+60
 2114              	.LVL289:
 719:bluetooth_rxtx.c **** 		window_shift = ((300/1000000)*le.conn_interval*USEC(1250))/2;
 2115              		.loc 1 719 0
 2116 05bc 43EA0223 		orr	r3, r3, r2, lsl #8
 2117 05c0 304A     		ldr	r2, .L241+48
 2118 05c2 D383     		strh	r3, [r2, #30]	@ movhi
 2119              	.LVL290:
 720:bluetooth_rxtx.c **** 		debug_printf("Hop interval set\n");
 2120              		.loc 1 720 0
 2121 05c4 0022     		movs	r2, #0
 2122 05c6 244B     		ldr	r3, .L241+4
 2123 05c8 DA61     		str	r2, [r3, #28]
 2124 05ca A4E7     		b	.L214
 2125              	.LVL291:
 2126              	.L144:
 724:bluetooth_rxtx.c **** 		debug_printf("Hop increment set\n");
 2127              		.loc 1 724 0
 2128 05cc 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 2129              	.LVL292:
 2130 05ce 2D4B     		ldr	r3, .L241+48
 725:bluetooth_rxtx.c **** 		break;
 2131              		.loc 1 725 0
 2132 05d0 3048     		ldr	r0, .L241+64
 2133              	.LVL293:
ARM GAS  /tmp/ccyBazZt.s 			page 84


 724:bluetooth_rxtx.c **** 		debug_printf("Hop increment set\n");
 2134              		.loc 1 724 0
 2135 05d2 9A75     		strb	r2, [r3, #22]
 2136              	.LVL294:
 2137 05d4 9FE7     		b	.L214
 2138              	.LVL295:
 2139              	.L146:
 729:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 2140              		.loc 1 729 0
 2141 05d6 2B4C     		ldr	r4, .L241+48
 2142              	.LVL296:
 2143 05d8 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 730:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 2144              		.loc 1 730 0
 2145 05da 2046     		mov	r0, r4
 2146              	.LVL297:
 729:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 2147              		.loc 1 729 0
 2148 05dc 6375     		strb	r3, [r4, #21]
 2149              	.LVL298:
 730:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 2150              		.loc 1 730 0
 2151 05de FFF7FEFF 		bl	btle_next_hop
 2152              	.LVL299:
 2153 05e2 A4F84C00 		strh	r0, [r4, #76]	@ movhi
 731:bluetooth_rxtx.c **** 		break;
 2154              		.loc 1 731 0
 2155 05e6 2046     		mov	r0, r4
 2156 05e8 FFF7FEFF 		bl	btle_next_hop
 2157              	.LVL300:
 2158 05ec A4F84C00 		strh	r0, [r4, #76]	@ movhi
 2159 05f0 7BE5     		b	.L184
 2160              	.LVL301:
 2161              	.L147:
 734:bluetooth_rxtx.c **** 		debug_printf("Anchor: %d\n", tx_anchor);
 2162              		.loc 1 734 0
 2163 05f2 194C     		ldr	r4, .L241+4
 2164              	.LVL302:
 2165 05f4 1168     		ldr	r1, [r2]	@ unaligned
 2166              	.LVL303:
 735:bluetooth_rxtx.c **** 		u32 now = tx_anchor + (le.conn_interval*USEC(1250)) - TX_WARMUP_TIME - PACKET_DURATION(2) - USEC(
 2167              		.loc 1 735 0
 2168 05f6 2848     		ldr	r0, .L241+68
 2169              	.LVL304:
 734:bluetooth_rxtx.c **** 		debug_printf("Anchor: %d\n", tx_anchor);
 2170              		.loc 1 734 0
 2171 05f8 2162     		str	r1, [r4, #32]
 735:bluetooth_rxtx.c **** 		u32 now = tx_anchor + (le.conn_interval*USEC(1250)) - TX_WARMUP_TIME - PACKET_DURATION(2) - USEC(
 2172              		.loc 1 735 0
 2173 05fa FFF7FEFF 		bl	debug_printf
 2174              	.LVL305:
 736:bluetooth_rxtx.c **** 		if (now > 3276800000)
 2175              		.loc 1 736 0
 2176 05fe 43F2D401 		movw	r1, #12500
 2177 0602 204B     		ldr	r3, .L241+48
 2178              	.LBB45:
 2179              	.LBB46:
ARM GAS  /tmp/ccyBazZt.s 			page 85


 233:bluetooth_rxtx.c **** 	//T0MR1 = match;
 2180              		.loc 1 233 0
 2181 0604 0120     		movs	r0, #1
 2182              	.LBE46:
 2183              	.LBE45:
 736:bluetooth_rxtx.c **** 		if (now > 3276800000)
 2184              		.loc 1 736 0
 2185 0606 DA8B     		ldrh	r2, [r3, #30]
 2186 0608 236A     		ldr	r3, [r4, #32]
 2187 060a 01FB0232 		mla	r2, r1, r2, r3
 737:bluetooth_rxtx.c **** 			now -= 3276800000;
 2188              		.loc 1 737 0
 2189 060e 2349     		ldr	r1, .L241+72
 736:bluetooth_rxtx.c **** 		if (now > 3276800000)
 2190              		.loc 1 736 0
 2191 0610 A2F5D763 		sub	r3, r2, #1720
 2192              	.LVL306:
 737:bluetooth_rxtx.c **** 			now -= 3276800000;
 2193              		.loc 1 737 0
 2194 0614 8B42     		cmp	r3, r1
 2195              	.LBB49:
 2196              	.LBB50:
 239:bluetooth_rxtx.c **** 	//T0MCR &= ~TMCR_MR1I;
 2197              		.loc 1 239 0
 2198 0616 6FF00101 		mvn	r1, #1
 2199              	.LBE50:
 2200              	.LBE49:
 738:bluetooth_rxtx.c **** 		timer2_clear_match();
 2201              		.loc 1 738 0
 2202 061a 84BF     		itt	hi
 2203 061c 204B     		ldrhi	r3, .L241+76
 2204              	.LVL307:
 2205 061e 9B18     		addhi	r3, r3, r2
 2206              	.LVL308:
 2207              	.LBB52:
 2208              	.LBB51:
 239:bluetooth_rxtx.c **** 	//T0MCR &= ~TMCR_MR1I;
 2209              		.loc 1 239 0
 2210 0620 204A     		ldr	r2, .L241+80
 2211 0622 1160     		str	r1, [r2]
 2212              	.LVL309:
 2213              	.LBE51:
 2214              	.LBE52:
 2215              	.LBB53:
 2216              	.LBB47:
 232:bluetooth_rxtx.c **** 	T0MCR = TMCR_MR0I;
 2217              		.loc 1 232 0
 2218 0624 2049     		ldr	r1, .L241+84
 2219 0626 0B60     		str	r3, [r1]
 2220              	.LBE47:
 2221              	.LBE53:
 741:bluetooth_rxtx.c **** 		anchor_set = 1;
 2222              		.loc 1 741 0
 2223 0628 0723     		movs	r3, #7
 2224              	.LVL310:
 2225              	.LBB54:
 2226              	.LBB48:
ARM GAS  /tmp/ccyBazZt.s 			page 86


 233:bluetooth_rxtx.c **** 	//T0MR1 = match;
 2227              		.loc 1 233 0
 2228 062a 1060     		str	r0, [r2]
 2229              	.LVL311:
 2230              	.LBE48:
 2231              	.LBE54:
 741:bluetooth_rxtx.c **** 		anchor_set = 1;
 2232              		.loc 1 741 0
 2233 062c A372     		strb	r3, [r4, #10]
 742:bluetooth_rxtx.c **** 		break;
 2234              		.loc 1 742 0
 2235 062e 84F82400 		strb	r0, [r4, #36]
 743:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CRC_INIT:
 2236              		.loc 1 743 0
 2237 0632 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2238              	.LVL312:
 2239              	.L148:
 2240 0634 1268     		ldr	r2, [r2]	@ unaligned
 2241              	.LVL313:
 745:bluetooth_rxtx.c **** 		//debug_printf("CRC set\n");
 2242              		.loc 1 745 0
 2243 0636 134B     		ldr	r3, .L241+48
 2244 0638 9A60     		str	r2, [r3, #8]
 2245 063a 56E5     		b	.L184
 2246              	.LVL314:
 2247              	.L142:
 2248              	.LBE61:
 250:bluetooth_rxtx.c **** 
 2249              		.loc 1 250 0
 2250 063c 8A88     		ldrh	r2, [r1, #4]
 2251              	.LVL315:
 2252              	.LBB62:
 751:bluetooth_rxtx.c **** 			return 0;
 2253              		.loc 1 751 0
 2254 063e 152A     		cmp	r2, #21
 2255 0640 00F28C80 		bhi	.L193
 753:bluetooth_rxtx.c **** 		memcpy(le_adv_data, data, le_adv_len);
 2256              		.loc 1 753 0
 2257 0644 0F48     		ldr	r0, .L241+48
 2258              	.LVL316:
 754:bluetooth_rxtx.c **** 		break;
 2259              		.loc 1 754 0
 2260 0646 2946     		mov	r1, r5
 2261              	.LVL317:
 753:bluetooth_rxtx.c **** 		memcpy(le_adv_data, data, le_adv_len);
 2262              		.loc 1 753 0
 2263 0648 8265     		str	r2, [r0, #88]
 754:bluetooth_rxtx.c **** 		break;
 2264              		.loc 1 754 0
 2265 064a 5C30     		adds	r0, r0, #92
 2266 064c FFF7FEFF 		bl	memcpy
 2267              	.LVL318:
 2268 0650 4BE5     		b	.L184
 2269              	.L242:
 2270 0652 00BF     		.align	2
 2271              	.L241:
 2272 0654 00000000 		.word	clkn_offset
ARM GAS  /tmp/ccyBazZt.s 			page 87


 2273 0658 00000000 		.word	.LANCHOR1
 2274 065c 98C00920 		.word	537510040
 2275 0660 00000000 		.word	clk100ns_offset
 2276 0664 00000000 		.word	afh_map
 2277 0668 00000000 		.word	used_channels
 2278 066c 00000000 		.word	afh_enabled
 2279 0670 00000000 		.word	clkn
 2280 0674 00000000 		.word	clk_drift_ppm
 2281 0678 00000000 		.word	clkn_next_drift_fix
 2282 067c 00000000 		.word	clk_drift_correction
 2283 0680 00000000 		.word	clkn_last_drift_fix
 2284 0684 00000000 		.word	.LANCHOR0
 2285 0688 11000000 		.word	.LC5
 2286 068c 00000000 		.word	tx_pkt
 2287 0690 19000000 		.word	.LC6
 2288 0694 2B000000 		.word	.LC7
 2289 0698 3E000000 		.word	.LC8
 2290 069c 000050C3 		.word	-1018167296
 2291 06a0 48F9AF3C 		.word	1018165576
 2292 06a4 14400040 		.word	1073758228
 2293 06a8 18400040 		.word	1073758232
 2294              	.LVL319:
 2295              	.L129:
 760:bluetooth_rxtx.c **** 			return 0; // invalid mask
 2296              		.loc 1 760 0
 2297 06ac 9479     		ldrb	r4, [r2, #6]	@ zero_extendqisi2
 2298              	.LVL320:
 2299 06ae 302C     		cmp	r4, #48
 2300 06b0 54D8     		bhi	.L193
 763:bluetooth_rxtx.c **** 			le.target_set = 0;
 2301              		.loc 1 763 0
 2302 06b2 74B9     		cbnz	r4, .L177
 764:bluetooth_rxtx.c **** 			memset(le.target, 0, 6);
 2303              		.loc 1 764 0
 2304 06b4 2A4D     		ldr	r5, .L243
 765:bluetooth_rxtx.c **** 			memset(le.target_mask, 0, 6);
 2305              		.loc 1 765 0
 2306 06b6 2146     		mov	r1, r4
 2307              	.LVL321:
 2308 06b8 0622     		movs	r2, #6
 2309              	.LVL322:
 2310 06ba 05F13800 		add	r0, r5, #56
 2311              	.LVL323:
 764:bluetooth_rxtx.c **** 			memset(le.target, 0, 6);
 2312              		.loc 1 764 0
 2313 06be 6C64     		str	r4, [r5, #68]
 765:bluetooth_rxtx.c **** 			memset(le.target_mask, 0, 6);
 2314              		.loc 1 765 0
 2315 06c0 FFF7FEFF 		bl	memset
 2316              	.LVL324:
 766:bluetooth_rxtx.c **** 		} else {
 2317              		.loc 1 766 0
 2318 06c4 0622     		movs	r2, #6
 2319 06c6 2146     		mov	r1, r4
 2320 06c8 05F13E00 		add	r0, r5, #62
 2321 06cc FFF7FEFF 		bl	memset
 2322              	.LVL325:
ARM GAS  /tmp/ccyBazZt.s 			page 88


 2323 06d0 0BE5     		b	.L184
 2324              	.LVL326:
 2325              	.L177:
 2326 06d2 244C     		ldr	r4, .L243+4
 2327 06d4 931D     		adds	r3, r2, #6
 763:bluetooth_rxtx.c **** 			le.target_set = 0;
 2328              		.loc 1 763 0 discriminator 3
 2329 06d6 2246     		mov	r2, r4
 2330              	.LVL327:
 2331              	.L178:
 2332              	.LBB55:
 771:bluetooth_rxtx.c **** 
 2333              		.loc 1 771 0 discriminator 3
 2334 06d8 13F8011D 		ldrb	r1, [r3, #-1]!	@ zero_extendqisi2
 770:bluetooth_rxtx.c **** 				le.target[i] = data[5-i];
 2335              		.loc 1 770 0 discriminator 3
 2336 06dc 9D42     		cmp	r5, r3
 771:bluetooth_rxtx.c **** 
 2337              		.loc 1 771 0 discriminator 3
 2338 06de 02F8011F 		strb	r1, [r2, #1]!
 2339              	.LVL328:
 770:bluetooth_rxtx.c **** 				le.target[i] = data[5-i];
 2340              		.loc 1 770 0 discriminator 3
 2341 06e2 F9D1     		bne	.L178
 774:bluetooth_rxtx.c **** 			for (i = 5; data[6] > 8; --i, data[6] -= 8) {
 2342              		.loc 1 774 0
 2343 06e4 0021     		movs	r1, #0
 2344 06e6 0622     		movs	r2, #6
 2345              	.LVL329:
 2346 06e8 1F48     		ldr	r0, .L243+8
 2347              	.LVL330:
 2348 06ea FFF7FEFF 		bl	memset
 2349              	.LVL331:
 776:bluetooth_rxtx.c **** 			}
 2350              		.loc 1 776 0
 2351 06ee FF26     		movs	r6, #255
 2352              	.LVL332:
 775:bluetooth_rxtx.c **** 				le.target_mask[i] = 0xff;
 2353              		.loc 1 775 0
 2354 06f0 0523     		movs	r3, #5
 776:bluetooth_rxtx.c **** 			}
 2355              		.loc 1 776 0
 2356 06f2 1B49     		ldr	r1, .L243
 2357              	.LVL333:
 2358              	.L179:
 775:bluetooth_rxtx.c **** 				le.target_mask[i] = 0xff;
 2359              		.loc 1 775 0 discriminator 1
 2360 06f4 A879     		ldrb	r0, [r5, #6]	@ zero_extendqisi2
 2361 06f6 0828     		cmp	r0, #8
 2362 06f8 19D8     		bhi	.L180
 2363              	.LVL334:
 780:bluetooth_rxtx.c **** 				uint8_t final_byte = 0;
 2364              		.loc 1 780 0
 2365 06fa 60B1     		cbz	r0, .L181
 2366 06fc 0021     		movs	r1, #0
 2367 06fe 0A46     		mov	r2, r1
 2368              	.LVL335:
ARM GAS  /tmp/ccyBazZt.s 			page 89


 2369              	.L182:
 2370 0700 0131     		adds	r1, r1, #1
 2371              	.LVL336:
 2372              	.LBB56:
 782:bluetooth_rxtx.c **** 					final_byte >>= 1;
 2373              		.loc 1 782 0 discriminator 3
 2374 0702 CDB2     		uxtb	r5, r1
 783:bluetooth_rxtx.c **** 					final_byte |= 0b10000000;
 2375              		.loc 1 783 0 discriminator 3
 2376 0704 5208     		lsrs	r2, r2, #1
 2377              	.LVL337:
 782:bluetooth_rxtx.c **** 					final_byte >>= 1;
 2378              		.loc 1 782 0 discriminator 3
 2379 0706 A842     		cmp	r0, r5
 784:bluetooth_rxtx.c **** 				}
 2380              		.loc 1 784 0 discriminator 3
 2381 0708 42F08002 		orr	r2, r2, #128
 2382              	.LVL338:
 782:bluetooth_rxtx.c **** 					final_byte >>= 1;
 2383              		.loc 1 782 0 discriminator 3
 2384 070c F8D8     		bhi	.L182
 786:bluetooth_rxtx.c **** 			}
 2385              		.loc 1 786 0
 2386 070e 1449     		ldr	r1, .L243
 2387 0710 0B44     		add	r3, r3, r1
 2388              	.LVL339:
 2389 0712 83F83E20 		strb	r2, [r3, #62]
 2390              	.LVL340:
 2391              	.L181:
 2392 0716 1549     		ldr	r1, .L243+12
 2393              	.L183:
 2394              	.LVL341:
 2395              	.LBE56:
 791:bluetooth_rxtx.c **** 
 2396              		.loc 1 791 0 discriminator 3
 2397 0718 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 2398 071a E279     		ldrb	r2, [r4, #7]	@ zero_extendqisi2
 2399 071c 1340     		ands	r3, r3, r2
 2400 071e 04F8013F 		strb	r3, [r4, #1]!
 2401              	.LVL342:
 790:bluetooth_rxtx.c **** 				le.target[i] &= le.target_mask[i];
 2402              		.loc 1 790 0 discriminator 3
 2403 0722 8C42     		cmp	r4, r1
 2404 0724 F8D1     		bne	.L183
 793:bluetooth_rxtx.c **** 		}
 2405              		.loc 1 793 0
 2406 0726 0120     		movs	r0, #1
 2407 0728 0D4B     		ldr	r3, .L243
 2408 072a 5864     		str	r0, [r3, #68]
 2409 072c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2410              	.LVL343:
 2411              	.L180:
 776:bluetooth_rxtx.c **** 			}
 2412              		.loc 1 776 0 discriminator 3
 2413 072e CA18     		adds	r2, r1, r3
 2414 0730 82F83E60 		strb	r6, [r2, #62]
 775:bluetooth_rxtx.c **** 				le.target_mask[i] = 0xff;
ARM GAS  /tmp/ccyBazZt.s 			page 90


 2415              		.loc 1 775 0 discriminator 3
 2416 0734 AA79     		ldrb	r2, [r5, #6]	@ zero_extendqisi2
 2417 0736 013B     		subs	r3, r3, #1
 2418              	.LVL344:
 2419 0738 083A     		subs	r2, r2, #8
 2420 073a DBB2     		uxtb	r3, r3
 2421              	.LVL345:
 2422 073c AA71     		strb	r2, [r5, #6]
 2423 073e D9E7     		b	.L179
 2424              	.LVL346:
 2425              	.L141:
 2426              	.LBE55:
 799:bluetooth_rxtx.c **** 		break;
 2427              		.loc 1 799 0
 2428 0740 0120     		movs	r0, #1
 2429              	.LVL347:
 2430 0742 0B4B     		ldr	r3, .L243+16
 2431 0744 9862     		str	r0, [r3, #40]
 800:bluetooth_rxtx.c **** 
 2432              		.loc 1 800 0
 2433 0746 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2434              	.LVL348:
 2435              	.L131:
 804:bluetooth_rxtx.c **** 		break;
 2436              		.loc 1 804 0
 2437 0748 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 2438              	.LVL349:
 2439 074a 094B     		ldr	r3, .L243+16
 2440 074c DA74     		strb	r2, [r3, #19]
 2441 074e CCE4     		b	.L184
 2442              	.LVL350:
 2443              	.L132:
 813:bluetooth_rxtx.c **** 		ego_mode = request_params[0];
 2444              		.loc 1 813 0
 2445 0750 0D22     		movs	r2, #13
 2446              	.LVL351:
 2447 0752 074B     		ldr	r3, .L243+16
 2448 0754 9A74     		strb	r2, [r3, #18]
 814:bluetooth_rxtx.c **** 		break;
 2449              		.loc 1 814 0
 2450 0756 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 2451 0758 1A75     		strb	r2, [r3, #20]
 2452 075a C6E4     		b	.L184
 2453              	.LVL352:
 2454              	.L193:
 371:bluetooth_rxtx.c **** 		}
 2455              		.loc 1 371 0
 2456 075c 0020     		movs	r0, #0
 2457              	.LBE62:
 821:bluetooth_rxtx.c **** 
 2458              		.loc 1 821 0
 2459 075e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2460              	.LVL353:
 2461              	.L244:
 2462              		.align	2
 2463              	.L243:
 2464 0760 00000000 		.word	.LANCHOR0
ARM GAS  /tmp/ccyBazZt.s 			page 91


 2465 0764 37000000 		.word	.LANCHOR0+55
 2466 0768 3E000000 		.word	.LANCHOR0+62
 2467 076c 3C000000 		.word	.LANCHOR0+60
 2468 0770 00000000 		.word	.LANCHOR1
 2469              		.cfi_endproc
 2470              	.LFE4:
 2472              		.section	.text.enqueue_with_ts,"ax",%progbits
 2473              		.align	1
 2474              		.global	enqueue_with_ts
 2475              		.syntax unified
 2476              		.thumb
 2477              		.thumb_func
 2478              		.fpu softvfp
 2480              	enqueue_with_ts:
 2481              	.LFB1:
 205:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 2482              		.loc 1 205 0
 2483              		.cfi_startproc
 2484              		@ args = 0, pretend = 0, frame = 0
 2485              		@ frame_needed = 0, uses_anonymous_args = 0
 2486              	.LVL354:
 2487 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2488              		.cfi_def_cfa_offset 24
 2489              		.cfi_offset 4, -24
 2490              		.cfi_offset 5, -20
 2491              		.cfi_offset 6, -16
 2492              		.cfi_offset 7, -12
 2493              		.cfi_offset 8, -8
 2494              		.cfi_offset 14, -4
 205:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 2495              		.loc 1 205 0
 2496 0004 0646     		mov	r6, r0
 2497 0006 0F46     		mov	r7, r1
 2498 0008 9046     		mov	r8, r2
 206:bluetooth_rxtx.c **** 
 2499              		.loc 1 206 0
 2500 000a FFF7FEFF 		bl	usb_enqueue
 2501              	.LVL355:
 2502 000e 104D     		ldr	r5, .L248
 209:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 2503              		.loc 1 209 0
 2504 0010 0446     		mov	r4, r0
 2505 0012 28B9     		cbnz	r0, .L246
 210:bluetooth_rxtx.c **** 		return 0;
 2506              		.loc 1 210 0
 2507 0014 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 2508 0016 43F00403 		orr	r3, r3, #4
 2509 001a 6B70     		strb	r3, [r5, #1]
 211:bluetooth_rxtx.c **** 	}
 2510              		.loc 1 211 0
 2511 001c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2512              	.LVL356:
 2513              	.L246:
 214:bluetooth_rxtx.c **** 
 2514              		.loc 1 214 0
 2515 0020 0670     		strb	r6, [r0]
 216:bluetooth_rxtx.c **** 	f->clk100ns = ts;
ARM GAS  /tmp/ccyBazZt.s 			page 92


 2516              		.loc 1 216 0
 2517 0022 0026     		movs	r6, #0
 219:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 2518              		.loc 1 219 0
 2519 0024 0B4B     		ldr	r3, .L248+4
 216:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 2520              		.loc 1 216 0
 2521 0026 C670     		strb	r6, [r0, #3]
 219:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 2522              		.loc 1 219 0
 2523 0028 B3F84C30 		ldrh	r3, [r3, #76]
 217:bluetooth_rxtx.c **** 
 2524              		.loc 1 217 0
 2525 002c C0F80480 		str	r8, [r0, #4]
 219:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 2526              		.loc 1 219 0
 2527 0030 623B     		subs	r3, r3, #98
 2528 0032 8370     		strb	r3, [r0, #2]
 220:bluetooth_rxtx.c **** 	f->rssi_count = 0;
 2529              		.loc 1 220 0
 2530 0034 8672     		strb	r6, [r0, #10]
 221:bluetooth_rxtx.c **** 
 2531              		.loc 1 221 0
 2532 0036 C672     		strb	r6, [r0, #11]
 223:bluetooth_rxtx.c **** 
 2533              		.loc 1 223 0
 2534 0038 3222     		movs	r2, #50
 2535 003a 3946     		mov	r1, r7
 2536 003c 0E30     		adds	r0, r0, #14
 2537              	.LVL357:
 2538 003e FFF7FEFF 		bl	memcpy
 2539              	.LVL358:
 225:bluetooth_rxtx.c **** 	status = 0;
 2540              		.loc 1 225 0
 2541 0042 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 226:bluetooth_rxtx.c **** 
 2542              		.loc 1 226 0
 2543 0044 6E70     		strb	r6, [r5, #1]
 225:bluetooth_rxtx.c **** 	status = 0;
 2544              		.loc 1 225 0
 2545 0046 6370     		strb	r3, [r4, #1]
 228:bluetooth_rxtx.c **** }
 2546              		.loc 1 228 0
 2547 0048 0120     		movs	r0, #1
 229:bluetooth_rxtx.c **** 
 2548              		.loc 1 229 0
 2549 004a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2550              	.LVL359:
 2551              	.L249:
 2552 004e 00BF     		.align	2
 2553              	.L248:
 2554 0050 00000000 		.word	.LANCHOR1
 2555 0054 00000000 		.word	.LANCHOR0
 2556              		.cfi_endproc
 2557              	.LFE1:
 2559              		.section	.text.TIMER0_IRQHandler,"ax",%progbits
 2560              		.align	1
ARM GAS  /tmp/ccyBazZt.s 			page 93


 2561              		.global	TIMER0_IRQHandler
 2562              		.syntax unified
 2563              		.thumb
 2564              		.thumb_func
 2565              		.fpu softvfp
 2567              	TIMER0_IRQHandler:
 2568              	.LFB5:
 860:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 2569              		.loc 1 860 0
 2570              		.cfi_startproc
 2571              		@ args = 0, pretend = 0, frame = 0
 2572              		@ frame_needed = 0, uses_anonymous_args = 0
 2573 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 2574              		.cfi_def_cfa_offset 20
 2575              		.cfi_offset 4, -20
 2576              		.cfi_offset 5, -16
 2577              		.cfi_offset 6, -12
 2578              		.cfi_offset 7, -8
 2579              		.cfi_offset 14, -4
 861:bluetooth_rxtx.c **** 		//clkn += clkn_offset + 1;
 2580              		.loc 1 861 0
 2581 0002 4FF04023 		mov	r3, #1073758208
 2582 0006 1B68     		ldr	r3, [r3]
 2583 0008 D907     		lsls	r1, r3, #31
 2584 000a 1BD5     		bpl	.L250
 2585              	.LBB63:
 865:bluetooth_rxtx.c **** 
 2586              		.loc 1 865 0
 2587 000c 3848     		ldr	r0, .L273
 870:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 2588              		.loc 1 870 0
 2589 000e 394A     		ldr	r2, .L273+4
 865:bluetooth_rxtx.c **** 
 2590              		.loc 1 865 0
 2591 0010 0168     		ldr	r1, [r0]
 2592              	.LVL360:
 870:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 2593              		.loc 1 870 0
 2594 0012 937A     		ldrb	r3, [r2, #10]	@ zero_extendqisi2
 2595 0014 0646     		mov	r6, r0
 2596 0016 1446     		mov	r4, r2
 2597 0018 13B1     		cbz	r3, .L252
 870:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 2598              		.loc 1 870 0 is_stmt 0 discriminator 1
 2599 001a 937A     		ldrb	r3, [r2, #10]	@ zero_extendqisi2
 2600 001c 012B     		cmp	r3, #1
 2601 001e 05D1     		bne	.L253
 2602              	.L252:
 871:bluetooth_rxtx.c **** 				do_hop = 1;
 2603              		.loc 1 871 0 is_stmt 1
 2604 0020 3368     		ldr	r3, [r6]
 2605 0022 5A06     		lsls	r2, r3, #25
 2606 0024 0AD1     		bne	.L254
 2607              	.LVL361:
 2608              	.L267:
 916:bluetooth_rxtx.c **** 			}
 2609              		.loc 1 916 0
ARM GAS  /tmp/ccyBazZt.s 			page 94


 2610 0026 0123     		movs	r3, #1
 2611 0028 E372     		strb	r3, [r4, #11]
 2612 002a 07E0     		b	.L254
 2613              	.LVL362:
 2614              	.L253:
 875:bluetooth_rxtx.c **** 			if ((clkn & 0x1) == 0)
 2615              		.loc 1 875 0
 2616 002c 937A     		ldrb	r3, [r2, #10]	@ zero_extendqisi2
 2617 002e 022B     		cmp	r3, #2
 2618 0030 09D1     		bne	.L255
 876:bluetooth_rxtx.c **** 				do_hop = 1;
 2619              		.loc 1 876 0
 2620 0032 0368     		ldr	r3, [r0]
 2621 0034 DB07     		lsls	r3, r3, #31
 2622 0036 01D4     		bmi	.L254
 877:bluetooth_rxtx.c **** 		}
 2623              		.loc 1 877 0
 2624 0038 0123     		movs	r3, #1
 2625 003a D372     		strb	r3, [r2, #11]
 2626              	.LVL363:
 2627              	.L254:
 945:bluetooth_rxtx.c **** 	}
 2628              		.loc 1 945 0
 2629 003c 0122     		movs	r2, #1
 2630 003e 4FF04023 		mov	r3, #1073758208
 2631 0042 1A60     		str	r2, [r3]
 2632              	.L250:
 2633 0044 F0BD     		pop	{r4, r5, r6, r7, pc}
 2634              	.LVL364:
 2635              	.L255:
 865:bluetooth_rxtx.c **** 
 2636              		.loc 1 865 0
 2637 0046 2C4B     		ldr	r3, .L273+8
 2638 0048 9D69     		ldr	r5, [r3, #24]
 2639 004a 1F46     		mov	r7, r3
 2640 004c 491B     		subs	r1, r1, r5
 2641              	.LVL365:
 880:bluetooth_rxtx.c **** 			// Only hop if connected
 2642              		.loc 1 880 0
 2643 004e 957A     		ldrb	r5, [r2, #10]	@ zero_extendqisi2
 865:bluetooth_rxtx.c **** 
 2644              		.loc 1 865 0
 2645 0050 01F00301 		and	r1, r1, #3
 880:bluetooth_rxtx.c **** 			// Only hop if connected
 2646              		.loc 1 880 0
 2647 0054 032D     		cmp	r5, #3
 2648 0056 14D1     		bne	.L256
 882:bluetooth_rxtx.c **** 				--le.interval_timer;
 2649              		.loc 1 882 0
 2650 0058 187D     		ldrb	r0, [r3, #20]	@ zero_extendqisi2
 2651 005a 0328     		cmp	r0, #3
 2652 005c EED1     		bne	.L254
 2653              	.L272:
 896:bluetooth_rxtx.c **** 				--le.interval_timer;
 2654              		.loc 1 896 0
 2655 005e 0029     		cmp	r1, #0
 2656 0060 ECD1     		bne	.L254
ARM GAS  /tmp/ccyBazZt.s 			page 95


 897:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 2657              		.loc 1 897 0
 2658 0062 998B     		ldrh	r1, [r3, #28]
 2659 0064 0139     		subs	r1, r1, #1
 2660 0066 89B2     		uxth	r1, r1
 2661 0068 9983     		strh	r1, [r3, #28]	@ movhi
 898:bluetooth_rxtx.c **** 					do_hop = 1;
 2662              		.loc 1 898 0
 2663 006a 998B     		ldrh	r1, [r3, #28]
 2664 006c 89B2     		uxth	r1, r1
 2665 006e 69BB     		cbnz	r1, .L259
 899:bluetooth_rxtx.c **** 					++le.conn_count;
 2666              		.loc 1 899 0
 2667 0070 0121     		movs	r1, #1
 2668 0072 D172     		strb	r1, [r2, #11]
 900:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 2669              		.loc 1 900 0
 2670 0074 1A8C     		ldrh	r2, [r3, #32]
 2671 0076 0A44     		add	r2, r2, r1
 2672 0078 92B2     		uxth	r2, r2
 2673 007a 1A84     		strh	r2, [r3, #32]	@ movhi
 901:bluetooth_rxtx.c **** 				} else {
 2674              		.loc 1 901 0
 2675 007c DA8B     		ldrh	r2, [r3, #30]
 2676 007e 9A83     		strh	r2, [r3, #28]	@ movhi
 2677 0080 DCE7     		b	.L254
 2678              	.L256:
 893:bluetooth_rxtx.c **** 			//debug_printf("I 1\n");
 2679              		.loc 1 893 0
 2680 0082 957A     		ldrb	r5, [r2, #10]	@ zero_extendqisi2
 2681 0084 062D     		cmp	r5, #6
 2682 0086 EAD0     		beq	.L272
 907:bluetooth_rxtx.c **** 			u32 now = CLK100NS;
 2683              		.loc 1 907 0
 2684 0088 917A     		ldrb	r1, [r2, #10]	@ zero_extendqisi2
 2685 008a 0729     		cmp	r1, #7
 2686 008c 23D1     		bne	.L260
 907:bluetooth_rxtx.c **** 			u32 now = CLK100NS;
 2687              		.loc 1 907 0 is_stmt 0 discriminator 1
 2688 008e 92F82450 		ldrb	r5, [r2, #36]	@ zero_extendqisi2
 2689 0092 012D     		cmp	r5, #1
 2690 0094 1FD1     		bne	.L260
 2691              	.LBB64:
 2692              	.LBB65:
 2693              	.LBB66:
 239:bluetooth_rxtx.c **** 	//T0MCR &= ~TMCR_MR1I;
 2694              		.loc 1 239 0 is_stmt 1
 2695 0096 6FF00106 		mvn	r6, #1
 2696              	.LBE66:
 2697              	.LBE65:
 908:bluetooth_rxtx.c **** 			do_transmit = 1;
 2698              		.loc 1 908 0
 2699 009a 0168     		ldr	r1, [r0]
 2700              	.LBB69:
 2701              	.LBB67:
 239:bluetooth_rxtx.c **** 	//T0MCR &= ~TMCR_MR1I;
 2702              		.loc 1 239 0
ARM GAS  /tmp/ccyBazZt.s 			page 96


 2703 009c 174C     		ldr	r4, .L273+12
 2704              	.LBE67:
 2705              	.LBE69:
 908:bluetooth_rxtx.c **** 			do_transmit = 1;
 2706              		.loc 1 908 0
 2707 009e 1848     		ldr	r0, .L273+16
 911:bluetooth_rxtx.c **** 			//debug_printf("do_transmit = %d\n",do_transmit);
 2708              		.loc 1 911 0
 2709 00a0 DB8B     		ldrh	r3, [r3, #30]
 908:bluetooth_rxtx.c **** 			do_transmit = 1;
 2710              		.loc 1 908 0
 2711 00a2 0068     		ldr	r0, [r0]
 2712              	.LVL366:
 909:bluetooth_rxtx.c **** 			timer2_clear_match();
 2713              		.loc 1 909 0
 2714 00a4 82F82C50 		strb	r5, [r2, #44]
 2715              	.LBB70:
 2716              	.LBB68:
 239:bluetooth_rxtx.c **** 	//T0MCR &= ~TMCR_MR1I;
 2717              		.loc 1 239 0
 2718 00a8 2660     		str	r6, [r4]
 2719              	.LBE68:
 2720              	.LBE70:
 911:bluetooth_rxtx.c **** 			//debug_printf("do_transmit = %d\n",do_transmit);
 2721              		.loc 1 911 0
 2722 00aa D269     		ldr	r2, [r2, #28]
 2723 00ac 9638     		subs	r0, r0, #150
 2724              	.LVL367:
 2725 00ae 801A     		subs	r0, r0, r2
 2726              	.LVL368:
 908:bluetooth_rxtx.c **** 			do_transmit = 1;
 2727              		.loc 1 908 0
 2728 00b0 C1F31302 		ubfx	r2, r1, #0, #20
 911:bluetooth_rxtx.c **** 			//debug_printf("do_transmit = %d\n",do_transmit);
 2729              		.loc 1 911 0
 2730 00b4 40F63541 		movw	r1, #3125
 2731 00b8 01FB0202 		mla	r2, r1, r2, r0
 2732 00bc 43F2D401 		movw	r1, #12500
 2733 00c0 01FB0322 		mla	r2, r1, r3, r2
 2734              	.LVL369:
 2735              	.LBB71:
 2736              	.LBB72:
 232:bluetooth_rxtx.c **** 	T0MCR = TMCR_MR0I;
 2737              		.loc 1 232 0
 2738 00c4 0F4B     		ldr	r3, .L273+20
 2739 00c6 1A60     		str	r2, [r3]
 233:bluetooth_rxtx.c **** 	//T0MR1 = match;
 2740              		.loc 1 233 0
 2741 00c8 2560     		str	r5, [r4]
 2742 00ca B7E7     		b	.L254
 2743              	.LVL370:
 2744              	.L259:
 2745              	.LBE72:
 2746              	.LBE71:
 2747              	.LBE64:
 903:bluetooth_rxtx.c **** 				}
 2748              		.loc 1 903 0
ARM GAS  /tmp/ccyBazZt.s 			page 97


 2749 00cc 4FF48072 		mov	r2, #256
 2750 00d0 0D4B     		ldr	r3, .L273+24
 2751 00d2 1A60     		str	r2, [r3]
 2752 00d4 B2E7     		b	.L254
 2753              	.L260:
 914:bluetooth_rxtx.c **** 			if( (last_hop + hop_timeout) == clkn ) {
 2754              		.loc 1 914 0
 2755 00d6 A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
 2756 00d8 052B     		cmp	r3, #5
 2757 00da AFD1     		bne	.L254
 915:bluetooth_rxtx.c **** 				do_hop = 1;
 2758              		.loc 1 915 0
 2759 00dc 0B4A     		ldr	r2, .L273+28
 2760 00de B7F84E30 		ldrh	r3, [r7, #78]
 2761 00e2 1168     		ldr	r1, [r2]
 2762 00e4 9BB2     		uxth	r3, r3
 2763 00e6 3268     		ldr	r2, [r6]
 2764 00e8 0B44     		add	r3, r3, r1
 2765 00ea 9342     		cmp	r3, r2
 2766 00ec A6D1     		bne	.L254
 2767 00ee 9AE7     		b	.L267
 2768              	.L274:
 2769              		.align	2
 2770              	.L273:
 2771 00f0 00000000 		.word	clkn
 2772 00f4 00000000 		.word	.LANCHOR1
 2773 00f8 00000000 		.word	.LANCHOR0
 2774 00fc 14400040 		.word	1073758228
 2775 0100 08400040 		.word	1073758216
 2776 0104 18400040 		.word	1073758232
 2777 0108 3CC00920 		.word	537509948
 2778 010c 00000000 		.word	last_hop
 2779              	.LBE63:
 2780              		.cfi_endproc
 2781              	.LFE5:
 2783              		.section	.text.EINT3_IRQHandler,"ax",%progbits
 2784              		.align	1
 2785              		.global	EINT3_IRQHandler
 2786              		.syntax unified
 2787              		.thumb
 2788              		.thumb_func
 2789              		.fpu softvfp
 2791              	EINT3_IRQHandler:
 2792              	.LFB6:
 962:bluetooth_rxtx.c **** 	/* TODO - check specific source of shared interrupt */
 2793              		.loc 1 962 0
 2794              		.cfi_startproc
 2795              		@ args = 0, pretend = 0, frame = 0
 2796              		@ frame_needed = 0, uses_anonymous_args = 0
 2797              		@ link register save eliminated.
 964:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;           // enable SPI
 2798              		.loc 1 964 0
 2799 0000 0422     		movs	r2, #4
 2800 0002 084B     		ldr	r3, .L277
 2801 0004 1A60     		str	r2, [r3]
 965:bluetooth_rxtx.c **** 	cs_trigger  = 1;        // signal trigger
 2802              		.loc 1 965 0
ARM GAS  /tmp/ccyBazZt.s 			page 98


 2803 0006 4FF08052 		mov	r2, #268435456
 2804 000a 074B     		ldr	r3, .L277+4
 2805 000c 1A60     		str	r2, [r3]
 966:bluetooth_rxtx.c **** 	if (hop_mode == HOP_BLUETOOTH)
 2806              		.loc 1 966 0
 2807 000e 0122     		movs	r2, #1
 2808 0010 064B     		ldr	r3, .L277+8
 2809 0012 1A70     		strb	r2, [r3]
 967:bluetooth_rxtx.c **** 		dma_discard = 0;
 2810              		.loc 1 967 0
 2811 0014 064B     		ldr	r3, .L277+12
 2812 0016 9A7A     		ldrb	r2, [r3, #10]	@ zero_extendqisi2
 2813 0018 022A     		cmp	r2, #2
 968:bluetooth_rxtx.c **** 
 2814              		.loc 1 968 0
 2815 001a 04BF     		itt	eq
 2816 001c 0022     		moveq	r2, #0
 2817 001e 1A74     		strbeq	r2, [r3, #16]
 2818 0020 7047     		bx	lr
 2819              	.L278:
 2820 0022 00BF     		.align	2
 2821              	.L277:
 2822 0024 AC800240 		.word	1073905836
 2823 0028 9CC00920 		.word	537510044
 2824 002c 00000000 		.word	cs_trigger
 2825 0030 00000000 		.word	.LANCHOR1
 2826              		.cfi_endproc
 2827              	.LFE6:
 2829              		.section	.text.legacy_DMA_IRQHandler,"ax",%progbits
 2830              		.align	1
 2831              		.global	legacy_DMA_IRQHandler
 2832              		.syntax unified
 2833              		.thumb
 2834              		.thumb_func
 2835              		.fpu softvfp
 2837              	legacy_DMA_IRQHandler:
 2838              	.LFB9:
1017:bluetooth_rxtx.c **** 
 2839              		.loc 1 1017 0
 2840              		.cfi_startproc
 2841              		@ args = 0, pretend = 0, frame = 0
 2842              		@ frame_needed = 0, uses_anonymous_args = 0
 2843 0000 10B5     		push	{r4, lr}
 2844              		.cfi_def_cfa_offset 8
 2845              		.cfi_offset 4, -8
 2846              		.cfi_offset 14, -4
1019:bluetooth_rxtx.c **** 	   || mode == MODE_BT_FOLLOW
 2847              		.loc 1 1019 0
 2848 0002 2A4B     		ldr	r3, .L318
 2849 0004 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 2850 0006 012A     		cmp	r2, #1
 2851 0008 14D0     		beq	.L280
1020:bluetooth_rxtx.c **** 	   || mode == MODE_SPECAN
 2852              		.loc 1 1020 0
 2853 000a 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 2854 000c 082A     		cmp	r2, #8
 2855 000e 11D0     		beq	.L280
ARM GAS  /tmp/ccyBazZt.s 			page 99


1021:bluetooth_rxtx.c **** 	   || mode == MODE_BT_FOLLOW_LE
 2856              		.loc 1 1021 0
 2857 0010 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 2858 0012 042A     		cmp	r2, #4
 2859 0014 0ED0     		beq	.L280
1022:bluetooth_rxtx.c **** 	   || mode == MODE_BT_PROMISC_LE
 2860              		.loc 1 1022 0
 2861 0016 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 2862 0018 092A     		cmp	r2, #9
 2863 001a 0BD0     		beq	.L280
1023:bluetooth_rxtx.c **** 	   || mode == MODE_BT_TRANSMIT_LE
 2864              		.loc 1 1023 0
 2865 001c 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 2866 001e 0A2A     		cmp	r2, #10
 2867 0020 08D0     		beq	.L280
1024:bluetooth_rxtx.c **** 	   || mode == MODE_BT_SLAVE_LE
 2868              		.loc 1 1024 0
 2869 0022 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 2870 0024 112A     		cmp	r2, #17
 2871 0026 05D0     		beq	.L280
1025:bluetooth_rxtx.c **** 	   || mode == MODE_RX_GENERIC)
 2872              		.loc 1 1025 0
 2873 0028 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 2874 002a 0C2A     		cmp	r2, #12
 2875 002c 02D0     		beq	.L280
1026:bluetooth_rxtx.c **** 	{
 2876              		.loc 1 1026 0
 2877 002e 5A7C     		ldrb	r2, [r3, #17]	@ zero_extendqisi2
 2878 0030 0F2A     		cmp	r2, #15
 2879 0032 3AD1     		bne	.L279
 2880              	.L280:
1029:bluetooth_rxtx.c **** 			if (DMACIntTCStat & (1 << 0)) {
 2881              		.loc 1 1029 0
 2882 0034 1E4A     		ldr	r2, .L318+4
 2883 0036 1268     		ldr	r2, [r2]
 2884 0038 D107     		lsls	r1, r2, #31
 2885 003a 36D5     		bpl	.L279
 2886              	.LBB76:
1030:bluetooth_rxtx.c **** 				DMACIntTCClear = (1 << 0);
 2887              		.loc 1 1030 0
 2888 003c 1D4A     		ldr	r2, .L318+8
 2889 003e 1268     		ldr	r2, [r2]
 2890 0040 D207     		lsls	r2, r2, #31
 2891 0042 27D5     		bpl	.L283
 2892              	.LBB77:
1031:bluetooth_rxtx.c **** 
 2893              		.loc 1 1031 0
 2894 0044 0121     		movs	r1, #1
 2895 0046 1C4A     		ldr	r2, .L318+12
1036:bluetooth_rxtx.c **** 				idle_buf_clkn_high = (clkn >> 20) & 0xff;
 2896              		.loc 1 1036 0
 2897 0048 40F63544 		movw	r4, #3125
1031:bluetooth_rxtx.c **** 
 2898              		.loc 1 1031 0
 2899 004c 1160     		str	r1, [r2]
1033:bluetooth_rxtx.c **** 					DIO_SSEL_SET;
 2900              		.loc 1 1033 0
ARM GAS  /tmp/ccyBazZt.s 			page 100


 2901 004e 9A7A     		ldrb	r2, [r3, #10]	@ zero_extendqisi2
1036:bluetooth_rxtx.c **** 				idle_buf_clkn_high = (clkn >> 20) & 0xff;
 2902              		.loc 1 1036 0
 2903 0050 1A48     		ldr	r0, .L318+16
1033:bluetooth_rxtx.c **** 					DIO_SSEL_SET;
 2904              		.loc 1 1033 0
 2905 0052 022A     		cmp	r2, #2
1034:bluetooth_rxtx.c **** 
 2906              		.loc 1 1034 0
 2907 0054 02BF     		ittt	eq
 2908 0056 4FF08051 		moveq	r1, #268435456
 2909 005a 194A     		ldreq	r2, .L318+20
 2910 005c 1160     		streq	r1, [r2]
1036:bluetooth_rxtx.c **** 				idle_buf_clkn_high = (clkn >> 20) & 0xff;
 2911              		.loc 1 1036 0
 2912 005e 1949     		ldr	r1, .L318+24
 2913 0060 0A68     		ldr	r2, [r1]
 2914 0062 0068     		ldr	r0, [r0]
 2915 0064 C2F31302 		ubfx	r2, r2, #0, #20
 2916 0068 04FB0202 		mla	r2, r4, r2, r0
 2917 006c 5A60     		str	r2, [r3, #4]
1037:bluetooth_rxtx.c **** 				idle_buf_channel   = channel;
 2918              		.loc 1 1037 0
 2919 006e 0A68     		ldr	r2, [r1]
 2920 0070 C2F30752 		ubfx	r2, r2, #20, #8
 2921 0074 9A70     		strb	r2, [r3, #2]
1038:bluetooth_rxtx.c **** 
 2922              		.loc 1 1038 0
 2923 0076 144A     		ldr	r2, .L318+28
 2924 0078 B2F84C20 		ldrh	r2, [r2, #76]
 2925 007c 92B2     		uxth	r2, r2
 2926 007e 1A81     		strh	r2, [r3, #8]	@ movhi
1041:bluetooth_rxtx.c **** 				active_rxbuf = idle_rxbuf;
 2927              		.loc 1 1041 0
 2928 0080 124A     		ldr	r2, .L318+32
1042:bluetooth_rxtx.c **** 				idle_rxbuf = tmp;
 2929              		.loc 1 1042 0
 2930 0082 134B     		ldr	r3, .L318+36
1041:bluetooth_rxtx.c **** 				active_rxbuf = idle_rxbuf;
 2931              		.loc 1 1041 0
 2932 0084 1168     		ldr	r1, [r2]
 2933              	.LVL371:
1042:bluetooth_rxtx.c **** 				idle_rxbuf = tmp;
 2934              		.loc 1 1042 0
 2935 0086 1868     		ldr	r0, [r3]
 2936 0088 1060     		str	r0, [r2]
1045:bluetooth_rxtx.c **** 			}
 2937              		.loc 1 1045 0
 2938 008a 124A     		ldr	r2, .L318+40
1043:bluetooth_rxtx.c **** 
 2939              		.loc 1 1043 0
 2940 008c 1960     		str	r1, [r3]
1045:bluetooth_rxtx.c **** 			}
 2941              		.loc 1 1045 0
 2942 008e 1368     		ldr	r3, [r2]
 2943 0090 0133     		adds	r3, r3, #1
 2944 0092 1360     		str	r3, [r2]
ARM GAS  /tmp/ccyBazZt.s 			page 101


 2945              	.LVL372:
 2946              	.L283:
 2947              	.LBE77:
1047:bluetooth_rxtx.c **** 				DMACIntErrClr = (1 << 0);
 2948              		.loc 1 1047 0
 2949 0094 104B     		ldr	r3, .L318+44
 2950 0096 1B68     		ldr	r3, [r3]
 2951 0098 DB07     		lsls	r3, r3, #31
 2952 009a 06D5     		bpl	.L279
1048:bluetooth_rxtx.c **** 				++rx_err;
 2953              		.loc 1 1048 0
 2954 009c 0122     		movs	r2, #1
 2955 009e 0F4B     		ldr	r3, .L318+48
 2956 00a0 1A60     		str	r2, [r3]
1049:bluetooth_rxtx.c **** 			}
 2957              		.loc 1 1049 0
 2958 00a2 0F4A     		ldr	r2, .L318+52
 2959 00a4 1368     		ldr	r3, [r2]
 2960 00a6 0133     		adds	r3, r3, #1
 2961 00a8 1360     		str	r3, [r2]
 2962              	.L279:
 2963 00aa 10BD     		pop	{r4, pc}
 2964              	.L319:
 2965              		.align	2
 2966              	.L318:
 2967 00ac 00000000 		.word	.LANCHOR1
 2968 00b0 00400050 		.word	1342193664
 2969 00b4 04400050 		.word	1342193668
 2970 00b8 08400050 		.word	1342193672
 2971 00bc 08400040 		.word	1073758216
 2972 00c0 98C00920 		.word	537510040
 2973 00c4 00000000 		.word	clkn
 2974 00c8 00000000 		.word	.LANCHOR0
 2975 00cc 00000000 		.word	active_rxbuf
 2976 00d0 00000000 		.word	idle_rxbuf
 2977 00d4 00000000 		.word	rx_tc
 2978 00d8 0C400050 		.word	1342193676
 2979 00dc 10400050 		.word	1342193680
 2980 00e0 00000000 		.word	rx_err
 2981              	.LBE76:
 2982              		.cfi_endproc
 2983              	.LFE9:
 2985              		.section	.text.DMA_IRQHandler,"ax",%progbits
 2986              		.align	1
 2987              		.global	DMA_IRQHandler
 2988              		.syntax unified
 2989              		.thumb
 2990              		.thumb_func
 2991              		.fpu softvfp
 2993              	DMA_IRQHandler:
 2994              	.LFB8:
 993:bluetooth_rxtx.c **** 	if (mode == MODE_BT_FOLLOW_LE)
 2995              		.loc 1 993 0
 2996              		.cfi_startproc
 2997              		@ args = 0, pretend = 0, frame = 0
 2998              		@ frame_needed = 0, uses_anonymous_args = 0
 2999 0000 08B5     		push	{r3, lr}
ARM GAS  /tmp/ccyBazZt.s 			page 102


 3000              		.cfi_def_cfa_offset 8
 3001              		.cfi_offset 3, -8
 3002              		.cfi_offset 14, -4
 994:bluetooth_rxtx.c **** 		le_DMA_IRQHandler();
 3003              		.loc 1 994 0
 3004 0002 114B     		ldr	r3, .L335
 3005 0004 5B7C     		ldrb	r3, [r3, #17]	@ zero_extendqisi2
 3006 0006 092B     		cmp	r3, #9
 3007 0008 1AD1     		bne	.L321
 995:bluetooth_rxtx.c **** 	else
 3008              		.loc 1 995 0
 3009 000a FFF7FEFF 		bl	le_DMA_IRQHandler
 3010              	.LVL373:
 3011              	.L322:
1000:bluetooth_rxtx.c **** 		// TC -- DMA completed, unset flag so another printf can occur
 3012              		.loc 1 1000 0
 3013 000e 0F4B     		ldr	r3, .L335+4
 3014 0010 1B68     		ldr	r3, [r3]
 3015 0012 1906     		lsls	r1, r3, #24
 3016 0014 17D5     		bpl	.L320
1002:bluetooth_rxtx.c **** 			DMACIntTCClear = (1 << 7);
 3017              		.loc 1 1002 0
 3018 0016 0E4B     		ldr	r3, .L335+8
 3019 0018 1B68     		ldr	r3, [r3]
 3020 001a 1A06     		lsls	r2, r3, #24
 3021 001c 05D5     		bpl	.L324
1003:bluetooth_rxtx.c **** 			debug_dma_active = 0;
 3022              		.loc 1 1003 0
 3023 001e 8022     		movs	r2, #128
 3024 0020 0C4B     		ldr	r3, .L335+12
 3025 0022 1A60     		str	r2, [r3]
1004:bluetooth_rxtx.c **** 		}
 3026              		.loc 1 1004 0
 3027 0024 0022     		movs	r2, #0
 3028 0026 0C4B     		ldr	r3, .L335+16
 3029 0028 1A60     		str	r2, [r3]
 3030              	.L324:
1007:bluetooth_rxtx.c **** 			DMACIntErrClr = (1 << 7);
 3031              		.loc 1 1007 0
 3032 002a 0C4B     		ldr	r3, .L335+20
 3033 002c 1B68     		ldr	r3, [r3]
 3034 002e 1B06     		lsls	r3, r3, #24
 3035 0030 09D5     		bpl	.L320
1008:bluetooth_rxtx.c **** 			// FIXME do something better here
 3036              		.loc 1 1008 0
 3037 0032 8022     		movs	r2, #128
 3038 0034 0A4B     		ldr	r3, .L335+24
 3039 0036 1A60     		str	r2, [r3]
1010:bluetooth_rxtx.c **** 			while (1) { }
 3040              		.loc 1 1010 0
 3041 0038 0222     		movs	r2, #2
 3042 003a 0A4B     		ldr	r3, .L335+28
 3043 003c 1A60     		str	r2, [r3]
 3044              	.L325:
 3045 003e FEE7     		b	.L325
 3046              	.L321:
 997:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccyBazZt.s 			page 103


 3047              		.loc 1 997 0
 3048 0040 FFF7FEFF 		bl	legacy_DMA_IRQHandler
 3049              	.LVL374:
 3050 0044 E3E7     		b	.L322
 3051              	.L320:
 3052 0046 08BD     		pop	{r3, pc}
 3053              	.L336:
 3054              		.align	2
 3055              	.L335:
 3056 0048 00000000 		.word	.LANCHOR1
 3057 004c 00400050 		.word	1342193664
 3058 0050 04400050 		.word	1342193668
 3059 0054 08400050 		.word	1342193672
 3060 0058 00000000 		.word	debug_dma_active
 3061 005c 0C400050 		.word	1342193676
 3062 0060 10400050 		.word	1342193680
 3063 0064 38C00920 		.word	537509944
 3064              		.cfi_endproc
 3065              	.LFE8:
 3067              		.section	.text.le_transmit,"ax",%progbits
 3068              		.align	1
 3069              		.global	le_transmit
 3070              		.syntax unified
 3071              		.thumb
 3072              		.thumb_func
 3073              		.fpu softvfp
 3075              	le_transmit:
 3076              	.LFB14:
1278:bluetooth_rxtx.c **** 	unsigned i, j;
 3077              		.loc 1 1278 0
 3078              		.cfi_startproc
 3079              		@ args = 0, pretend = 0, frame = 48
 3080              		@ frame_needed = 0, uses_anonymous_args = 0
 3081              	.LVL375:
 3082 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 3083              		.cfi_def_cfa_offset 36
 3084              		.cfi_offset 4, -36
 3085              		.cfi_offset 5, -32
 3086              		.cfi_offset 6, -28
 3087              		.cfi_offset 7, -24
 3088              		.cfi_offset 8, -20
 3089              		.cfi_offset 9, -16
 3090              		.cfi_offset 10, -12
 3091              		.cfi_offset 11, -8
 3092              		.cfi_offset 14, -4
 3093 0004 8DB0     		sub	sp, sp, #52
 3094              		.cfi_def_cfa_offset 88
1278:bluetooth_rxtx.c **** 	unsigned i, j;
 3095              		.loc 1 1278 0
 3096 0006 0C46     		mov	r4, r1
 3097 0008 9046     		mov	r8, r2
1283:bluetooth_rxtx.c **** 
 3098              		.loc 1 1283 0
 3099 000a FFF7FEFF 		bl	rbit
 3100              	.LVL376:
1290:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 3101              		.loc 1 1290 0
ARM GAS  /tmp/ccyBazZt.s 			page 104


 3102 000e 504E     		ldr	r6, .L354
1283:bluetooth_rxtx.c **** 
 3103              		.loc 1 1283 0
 3104 0010 0746     		mov	r7, r0
 3105              	.LVL377:
1290:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 3106              		.loc 1 1290 0
 3107 0012 B6F84C00 		ldrh	r0, [r6, #76]
 3108              	.LVL378:
 3109 0016 282C     		cmp	r4, #40
 3110 0018 80B2     		uxth	r0, r0
 3111 001a 28BF     		it	cs
 3112 001c 2824     		movcs	r4, #40
 3113              	.LVL379:
 3114 001e FFF7FEFF 		bl	btle_channel_index
 3115              	.LVL380:
1293:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 3116              		.loc 1 1293 0
 3117 0022 4FF00009 		mov	r9, #0
1291:bluetooth_rxtx.c **** 		byte = data[i];
 3118              		.loc 1 1291 0
 3119 0026 C646     		mov	lr, r8
1296:bluetooth_rxtx.c **** 			byte >>= 1;
 3120              		.loc 1 1296 0
 3121 0028 4FF07F0A 		mov	r10, #127
1290:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 3122              		.loc 1 1290 0
 3123 002c 494D     		ldr	r5, .L354+4
 3124 002e 0DF10701 		add	r1, sp, #7
 3125 0032 2B5C     		ldrb	r3, [r5, r0]	@ zero_extendqisi2
 3126              	.LVL381:
 3127 0034 0196     		str	r6, [sp, #4]
 3128              	.LVL382:
 3129              	.L338:
1291:bluetooth_rxtx.c **** 		byte = data[i];
 3130              		.loc 1 1291 0 discriminator 1
 3131 0036 AEEB0802 		sub	r2, lr, r8
 3132 003a 9442     		cmp	r4, r2
 3133 003c 65D8     		bhi	.L340
1303:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 3134              		.loc 1 1303 0
 3135 003e 47F6FF71 		movw	r1, #32767
 3136 0042 0D20     		movs	r0, #13
 3137 0044 FFF7FEFF 		bl	cc2400_set
 3138              	.LVL383:
1304:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
 3139              		.loc 1 1304 0
 3140 0048 42F62231 		movw	r1, #11042
 3141 004c 1220     		movs	r0, #18
 3142 004e FFF7FEFF 		bl	cc2400_set
 3143              	.LVL384:
1305:bluetooth_rxtx.c **** 
 3144              		.loc 1 1305 0
 3145 0052 41F24B31 		movw	r1, #4939
 3146 0056 1420     		movs	r0, #20
 3147 0058 FFF7FEFF 		bl	cc2400_set
 3148              	.LVL385:
ARM GAS  /tmp/ccyBazZt.s 			page 105


1307:bluetooth_rxtx.c **** 	// 0 00 01 1 001 11 0 00 0 1
 3149              		.loc 1 1307 0
 3150 005c 40F6E141 		movw	r1, #3297
 3151 0060 2020     		movs	r0, #32
 3152 0062 FFF7FEFF 		bl	cc2400_set
 3153              	.LVL386:
1315:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 3154              		.loc 1 1315 0
 3155 0066 019B     		ldr	r3, [sp, #4]
 3156 0068 0220     		movs	r0, #2
 3157 006a B3F84C10 		ldrh	r1, [r3, #76]
 3158 006e 89B2     		uxth	r1, r1
 3159 0070 FFF7FEFF 		bl	cc2400_set
 3160              	.LVL387:
1316:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 3161              		.loc 1 1316 0
 3162 0074 0B21     		movs	r1, #11
 3163 0076 0520     		movs	r0, #5
 3164 0078 FFF7FEFF 		bl	cc2400_set
 3165              	.LVL388:
1317:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0014);    // FIFO_THRESHOLD: 20 bytes
 3166              		.loc 1 1317 0
 3167 007c 4021     		movs	r1, #64
 3168 007e 0320     		movs	r0, #3
 3169 0080 FFF7FEFF 		bl	cc2400_set
 3170              	.LVL389:
1318:bluetooth_rxtx.c **** 
 3171              		.loc 1 1318 0
 3172 0084 1421     		movs	r1, #20
 3173 0086 2320     		movs	r0, #35
 3174 0088 FFF7FEFF 		bl	cc2400_set
 3175              	.LVL390:
1322:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 3176              		.loc 1 1322 0
 3177 008c B9B2     		uxth	r1, r7
 3178 008e 2C20     		movs	r0, #44
 3179 0090 FFF7FEFF 		bl	cc2400_set
 3180              	.LVL391:
1323:bluetooth_rxtx.c **** 
 3181              		.loc 1 1323 0
 3182 0094 390C     		lsrs	r1, r7, #16
 3183 0096 2D20     		movs	r0, #45
 3184 0098 FFF7FEFF 		bl	cc2400_set
 3185              	.LVL392:
 3186              	.L341:
1326:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 3187              		.loc 1 1326 0 discriminator 1
 3188 009c FFF7FEFF 		bl	cc2400_status
 3189              	.LVL393:
 3190 00a0 4106     		lsls	r1, r0, #25
 3191 00a2 FBD5     		bpl	.L341
1327:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 3192              		.loc 1 1327 0
 3193 00a4 6120     		movs	r0, #97
 3194 00a6 FFF7FEFF 		bl	cc2400_strobe
 3195              	.LVL394:
 3196              	.L342:
ARM GAS  /tmp/ccyBazZt.s 			page 106


1328:bluetooth_rxtx.c **** 	TXLED_SET;
 3197              		.loc 1 1328 0 discriminator 1
 3198 00aa FFF7FEFF 		bl	cc2400_status
 3199              	.LVL395:
 3200 00ae 4207     		lsls	r2, r0, #29
 3201 00b0 FBD5     		bpl	.L342
1329:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 3202              		.loc 1 1329 0
 3203 00b2 4FF48072 		mov	r2, #256
 3204 00b6 284B     		ldr	r3, .L354+8
 3205 00b8 1A60     		str	r2, [r3]
1331:bluetooth_rxtx.c **** #endif
 3206              		.loc 1 1331 0
 3207 00ba 8022     		movs	r2, #128
 3208 00bc 1A62     		str	r2, [r3, #32]
 3209              	.L343:
1333:bluetooth_rxtx.c **** 
 3210              		.loc 1 1333 0 discriminator 1
 3211 00be 0E20     		movs	r0, #14
 3212 00c0 FFF7FEFF 		bl	cc2400_get
 3213              	.LVL396:
 3214 00c4 00F01F00 		and	r0, r0, #31
 3215 00c8 0F28     		cmp	r0, #15
 3216 00ca F8D1     		bne	.L343
1336:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 3217              		.loc 1 1336 0
 3218 00cc 2046     		mov	r0, r4
 3219 00ce 02A9     		add	r1, sp, #8
 3220 00d0 FFF7FEFF 		bl	cc2400_fifo_write
 3221              	.LVL397:
1337:bluetooth_rxtx.c **** 
 3222              		.loc 1 1337 0
 3223 00d4 6320     		movs	r0, #99
 3224 00d6 FFF7FEFF 		bl	cc2400_strobe
 3225              	.LVL398:
 3226              	.L344:
1339:bluetooth_rxtx.c **** 	TXLED_CLR;
 3227              		.loc 1 1339 0 discriminator 1
 3228 00da 0E20     		movs	r0, #14
 3229 00dc FFF7FEFF 		bl	cc2400_get
 3230              	.LVL399:
 3231 00e0 00F01F00 		and	r0, r0, #31
 3232 00e4 0F28     		cmp	r0, #15
 3233 00e6 F8D1     		bne	.L344
1340:bluetooth_rxtx.c **** 
 3234              		.loc 1 1340 0
 3235 00e8 4FF48072 		mov	r2, #256
 3236 00ec 1B4B     		ldr	r3, .L354+12
1342:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 3237              		.loc 1 1342 0
 3238 00ee 6420     		movs	r0, #100
1340:bluetooth_rxtx.c **** 
 3239              		.loc 1 1340 0
 3240 00f0 1A60     		str	r2, [r3]
1342:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 3241              		.loc 1 1342 0
 3242 00f2 FFF7FEFF 		bl	cc2400_strobe
ARM GAS  /tmp/ccyBazZt.s 			page 107


 3243              	.LVL400:
 3244              	.L345:
1343:bluetooth_rxtx.c **** 
 3245              		.loc 1 1343 0 discriminator 1
 3246 00f6 FFF7FEFF 		bl	cc2400_status
 3247              	.LVL401:
 3248 00fa 4307     		lsls	r3, r0, #29
 3249 00fc FBD4     		bmi	.L345
1346:bluetooth_rxtx.c **** #endif
 3250              		.loc 1 1346 0
 3251 00fe 8022     		movs	r2, #128
 3252 0100 174B     		ldr	r3, .L354+16
 3253 0102 1A60     		str	r2, [r3]
1348:bluetooth_rxtx.c **** 
 3254              		.loc 1 1348 0
 3255 0104 0DB0     		add	sp, sp, #52
 3256              		.cfi_remember_state
 3257              		.cfi_def_cfa_offset 36
 3258              		@ sp needed
 3259 0106 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3260              	.LVL402:
 3261              	.L340:
 3262              		.cfi_restore_state
1293:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 3263              		.loc 1 1293 0
 3264 010a 0726     		movs	r6, #7
 3265 010c 81F80190 		strb	r9, [r1, #1]
1292:bluetooth_rxtx.c **** 		txbuf[i] = 0;
 3266              		.loc 1 1292 0
 3267 0110 1EF8012B 		ldrb	r2, [lr], #1	@ zero_extendqisi2
 3268              	.LVL403:
 3269 0114 11F801CF 		ldrb	ip, [r1, #1]!	@ zero_extendqisi2
 3270              	.LVL404:
 3271              	.L339:
1295:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 3272              		.loc 1 1295 0 discriminator 3
 3273 0118 E818     		adds	r0, r5, r3
 3274 011a 90F82800 		ldrb	r0, [r0, #40]	@ zero_extendqisi2
 3275 011e 02F0010B 		and	fp, r2, #1
 3276 0122 8BEA0000 		eor	r0, fp, r0
 3277              	.LVL405:
1296:bluetooth_rxtx.c **** 			byte >>= 1;
 3278              		.loc 1 1296 0 discriminator 3
 3279 0126 03F1010B 		add	fp, r3, #1
 3280 012a BBFBFAF3 		udiv	r3, fp, r10
 3281              	.LVL406:
1298:bluetooth_rxtx.c **** 		}
 3282              		.loc 1 1298 0 discriminator 3
 3283 012e B040     		lsls	r0, r0, r6
 3284              	.LVL407:
1296:bluetooth_rxtx.c **** 			byte >>= 1;
 3285              		.loc 1 1296 0 discriminator 3
 3286 0130 C3EBC313 		rsb	r3, r3, r3, lsl #7
1298:bluetooth_rxtx.c **** 		}
 3287              		.loc 1 1298 0 discriminator 3
 3288 0134 40EA0C0C 		orr	ip, r0, ip
1294:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
ARM GAS  /tmp/ccyBazZt.s 			page 108


 3289              		.loc 1 1294 0 discriminator 3
 3290 0138 16F1FF36 		adds	r6, r6, #-1
 3291              	.LVL408:
1296:bluetooth_rxtx.c **** 			byte >>= 1;
 3292              		.loc 1 1296 0 discriminator 3
 3293 013c ABEB0303 		sub	r3, fp, r3
 3294              	.LVL409:
1297:bluetooth_rxtx.c **** 			txbuf[i] |= bit << (7 - j);
 3295              		.loc 1 1297 0 discriminator 3
 3296 0140 4FEA5202 		lsr	r2, r2, #1
 3297              	.LVL410:
1298:bluetooth_rxtx.c **** 		}
 3298              		.loc 1 1298 0 discriminator 3
 3299 0144 5FFA8CFC 		uxtb	ip, ip
 3300              	.LVL411:
1294:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 3301              		.loc 1 1294 0 discriminator 3
 3302 0148 E6D2     		bcs	.L339
 3303 014a 81F800C0 		strb	ip, [r1]
 3304              	.LVL412:
 3305 014e 72E7     		b	.L338
 3306              	.L355:
 3307              		.align	2
 3308              	.L354:
 3309 0150 00000000 		.word	.LANCHOR0
 3310 0154 00000000 		.word	.LANCHOR2
 3311 0158 38C00920 		.word	537509944
 3312 015c 3CC00920 		.word	537509948
 3313 0160 5CC00920 		.word	537509980
 3314              		.cfi_endproc
 3315              	.LFE14:
 3317              		.section	.text.le_jam,"ax",%progbits
 3318              		.align	1
 3319              		.global	le_jam
 3320              		.syntax unified
 3321              		.thumb
 3322              		.thumb_func
 3323              		.fpu softvfp
 3325              	le_jam:
 3326              	.LFB15:
1350:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 3327              		.loc 1 1350 0
 3328              		.cfi_startproc
 3329              		@ args = 0, pretend = 0, frame = 0
 3330              		@ frame_needed = 0, uses_anonymous_args = 0
 3331 0000 08B5     		push	{r3, lr}
 3332              		.cfi_def_cfa_offset 8
 3333              		.cfi_offset 3, -8
 3334              		.cfi_offset 14, -4
1352:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 3335              		.loc 1 1352 0
 3336 0002 47F6FF71 		movw	r1, #32767
 3337 0006 0D20     		movs	r0, #13
 3338 0008 FFF7FEFF 		bl	cc2400_set
 3339              	.LVL413:
1353:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x234b);    // PRNG, 1 MHz offset
 3340              		.loc 1 1353 0
ARM GAS  /tmp/ccyBazZt.s 			page 109


 3341 000c 42F62231 		movw	r1, #11042
 3342 0010 1220     		movs	r0, #18
 3343 0012 FFF7FEFF 		bl	cc2400_set
 3344              	.LVL414:
1354:bluetooth_rxtx.c **** 
 3345              		.loc 1 1354 0
 3346 0016 42F24B31 		movw	r1, #9035
 3347 001a 1420     		movs	r0, #20
 3348 001c FFF7FEFF 		bl	cc2400_set
 3349              	.LVL415:
1356:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
 3350              		.loc 1 1356 0
 3351 0020 40F60141 		movw	r1, #3073
 3352 0024 2020     		movs	r0, #32
 3353 0026 FFF7FEFF 		bl	cc2400_set
 3354              	.LVL416:
1365:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 3355              		.loc 1 1365 0
 3356 002a 0B21     		movs	r1, #11
 3357 002c 0520     		movs	r0, #5
 3358 002e FFF7FEFF 		bl	cc2400_set
 3359              	.LVL417:
1366:bluetooth_rxtx.c **** 
 3360              		.loc 1 1366 0
 3361 0032 4021     		movs	r1, #64
 3362 0034 0320     		movs	r0, #3
 3363 0036 FFF7FEFF 		bl	cc2400_set
 3364              	.LVL418:
 3365              	.L357:
1368:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 3366              		.loc 1 1368 0 discriminator 1
 3367 003a FFF7FEFF 		bl	cc2400_status
 3368              	.LVL419:
 3369 003e 4206     		lsls	r2, r0, #25
 3370 0040 FBD5     		bpl	.L357
1369:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 3371              		.loc 1 1369 0
 3372 0042 6120     		movs	r0, #97
 3373 0044 FFF7FEFF 		bl	cc2400_strobe
 3374              	.LVL420:
 3375              	.L358:
1370:bluetooth_rxtx.c **** 	TXLED_SET;
 3376              		.loc 1 1370 0 discriminator 1
 3377 0048 FFF7FEFF 		bl	cc2400_status
 3378              	.LVL421:
 3379 004c 4307     		lsls	r3, r0, #29
 3380 004e FBD5     		bpl	.L358
1371:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 3381              		.loc 1 1371 0
 3382 0050 4FF48072 		mov	r2, #256
 3383 0054 074B     		ldr	r3, .L365
 3384 0056 1A60     		str	r2, [r3]
1373:bluetooth_rxtx.c **** #endif
 3385              		.loc 1 1373 0
 3386 0058 8022     		movs	r2, #128
 3387 005a 1A62     		str	r2, [r3, #32]
 3388              	.L359:
ARM GAS  /tmp/ccyBazZt.s 			page 110


1375:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 3389              		.loc 1 1375 0 discriminator 1
 3390 005c 0E20     		movs	r0, #14
 3391 005e FFF7FEFF 		bl	cc2400_get
 3392              	.LVL422:
 3393 0062 00F01F00 		and	r0, r0, #31
 3394 0066 0F28     		cmp	r0, #15
 3395 0068 F8D1     		bne	.L359
1376:bluetooth_rxtx.c **** #endif
 3396              		.loc 1 1376 0
 3397 006a 6320     		movs	r0, #99
1378:bluetooth_rxtx.c **** 
 3398              		.loc 1 1378 0
 3399 006c BDE80840 		pop	{r3, lr}
 3400              		.cfi_restore 14
 3401              		.cfi_restore 3
 3402              		.cfi_def_cfa_offset 0
1376:bluetooth_rxtx.c **** #endif
 3403              		.loc 1 1376 0
 3404 0070 FFF7FEBF 		b	cc2400_strobe
 3405              	.LVL423:
 3406              	.L366:
 3407              		.align	2
 3408              	.L365:
 3409 0074 38C00920 		.word	537509944
 3410              		.cfi_endproc
 3411              	.LFE15:
 3413              		.section	.text.hop,"ax",%progbits
 3414              		.align	1
 3415              		.global	hop
 3416              		.syntax unified
 3417              		.thumb
 3418              		.thumb_func
 3419              		.fpu softvfp
 3421              	hop:
 3422              	.LFB16:
1384:bluetooth_rxtx.c ****     //static count = 0;
 3423              		.loc 1 1384 0
 3424              		.cfi_startproc
 3425              		@ args = 0, pretend = 0, frame = 0
 3426              		@ frame_needed = 0, uses_anonymous_args = 0
 3427 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3428              		.cfi_def_cfa_offset 24
 3429              		.cfi_offset 3, -24
 3430              		.cfi_offset 4, -20
 3431              		.cfi_offset 5, -16
 3432              		.cfi_offset 6, -12
 3433              		.cfi_offset 7, -8
 3434              		.cfi_offset 14, -4
1386:bluetooth_rxtx.c **** 	last_hop = clkn;
 3435              		.loc 1 1386 0
 3436 0002 0023     		movs	r3, #0
 3437 0004 6C4C     		ldr	r4, .L412
1387:bluetooth_rxtx.c **** 
 3438              		.loc 1 1387 0
 3439 0006 6D4A     		ldr	r2, .L412+4
1386:bluetooth_rxtx.c **** 	last_hop = clkn;
ARM GAS  /tmp/ccyBazZt.s 			page 111


 3440              		.loc 1 1386 0
 3441 0008 E372     		strb	r3, [r4, #11]
1387:bluetooth_rxtx.c **** 
 3442              		.loc 1 1387 0
 3443 000a 6D4B     		ldr	r3, .L412+8
 3444 000c 1968     		ldr	r1, [r3]
 3445 000e 1160     		str	r1, [r2]
1390:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
 3446              		.loc 1 1390 0
 3447 0010 A27A     		ldrb	r2, [r4, #10]	@ zero_extendqisi2
 3448 0012 52B9     		cbnz	r2, .L368
1391:bluetooth_rxtx.c **** 			return;
 3449              		.loc 1 1391 0
 3450 0014 0220     		movs	r0, #2
 3451 0016 FFF7FEFF 		bl	cc2400_get
 3452              	.LVL424:
 3453 001a 6A4B     		ldr	r3, .L412+12
 3454 001c B3F84C30 		ldrh	r3, [r3, #76]
 3455 0020 9BB2     		uxth	r3, r3
 3456 0022 013B     		subs	r3, r3, #1
 3457 0024 9842     		cmp	r0, r3
 3458 0026 3CD1     		bne	.L370
 3459 0028 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3460              	.L368:
1397:bluetooth_rxtx.c **** 		do {
 3461              		.loc 1 1397 0
 3462 002a A27A     		ldrb	r2, [r4, #10]	@ zero_extendqisi2
 3463 002c 012A     		cmp	r2, #1
 3464 002e 67D1     		bne	.L371
1399:bluetooth_rxtx.c **** 			if (channel > 2480)
 3465              		.loc 1 1399 0
 3466 0030 6449     		ldr	r1, .L412+12
1402:bluetooth_rxtx.c **** 	}
 3467              		.loc 1 1402 0
 3468 0032 0826     		movs	r6, #8
 3469 0034 0846     		mov	r0, r1
 3470 0036 644B     		ldr	r3, .L412+16
 3471 0038 644D     		ldr	r5, .L412+20
 3472 003a 1F78     		ldrb	r7, [r3]	@ zero_extendqisi2
 3473 003c 644B     		ldr	r3, .L412+24
 3474 003e 93F800E0 		ldrb	lr, [r3]	@ zero_extendqisi2
 3475              	.L374:
1399:bluetooth_rxtx.c **** 			if (channel > 2480)
 3476              		.loc 1 1399 0
 3477 0042 B1F84C30 		ldrh	r3, [r1, #76]
 3478 0046 2033     		adds	r3, r3, #32
 3479 0048 9BB2     		uxth	r3, r3
 3480 004a A1F84C30 		strh	r3, [r1, #76]	@ movhi
1400:bluetooth_rxtx.c **** 				channel -= 79;
 3481              		.loc 1 1400 0
 3482 004e B1F84C30 		ldrh	r3, [r1, #76]
 3483 0052 9BB2     		uxth	r3, r3
 3484 0054 B3F51B6F 		cmp	r3, #2480
1401:bluetooth_rxtx.c **** 		} while ( used_channels != 0 && afh_enabled && !( afh_map[(channel-2402)/8] & 0x1<<((channel-2402
 3485              		.loc 1 1401 0
 3486 0058 81BF     		itttt	hi
 3487 005a B1F84C30 		ldrhhi	r3, [r1, #76]
ARM GAS  /tmp/ccyBazZt.s 			page 112


 3488 005e 4F3B     		subhi	r3, r3, #79
 3489 0060 9BB2     		uxthhi	r3, r3
 3490 0062 A1F84C30 		strhhi	r3, [r1, #76]	@ movhi
1402:bluetooth_rxtx.c **** 	}
 3491              		.loc 1 1402 0
 3492 0066 E7B1     		cbz	r7, .L370
1402:bluetooth_rxtx.c **** 	}
 3493              		.loc 1 1402 0 is_stmt 0 discriminator 1
 3494 0068 BEF1000F 		cmp	lr, #0
 3495 006c 19D0     		beq	.L370
1402:bluetooth_rxtx.c **** 	}
 3496              		.loc 1 1402 0 discriminator 2
 3497 006e B0F84C20 		ldrh	r2, [r0, #76]
 3498 0072 B0F84C30 		ldrh	r3, [r0, #76]
 3499 0076 92B2     		uxth	r2, r2
 3500 0078 A2F66212 		subw	r2, r2, #2402
 3501 007c 92FBF6F2 		sdiv	r2, r2, r6
 3502 0080 9BB2     		uxth	r3, r3
 3503 0082 A3F66213 		subw	r3, r3, #2402
 3504 0086 D3F1000C 		rsbs	ip, r3, #0
 3505 008a AA5C     		ldrb	r2, [r5, r2]	@ zero_extendqisi2
 3506 008c 0CF0070C 		and	ip, ip, #7
 3507 0090 03F00703 		and	r3, r3, #7
 3508 0094 58BF     		it	pl
 3509 0096 CCF10003 		rsbpl	r3, ip, #0
 3510 009a 42FA03F3 		asr	r3, r2, r3
 3511 009e DA07     		lsls	r2, r3, #31
 3512 00a0 CFD5     		bpl	.L374
 3513              	.L370:
1472:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 3514              		.loc 1 1472 0 is_stmt 1
 3515 00a2 6420     		movs	r0, #100
 3516 00a4 FFF7FEFF 		bl	cc2400_strobe
 3517              	.LVL425:
 3518              	.L382:
1473:bluetooth_rxtx.c **** 
 3519              		.loc 1 1473 0 discriminator 1
 3520 00a8 FFF7FEFF 		bl	cc2400_status
 3521              	.LVL426:
 3522 00ac 4207     		lsls	r2, r0, #29
 3523 00ae FBD4     		bmi	.L382
1476:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channel);
 3524              		.loc 1 1476 0
 3525 00b0 607C     		ldrb	r0, [r4, #17]	@ zero_extendqisi2
 3526 00b2 444D     		ldr	r5, .L412+12
 3527 00b4 C0B2     		uxtb	r0, r0
1477:bluetooth_rxtx.c **** 	else
 3528              		.loc 1 1477 0
 3529 00b6 B5F84C10 		ldrh	r1, [r5, #76]
1476:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channel);
 3530              		.loc 1 1476 0
 3531 00ba 0228     		cmp	r0, #2
1479:bluetooth_rxtx.c **** 
 3532              		.loc 1 1479 0
 3533 00bc 17BF     		itett	ne
 3534 00be 01F1FF31 		addne	r1, r1, #-1
1477:bluetooth_rxtx.c **** 	else
ARM GAS  /tmp/ccyBazZt.s 			page 113


 3535              		.loc 1 1477 0
 3536 00c2 89B2     		uxtheq	r1, r1
1479:bluetooth_rxtx.c **** 
 3537              		.loc 1 1479 0
 3538 00c4 89B2     		uxthne	r1, r1
 3539 00c6 0220     		movne	r0, #2
 3540 00c8 FFF7FEFF 		bl	cc2400_set
 3541              	.LVL427:
1482:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set(channel);
 3542              		.loc 1 1482 0
 3543 00cc A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
 3544 00ce 23B1     		cbz	r3, .L385
1483:bluetooth_rxtx.c **** 	}
 3545              		.loc 1 1483 0
 3546 00d0 B5F84C00 		ldrh	r0, [r5, #76]
 3547 00d4 80B2     		uxth	r0, r0
 3548 00d6 FFF7FEFF 		bl	cs_threshold_calc_and_set
 3549              	.LVL428:
 3550              	.L385:
1487:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 3551              		.loc 1 1487 0
 3552 00da 6120     		movs	r0, #97
 3553 00dc FFF7FEFF 		bl	cc2400_strobe
 3554              	.LVL429:
 3555              	.L386:
1488:bluetooth_rxtx.c **** 
 3556              		.loc 1 1488 0 discriminator 1
 3557 00e0 FFF7FEFF 		bl	cc2400_status
 3558              	.LVL430:
 3559 00e4 4307     		lsls	r3, r0, #29
 3560 00e6 FBD5     		bpl	.L386
1490:bluetooth_rxtx.c **** 
 3561              		.loc 1 1490 0
 3562 00e8 0123     		movs	r3, #1
 3563 00ea 2374     		strb	r3, [r4, #16]
1492:bluetooth_rxtx.c **** 		cc2400_strobe(STX);
 3564              		.loc 1 1492 0
 3565 00ec 637C     		ldrb	r3, [r4, #17]	@ zero_extendqisi2
 3566 00ee 022B     		cmp	r3, #2
1493:bluetooth_rxtx.c **** 	else
 3567              		.loc 1 1493 0
 3568 00f0 08BF     		it	eq
 3569 00f2 6320     		moveq	r0, #99
1496:bluetooth_rxtx.c **** 
 3570              		.loc 1 1496 0
 3571 00f4 BDE8F840 		pop	{r3, r4, r5, r6, r7, lr}
 3572              		.cfi_remember_state
 3573              		.cfi_restore 14
 3574              		.cfi_restore 7
 3575              		.cfi_restore 6
 3576              		.cfi_restore 5
 3577              		.cfi_restore 4
 3578              		.cfi_restore 3
 3579              		.cfi_def_cfa_offset 0
1495:bluetooth_rxtx.c **** }
 3580              		.loc 1 1495 0
 3581 00f8 18BF     		it	ne
ARM GAS  /tmp/ccyBazZt.s 			page 114


 3582 00fa 6220     		movne	r0, #98
 3583 00fc FFF7FEBF 		b	cc2400_strobe
 3584              	.LVL431:
 3585              	.L371:
 3586              		.cfi_restore_state
1407:bluetooth_rxtx.c **** 		do {
 3587              		.loc 1 1407 0
 3588 0100 A27A     		ldrb	r2, [r4, #10]	@ zero_extendqisi2
 3589 0102 052A     		cmp	r2, #5
 3590 0104 34D1     		bne	.L375
1409:bluetooth_rxtx.c **** 			if (channel > 2480)
 3591              		.loc 1 1409 0
 3592 0106 2F49     		ldr	r1, .L412+12
1412:bluetooth_rxtx.c **** 	}
 3593              		.loc 1 1412 0
 3594 0108 0826     		movs	r6, #8
 3595 010a 0846     		mov	r0, r1
 3596 010c 2E4B     		ldr	r3, .L412+16
 3597 010e 2F4D     		ldr	r5, .L412+20
 3598 0110 1F78     		ldrb	r7, [r3]	@ zero_extendqisi2
 3599              	.L377:
1409:bluetooth_rxtx.c **** 			if (channel > 2480)
 3600              		.loc 1 1409 0
 3601 0112 B1F84C30 		ldrh	r3, [r1, #76]
 3602 0116 2033     		adds	r3, r3, #32
 3603 0118 9BB2     		uxth	r3, r3
 3604 011a A1F84C30 		strh	r3, [r1, #76]	@ movhi
1410:bluetooth_rxtx.c **** 				channel -= 79;
 3605              		.loc 1 1410 0
 3606 011e B1F84C30 		ldrh	r3, [r1, #76]
 3607 0122 9BB2     		uxth	r3, r3
 3608 0124 B3F51B6F 		cmp	r3, #2480
1411:bluetooth_rxtx.c **** 		} while( used_channels != 79 && (afh_map[(channel-2402)/8] & 0x1<<((channel-2402)%8)) );
 3609              		.loc 1 1411 0
 3610 0128 81BF     		itttt	hi
 3611 012a B1F84C30 		ldrhhi	r3, [r1, #76]
 3612 012e 4F3B     		subhi	r3, r3, #79
 3613 0130 9BB2     		uxthhi	r3, r3
 3614 0132 A1F84C30 		strhhi	r3, [r1, #76]	@ movhi
1412:bluetooth_rxtx.c **** 	}
 3615              		.loc 1 1412 0
 3616 0136 4F2F     		cmp	r7, #79
 3617 0138 B3D0     		beq	.L370
1412:bluetooth_rxtx.c **** 	}
 3618              		.loc 1 1412 0 is_stmt 0 discriminator 1
 3619 013a B0F84C20 		ldrh	r2, [r0, #76]
 3620 013e B0F84C30 		ldrh	r3, [r0, #76]
 3621 0142 92B2     		uxth	r2, r2
 3622 0144 A2F66212 		subw	r2, r2, #2402
 3623 0148 92FBF6F2 		sdiv	r2, r2, r6
 3624 014c 9BB2     		uxth	r3, r3
 3625 014e A3F66213 		subw	r3, r3, #2402
 3626 0152 D3F1000E 		rsbs	lr, r3, #0
 3627 0156 AA5C     		ldrb	r2, [r5, r2]	@ zero_extendqisi2
 3628 0158 0EF0070E 		and	lr, lr, #7
 3629 015c 03F00703 		and	r3, r3, #7
 3630 0160 58BF     		it	pl
ARM GAS  /tmp/ccyBazZt.s 			page 115


 3631 0162 CEF10003 		rsbpl	r3, lr, #0
 3632 0166 42FA03F3 		asr	r3, r2, r3
 3633 016a DB07     		lsls	r3, r3, #31
 3634 016c D1D4     		bmi	.L377
 3635 016e 98E7     		b	.L370
 3636              	.L375:
1415:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
 3637              		.loc 1 1415 0 is_stmt 1
 3638 0170 A27A     		ldrb	r2, [r4, #10]	@ zero_extendqisi2
 3639 0172 022A     		cmp	r2, #2
 3640 0174 06D1     		bne	.L378
1416:bluetooth_rxtx.c **** 	}
 3641              		.loc 1 1416 0
 3642 0176 1868     		ldr	r0, [r3]
 3643 0178 FFF7FEFF 		bl	next_hop
 3644              	.LVL432:
 3645 017c 114B     		ldr	r3, .L412+12
 3646 017e A3F84C00 		strh	r0, [r3, #76]	@ movhi
 3647 0182 8EE7     		b	.L370
 3648              	.L378:
1419:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 3649              		.loc 1 1419 0
 3650 0184 A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
 3651 0186 062B     		cmp	r3, #6
 3652 0188 02D0     		beq	.L409
1419:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 3653              		.loc 1 1419 0 is_stmt 0 discriminator 1
 3654 018a A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
 3655 018c 072B     		cmp	r3, #7
 3656 018e 06D1     		bne	.L380
 3657              	.L409:
1425:bluetooth_rxtx.c **** 		//debug_printf("channel: %d,	%d\n", channel,CLK100NS);
 3658              		.loc 1 1425 0 is_stmt 1
 3659 0190 0C4D     		ldr	r5, .L412+12
 3660 0192 2846     		mov	r0, r5
 3661 0194 FFF7FEFF 		bl	btle_next_hop
 3662              	.LVL433:
 3663 0198 A5F84C00 		strh	r0, [r5, #76]	@ movhi
 3664 019c 81E7     		b	.L370
 3665              	.L380:
1424:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 3666              		.loc 1 1424 0
 3667 019e A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
 3668 01a0 032B     		cmp	r3, #3
 3669 01a2 F5D0     		beq	.L409
1468:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
 3670              		.loc 1 1468 0
 3671 01a4 A37A     		ldrb	r3, [r4, #10]	@ zero_extendqisi2
 3672 01a6 042B     		cmp	r3, #4
1469:bluetooth_rxtx.c **** 	}
 3673              		.loc 1 1469 0
 3674 01a8 01BF     		itttt	eq
 3675 01aa A389     		ldrheq	r3, [r4, #12]
 3676 01ac 054A     		ldreq	r2, .L412+12
 3677 01ae 9BB2     		uxtheq	r3, r3
 3678 01b0 A2F84C30 		strheq	r3, [r2, #76]	@ movhi
 3679 01b4 75E7     		b	.L370
ARM GAS  /tmp/ccyBazZt.s 			page 116


 3680              	.L413:
 3681 01b6 00BF     		.align	2
 3682              	.L412:
 3683 01b8 00000000 		.word	.LANCHOR1
 3684 01bc 00000000 		.word	last_hop
 3685 01c0 00000000 		.word	clkn
 3686 01c4 00000000 		.word	.LANCHOR0
 3687 01c8 00000000 		.word	used_channels
 3688 01cc 00000000 		.word	afh_map
 3689 01d0 00000000 		.word	afh_enabled
 3690              		.cfi_endproc
 3691              	.LFE16:
 3693              		.section	.text.bt_stream_rx,"ax",%progbits
 3694              		.align	1
 3695              		.global	bt_stream_rx
 3696              		.syntax unified
 3697              		.thumb
 3698              		.thumb_func
 3699              		.fpu softvfp
 3701              	bt_stream_rx:
 3702              	.LFB17:
1500:bluetooth_rxtx.c **** 	int8_t rssi;
 3703              		.loc 1 1500 0
 3704              		.cfi_startproc
 3705              		@ args = 0, pretend = 0, frame = 0
 3706              		@ frame_needed = 0, uses_anonymous_args = 0
 3707 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 3708              		.cfi_def_cfa_offset 40
 3709              		.cfi_offset 3, -40
 3710              		.cfi_offset 4, -36
 3711              		.cfi_offset 5, -32
 3712              		.cfi_offset 6, -28
 3713              		.cfi_offset 7, -24
 3714              		.cfi_offset 8, -20
 3715              		.cfi_offset 9, -16
 3716              		.cfi_offset 10, -12
 3717              		.cfi_offset 11, -8
 3718              		.cfi_offset 14, -4
1504:bluetooth_rxtx.c **** 
 3719              		.loc 1 1504 0
 3720 0004 1023     		movs	r3, #16
 3721 0006 4E4E     		ldr	r6, .L446
1515:bluetooth_rxtx.c **** 	{
 3722              		.loc 1 1515 0
 3723 0008 4E4F     		ldr	r7, .L446+4
1504:bluetooth_rxtx.c **** 
 3724              		.loc 1 1504 0
 3725 000a 3360     		str	r3, [r6]
1506:bluetooth_rxtx.c **** 	dio_ssp_init();
 3726              		.loc 1 1506 0
 3727 000c FFF7FEFF 		bl	usb_queue_init
 3728              	.LVL434:
 3729 0010 3C46     		mov	r4, r7
1507:bluetooth_rxtx.c **** 	dma_init_rx_symbols();
 3730              		.loc 1 1507 0
 3731 0012 FFF7FEFF 		bl	dio_ssp_init
 3732              	.LVL435:
ARM GAS  /tmp/ccyBazZt.s 			page 117


1508:bluetooth_rxtx.c **** 	dio_ssp_start();
 3733              		.loc 1 1508 0
 3734 0016 FFF7FEFF 		bl	dma_init_rx_symbols
 3735              	.LVL436:
1509:bluetooth_rxtx.c **** 
 3736              		.loc 1 1509 0
 3737 001a FFF7FEFF 		bl	dio_ssp_start
 3738              	.LVL437:
1511:bluetooth_rxtx.c **** 
 3739              		.loc 1 1511 0
 3740 001e FFF7FEFF 		bl	cc2400_rx
 3741              	.LVL438:
1513:bluetooth_rxtx.c **** 
 3742              		.loc 1 1513 0
 3743 0022 FFF7FEFF 		bl	cs_trigger_enable
 3744              	.LVL439:
1552:bluetooth_rxtx.c **** 
 3745              		.loc 1 1552 0
 3746 0026 DFF838B1 		ldr	fp, .L446+32
 3747              	.L415:
1515:bluetooth_rxtx.c **** 	{
 3748              		.loc 1 1515 0
 3749 002a BB7C     		ldrb	r3, [r7, #18]	@ zero_extendqisi2
 3750 002c 012B     		cmp	r3, #1
 3751 002e 08D0     		beq	.L427
1515:bluetooth_rxtx.c **** 	{
 3752              		.loc 1 1515 0 is_stmt 0 discriminator 1
 3753 0030 BB7C     		ldrb	r3, [r7, #18]	@ zero_extendqisi2
 3754 0032 082B     		cmp	r3, #8
 3755 0034 05D0     		beq	.L427
1589:bluetooth_rxtx.c **** 	cs_trigger_disable();
 3756              		.loc 1 1589 0 is_stmt 1
 3757 0036 FFF7FEFF 		bl	dio_ssp_stop
 3758              	.LVL440:
1591:bluetooth_rxtx.c **** 
 3759              		.loc 1 1591 0
 3760 003a BDE8F84F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 3761              		.cfi_remember_state
 3762              		.cfi_restore 14
 3763              		.cfi_restore 11
 3764              		.cfi_restore 10
 3765              		.cfi_restore 9
 3766              		.cfi_restore 8
 3767              		.cfi_restore 7
 3768              		.cfi_restore 6
 3769              		.cfi_restore 5
 3770              		.cfi_restore 4
 3771              		.cfi_restore 3
 3772              		.cfi_def_cfa_offset 0
1590:bluetooth_rxtx.c **** }
 3773              		.loc 1 1590 0
 3774 003e FFF7FEBF 		b	cs_trigger_disable
 3775              	.LVL441:
 3776              	.L427:
 3777              		.cfi_restore_state
1518:bluetooth_rxtx.c **** 
 3778              		.loc 1 1518 0
ARM GAS  /tmp/ccyBazZt.s 			page 118


 3779 0042 1023     		movs	r3, #16
 3780 0044 3360     		str	r3, [r6]
1530:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 3781              		.loc 1 1530 0
 3782 0046 FFF7FEFF 		bl	rssi_reset
 3783              	.LVL442:
1531:bluetooth_rxtx.c **** 		while (!rx_tc) {
 3784              		.loc 1 1531 0
 3785 004a 6FF07F05 		mvn	r5, #127
1532:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 3786              		.loc 1 1532 0
 3787 004e DFF81481 		ldr	r8, .L446+36
 3788 0052 DFF81491 		ldr	r9, .L446+40
 3789              	.LVL443:
 3790              	.L416:
 3791 0056 D8F80030 		ldr	r3, [r8]
 3792 005a DFF810A1 		ldr	r10, .L446+44
 3793 005e 002B     		cmp	r3, #0
 3794 0060 49D0     		beq	.L420
1552:bluetooth_rxtx.c **** 
 3795              		.loc 1 1552 0
 3796 0062 1023     		movs	r3, #16
1554:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 3797              		.loc 1 1554 0
 3798 0064 384D     		ldr	r5, .L446+8
 3799              	.LVL444:
1552:bluetooth_rxtx.c **** 
 3800              		.loc 1 1552 0
 3801 0066 CBF80030 		str	r3, [fp]
1554:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 3802              		.loc 1 1554 0
 3803 006a 2B68     		ldr	r3, [r5]
 3804 006c 1BB1     		cbz	r3, .L421
1555:bluetooth_rxtx.c **** 		}
 3805              		.loc 1 1555 0
 3806 006e 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 3807 0070 43F00203 		orr	r3, r3, #2
 3808 0074 6370     		strb	r3, [r4, #1]
 3809              	.L421:
1559:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 3810              		.loc 1 1559 0
 3811 0076 D8F80030 		ldr	r3, [r8]
 3812 007a 012B     		cmp	r3, #1
1560:bluetooth_rxtx.c **** 
 3813              		.loc 1 1560 0
 3814 007c 82BF     		ittt	hi
 3815 007e 6378     		ldrbhi	r3, [r4, #1]	@ zero_extendqisi2
 3816 0080 43F00103 		orrhi	r3, r3, #1
 3817 0084 6370     		strbhi	r3, [r4, #1]
1562:bluetooth_rxtx.c **** 			status |= DISCARD;
 3818              		.loc 1 1562 0
 3819 0086 237C     		ldrb	r3, [r4, #16]	@ zero_extendqisi2
 3820 0088 2BB1     		cbz	r3, .L423
1563:bluetooth_rxtx.c **** 			dma_discard = 0;
 3821              		.loc 1 1563 0
 3822 008a 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 3823 008c 43F02003 		orr	r3, r3, #32
ARM GAS  /tmp/ccyBazZt.s 			page 119


 3824 0090 6370     		strb	r3, [r4, #1]
1564:bluetooth_rxtx.c **** 		}
 3825              		.loc 1 1564 0
 3826 0092 0023     		movs	r3, #0
 3827 0094 2374     		strb	r3, [r4, #16]
 3828              	.L423:
1567:bluetooth_rxtx.c **** 
 3829              		.loc 1 1567 0
 3830 0096 2D4B     		ldr	r3, .L446+12
 3831 0098 B3F84C00 		ldrh	r0, [r3, #76]
 3832 009c 80B2     		uxth	r0, r0
 3833 009e FFF7FEFF 		bl	rssi_iir_update
 3834              	.LVL445:
1573:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 3835              		.loc 1 1573 0
 3836 00a2 99F80030 		ldrb	r3, [r9]	@ zero_extendqisi2
 3837 00a6 13B9     		cbnz	r3, .L424
1573:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 3838              		.loc 1 1573 0 is_stmt 0 discriminator 1
 3839 00a8 294B     		ldr	r3, .L446+16
 3840 00aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3841 00ac 33B1     		cbz	r3, .L425
 3842              	.L424:
1574:bluetooth_rxtx.c **** 			cs_trigger = 0;
 3843              		.loc 1 1574 0 is_stmt 1
 3844 00ae 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 3845 00b0 43F00803 		orr	r3, r3, #8
 3846 00b4 6370     		strb	r3, [r4, #1]
1575:bluetooth_rxtx.c **** 		}
 3847              		.loc 1 1575 0
 3848 00b6 0023     		movs	r3, #0
 3849 00b8 89F80030 		strb	r3, [r9]
 3850              	.L425:
1578:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 3851              		.loc 1 1578 0
 3852 00bc 254B     		ldr	r3, .L446+20
 3853 00be 264A     		ldr	r2, .L446+24
 3854 00c0 93F90030 		ldrsb	r3, [r3]
 3855 00c4 92F90020 		ldrsb	r2, [r2]
 3856 00c8 3533     		adds	r3, r3, #53
 3857 00ca 9342     		cmp	r3, r2
1579:bluetooth_rxtx.c **** 		}
 3858              		.loc 1 1579 0
 3859 00cc B8BF     		it	lt
 3860 00ce 6378     		ldrblt	r3, [r4, #1]	@ zero_extendqisi2
1582:bluetooth_rxtx.c **** 
 3861              		.loc 1 1582 0
 3862 00d0 4FF00000 		mov	r0, #0
1579:bluetooth_rxtx.c **** 		}
 3863              		.loc 1 1579 0
 3864 00d4 BCBF     		itt	lt
 3865 00d6 43F01003 		orrlt	r3, r3, #16
 3866 00da 6370     		strblt	r3, [r4, #1]
1582:bluetooth_rxtx.c **** 
 3867              		.loc 1 1582 0
 3868 00dc 1F4B     		ldr	r3, .L446+28
 3869 00de 1968     		ldr	r1, [r3]
ARM GAS  /tmp/ccyBazZt.s 			page 120


 3870 00e0 FFF7FEFF 		bl	enqueue
 3871              	.LVL446:
1584:bluetooth_rxtx.c **** 		rx_tc = 0;
 3872              		.loc 1 1584 0
 3873 00e4 DAF80000 		ldr	r0, [r10]
 3874 00e8 FFF7FEFF 		bl	handle_usb
 3875              	.LVL447:
1585:bluetooth_rxtx.c **** 		rx_err = 0;
 3876              		.loc 1 1585 0
 3877 00ec 0023     		movs	r3, #0
 3878 00ee C8F80030 		str	r3, [r8]
1586:bluetooth_rxtx.c **** 	}
 3879              		.loc 1 1586 0
 3880 00f2 2B60     		str	r3, [r5]
 3881 00f4 99E7     		b	.L415
 3882              	.LVL448:
 3883              	.L420:
1533:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 3884              		.loc 1 1533 0
 3885 00f6 0620     		movs	r0, #6
 3886 00f8 FFF7FEFF 		bl	cc2400_get
 3887              	.LVL449:
1534:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 3888              		.loc 1 1534 0
 3889 00fc 99F80030 		ldrb	r3, [r9]	@ zero_extendqisi2
1533:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 3890              		.loc 1 1533 0
 3891 0100 40F30720 		sbfx	r0, r0, #8, #8
 3892              	.LVL450:
1534:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 3893              		.loc 1 1534 0
 3894 0104 63B1     		cbz	r3, .L417
1534:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 3895              		.loc 1 1534 0 is_stmt 0 discriminator 1
 3896 0106 15F1800F 		cmn	r5, #128
 3897 010a 09D1     		bne	.L417
1535:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 3898              		.loc 1 1535 0 is_stmt 1
 3899 010c 114B     		ldr	r3, .L446+20
 3900 010e 93F90030 		ldrsb	r3, [r3]
 3901 0112 03F13605 		add	r5, r3, #54
 3902              	.LVL451:
 3903 0116 A842     		cmp	r0, r5
 3904 0118 B8BF     		it	lt
 3905 011a 2846     		movlt	r0, r5
 3906              	.LVL452:
 3907 011c 45B2     		sxtb	r5, r0
1536:bluetooth_rxtx.c **** 			}
 3908              		.loc 1 1536 0
 3909 011e 2846     		mov	r0, r5
 3910              	.L417:
 3911              	.LVL453:
1538:bluetooth_rxtx.c **** 
 3912              		.loc 1 1538 0
 3913 0120 FFF7FEFF 		bl	rssi_add
 3914              	.LVL454:
1540:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccyBazZt.s 			page 121


 3915              		.loc 1 1540 0
 3916 0124 DAF80000 		ldr	r0, [r10]
 3917 0128 FFF7FEFF 		bl	handle_usb
 3918              	.LVL455:
1543:bluetooth_rxtx.c **** 				hop();
 3919              		.loc 1 1543 0
 3920 012c E37A     		ldrb	r3, [r4, #11]	@ zero_extendqisi2
 3921 012e 13B1     		cbz	r3, .L418
1544:bluetooth_rxtx.c **** 			} else {
 3922              		.loc 1 1544 0
 3923 0130 FFF7FEFF 		bl	hop
 3924              	.LVL456:
 3925 0134 8FE7     		b	.L416
 3926              	.L418:
1546:bluetooth_rxtx.c **** 			}
 3927              		.loc 1 1546 0
 3928 0136 4FF48073 		mov	r3, #256
 3929 013a 3360     		str	r3, [r6]
 3930 013c 8BE7     		b	.L416
 3931              	.L447:
 3932 013e 00BF     		.align	2
 3933              	.L446:
 3934 0140 3CC00920 		.word	537509948
 3935 0144 00000000 		.word	.LANCHOR1
 3936 0148 00000000 		.word	rx_err
 3937 014c 00000000 		.word	.LANCHOR0
 3938 0150 00000000 		.word	cs_no_squelch
 3939 0154 00000000 		.word	cs_threshold_cur
 3940 0158 00000000 		.word	rssi_max
 3941 015c 00000000 		.word	idle_rxbuf
 3942 0160 38C00920 		.word	537509944
 3943 0164 00000000 		.word	rx_tc
 3944 0168 00000000 		.word	cs_trigger
 3945 016c 00000000 		.word	clkn
 3946              		.cfi_endproc
 3947              	.LFE17:
 3949              		.section	.text.br_transmit,"ax",%progbits
 3950              		.align	1
 3951              		.global	br_transmit
 3952              		.syntax unified
 3953              		.thumb
 3954              		.thumb_func
 3955              		.fpu softvfp
 3957              	br_transmit:
 3958              	.LFB20:
1622:bluetooth_rxtx.c **** 	uint16_t gio_save;
 3959              		.loc 1 1622 0
 3960              		.cfi_startproc
 3961              		@ args = 0, pretend = 0, frame = 16
 3962              		@ frame_needed = 0, uses_anonymous_args = 0
 3963 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 3964              		.cfi_def_cfa_offset 28
 3965              		.cfi_offset 4, -28
 3966              		.cfi_offset 5, -24
 3967              		.cfi_offset 6, -20
 3968              		.cfi_offset 7, -16
 3969              		.cfi_offset 8, -12
ARM GAS  /tmp/ccyBazZt.s 			page 122


 3970              		.cfi_offset 9, -8
 3971              		.cfi_offset 14, -4
 3972 0004 85B0     		sub	sp, sp, #20
 3973              		.cfi_def_cfa_offset 48
 3974              	.LVL457:
1627:bluetooth_rxtx.c **** 	uint8_t trailer = ((target.syncword >> 63) & 1) == 1 ? 0xaa : 0x55;
 3975              		.loc 1 1627 0
 3976 0006 954B     		ldr	r3, .L487
1628:bluetooth_rxtx.c **** 
 3977              		.loc 1 1628 0
 3978 0008 0027     		movs	r7, #0
1627:bluetooth_rxtx.c **** 	uint8_t trailer = ((target.syncword >> 63) & 1) == 1 ? 0xaa : 0x55;
 3979              		.loc 1 1627 0
 3980 000a D3E90245 		ldrd	r4, [r3, #8]
 3981 000e 0023     		movs	r3, #0
 3982 0010 04F00102 		and	r2, r4, #1
 3983 0014 1343     		orrs	r3, r2, r3
 3984 0016 4AF6AA23 		movw	r3, #43690
1628:bluetooth_rxtx.c **** 
 3985              		.loc 1 1628 0
 3986 001a 4FEAD576 		lsr	r6, r5, #31
1627:bluetooth_rxtx.c **** 	uint8_t trailer = ((target.syncword >> 63) & 1) == 1 ? 0xaa : 0x55;
 3987              		.loc 1 1627 0
 3988 001e 45F25558 		movw	r8, #21845
 3989 0022 08BF     		it	eq
 3990 0024 9846     		moveq	r8, r3
 3991              	.LVL458:
1628:bluetooth_rxtx.c **** 
 3992              		.loc 1 1628 0
 3993 0026 002F     		cmp	r7, #0
 3994 0028 08BF     		it	eq
 3995 002a 012E     		cmpeq	r6, #1
1631:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 8) & 0xFF),
 3996              		.loc 1 1631 0
 3997 002c E0B2     		uxtb	r0, r4
1628:bluetooth_rxtx.c **** 
 3998              		.loc 1 1628 0
 3999 002e 0CBF     		ite	eq
 4000 0030 AA26     		moveq	r6, #170
 4001 0032 5526     		movne	r6, #85
 4002              	.LVL459:
1631:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 8) & 0xFF),
 4003              		.loc 1 1631 0
 4004 0034 FFF7FEFF 		bl	reverse8
 4005              	.LVL460:
1630:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4006              		.loc 1 1630 0
 4007 0038 8DF80000 		strb	r0, [sp]
1632:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 16) & 0xFF),
 4008              		.loc 1 1632 0
 4009 003c C4F30720 		ubfx	r0, r4, #8, #8
 4010 0040 FFF7FEFF 		bl	reverse8
 4011              	.LVL461:
1630:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4012              		.loc 1 1630 0
 4013 0044 8DF80100 		strb	r0, [sp, #1]
1633:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 24) & 0xFF),
ARM GAS  /tmp/ccyBazZt.s 			page 123


 4014              		.loc 1 1633 0
 4015 0048 C4F30740 		ubfx	r0, r4, #16, #8
 4016 004c FFF7FEFF 		bl	reverse8
 4017              	.LVL462:
1630:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4018              		.loc 1 1630 0
 4019 0050 8DF80200 		strb	r0, [sp, #2]
1634:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 32) & 0xFF),
 4020              		.loc 1 1634 0
 4021 0054 200E     		lsrs	r0, r4, #24
 4022 0056 FFF7FEFF 		bl	reverse8
 4023              	.LVL463:
1630:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4024              		.loc 1 1630 0
 4025 005a 8DF80300 		strb	r0, [sp, #3]
1635:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 40) & 0xFF),
 4026              		.loc 1 1635 0
 4027 005e E8B2     		uxtb	r0, r5
 4028 0060 FFF7FEFF 		bl	reverse8
 4029              	.LVL464:
1630:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4030              		.loc 1 1630 0
 4031 0064 8DF80400 		strb	r0, [sp, #4]
1636:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 48) & 0xFF),
 4032              		.loc 1 1636 0
 4033 0068 C5F30720 		ubfx	r0, r5, #8, #8
 4034 006c FFF7FEFF 		bl	reverse8
 4035              	.LVL465:
1630:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4036              		.loc 1 1630 0
 4037 0070 8DF80500 		strb	r0, [sp, #5]
1637:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 56) & 0xFF),
 4038              		.loc 1 1637 0
 4039 0074 C5F30740 		ubfx	r0, r5, #16, #8
 4040 0078 FFF7FEFF 		bl	reverse8
 4041              	.LVL466:
1630:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4042              		.loc 1 1630 0
 4043 007c 8DF80600 		strb	r0, [sp, #6]
1638:bluetooth_rxtx.c **** 		reverse8(trailer),
 4044              		.loc 1 1638 0
 4045 0080 280E     		lsrs	r0, r5, #24
 4046 0082 FFF7FEFF 		bl	reverse8
 4047              	.LVL467:
1630:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4048              		.loc 1 1630 0
 4049 0086 8DF80700 		strb	r0, [sp, #7]
1639:bluetooth_rxtx.c **** 		reverse8(0x77),
 4050              		.loc 1 1639 0
 4051 008a 3046     		mov	r0, r6
 4052 008c FFF7FEFF 		bl	reverse8
 4053              	.LVL468:
1630:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4054              		.loc 1 1630 0
 4055 0090 8DF80800 		strb	r0, [sp, #8]
1640:bluetooth_rxtx.c **** 		reverse8(0x66),
 4056              		.loc 1 1640 0
ARM GAS  /tmp/ccyBazZt.s 			page 124


 4057 0094 7720     		movs	r0, #119
 4058 0096 FFF7FEFF 		bl	reverse8
 4059              	.LVL469:
1630:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4060              		.loc 1 1630 0
 4061 009a 8DF80900 		strb	r0, [sp, #9]
1641:bluetooth_rxtx.c **** 		reverse8(0x55),
 4062              		.loc 1 1641 0
 4063 009e 6620     		movs	r0, #102
 4064 00a0 FFF7FEFF 		bl	reverse8
 4065              	.LVL470:
1630:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4066              		.loc 1 1630 0
 4067 00a4 8DF80A00 		strb	r0, [sp, #10]
1642:bluetooth_rxtx.c **** 		reverse8(0x44),
 4068              		.loc 1 1642 0
 4069 00a8 5520     		movs	r0, #85
 4070 00aa FFF7FEFF 		bl	reverse8
 4071              	.LVL471:
1630:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4072              		.loc 1 1630 0
 4073 00ae 8DF80B00 		strb	r0, [sp, #11]
1643:bluetooth_rxtx.c **** 		reverse8(0x33),
 4074              		.loc 1 1643 0
 4075 00b2 4420     		movs	r0, #68
 4076 00b4 FFF7FEFF 		bl	reverse8
 4077              	.LVL472:
1630:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4078              		.loc 1 1630 0
 4079 00b8 8DF80C00 		strb	r0, [sp, #12]
1644:bluetooth_rxtx.c **** 		reverse8(0x22),
 4080              		.loc 1 1644 0
 4081 00bc 3320     		movs	r0, #51
 4082 00be FFF7FEFF 		bl	reverse8
 4083              	.LVL473:
1630:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4084              		.loc 1 1630 0
 4085 00c2 8DF80D00 		strb	r0, [sp, #13]
1645:bluetooth_rxtx.c **** 		reverse8(0x11)
 4086              		.loc 1 1645 0
 4087 00c6 2220     		movs	r0, #34
 4088 00c8 FFF7FEFF 		bl	reverse8
 4089              	.LVL474:
1630:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4090              		.loc 1 1630 0
 4091 00cc 8DF80E00 		strb	r0, [sp, #14]
1646:bluetooth_rxtx.c **** 	};
 4092              		.loc 1 1646 0
 4093 00d0 1120     		movs	r0, #17
 4094 00d2 FFF7FEFF 		bl	reverse8
 4095              	.LVL475:
 4096              	.LBB83:
 4097              	.LBB84:
1606:bluetooth_rxtx.c **** 
 4098              		.loc 1 1606 0
 4099 00d6 3C46     		mov	r4, r7
 4100              	.LBB85:
ARM GAS  /tmp/ccyBazZt.s 			page 125


1608:bluetooth_rxtx.c **** 	{
 4101              		.loc 1 1608 0
 4102 00d8 3B46     		mov	r3, r7
 4103              	.LBE85:
 4104              	.LBE84:
 4105              	.LBE83:
1630:bluetooth_rxtx.c **** 		reverse8((target.syncword >> 0) & 0xFF),
 4106              		.loc 1 1630 0
 4107 00da 8DF80F00 		strb	r0, [sp, #15]
 4108              	.LVL476:
 4109              	.L451:
 4110              	.LBB88:
 4111              	.LBB87:
 4112              	.LBB86:
1610:bluetooth_rxtx.c **** 	}
 4113              		.loc 1 1610 0
 4114 00de 48FA03F2 		asr	r2, r8, r3
 4115 00e2 C3F10F01 		rsb	r1, r3, #15
 4116 00e6 02F00102 		and	r2, r2, #1
 4117 00ea 8A40     		lsls	r2, r2, r1
1608:bluetooth_rxtx.c **** 	{
 4118              		.loc 1 1608 0
 4119 00ec 0133     		adds	r3, r3, #1
 4120              	.LVL477:
1610:bluetooth_rxtx.c **** 	}
 4121              		.loc 1 1610 0
 4122 00ee 1443     		orrs	r4, r4, r2
 4123              	.LVL478:
1608:bluetooth_rxtx.c **** 	{
 4124              		.loc 1 1608 0
 4125 00f0 102B     		cmp	r3, #16
1610:bluetooth_rxtx.c **** 	}
 4126              		.loc 1 1610 0
 4127 00f2 A4B2     		uxth	r4, r4
 4128              	.LVL479:
1608:bluetooth_rxtx.c **** 	{
 4129              		.loc 1 1608 0
 4130 00f4 F3D1     		bne	.L451
 4131              	.LVL480:
 4132              	.LBE86:
 4133              	.LBE87:
 4134              	.LBE88:
 4135              	.LBB89:
 4136              	.LBB90:
1224:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 4137              		.loc 1 1224 0
 4138 00f6 47F6FF71 		movw	r1, #32767
 4139 00fa 0D20     		movs	r0, #13
 4140 00fc FFF7FEFF 		bl	cc2400_set
 4141              	.LVL481:
1225:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
 4142              		.loc 1 1225 0
 4143 0100 42F62231 		movw	r1, #11042
 4144 0104 1220     		movs	r0, #18
 4145 0106 FFF7FEFF 		bl	cc2400_set
 4146              	.LVL482:
1226:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccyBazZt.s 			page 126


 4147              		.loc 1 1226 0
 4148 010a 41F24B31 		movw	r1, #4939
 4149 010e 1420     		movs	r0, #20
 4150 0110 FFF7FEFF 		bl	cc2400_set
 4151              	.LVL483:
1228:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
 4152              		.loc 1 1228 0
 4153 0114 40F60141 		movw	r1, #3073
 4154 0118 2020     		movs	r0, #32
 4155 011a FFF7FEFF 		bl	cc2400_set
 4156              	.LVL484:
1236:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 4157              		.loc 1 1236 0
 4158 011e 2146     		mov	r1, r4
 4159 0120 2C20     		movs	r0, #44
 4160 0122 FFF7FEFF 		bl	cc2400_set
 4161              	.LVL485:
1237:bluetooth_rxtx.c **** 
 4162              		.loc 1 1237 0
 4163 0126 0021     		movs	r1, #0
 4164 0128 2D20     		movs	r0, #45
 4165 012a FFF7FEFF 		bl	cc2400_set
 4166              	.LVL486:
1239:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 4167              		.loc 1 1239 0
 4168 012e 4C4B     		ldr	r3, .L487+4
 4169 0130 0220     		movs	r0, #2
 4170 0132 B3F84C10 		ldrh	r1, [r3, #76]
1242:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0029);    // 160 kHz frequency deviation
 4171              		.loc 1 1242 0
 4172 0136 4B4C     		ldr	r4, .L487+8
 4173              	.LVL487:
1239:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 4174              		.loc 1 1239 0
 4175 0138 89B2     		uxth	r1, r1
 4176 013a FFF7FEFF 		bl	cc2400_set
 4177              	.LVL488:
1240:bluetooth_rxtx.c **** 
 4178              		.loc 1 1240 0
 4179 013e 0B21     		movs	r1, #11
 4180 0140 0520     		movs	r0, #5
 4181 0142 FFF7FEFF 		bl	cc2400_set
 4182              	.LVL489:
1242:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0029);    // 160 kHz frequency deviation
 4183              		.loc 1 1242 0
 4184 0146 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 4185 0148 BBBB     		cbnz	r3, .L452
1243:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 4186              		.loc 1 1243 0
 4187 014a 2921     		movs	r1, #41
 4188              	.L486:
1245:bluetooth_rxtx.c **** 	} else {
 4189              		.loc 1 1245 0
 4190 014c 0320     		movs	r0, #3
 4191 014e FFF7FEFF 		bl	cc2400_set
 4192              	.LVL490:
1251:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccyBazZt.s 			page 127


 4193              		.loc 1 1251 0
 4194 0152 FFF7FEFF 		bl	clkn_start
 4195              	.LVL491:
 4196              	.L455:
1253:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4197              		.loc 1 1253 0
 4198 0156 FFF7FEFF 		bl	cc2400_status
 4199              	.LVL492:
 4200 015a 4506     		lsls	r5, r0, #25
 4201 015c FBD5     		bpl	.L455
1254:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 4202              		.loc 1 1254 0
 4203 015e 6120     		movs	r0, #97
 4204 0160 FFF7FEFF 		bl	cc2400_strobe
 4205              	.LVL493:
 4206              	.L456:
1255:bluetooth_rxtx.c **** 
 4207              		.loc 1 1255 0
 4208 0164 FFF7FEFF 		bl	cc2400_status
 4209              	.LVL494:
 4210 0168 4007     		lsls	r0, r0, #29
 4211 016a FBD5     		bpl	.L456
1258:bluetooth_rxtx.c **** #endif
 4212              		.loc 1 1258 0
 4213 016c 8022     		movs	r2, #128
 4214 016e 3E4B     		ldr	r3, .L487+12
 4215 0170 1A60     		str	r2, [r3]
 4216              	.L457:
1261:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 4217              		.loc 1 1261 0
 4218 0172 0E20     		movs	r0, #14
 4219 0174 FFF7FEFF 		bl	cc2400_get
 4220              	.LVL495:
 4221 0178 00F01F00 		and	r0, r0, #31
 4222 017c 0F28     		cmp	r0, #15
 4223 017e F8D1     		bne	.L457
1262:bluetooth_rxtx.c **** 
 4224              		.loc 1 1262 0
 4225 0180 6320     		movs	r0, #99
 4226 0182 FFF7FEFF 		bl	cc2400_strobe
 4227              	.LVL496:
 4228              	.L454:
 4229              	.LBE90:
 4230              	.LBE89:
1651:bluetooth_rxtx.c **** 
 4231              		.loc 1 1651 0 discriminator 4
 4232 0186 1421     		movs	r1, #20
 4233 0188 2320     		movs	r0, #35
 4234 018a FFF7FEFF 		bl	cc2400_set
 4235              	.LVL497:
1654:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 4236              		.loc 1 1654 0 discriminator 4
 4237 018e 0820     		movs	r0, #8
 4238 0190 FFF7FEFF 		bl	cc2400_get
 4239              	.LVL498:
1655:bluetooth_rxtx.c **** 
 4240              		.loc 1 1655 0 discriminator 4
ARM GAS  /tmp/ccyBazZt.s 			page 128


 4241 0194 C0F30801 		ubfx	r1, r0, #0, #9
1654:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 4242              		.loc 1 1654 0 discriminator 4
 4243 0198 0746     		mov	r7, r0
 4244              	.LVL499:
1655:bluetooth_rxtx.c **** 
 4245              		.loc 1 1655 0 discriminator 4
 4246 019a 41F49C41 		orr	r1, r1, #19968
 4247 019e 0820     		movs	r0, #8
 4248              	.LVL500:
 4249 01a0 FFF7FEFF 		bl	cc2400_set
 4250              	.LVL501:
1625:bluetooth_rxtx.c **** 
 4251              		.loc 1 1625 0 discriminator 4
 4252 01a4 0025     		movs	r5, #0
1660:bluetooth_rxtx.c **** 
 4253              		.loc 1 1660 0 discriminator 4
 4254 01a6 314E     		ldr	r6, .L487+16
 4255              	.LVL502:
1670:bluetooth_rxtx.c **** 
 4256              		.loc 1 1670 0 discriminator 4
 4257 01a8 DFF8CC90 		ldr	r9, .L487+28
 4258              	.LVL503:
 4259              	.L458:
1657:bluetooth_rxtx.c **** 	{
 4260              		.loc 1 1657 0
 4261 01ac A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
 4262 01ae 022B     		cmp	r3, #2
 4263 01b0 4AD1     		bne	.L466
1660:bluetooth_rxtx.c **** 
 4264              		.loc 1 1660 0
 4265 01b2 6D08     		lsrs	r5, r5, #1
 4266              	.LVL504:
 4267 01b4 DFF8C480 		ldr	r8, .L487+32
 4268 01b8 08E0     		b	.L467
 4269              	.LVL505:
 4270              	.L452:
 4271              	.LBB92:
 4272              	.LBB91:
1244:bluetooth_rxtx.c **** 		cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 4273              		.loc 1 1244 0
 4274 01ba 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 4275 01bc 012B     		cmp	r3, #1
 4276 01be E2D1     		bne	.L454
1245:bluetooth_rxtx.c **** 	} else {
 4277              		.loc 1 1245 0
 4278 01c0 4021     		movs	r1, #64
 4279 01c2 C3E7     		b	.L486
 4280              	.LVL506:
 4281              	.L460:
 4282              	.LBE91:
 4283              	.LBE92:
1663:bluetooth_rxtx.c **** 				hop();
 4284              		.loc 1 1663 0
 4285 01c4 E27A     		ldrb	r2, [r4, #11]	@ zero_extendqisi2
 4286 01c6 1AB1     		cbz	r2, .L459
1664:bluetooth_rxtx.c **** 			}
ARM GAS  /tmp/ccyBazZt.s 			page 129


 4287              		.loc 1 1664 0
 4288 01c8 FFF7FEFF 		bl	hop
 4289              	.LVL507:
 4290              	.L467:
1660:bluetooth_rxtx.c **** 
 4291              		.loc 1 1660 0
 4292 01cc 40F6C903 		movw	r3, #2249
 4293              	.L459:
 4294 01d0 3268     		ldr	r2, [r6]
 4295 01d2 B5EB520F 		cmp	r5, r2, lsr #1
 4296 01d6 F5D0     		beq	.L460
1660:bluetooth_rxtx.c **** 
 4297              		.loc 1 1660 0 is_stmt 0 discriminator 1
 4298 01d8 D8F80020 		ldr	r2, [r8]
 4299 01dc 9A42     		cmp	r2, r3
 4300 01de F1D9     		bls	.L460
1670:bluetooth_rxtx.c **** 
 4301              		.loc 1 1670 0 is_stmt 1
 4302 01e0 4FF48073 		mov	r3, #256
1668:bluetooth_rxtx.c **** 
 4303              		.loc 1 1668 0
 4304 01e4 3568     		ldr	r5, [r6]
 4305              	.LVL508:
1672:bluetooth_rxtx.c **** 
 4306              		.loc 1 1672 0
 4307 01e6 6946     		mov	r1, sp
1670:bluetooth_rxtx.c **** 
 4308              		.loc 1 1670 0
 4309 01e8 C9F80030 		str	r3, [r9]
1672:bluetooth_rxtx.c **** 
 4310              		.loc 1 1672 0
 4311 01ec 1020     		movs	r0, #16
 4312 01ee FFF7FEFF 		bl	cc2400_fifo_write
 4313              	.LVL509:
 4314              	.L461:
1674:bluetooth_rxtx.c **** 		TXLED_CLR;
 4315              		.loc 1 1674 0 discriminator 1
 4316 01f2 0E20     		movs	r0, #14
 4317 01f4 FFF7FEFF 		bl	cc2400_get
 4318              	.LVL510:
 4319 01f8 00F01F00 		and	r0, r0, #31
 4320 01fc 0F28     		cmp	r0, #15
 4321 01fe F8D1     		bne	.L461
1675:bluetooth_rxtx.c **** 
 4322              		.loc 1 1675 0
 4323 0200 4FF48072 		mov	r2, #256
 4324 0204 1A4B     		ldr	r3, .L487+20
1677:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 4325              		.loc 1 1677 0
 4326 0206 6420     		movs	r0, #100
1675:bluetooth_rxtx.c **** 
 4327              		.loc 1 1675 0
 4328 0208 1A60     		str	r2, [r3]
1677:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 4329              		.loc 1 1677 0
 4330 020a FFF7FEFF 		bl	cc2400_strobe
 4331              	.LVL511:
ARM GAS  /tmp/ccyBazZt.s 			page 130


 4332              	.L462:
1678:bluetooth_rxtx.c **** 
 4333              		.loc 1 1678 0 discriminator 1
 4334 020e FFF7FEFF 		bl	cc2400_status
 4335              	.LVL512:
 4336 0212 4107     		lsls	r1, r0, #29
 4337 0214 FBD4     		bmi	.L462
 4338              	.L463:
1680:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 4339              		.loc 1 1680 0 discriminator 1
 4340 0216 FFF7FEFF 		bl	cc2400_status
 4341              	.LVL513:
 4342 021a 4206     		lsls	r2, r0, #25
 4343 021c FBD5     		bpl	.L463
1681:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 4344              		.loc 1 1681 0
 4345 021e 6120     		movs	r0, #97
 4346 0220 FFF7FEFF 		bl	cc2400_strobe
 4347              	.LVL514:
 4348              	.L464:
1682:bluetooth_rxtx.c **** 
 4349              		.loc 1 1682 0 discriminator 1
 4350 0224 FFF7FEFF 		bl	cc2400_status
 4351              	.LVL515:
 4352 0228 4307     		lsls	r3, r0, #29
 4353 022a FBD5     		bpl	.L464
 4354              	.L475:
1684:bluetooth_rxtx.c **** 		cc2400_strobe(STX);
 4355              		.loc 1 1684 0 discriminator 1
 4356 022c 0E20     		movs	r0, #14
 4357 022e FFF7FEFF 		bl	cc2400_get
 4358              	.LVL516:
 4359 0232 00F01F00 		and	r0, r0, #31
 4360 0236 0F28     		cmp	r0, #15
 4361 0238 F8D1     		bne	.L475
1685:bluetooth_rxtx.c **** 
 4362              		.loc 1 1685 0
 4363 023a 6320     		movs	r0, #99
 4364 023c FFF7FEFF 		bl	cc2400_strobe
 4365              	.LVL517:
1687:bluetooth_rxtx.c **** 	}
 4366              		.loc 1 1687 0
 4367 0240 3068     		ldr	r0, [r6]
 4368 0242 FFF7FEFF 		bl	handle_usb
 4369              	.LVL518:
 4370 0246 B1E7     		b	.L458
 4371              	.L466:
1691:bluetooth_rxtx.c **** #endif
 4372              		.loc 1 1691 0
 4373 0248 8022     		movs	r2, #128
 4374 024a 0A4B     		ldr	r3, .L487+24
1695:bluetooth_rxtx.c **** }
 4375              		.loc 1 1695 0
 4376 024c 3946     		mov	r1, r7
1691:bluetooth_rxtx.c **** #endif
 4377              		.loc 1 1691 0
 4378 024e 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccyBazZt.s 			page 131


1695:bluetooth_rxtx.c **** }
 4379              		.loc 1 1695 0
 4380 0250 0820     		movs	r0, #8
 4381 0252 FFF7FEFF 		bl	cc2400_set
 4382              	.LVL519:
1696:bluetooth_rxtx.c **** 
 4383              		.loc 1 1696 0
 4384 0256 05B0     		add	sp, sp, #20
 4385              		.cfi_def_cfa_offset 28
 4386              		@ sp needed
 4387 0258 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 4388              	.LVL520:
 4389              	.L488:
 4390              		.align	2
 4391              	.L487:
 4392 025c 00000000 		.word	target
 4393 0260 00000000 		.word	.LANCHOR0
 4394 0264 00000000 		.word	.LANCHOR1
 4395 0268 58C00920 		.word	537509976
 4396 026c 00000000 		.word	clkn
 4397 0270 3CC00920 		.word	537509948
 4398 0274 5CC00920 		.word	537509980
 4399 0278 38C00920 		.word	537509944
 4400 027c 08400040 		.word	1073758216
 4401              		.cfi_endproc
 4402              	.LFE20:
 4404              		.section	.text.reset_le,"ax",%progbits
 4405              		.align	1
 4406              		.global	reset_le
 4407              		.syntax unified
 4408              		.thumb
 4409              		.thumb_func
 4410              		.fpu softvfp
 4412              	reset_le:
 4413              	.LFB22:
1709:bluetooth_rxtx.c **** 	le_set_access_address(0x8e89bed6);     // advertising channel access address
 4414              		.loc 1 1709 0
 4415              		.cfi_startproc
 4416              		@ args = 0, pretend = 0, frame = 0
 4417              		@ frame_needed = 0, uses_anonymous_args = 0
 4418 0000 08B5     		push	{r3, lr}
 4419              		.cfi_def_cfa_offset 8
 4420              		.cfi_offset 3, -8
 4421              		.cfi_offset 14, -4
1710:bluetooth_rxtx.c **** 	le.crc_init  = 0x555555;               // advertising channel CRCInit
 4422              		.loc 1 1710 0
 4423 0002 0F48     		ldr	r0, .L490
 4424 0004 FFF7FEFF 		bl	le_set_access_address
 4425              	.LVL521:
1711:bluetooth_rxtx.c **** 	le.crc_init_reversed = 0xAAAAAA;
 4426              		.loc 1 1711 0
 4427 0008 0E4B     		ldr	r3, .L490+4
 4428 000a 0F4A     		ldr	r2, .L490+8
 4429 000c 9A60     		str	r2, [r3, #8]
1712:bluetooth_rxtx.c **** 	le.crc_verify = 0;
 4430              		.loc 1 1712 0
 4431 000e 0F4A     		ldr	r2, .L490+12
ARM GAS  /tmp/ccyBazZt.s 			page 132


 4432 0010 DA60     		str	r2, [r3, #12]
1713:bluetooth_rxtx.c **** 	le.last_packet = 0;
 4433              		.loc 1 1713 0
 4434 0012 0022     		movs	r2, #0
1722:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 4435              		.loc 1 1722 0
 4436 0014 9A83     		strh	r2, [r3, #28]	@ movhi
1713:bluetooth_rxtx.c **** 	le.last_packet = 0;
 4437              		.loc 1 1713 0
 4438 0016 1A61     		str	r2, [r3, #16]
1725:bluetooth_rxtx.c **** 
 4439              		.loc 1 1725 0
 4440 0018 1A84     		strh	r2, [r3, #32]	@ movhi
1714:bluetooth_rxtx.c **** 
 4441              		.loc 1 1714 0
 4442 001a 9A64     		str	r2, [r3, #72]
1716:bluetooth_rxtx.c **** 
 4443              		.loc 1 1716 0
 4444 001c 1A75     		strb	r2, [r3, #20]
1718:bluetooth_rxtx.c **** 	le.channel_increment = 0;
 4445              		.loc 1 1718 0
 4446 001e 5A75     		strb	r2, [r3, #21]
1719:bluetooth_rxtx.c **** 
 4447              		.loc 1 1719 0
 4448 0020 9A75     		strb	r2, [r3, #22]
1721:bluetooth_rxtx.c **** 	le.interval_timer = 0;
 4449              		.loc 1 1721 0
 4450 0022 9A61     		str	r2, [r3, #24]
1723:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 4451              		.loc 1 1723 0
 4452 0024 DA83     		strh	r2, [r3, #30]	@ movhi
1727:bluetooth_rxtx.c **** 	le.win_offset = 0;
 4453              		.loc 1 1727 0
 4454 0026 83F82220 		strb	r2, [r3, #34]
1728:bluetooth_rxtx.c **** 
 4455              		.loc 1 1728 0
 4456 002a 9A84     		strh	r2, [r3, #36]	@ movhi
1730:bluetooth_rxtx.c ****     // channel_map_update_pending = 0;
 4457              		.loc 1 1730 0
 4458 002c 9A62     		str	r2, [r3, #40]
1733:bluetooth_rxtx.c **** 	le.interval_update = 0;
 4459              		.loc 1 1733 0
 4460 002e 9A85     		strh	r2, [r3, #44]	@ movhi
1734:bluetooth_rxtx.c **** 	le.win_size_update = 0;
 4461              		.loc 1 1734 0
 4462 0030 DA85     		strh	r2, [r3, #46]	@ movhi
1735:bluetooth_rxtx.c **** 	le.win_offset_update = 0;
 4463              		.loc 1 1735 0
 4464 0032 83F83020 		strb	r2, [r3, #48]
1736:bluetooth_rxtx.c **** 
 4465              		.loc 1 1736 0
 4466 0036 5A86     		strh	r2, [r3, #50]	@ movhi
1738:bluetooth_rxtx.c **** }
 4467              		.loc 1 1738 0
 4468 0038 054B     		ldr	r3, .L490+16
 4469 003a DA72     		strb	r2, [r3, #11]
 4470 003c 08BD     		pop	{r3, pc}
ARM GAS  /tmp/ccyBazZt.s 			page 133


 4471              	.L491:
 4472 003e 00BF     		.align	2
 4473              	.L490:
 4474 0040 D6BE898E 		.word	-1903575338
 4475 0044 00000000 		.word	.LANCHOR0
 4476 0048 55555500 		.word	5592405
 4477 004c AAAAAA00 		.word	11184810
 4478 0050 00000000 		.word	.LANCHOR1
 4479              		.cfi_endproc
 4480              	.LFE22:
 4482              		.section	.text.reset_le_promisc,"ax",%progbits
 4483              		.align	1
 4484              		.global	reset_le_promisc
 4485              		.syntax unified
 4486              		.thumb
 4487              		.thumb_func
 4488              		.fpu softvfp
 4490              	reset_le_promisc:
 4491              	.LFB23:
1742:bluetooth_rxtx.c **** 	memset(&le_promisc, 0, sizeof(le_promisc));
 4492              		.loc 1 1742 0
 4493              		.cfi_startproc
 4494              		@ args = 0, pretend = 0, frame = 0
 4495              		@ frame_needed = 0, uses_anonymous_args = 0
 4496 0000 10B5     		push	{r4, lr}
 4497              		.cfi_def_cfa_offset 8
 4498              		.cfi_offset 4, -8
 4499              		.cfi_offset 14, -4
1743:bluetooth_rxtx.c **** 	le_promisc.smallest_hop_interval = 0xffffffff;
 4500              		.loc 1 1743 0
 4501 0002 064C     		ldr	r4, .L493
 4502 0004 4FF48472 		mov	r2, #264
 4503 0008 0021     		movs	r1, #0
 4504 000a 2046     		mov	r0, r4
 4505 000c FFF7FEFF 		bl	memset
 4506              	.LVL522:
1744:bluetooth_rxtx.c **** }
 4507              		.loc 1 1744 0
 4508 0010 4FF0FF33 		mov	r3, #-1
 4509 0014 C4F80031 		str	r3, [r4, #256]
 4510 0018 10BD     		pop	{r4, pc}
 4511              	.L494:
 4512 001a 00BF     		.align	2
 4513              	.L493:
 4514 001c 00000000 		.word	le_promisc
 4515              		.cfi_endproc
 4516              	.LFE23:
 4518              		.section	.text.bt_generic_le,"ax",%progbits
 4519              		.align	1
 4520              		.global	bt_generic_le
 4521              		.syntax unified
 4522              		.thumb
 4523              		.thumb_func
 4524              		.fpu softvfp
 4526              	bt_generic_le:
 4527              	.LFB24:
1749:bluetooth_rxtx.c **** 	u8 hold;
ARM GAS  /tmp/ccyBazZt.s 			page 134


 4528              		.loc 1 1749 0
 4529              		.cfi_startproc
 4530              		@ args = 0, pretend = 0, frame = 0
 4531              		@ frame_needed = 0, uses_anonymous_args = 0
 4532              	.LVL523:
 4533 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4534              		.cfi_def_cfa_offset 40
 4535              		.cfi_offset 3, -40
 4536              		.cfi_offset 4, -36
 4537              		.cfi_offset 5, -32
 4538              		.cfi_offset 6, -28
 4539              		.cfi_offset 7, -24
 4540              		.cfi_offset 8, -20
 4541              		.cfi_offset 9, -16
 4542              		.cfi_offset 10, -12
 4543              		.cfi_offset 11, -8
 4544              		.cfi_offset 14, -4
1755:bluetooth_rxtx.c **** 	mode = active_mode;
 4545              		.loc 1 1755 0
 4546 0004 0123     		movs	r3, #1
 4547 0006 6F4C     		ldr	r4, .L540
1749:bluetooth_rxtx.c **** 	u8 hold;
 4548              		.loc 1 1749 0
 4549 0008 8246     		mov	r10, r0
1755:bluetooth_rxtx.c **** 	mode = active_mode;
 4550              		.loc 1 1755 0
 4551 000a 2370     		strb	r3, [r4]
1756:bluetooth_rxtx.c **** 
 4552              		.loc 1 1756 0
 4553 000c 6074     		strb	r0, [r4, #17]
1758:bluetooth_rxtx.c **** 
 4554              		.loc 1 1758 0
 4555 000e FFF7FEFF 		bl	reset_le
 4556              	.LVL524:
1761:bluetooth_rxtx.c **** 
 4557              		.loc 1 1761 0
 4558 0012 4FF08072 		mov	r2, #16777216
 4559 0016 6C4B     		ldr	r3, .L540+4
1763:bluetooth_rxtx.c **** 
 4560              		.loc 1 1763 0
 4561 0018 6C4F     		ldr	r7, .L540+8
1761:bluetooth_rxtx.c **** 
 4562              		.loc 1 1761 0
 4563 001a 1A60     		str	r2, [r3]
1763:bluetooth_rxtx.c **** 
 4564              		.loc 1 1763 0
 4565 001c 1023     		movs	r3, #16
 4566 001e 3B60     		str	r3, [r7]
1765:bluetooth_rxtx.c **** 	dio_ssp_init();
 4567              		.loc 1 1765 0
 4568 0020 FFF7FEFF 		bl	usb_queue_init
 4569              	.LVL525:
1773:bluetooth_rxtx.c **** 
 4570              		.loc 1 1773 0
 4571 0024 0026     		movs	r6, #0
1766:bluetooth_rxtx.c **** 	dma_init_rx_symbols();
 4572              		.loc 1 1766 0
ARM GAS  /tmp/ccyBazZt.s 			page 135


 4573 0026 FFF7FEFF 		bl	dio_ssp_init
 4574              	.LVL526:
1767:bluetooth_rxtx.c **** 	dio_ssp_start();
 4575              		.loc 1 1767 0
 4576 002a FFF7FEFF 		bl	dma_init_rx_symbols
 4577              	.LVL527:
1768:bluetooth_rxtx.c **** 	cc2400_rx();
 4578              		.loc 1 1768 0
 4579 002e FFF7FEFF 		bl	dio_ssp_start
 4580              	.LVL528:
1769:bluetooth_rxtx.c **** 
 4581              		.loc 1 1769 0
 4582 0032 FFF7FEFF 		bl	cc2400_rx
 4583              	.LVL529:
1771:bluetooth_rxtx.c **** 
 4584              		.loc 1 1771 0
 4585 0036 FFF7FEFF 		bl	cs_trigger_enable
 4586              	.LVL530:
 4587              	.LBB93:
1782:bluetooth_rxtx.c **** 
 4588              		.loc 1 1782 0
 4589 003a DFF8B4B1 		ldr	fp, .L540+44
1805:bluetooth_rxtx.c **** 		{
 4590              		.loc 1 1805 0
 4591 003e DFF8B481 		ldr	r8, .L540+48
 4592              	.LVL531:
 4593              	.L496:
 4594              	.LBE93:
1775:bluetooth_rxtx.c **** 
 4595              		.loc 1 1775 0
 4596 0042 A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
 4597 0044 9A45     		cmp	r10, r3
 4598 0046 40F08C80 		bne	.L517
 4599              	.LBB94:
1777:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 4600              		.loc 1 1777 0
 4601 004a E389     		ldrh	r3, [r4, #14]
 4602 004c 9BB2     		uxth	r3, r3
 4603 004e CBB1     		cbz	r3, .L497
1778:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 4604              		.loc 1 1778 0
 4605 0050 6420     		movs	r0, #100
 4606 0052 FFF7FEFF 		bl	cc2400_strobe
 4607              	.LVL532:
 4608              	.L498:
1779:bluetooth_rxtx.c **** 
 4609              		.loc 1 1779 0 discriminator 1
 4610 0056 FFF7FEFF 		bl	cc2400_status
 4611              	.LVL533:
 4612 005a 4207     		lsls	r2, r0, #29
 4613 005c FBD4     		bmi	.L498
1782:bluetooth_rxtx.c **** 
 4614              		.loc 1 1782 0
 4615 005e BBF84C10 		ldrh	r1, [fp, #76]
 4616 0062 0220     		movs	r0, #2
 4617 0064 0139     		subs	r1, r1, #1
 4618 0066 89B2     		uxth	r1, r1
ARM GAS  /tmp/ccyBazZt.s 			page 136


 4619 0068 FFF7FEFF 		bl	cc2400_set
 4620              	.LVL534:
1785:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 4621              		.loc 1 1785 0
 4622 006c 6120     		movs	r0, #97
 4623 006e FFF7FEFF 		bl	cc2400_strobe
 4624              	.LVL535:
 4625              	.L499:
1786:bluetooth_rxtx.c **** 
 4626              		.loc 1 1786 0 discriminator 1
 4627 0072 FFF7FEFF 		bl	cc2400_status
 4628              	.LVL536:
 4629 0076 4307     		lsls	r3, r0, #29
 4630 0078 FBD5     		bpl	.L499
1789:bluetooth_rxtx.c **** 
 4631              		.loc 1 1789 0
 4632 007a 6220     		movs	r0, #98
 4633 007c FFF7FEFF 		bl	cc2400_strobe
 4634              	.LVL537:
1791:bluetooth_rxtx.c **** 		}
 4635              		.loc 1 1791 0
 4636 0080 0023     		movs	r3, #0
 4637 0082 E381     		strh	r3, [r4, #14]	@ movhi
 4638              	.L497:
1794:bluetooth_rxtx.c **** 			hop();
 4639              		.loc 1 1794 0
 4640 0084 E37A     		ldrb	r3, [r4, #11]	@ zero_extendqisi2
 4641 0086 002B     		cmp	r3, #0
 4642 0088 77D0     		beq	.L500
1795:bluetooth_rxtx.c **** 		} else {
 4643              		.loc 1 1795 0
 4644 008a FFF7FEFF 		bl	hop
 4645              	.LVL538:
 4646              	.L501:
1800:bluetooth_rxtx.c **** 
 4647              		.loc 1 1800 0
 4648 008e 1023     		movs	r3, #16
 4649 0090 3B60     		str	r3, [r7]
1803:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 4650              		.loc 1 1803 0
 4651 0092 FFF7FEFF 		bl	rssi_reset
 4652              	.LVL539:
1804:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
 4653              		.loc 1 1804 0
 4654 0096 6FF07F05 		mvn	r5, #127
 4655 009a DFF85C91 		ldr	r9, .L540+52
 4656              	.LVL540:
 4657              	.L502:
1805:bluetooth_rxtx.c **** 		{
 4658              		.loc 1 1805 0
 4659 009e D8F80030 		ldr	r3, [r8]
 4660 00a2 1BB9     		cbnz	r3, .L504
1805:bluetooth_rxtx.c **** 		{
 4661              		.loc 1 1805 0 is_stmt 0 discriminator 1
 4662 00a4 D9F80030 		ldr	r3, [r9]
 4663 00a8 002B     		cmp	r3, #0
 4664 00aa 6AD0     		beq	.L505
ARM GAS  /tmp/ccyBazZt.s 			page 137


 4665              	.L504:
1815:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 4666              		.loc 1 1815 0 is_stmt 1
 4667 00ac D9F80030 		ldr	r3, [r9]
 4668 00b0 1BB1     		cbz	r3, .L506
1816:bluetooth_rxtx.c **** 		}
 4669              		.loc 1 1816 0
 4670 00b2 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 4671 00b4 43F00203 		orr	r3, r3, #2
 4672 00b8 6370     		strb	r3, [r4, #1]
 4673              	.L506:
1820:bluetooth_rxtx.c **** 			goto rx_continue;
 4674              		.loc 1 1820 0
 4675 00ba D8F80030 		ldr	r3, [r8]
 4676 00be 002B     		cmp	r3, #0
 4677 00c0 79D0     		beq	.L507
1824:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 4678              		.loc 1 1824 0
 4679 00c2 D8F80030 		ldr	r3, [r8]
 4680 00c6 012B     		cmp	r3, #1
1825:bluetooth_rxtx.c **** 
 4681              		.loc 1 1825 0
 4682 00c8 82BF     		ittt	hi
 4683 00ca 6378     		ldrbhi	r3, [r4, #1]	@ zero_extendqisi2
 4684 00cc 43F00103 		orrhi	r3, r3, #1
 4685 00d0 6370     		strbhi	r3, [r4, #1]
1827:bluetooth_rxtx.c **** 
 4686              		.loc 1 1827 0
 4687 00d2 BBF84C00 		ldrh	r0, [fp, #76]
 4688 00d6 80B2     		uxth	r0, r0
 4689 00d8 FFF7FEFF 		bl	rssi_iir_update
 4690              	.LVL541:
1833:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 4691              		.loc 1 1833 0
 4692 00dc 3C4A     		ldr	r2, .L540+12
 4693 00de 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 4694 00e0 13B9     		cbnz	r3, .L509
1833:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 4695              		.loc 1 1833 0 is_stmt 0 discriminator 1
 4696 00e2 3C4B     		ldr	r3, .L540+16
 4697 00e4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4698 00e6 33B1     		cbz	r3, .L510
 4699              	.L509:
1834:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 4700              		.loc 1 1834 0 is_stmt 1
 4701 00e8 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
1835:bluetooth_rxtx.c **** 			cs_trigger = 0;
 4702              		.loc 1 1835 0
 4703 00ea 0226     		movs	r6, #2
 4704              	.LVL542:
1834:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 4705              		.loc 1 1834 0
 4706 00ec 43F00803 		orr	r3, r3, #8
 4707 00f0 6370     		strb	r3, [r4, #1]
 4708              	.LVL543:
1836:bluetooth_rxtx.c **** 		}
 4709              		.loc 1 1836 0
ARM GAS  /tmp/ccyBazZt.s 			page 138


 4710 00f2 0023     		movs	r3, #0
 4711 00f4 1370     		strb	r3, [r2]
 4712              	.LVL544:
 4713              	.L510:
1839:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 4714              		.loc 1 1839 0
 4715 00f6 384B     		ldr	r3, .L540+20
 4716 00f8 384A     		ldr	r2, .L540+24
 4717 00fa 93F90030 		ldrsb	r3, [r3]
 4718 00fe 92F90020 		ldrsb	r2, [r2]
 4719 0102 3533     		adds	r3, r3, #53
 4720 0104 9342     		cmp	r3, r2
 4721 0106 54DA     		bge	.L511
1841:bluetooth_rxtx.c **** 		}
 4722              		.loc 1 1841 0
 4723 0108 0226     		movs	r6, #2
 4724              	.LVL545:
1840:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 4725              		.loc 1 1840 0
 4726 010a 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 4727 010c 43F01003 		orr	r3, r3, #16
 4728 0110 6370     		strb	r3, [r4, #1]
 4729              	.LVL546:
 4730              	.L512:
1851:bluetooth_rxtx.c **** 
 4731              		.loc 1 1851 0
 4732 0112 3349     		ldr	r1, .L540+28
 4733 0114 4FF4C872 		mov	r2, #400
 4734 0118 A1F5C870 		sub	r0, r1, #400
 4735 011c FFF7FEFF 		bl	memcpy
 4736              	.LVL547:
1854:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 4737              		.loc 1 1854 0
 4738 0120 0023     		movs	r3, #0
1848:bluetooth_rxtx.c **** 
 4739              		.loc 1 1848 0
 4740 0122 013E     		subs	r6, r6, #1
 4741              	.LVL548:
 4742 0124 DFF8C0C0 		ldr	ip, .L540+36
1857:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 4743              		.loc 1 1857 0
 4744 0128 2E4D     		ldr	r5, .L540+32
 4745              	.LVL549:
1848:bluetooth_rxtx.c **** 
 4746              		.loc 1 1848 0
 4747 012a F6B2     		uxtb	r6, r6
 4748              	.LVL550:
 4749              	.L513:
1841:bluetooth_rxtx.c **** 		}
 4750              		.loc 1 1841 0
 4751 012c 0021     		movs	r1, #0
 4752 012e 03F13200 		add	r0, r3, #50
 4753 0132 0CEBC000 		add	r0, ip, r0, lsl #3
 4754              	.LVL551:
 4755              	.L514:
1857:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 4756              		.loc 1 1857 0 discriminator 3
ARM GAS  /tmp/ccyBazZt.s 			page 139


 4757 0136 2A68     		ldr	r2, [r5]
 4758 0138 D25C     		ldrb	r2, [r2, r3]	@ zero_extendqisi2
1858:bluetooth_rxtx.c **** 			}
 4759              		.loc 1 1858 0 discriminator 3
 4760 013a D5F800E0 		ldr	lr, [r5]
1857:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 4761              		.loc 1 1857 0 discriminator 3
 4762 013e D209     		lsrs	r2, r2, #7
 4763 0140 4254     		strb	r2, [r0, r1]
1858:bluetooth_rxtx.c **** 			}
 4764              		.loc 1 1858 0 discriminator 3
 4765 0142 1EF80320 		ldrb	r2, [lr, r3]	@ zero_extendqisi2
1856:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 4766              		.loc 1 1856 0 discriminator 3
 4767 0146 0131     		adds	r1, r1, #1
 4768              	.LVL552:
1858:bluetooth_rxtx.c **** 			}
 4769              		.loc 1 1858 0 discriminator 3
 4770 0148 5200     		lsls	r2, r2, #1
 4771 014a D2B2     		uxtb	r2, r2
1856:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 4772              		.loc 1 1856 0 discriminator 3
 4773 014c 0829     		cmp	r1, #8
1858:bluetooth_rxtx.c **** 			}
 4774              		.loc 1 1858 0 discriminator 3
 4775 014e 0EF80320 		strb	r2, [lr, r3]
1856:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 4776              		.loc 1 1856 0 discriminator 3
 4777 0152 F0D1     		bne	.L514
1854:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 4778              		.loc 1 1854 0 discriminator 2
 4779 0154 0133     		adds	r3, r3, #1
 4780              	.LVL553:
 4781 0156 322B     		cmp	r3, #50
 4782 0158 E8D1     		bne	.L513
1862:bluetooth_rxtx.c **** 		if (!ret) break;
 4783              		.loc 1 1862 0
 4784 015a 236B     		ldr	r3, [r4, #48]
 4785              	.LVL554:
 4786 015c 2248     		ldr	r0, .L540+36
 4787 015e 9847     		blx	r3
 4788              	.LVL555:
1863:bluetooth_rxtx.c **** 
 4789              		.loc 1 1863 0
 4790 0160 48BB     		cbnz	r0, .L507
 4791              	.LVL556:
 4792              	.L517:
 4793              	.LBE94:
1871:bluetooth_rxtx.c **** 
 4794              		.loc 1 1871 0
 4795 0162 4FF08072 		mov	r2, #16777216
 4796 0166 214B     		ldr	r3, .L540+40
 4797 0168 1A60     		str	r2, [r3]
1874:bluetooth_rxtx.c **** 	dio_ssp_stop();
 4798              		.loc 1 1874 0
 4799 016a FFF7FEFF 		bl	cc2400_idle
 4800              	.LVL557:
ARM GAS  /tmp/ccyBazZt.s 			page 140


1875:bluetooth_rxtx.c **** 	cs_trigger_disable();
 4801              		.loc 1 1875 0
 4802 016e FFF7FEFF 		bl	dio_ssp_stop
 4803              	.LVL558:
1878:bluetooth_rxtx.c **** 
 4804              		.loc 1 1878 0
 4805 0172 BDE8F84F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4806              		.cfi_remember_state
 4807              		.cfi_restore 14
 4808              		.cfi_restore 11
 4809              		.cfi_restore 10
 4810              		.cfi_restore 9
 4811              		.cfi_restore 8
 4812              		.cfi_restore 7
 4813              		.cfi_restore 6
 4814              		.cfi_restore 5
 4815              		.cfi_restore 4
 4816              		.cfi_restore 3
 4817              		.cfi_def_cfa_offset 0
 4818              	.LVL559:
1876:bluetooth_rxtx.c **** 
 4819              		.loc 1 1876 0
 4820 0176 FFF7FEBF 		b	cs_trigger_disable
 4821              	.LVL560:
 4822              	.L500:
 4823              		.cfi_restore_state
 4824              	.LBB95:
1797:bluetooth_rxtx.c **** 		}
 4825              		.loc 1 1797 0
 4826 017a 4FF48073 		mov	r3, #256
 4827 017e 3B60     		str	r3, [r7]
 4828 0180 85E7     		b	.L501
 4829              	.LVL561:
 4830              	.L505:
1807:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 4831              		.loc 1 1807 0
 4832 0182 0620     		movs	r0, #6
 4833 0184 FFF7FEFF 		bl	cc2400_get
 4834              	.LVL562:
1808:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 4835              		.loc 1 1808 0
 4836 0188 114B     		ldr	r3, .L540+12
1807:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 4837              		.loc 1 1807 0
 4838 018a 40F30720 		sbfx	r0, r0, #8, #8
 4839              	.LVL563:
1808:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 4840              		.loc 1 1808 0
 4841 018e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4842 0190 63B1     		cbz	r3, .L503
1808:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 4843              		.loc 1 1808 0 is_stmt 0 discriminator 1
 4844 0192 15F1800F 		cmn	r5, #128
 4845 0196 09D1     		bne	.L503
1809:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 4846              		.loc 1 1809 0 is_stmt 1
 4847 0198 0F4B     		ldr	r3, .L540+20
ARM GAS  /tmp/ccyBazZt.s 			page 141


 4848 019a 93F90030 		ldrsb	r3, [r3]
 4849 019e 03F13605 		add	r5, r3, #54
 4850              	.LVL564:
 4851 01a2 A842     		cmp	r0, r5
 4852 01a4 B8BF     		it	lt
 4853 01a6 2846     		movlt	r0, r5
 4854              	.LVL565:
 4855 01a8 45B2     		sxtb	r5, r0
1810:bluetooth_rxtx.c **** 			}
 4856              		.loc 1 1810 0
 4857 01aa 2846     		mov	r0, r5
 4858              	.L503:
 4859              	.LVL566:
1812:bluetooth_rxtx.c **** 		}
 4860              		.loc 1 1812 0
 4861 01ac FFF7FEFF 		bl	rssi_add
 4862              	.LVL567:
 4863 01b0 75E7     		b	.L502
 4864              	.L511:
1845:bluetooth_rxtx.c **** 			goto rx_continue;
 4865              		.loc 1 1845 0
 4866 01b2 002E     		cmp	r6, #0
 4867 01b4 ADD1     		bne	.L512
 4868              	.LVL568:
 4869              	.L507:
1866:bluetooth_rxtx.c **** 		rx_err = 0;
 4870              		.loc 1 1866 0
 4871 01b6 0023     		movs	r3, #0
 4872 01b8 C8F80030 		str	r3, [r8]
1867:bluetooth_rxtx.c **** 	}
 4873              		.loc 1 1867 0
 4874 01bc C9F80030 		str	r3, [r9]
 4875 01c0 3FE7     		b	.L496
 4876              	.L541:
 4877 01c2 00BF     		.align	2
 4878              	.L540:
 4879 01c4 00000000 		.word	.LANCHOR1
 4880 01c8 00E100E0 		.word	-536813312
 4881 01cc 3CC00920 		.word	537509948
 4882 01d0 00000000 		.word	cs_trigger
 4883 01d4 00000000 		.word	cs_no_squelch
 4884 01d8 00000000 		.word	cs_threshold_cur
 4885 01dc 00000000 		.word	rssi_max
 4886 01e0 90010000 		.word	unpacked+400
 4887 01e4 00000000 		.word	idle_rxbuf
 4888 01e8 00000000 		.word	unpacked
 4889 01ec 80E100E0 		.word	-536813184
 4890 01f0 00000000 		.word	.LANCHOR0
 4891 01f4 00000000 		.word	rx_tc
 4892 01f8 00000000 		.word	rx_err
 4893              	.LBE95:
 4894              		.cfi_endproc
 4895              	.LFE24:
 4897              		.section	.text.rearrange_channel,"ax",%progbits
 4898              		.align	1
 4899              		.global	rearrange_channel
 4900              		.syntax unified
ARM GAS  /tmp/ccyBazZt.s 			page 142


 4901              		.thumb
 4902              		.thumb_func
 4903              		.fpu softvfp
 4905              	rearrange_channel:
 4906              	.LFB27:
2170:bluetooth_rxtx.c ****     
 4907              		.loc 1 2170 0
 4908              		.cfi_startproc
 4909              		@ args = 0, pretend = 0, frame = 0
 4910              		@ frame_needed = 0, uses_anonymous_args = 0
 4911              		@ link register save eliminated.
 4912              	.LVL569:
2175:bluetooth_rxtx.c ****         for(n=m+1; n<total_channel; ++n){
 4913              		.loc 1 2175 0
 4914 0000 0022     		movs	r2, #0
 4915 0002 024B     		ldr	r3, .L543
2187:bluetooth_rxtx.c **** /**
 4916              		.loc 1 2187 0
 4917 0004 0120     		movs	r0, #1
 4918              	.LVL570:
2175:bluetooth_rxtx.c ****         for(n=m+1; n<total_channel; ++n){
 4919              		.loc 1 2175 0
 4920 0006 83F83420 		strb	r2, [r3, #52]
2187:bluetooth_rxtx.c **** /**
 4921              		.loc 1 2187 0
 4922 000a 7047     		bx	lr
 4923              	.L544:
 4924              		.align	2
 4925              	.L543:
 4926 000c 00000000 		.word	.LANCHOR1
 4927              		.cfi_endproc
 4928              	.LFE27:
 4930              		.section	.text.le_promisc_state,"ax",%progbits
 4931              		.align	1
 4932              		.global	le_promisc_state
 4933              		.syntax unified
 4934              		.thumb
 4935              		.thumb_func
 4936              		.fpu softvfp
 4938              	le_promisc_state:
 4939              	.LFB29:
2195:bluetooth_rxtx.c ****     
2196:bluetooth_rxtx.c **** /*
2197:bluetooth_rxtx.c ****     u8 index = btle_channel_index(channel);
2198:bluetooth_rxtx.c **** 
2199:bluetooth_rxtx.c ****     if(ch_count1 < 74 && ch_map_hopped[index] != 1){
2200:bluetooth_rxtx.c ****         ch_map_hopped[index] = 1;
2201:bluetooth_rxtx.c ****         remapped_ch[total_channel] = channel;
2202:bluetooth_rxtx.c ****         //debug_printf("%d,", index);
2203:bluetooth_rxtx.c ****         total_channel++;
2204:bluetooth_rxtx.c ****     }
2205:bluetooth_rxtx.c ****     else if(ch_count1 == 74){
2206:bluetooth_rxtx.c ****         ch_count1++;
2207:bluetooth_rxtx.c ****         do_count = 0;
2208:bluetooth_rxtx.c ****         mapped = rearrange_channel(remapped_ch);
2209:bluetooth_rxtx.c ****         hopping_channel = 0;
2210:bluetooth_rxtx.c ****         channel_hopped = 0;
ARM GAS  /tmp/ccyBazZt.s 			page 143


2211:bluetooth_rxtx.c **** 
2212:bluetooth_rxtx.c **** 	//for transmitting
2213:bluetooth_rxtx.c **** 	
2214:bluetooth_rxtx.c ****     }
2215:bluetooth_rxtx.c **** 
2216:bluetooth_rxtx.c ****     else if(mapped == 1){
2217:bluetooth_rxtx.c ****             channel_hopped++;
2218:bluetooth_rxtx.c ****             if(abs(hopping_channel - channel_hopped) > 3 && remapped == 0){
2219:bluetooth_rxtx.c ****                 debug_printf("recalculating ch map %d\n",abs(hopping_channel - channel_hopped));
2220:bluetooth_rxtx.c ****                 mapped = 0;
2221:bluetooth_rxtx.c ****                 ch_count1 = 0;
2222:bluetooth_rxtx.c ****                 total_channel = 0;
2223:bluetooth_rxtx.c ****                 hopping_channel = 0;
2224:bluetooth_rxtx.c ****                 channel_hopped = 0;
2225:bluetooth_rxtx.c ****                 do_count = 1;
2226:bluetooth_rxtx.c ****                 memset(ch_map_hopped, 0, sizeof ch_map_hopped);
2227:bluetooth_rxtx.c ****             }
2228:bluetooth_rxtx.c ****             hopping_channel = 0;
2229:bluetooth_rxtx.c ****             channel_hopped = 0;
2230:bluetooth_rxtx.c ****      }
2231:bluetooth_rxtx.c **** 
2232:bluetooth_rxtx.c ****     else if(mapped == 1){
2233:bluetooth_rxtx.c ****             channel_hopped++;
2234:bluetooth_rxtx.c ****      }
2235:bluetooth_rxtx.c **** 
2236:bluetooth_rxtx.c ****     if(do_count == 1){
2237:bluetooth_rxtx.c ****         ch_count1++;
2238:bluetooth_rxtx.c ****     }
2239:bluetooth_rxtx.c **** */
2240:bluetooth_rxtx.c **** }
2241:bluetooth_rxtx.c **** /* 
2242:bluetooth_rxtx.c **** void le_phy_main(void);
2243:bluetooth_rxtx.c **** void bt_follow_le() {
2244:bluetooth_rxtx.c **** 	le_phy_main();
2245:bluetooth_rxtx.c **** }
2246:bluetooth_rxtx.c **** */
2247:bluetooth_rxtx.c **** // issue state change message
2248:bluetooth_rxtx.c **** void le_promisc_state(u8 type, void *data, unsigned len) {
 4940              		.loc 1 2248 0
 4941              		.cfi_startproc
 4942              		@ args = 0, pretend = 0, frame = 56
 4943              		@ frame_needed = 0, uses_anonymous_args = 0
 4944              	.LVL571:
 4945 0000 70B5     		push	{r4, r5, r6, lr}
 4946              		.cfi_def_cfa_offset 16
 4947              		.cfi_offset 4, -16
 4948              		.cfi_offset 5, -12
 4949              		.cfi_offset 6, -8
 4950              		.cfi_offset 14, -4
 4951 0002 8EB0     		sub	sp, sp, #56
 4952              		.cfi_def_cfa_offset 72
 4953              		.loc 1 2248 0
 4954 0004 1546     		mov	r5, r2
 4955 0006 0C46     		mov	r4, r1
 4956 0008 0646     		mov	r6, r0
2249:bluetooth_rxtx.c **** 	u8 buf[50] = { 0, };
 4957              		.loc 1 2249 0
ARM GAS  /tmp/ccyBazZt.s 			page 144


 4958 000a 3222     		movs	r2, #50
 4959              	.LVL572:
 4960 000c 0021     		movs	r1, #0
 4961              	.LVL573:
 4962 000e 01A8     		add	r0, sp, #4
 4963              	.LVL574:
 4964 0010 FFF7FEFF 		bl	memset
 4965              	.LVL575:
2250:bluetooth_rxtx.c **** 	if (len > 49)
2251:bluetooth_rxtx.c **** 		len = 49;
2252:bluetooth_rxtx.c **** 
2253:bluetooth_rxtx.c **** 	buf[0] = type;
2254:bluetooth_rxtx.c **** 	memcpy(&buf[1], data, len);
 4966              		.loc 1 2254 0
 4967 0014 312D     		cmp	r5, #49
 4968 0016 2A46     		mov	r2, r5
 4969 0018 2146     		mov	r1, r4
 4970 001a 28BF     		it	cs
 4971 001c 3122     		movcs	r2, #49
 4972 001e 0DF10500 		add	r0, sp, #5
2253:bluetooth_rxtx.c **** 	memcpy(&buf[1], data, len);
 4973              		.loc 1 2253 0
 4974 0022 8DF80460 		strb	r6, [sp, #4]
 4975              		.loc 1 2254 0
 4976 0026 FFF7FEFF 		bl	memcpy
 4977              	.LVL576:
2255:bluetooth_rxtx.c **** 	enqueue(LE_PROMISC, (uint8_t*)buf);
 4978              		.loc 1 2255 0
 4979 002a 01A9     		add	r1, sp, #4
 4980 002c 0520     		movs	r0, #5
 4981 002e FFF7FEFF 		bl	enqueue
 4982              	.LVL577:
2256:bluetooth_rxtx.c **** }
 4983              		.loc 1 2256 0
 4984 0032 0EB0     		add	sp, sp, #56
 4985              		.cfi_def_cfa_offset 16
 4986              		@ sp needed
 4987 0034 70BD     		pop	{r4, r5, r6, pc}
 4988              		.cfi_endproc
 4989              	.LFE29:
 4991              		.section	.text.bt_le_sync,"ax",%progbits
 4992              		.align	1
 4993              		.global	bt_le_sync
 4994              		.syntax unified
 4995              		.thumb
 4996              		.thumb_func
 4997              		.fpu softvfp
 4999              	bt_le_sync:
 5000              	.LFB25:
1882:bluetooth_rxtx.c **** 
 5001              		.loc 1 1882 0
 5002              		.cfi_startproc
 5003              		@ args = 0, pretend = 0, frame = 72
 5004              		@ frame_needed = 0, uses_anonymous_args = 0
 5005              	.LVL578:
 5006 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 5007              		.cfi_def_cfa_offset 36
ARM GAS  /tmp/ccyBazZt.s 			page 145


 5008              		.cfi_offset 4, -36
 5009              		.cfi_offset 5, -32
 5010              		.cfi_offset 6, -28
 5011              		.cfi_offset 7, -24
 5012              		.cfi_offset 8, -20
 5013              		.cfi_offset 9, -16
 5014              		.cfi_offset 10, -12
 5015              		.cfi_offset 11, -8
 5016              		.cfi_offset 14, -4
 5017 0004 93B0     		sub	sp, sp, #76
 5018              		.cfi_def_cfa_offset 112
1888:bluetooth_rxtx.c **** 	mode = active_mode;
 5019              		.loc 1 1888 0
 5020 0006 0123     		movs	r3, #1
1894:bluetooth_rxtx.c **** 
 5021              		.loc 1 1894 0
 5022 0008 4FF08072 		mov	r2, #16777216
1888:bluetooth_rxtx.c **** 	mode = active_mode;
 5023              		.loc 1 1888 0
 5024 000c A14C     		ldr	r4, .L622
1891:bluetooth_rxtx.c **** 
 5025              		.loc 1 1891 0
 5026 000e A24D     		ldr	r5, .L622+4
1888:bluetooth_rxtx.c **** 	mode = active_mode;
 5027              		.loc 1 1888 0
 5028 0010 2370     		strb	r3, [r4]
1891:bluetooth_rxtx.c **** 
 5029              		.loc 1 1891 0
 5030 0012 2B75     		strb	r3, [r5, #20]
1894:bluetooth_rxtx.c **** 
 5031              		.loc 1 1894 0
 5032 0014 A14B     		ldr	r3, .L622+8
1889:bluetooth_rxtx.c **** 
 5033              		.loc 1 1889 0
 5034 0016 6074     		strb	r0, [r4, #17]
1894:bluetooth_rxtx.c **** 
 5035              		.loc 1 1894 0
 5036 0018 1A60     		str	r2, [r3]
1896:bluetooth_rxtx.c **** 
 5037              		.loc 1 1896 0
 5038 001a 1023     		movs	r3, #16
 5039 001c A04E     		ldr	r6, .L622+12
1882:bluetooth_rxtx.c **** 
 5040              		.loc 1 1882 0
 5041 001e 8146     		mov	r9, r0
1896:bluetooth_rxtx.c **** 
 5042              		.loc 1 1896 0
 5043 0020 3360     		str	r3, [r6]
1898:bluetooth_rxtx.c **** 	dio_ssp_init();
 5044              		.loc 1 1898 0
 5045 0022 FFF7FEFF 		bl	usb_queue_init
 5046              	.LVL579:
1899:bluetooth_rxtx.c **** 	dma_init_le();
 5047              		.loc 1 1899 0
 5048 0026 FFF7FEFF 		bl	dio_ssp_init
 5049              	.LVL580:
1900:bluetooth_rxtx.c **** 	dio_ssp_start();
ARM GAS  /tmp/ccyBazZt.s 			page 146


 5050              		.loc 1 1900 0
 5051 002a FFF7FEFF 		bl	dma_init_le
 5052              	.LVL581:
1901:bluetooth_rxtx.c **** 
 5053              		.loc 1 1901 0
 5054 002e FFF7FEFF 		bl	dio_ssp_start
 5055              	.LVL582:
1903:bluetooth_rxtx.c **** 
 5056              		.loc 1 1903 0
 5057 0032 2868     		ldr	r0, [r5]
 5058 0034 FFF7FEFF 		bl	rbit
 5059              	.LVL583:
 5060              	.LBB96:
2031:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 5061              		.loc 1 2031 0
 5062 0038 DFF898A2 		ldr	r10, .L622+64
 5063              	.LBE96:
1903:bluetooth_rxtx.c **** 
 5064              		.loc 1 1903 0
 5065 003c FFF7FEFF 		bl	cc2400_rx_sync
 5066              	.LVL584:
 5067 0040 0096     		str	r6, [sp]
 5068              	.L547:
1905:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 5069              		.loc 1 1905 0
 5070 0042 A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
 5071 0044 9945     		cmp	r9, r3
 5072 0046 40F09781 		bne	.L585
 5073              	.LBB104:
1906:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 5074              		.loc 1 1906 0
 5075 004a E389     		ldrh	r3, [r4, #14]
 5076 004c 9BB2     		uxth	r3, r3
 5077 004e CBB1     		cbz	r3, .L548
1907:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 5078              		.loc 1 1907 0
 5079 0050 6420     		movs	r0, #100
 5080 0052 FFF7FEFF 		bl	cc2400_strobe
 5081              	.LVL585:
 5082              	.L549:
1908:bluetooth_rxtx.c **** 
 5083              		.loc 1 1908 0 discriminator 1
 5084 0056 FFF7FEFF 		bl	cc2400_status
 5085              	.LVL586:
 5086 005a 4707     		lsls	r7, r0, #29
 5087 005c FBD4     		bmi	.L549
1911:bluetooth_rxtx.c **** 
 5088              		.loc 1 1911 0
 5089 005e B5F84C10 		ldrh	r1, [r5, #76]
 5090 0062 0220     		movs	r0, #2
 5091 0064 0139     		subs	r1, r1, #1
 5092 0066 89B2     		uxth	r1, r1
 5093 0068 FFF7FEFF 		bl	cc2400_set
 5094              	.LVL587:
1914:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 5095              		.loc 1 1914 0
 5096 006c 6120     		movs	r0, #97
ARM GAS  /tmp/ccyBazZt.s 			page 147


 5097 006e FFF7FEFF 		bl	cc2400_strobe
 5098              	.LVL588:
 5099              	.L550:
1915:bluetooth_rxtx.c **** 
 5100              		.loc 1 1915 0 discriminator 1
 5101 0072 FFF7FEFF 		bl	cc2400_status
 5102              	.LVL589:
 5103 0076 4607     		lsls	r6, r0, #29
 5104 0078 FBD5     		bpl	.L550
1918:bluetooth_rxtx.c **** 
 5105              		.loc 1 1918 0
 5106 007a 6220     		movs	r0, #98
 5107 007c FFF7FEFF 		bl	cc2400_strobe
 5108              	.LVL590:
1920:bluetooth_rxtx.c **** 		}
 5109              		.loc 1 1920 0
 5110 0080 0023     		movs	r3, #0
 5111 0082 E381     		strh	r3, [r4, #14]	@ movhi
 5112              	.L548:
1923:bluetooth_rxtx.c **** 
 5113              		.loc 1 1923 0
 5114 0084 1023     		movs	r3, #16
 5115 0086 009A     		ldr	r2, [sp]
1927:bluetooth_rxtx.c **** 			;
 5116              		.loc 1 1927 0
 5117 0088 DFF84CB2 		ldr	fp, .L622+68
1923:bluetooth_rxtx.c **** 
 5118              		.loc 1 1923 0
 5119 008c 1360     		str	r3, [r2]
1926:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
 5120              		.loc 1 1926 0
 5121 008e FFF7FEFF 		bl	rssi_reset
 5122              	.LVL591:
1927:bluetooth_rxtx.c **** 			;
 5123              		.loc 1 1927 0
 5124 0092 844A     		ldr	r2, .L622+16
 5125              	.L552:
1927:bluetooth_rxtx.c **** 			;
 5126              		.loc 1 1927 0 is_stmt 0 discriminator 4
 5127 0094 DBF80030 		ldr	r3, [fp]
 5128 0098 33B9     		cbnz	r3, .L551
1927:bluetooth_rxtx.c **** 			;
 5129              		.loc 1 1927 0 discriminator 1
 5130 009a 1368     		ldr	r3, [r2]
 5131 009c 23B9     		cbnz	r3, .L551
1927:bluetooth_rxtx.c **** 			;
 5132              		.loc 1 1927 0 discriminator 2
 5133 009e E37A     		ldrb	r3, [r4, #11]	@ zero_extendqisi2
 5134 00a0 13B9     		cbnz	r3, .L551
1927:bluetooth_rxtx.c **** 			;
 5135              		.loc 1 1927 0 discriminator 3
 5136 00a2 A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
 5137 00a4 9945     		cmp	r9, r3
 5138 00a6 F5D0     		beq	.L552
 5139              	.L551:
1930:bluetooth_rxtx.c **** 		rssi_min = rssi_max = rssi;
 5140              		.loc 1 1930 0 is_stmt 1
ARM GAS  /tmp/ccyBazZt.s 			page 148


 5141 00a8 0620     		movs	r0, #6
 5142 00aa FFF7FEFF 		bl	cc2400_get
 5143              	.LVL592:
1931:bluetooth_rxtx.c **** 
 5144              		.loc 1 1931 0
 5145 00ae 7E4B     		ldr	r3, .L622+20
1930:bluetooth_rxtx.c **** 		rssi_min = rssi_max = rssi;
 5146              		.loc 1 1930 0
 5147 00b0 40F30720 		sbfx	r0, r0, #8, #8
 5148              	.LVL593:
1931:bluetooth_rxtx.c **** 
 5149              		.loc 1 1931 0
 5150 00b4 1870     		strb	r0, [r3]
 5151 00b6 7D4B     		ldr	r3, .L622+24
 5152 00b8 1870     		strb	r0, [r3]
1933:bluetooth_rxtx.c **** 			goto cleanup;
 5153              		.loc 1 1933 0
 5154 00ba A37C     		ldrb	r3, [r4, #18]	@ zero_extendqisi2
 5155 00bc 9945     		cmp	r9, r3
 5156 00be 40F05B81 		bne	.L585
1937:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 5157              		.loc 1 1937 0
 5158 00c2 784B     		ldr	r3, .L622+16
 5159 00c4 774F     		ldr	r7, .L622+16
 5160 00c6 1B68     		ldr	r3, [r3]
 5161 00c8 1BB1     		cbz	r3, .L554
1938:bluetooth_rxtx.c **** 		}
 5162              		.loc 1 1938 0
 5163 00ca 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 5164 00cc 43F00203 		orr	r3, r3, #2
 5165 00d0 6370     		strb	r3, [r4, #1]
 5166              	.L554:
1941:bluetooth_rxtx.c **** 			goto rx_flush;
 5167              		.loc 1 1941 0
 5168 00d2 E37A     		ldrb	r3, [r4, #11]	@ zero_extendqisi2
 5169 00d4 03F0FF01 		and	r1, r3, #255
 5170 00d8 002B     		cmp	r3, #0
 5171 00da 40F01581 		bne	.L556
1945:bluetooth_rxtx.c **** 			continue;
 5172              		.loc 1 1945 0
 5173 00de DBF80030 		ldr	r3, [fp]
 5174 00e2 002B     		cmp	r3, #0
 5175 00e4 ADD0     		beq	.L547
1951:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 5176              		.loc 1 1951 0
 5177 00e6 3422     		movs	r2, #52
 5178 00e8 05A8     		add	r0, sp, #20
 5179              	.LVL594:
 5180 00ea FFF7FEFF 		bl	memset
 5181              	.LVL595:
1953:bluetooth_rxtx.c **** 
 5182              		.loc 1 1953 0
 5183 00ee 2B68     		ldr	r3, [r5]
 5184 00f0 6F4E     		ldr	r6, .L622+28
 5185 00f2 0593     		str	r3, [sp, #20]
1955:bluetooth_rxtx.c **** 			anchor_timestamp = CLK100NS;
 5186              		.loc 1 1955 0
ARM GAS  /tmp/ccyBazZt.s 			page 149


 5187 00f4 94F83530 		ldrb	r3, [r4, #53]	@ zero_extendqisi2
 5188 00f8 E3B1     		cbz	r3, .L559
 5189              	.LBB97:
1956:bluetooth_rxtx.c **** 			if (anchor_timestamp < le.last_packet)
 5190              		.loc 1 1956 0
 5191 00fa 40F63541 		movw	r1, #3125
 5192 00fe 6D4A     		ldr	r2, .L622+32
 5193 0100 3368     		ldr	r3, [r6]
 5194 0102 1268     		ldr	r2, [r2]
 5195 0104 C3F31303 		ubfx	r3, r3, #0, #20
 5196 0108 01FB0323 		mla	r3, r1, r3, r2
1957:bluetooth_rxtx.c **** 				anchor_timestamp += 3276800000; // handle rollover
 5197              		.loc 1 1957 0
 5198 010c AA6C     		ldr	r2, [r5, #72]
1956:bluetooth_rxtx.c **** 			if (anchor_timestamp < le.last_packet)
 5199              		.loc 1 1956 0
 5200 010e A363     		str	r3, [r4, #56]
1957:bluetooth_rxtx.c **** 				anchor_timestamp += 3276800000; // handle rollover
 5201              		.loc 1 1957 0
 5202 0110 9342     		cmp	r3, r2
1958:bluetooth_rxtx.c **** 			le_promisc_state(5, &anchor_timestamp, 4);
 5203              		.loc 1 1958 0
 5204 0112 3CBF     		itt	cc
 5205 0114 03F14343 		addcc	r3, r3, #-1023410176
 5206 0118 03F5A003 		addcc	r3, r3, #5242880
1959:bluetooth_rxtx.c **** 			send_clock = 0;
 5207              		.loc 1 1959 0
 5208 011c 4FF00402 		mov	r2, #4
 5209 0120 6549     		ldr	r1, .L622+36
 5210 0122 4FF00500 		mov	r0, #5
1958:bluetooth_rxtx.c **** 			le_promisc_state(5, &anchor_timestamp, 4);
 5211              		.loc 1 1958 0
 5212 0126 38BF     		it	cc
 5213 0128 A363     		strcc	r3, [r4, #56]
1959:bluetooth_rxtx.c **** 			send_clock = 0;
 5214              		.loc 1 1959 0
 5215 012a FFF7FEFF 		bl	le_promisc_state
 5216              	.LVL596:
1960:bluetooth_rxtx.c **** 			//debug_printf("anchor %d\n",anchor_timestamp);
 5217              		.loc 1 1960 0
 5218 012e 0023     		movs	r3, #0
 5219 0130 84F83530 		strb	r3, [r4, #53]
 5220              	.L559:
 5221              	.LBE97:
1963:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel)];
 5222              		.loc 1 1963 0
 5223 0134 40F63540 		movw	r0, #3125
 5224 0138 5E4A     		ldr	r2, .L622+32
 5225 013a B5F84C10 		ldrh	r1, [r5, #76]
 5226 013e 3368     		ldr	r3, [r6]
 5227 0140 1268     		ldr	r2, [r2]
 5228 0142 C3F31303 		ubfx	r3, r3, #0, #20
 5229 0146 00FB0322 		mla	r2, r0, r3, r2
 5230 014a 89B2     		uxth	r1, r1
 5231 014c 5B48     		ldr	r0, .L622+40
 5232 014e FFF7FEFF 		bl	debug_printf
 5233              	.LVL597:
ARM GAS  /tmp/ccyBazZt.s 			page 150


1964:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 5234              		.loc 1 1964 0
 5235 0152 B5F84C00 		ldrh	r0, [r5, #76]
 5236 0156 3026     		movs	r6, #48
 5237 0158 80B2     		uxth	r0, r0
 5238 015a FFF7FEFF 		bl	btle_channel_index
 5239              	.LVL598:
 5240 015e 4643     		muls	r6, r0, r6
 5241 0160 DFF87881 		ldr	r8, .L622+72
 5242 0164 08EB0603 		add	r3, r8, r6
 5243 0168 0193     		str	r3, [sp, #4]
 5244              	.LVL599:
 5245              	.LBB98:
1966:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 5246              		.loc 1 1966 0
 5247 016a 554B     		ldr	r3, .L622+44
 5248              	.LVL600:
 5249 016c 93F800E0 		ldrb	lr, [r3]	@ zero_extendqisi2
1967:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 5250              		.loc 1 1967 0
 5251 0170 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
1968:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 5252              		.loc 1 1968 0
 5253 0172 9978     		ldrb	r1, [r3, #2]	@ zero_extendqisi2
1967:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 5254              		.loc 1 1967 0
 5255 0174 1204     		lsls	r2, r2, #16
1969:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 5256              		.loc 1 1969 0
 5257 0176 D878     		ldrb	r0, [r3, #3]	@ zero_extendqisi2
 5258              	.LVL601:
1967:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 5259              		.loc 1 1967 0
 5260 0178 42EA0E62 		orr	r2, r2, lr, lsl #24
1969:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 5261              		.loc 1 1969 0
 5262 017c 1043     		orrs	r0, r0, r2
1970:bluetooth_rxtx.c **** 		}
 5263              		.loc 1 1970 0
 5264 017e 40EA0120 		orr	r0, r0, r1, lsl #8
1969:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 5265              		.loc 1 1969 0
 5266 0182 0293     		str	r3, [sp, #8]
1970:bluetooth_rxtx.c **** 		}
 5267              		.loc 1 1970 0
 5268 0184 FFF7FEFF 		bl	rbit
 5269              	.LVL602:
 5270 0188 58F80660 		ldr	r6, [r8, r6]
 5271 018c 4640     		eors	r6, r6, r0
 5272 018e 0696     		str	r6, [sp, #24]
 5273              	.LVL603:
 5274              	.LBE98:
1973:bluetooth_rxtx.c **** 		if (len > 39)
 5275              		.loc 1 1973 0
 5276 0190 C6F30526 		ubfx	r6, r6, #8, #6
 5277 0194 06F10208 		add	r8, r6, #2
 5278              	.LVL604:
ARM GAS  /tmp/ccyBazZt.s 			page 151


1974:bluetooth_rxtx.c **** 			goto rx_flush;
 5279              		.loc 1 1974 0
 5280 0198 B8F1270F 		cmp	r8, #39
 5281 019c 00F3B480 		bgt	.L556
1979:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
 5282              		.loc 1 1979 0
 5283 01a0 0836     		adds	r6, r6, #8
 5284              	.LVL605:
1980:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
 5285              		.loc 1 1980 0
 5286 01a2 2B2E     		cmp	r6, #43
 5287 01a4 6DD8     		bhi	.L562
1981:bluetooth_rxtx.c **** 				;
 5288              		.loc 1 1981 0 discriminator 2
 5289 01a6 029B     		ldr	r3, [sp, #8]
 5290 01a8 26F00302 		bic	r2, r6, #3
 5291 01ac 4549     		ldr	r1, .L622+48
 5292 01ae 1344     		add	r3, r3, r2
 5293              	.L609:
 5294 01b0 0A68     		ldr	r2, [r1]
 5295 01b2 9A42     		cmp	r2, r3
 5296 01b4 02D2     		bcs	.L563
1981:bluetooth_rxtx.c **** 				;
 5297              		.loc 1 1981 0 is_stmt 0 discriminator 1
 5298 01b6 3A68     		ldr	r2, [r7]
 5299 01b8 002A     		cmp	r2, #0
 5300 01ba F9D0     		beq	.L609
 5301              	.L563:
1993:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 5302              		.loc 1 1993 0 is_stmt 1
 5303 01bc 0427     		movs	r7, #4
1987:bluetooth_rxtx.c **** 
 5304              		.loc 1 1987 0
 5305 01be DAF80030 		ldr	r3, [r10]
1990:bluetooth_rxtx.c **** 
 5306              		.loc 1 1990 0
 5307 01c2 6120     		movs	r0, #97
1987:bluetooth_rxtx.c **** 
 5308              		.loc 1 1987 0
 5309 01c4 23F00103 		bic	r3, r3, #1
 5310 01c8 CAF80030 		str	r3, [r10]
1990:bluetooth_rxtx.c **** 
 5311              		.loc 1 1990 0
 5312 01cc FFF7FEFF 		bl	cc2400_strobe
 5313              	.LVL606:
 5314              	.LBB99:
1994:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 5315              		.loc 1 1994 0
 5316 01d0 3B4A     		ldr	r2, .L622+44
 5317              	.LVL607:
 5318              	.L565:
 5319 01d2 7B1C     		adds	r3, r7, #1
1994:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 5320              		.loc 1 1994 0 is_stmt 0 discriminator 3
 5321 01d4 12F807C0 		ldrb	ip, [r2, r7]	@ zero_extendqisi2
1995:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 5322              		.loc 1 1995 0 is_stmt 1 discriminator 3
ARM GAS  /tmp/ccyBazZt.s 			page 152


 5323 01d8 D05C     		ldrb	r0, [r2, r3]	@ zero_extendqisi2
 5324 01da BB1C     		adds	r3, r7, #2
1996:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 5325              		.loc 1 1996 0 discriminator 3
 5326 01dc 12F803E0 		ldrb	lr, [r2, r3]	@ zero_extendqisi2
 5327 01e0 FB1C     		adds	r3, r7, #3
1997:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 5328              		.loc 1 1997 0 discriminator 3
 5329 01e2 D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
 5330              	.LVL608:
1998:bluetooth_rxtx.c **** 		}
 5331              		.loc 1 1998 0 discriminator 3
 5332 01e4 B910     		asrs	r1, r7, #2
1997:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 5333              		.loc 1 1997 0 discriminator 3
 5334 01e6 43EA0C63 		orr	r3, r3, ip, lsl #24
 5335              	.LVL609:
 5336 01ea 43EA0040 		orr	r0, r3, r0, lsl #16
1998:bluetooth_rxtx.c **** 		}
 5337              		.loc 1 1998 0 discriminator 3
 5338 01ee 40EA0E20 		orr	r0, r0, lr, lsl #8
1997:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 5339              		.loc 1 1997 0 discriminator 3
 5340 01f2 0392     		str	r2, [sp, #12]
1998:bluetooth_rxtx.c **** 		}
 5341              		.loc 1 1998 0 discriminator 3
 5342 01f4 0291     		str	r1, [sp, #8]
 5343 01f6 FFF7FEFF 		bl	rbit
 5344              	.LVL610:
 5345 01fa 0299     		ldr	r1, [sp, #8]
 5346 01fc 12AB     		add	r3, sp, #72
 5347 01fe 03EB810E 		add	lr, r3, r1, lsl #2
 5348 0202 019B     		ldr	r3, [sp, #4]
 5349              	.LBE99:
1993:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 5350              		.loc 1 1993 0 discriminator 3
 5351 0204 0437     		adds	r7, r7, #4
 5352              	.LVL611:
 5353              	.LBB100:
1998:bluetooth_rxtx.c **** 		}
 5354              		.loc 1 1998 0 discriminator 3
 5355 0206 53F82130 		ldr	r3, [r3, r1, lsl #2]
 5356              	.LBE100:
1993:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 5357              		.loc 1 1993 0 discriminator 3
 5358 020a 2C2F     		cmp	r7, #44
 5359              	.LBB101:
1998:bluetooth_rxtx.c **** 		}
 5360              		.loc 1 1998 0 discriminator 3
 5361 020c 80EA0300 		eor	r0, r0, r3
 5362 0210 4EF8300C 		str	r0, [lr, #-48]
 5363              	.LBE101:
1993:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 5364              		.loc 1 1993 0 discriminator 3
 5365 0214 039A     		ldr	r2, [sp, #12]
 5366 0216 DCD1     		bne	.L565
2001:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
ARM GAS  /tmp/ccyBazZt.s 			page 153


 5367              		.loc 1 2001 0
 5368 0218 2B69     		ldr	r3, [r5, #16]
 5369 021a 002B     		cmp	r3, #0
 5370 021c 60D1     		bne	.L566
 5371              	.LVL612:
 5372              	.L569:
2011:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 5373              		.loc 1 2011 0
 5374 021e 1022     		movs	r2, #16
 5375 0220 294B     		ldr	r3, .L622+52
2012:bluetooth_rxtx.c ****         	if(btle_channel_index(channel) == idx3){
 5376              		.loc 1 2012 0
 5377 0222 05A8     		add	r0, sp, #20
 5378              	.LVL613:
2011:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 5379              		.loc 1 2011 0
 5380 0224 1A60     		str	r2, [r3]
2012:bluetooth_rxtx.c ****         	if(btle_channel_index(channel) == idx3){
 5381              		.loc 1 2012 0
 5382 0226 A369     		ldr	r3, [r4, #24]
 5383 0228 9847     		blx	r3
 5384              	.LVL614:
2013:bluetooth_rxtx.c ****             		count3++;  
 5385              		.loc 1 2013 0
 5386 022a B5F84C00 		ldrh	r0, [r5, #76]
 5387 022e 80B2     		uxth	r0, r0
 5388 0230 FFF7FEFF 		bl	btle_channel_index
 5389              	.LVL615:
 5390 0234 95F87130 		ldrb	r3, [r5, #113]	@ zero_extendqisi2
 5391 0238 8342     		cmp	r3, r0
 5392 023a 0CD1     		bne	.L570
2014:bluetooth_rxtx.c ****             	if(count3 > count2-1){
 5393              		.loc 1 2014 0
 5394 023c 94F83C30 		ldrb	r3, [r4, #60]	@ zero_extendqisi2
2015:bluetooth_rxtx.c ****                 	count3 = 0;
 5395              		.loc 1 2015 0
 5396 0240 94F83D20 		ldrb	r2, [r4, #61]	@ zero_extendqisi2
2014:bluetooth_rxtx.c ****             	if(count3 > count2-1){
 5397              		.loc 1 2014 0
 5398 0244 0133     		adds	r3, r3, #1
 5399 0246 DBB2     		uxtb	r3, r3
2015:bluetooth_rxtx.c ****                 	count3 = 0;
 5400              		.loc 1 2015 0
 5401 0248 9A42     		cmp	r2, r3
2014:bluetooth_rxtx.c ****             	if(count3 > count2-1){
 5402              		.loc 1 2014 0
 5403 024a 84F83C30 		strb	r3, [r4, #60]
2016:bluetooth_rxtx.c ****             	}      
 5404              		.loc 1 2016 0
 5405 024e DCBF     		itt	le
 5406 0250 0023     		movle	r3, #0
 5407 0252 84F83C30 		strble	r3, [r4, #60]
 5408              	.L570:
2020:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 5409              		.loc 1 2020 0
 5410 0256 4FF08076 		mov	r6, #16777216
 5411 025a 1C4B     		ldr	r3, .L622+56
ARM GAS  /tmp/ccyBazZt.s 			page 154


2021:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 5412              		.loc 1 2021 0
 5413 025c 05A9     		add	r1, sp, #20
 5414              	.LVL616:
2020:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 5415              		.loc 1 2020 0
 5416 025e 1E60     		str	r6, [r3]
2021:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 5417              		.loc 1 2021 0
 5418 0260 0120     		movs	r0, #1
 5419 0262 FFF7FEFF 		bl	enqueue
 5420              	.LVL617:
2024:bluetooth_rxtx.c **** 
 5421              		.loc 1 2024 0
 5422 0266 40F63541 		movw	r1, #3125
2022:bluetooth_rxtx.c **** 
 5423              		.loc 1 2022 0
 5424 026a 0C4B     		ldr	r3, .L622+8
2024:bluetooth_rxtx.c **** 
 5425              		.loc 1 2024 0
 5426 026c 114A     		ldr	r2, .L622+32
2022:bluetooth_rxtx.c **** 
 5427              		.loc 1 2022 0
 5428 026e 1E60     		str	r6, [r3]
2024:bluetooth_rxtx.c **** 
 5429              		.loc 1 2024 0
 5430 0270 0F4B     		ldr	r3, .L622+28
 5431 0272 1B68     		ldr	r3, [r3]
 5432 0274 1268     		ldr	r2, [r2]
 5433 0276 C3F31303 		ubfx	r3, r3, #0, #20
 5434 027a 01FB0323 		mla	r3, r1, r3, r2
 5435 027e AB64     		str	r3, [r5, #72]
 5436 0280 42E0     		b	.L556
 5437              	.LVL618:
 5438              	.L562:
1984:bluetooth_rxtx.c **** 				;
 5439              		.loc 1 1984 0 discriminator 2
 5440 0282 134A     		ldr	r2, .L622+60
 5441              	.L610:
 5442 0284 1368     		ldr	r3, [r2]
 5443 0286 D807     		lsls	r0, r3, #31
 5444 0288 98D5     		bpl	.L563
1984:bluetooth_rxtx.c **** 				;
 5445              		.loc 1 1984 0 is_stmt 0 discriminator 1
 5446 028a 3B68     		ldr	r3, [r7]
 5447 028c 002B     		cmp	r3, #0
 5448 028e F9D0     		beq	.L610
 5449 0290 94E7     		b	.L563
 5450              	.L623:
 5451 0292 00BF     		.align	2
 5452              	.L622:
 5453 0294 00000000 		.word	.LANCHOR1
 5454 0298 00000000 		.word	.LANCHOR0
 5455 029c 00E100E0 		.word	-536813312
 5456 02a0 3CC00920 		.word	537509948
 5457 02a4 00000000 		.word	rx_err
 5458 02a8 00000000 		.word	rssi_max
ARM GAS  /tmp/ccyBazZt.s 			page 155


 5459 02ac 00000000 		.word	rssi_min
 5460 02b0 00000000 		.word	clkn
 5461 02b4 08400040 		.word	1073758216
 5462 02b8 38000000 		.word	.LANCHOR1+56
 5463 02bc 4A000000 		.word	.LC9
 5464 02c0 00000000 		.word	rxbuf1
 5465 02c4 04410050 		.word	1342193924
 5466 02c8 38C00920 		.word	537509944
 5467 02cc 80E100E0 		.word	-536813184
 5468 02d0 10410050 		.word	1342193936
 5469 02d4 24000340 		.word	1073938468
 5470 02d8 00000000 		.word	rx_tc
 5471 02dc FC000000 		.word	.LANCHOR2+252
 5472              	.LVL619:
 5473              	.L566:
 5474              	.LBB102:
2002:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 5475              		.loc 1 2002 0 is_stmt 1
 5476 02e0 4246     		mov	r2, r8
 5477 02e2 06A9     		add	r1, sp, #24
 5478 02e4 E868     		ldr	r0, [r5, #12]
 5479 02e6 FFF7FEFF 		bl	btle_crcgen_lut
 5480              	.LVL620:
2004:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 5481              		.loc 1 2004 0
 5482 02ea 12AB     		add	r3, sp, #72
2003:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 5483              		.loc 1 2003 0
 5484 02ec 1E44     		add	r6, r6, r3
 5485              	.LVL621:
2004:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 5486              		.loc 1 2004 0
 5487 02ee 9844     		add	r8, r8, r3
 5488              	.LVL622:
2003:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 5489              		.loc 1 2003 0
 5490 02f0 16F8343C 		ldrb	r3, [r6, #-52]	@ zero_extendqisi2
2004:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 5491              		.loc 1 2004 0
 5492 02f4 18F82F2C 		ldrb	r2, [r8, #-47]	@ zero_extendqisi2
2003:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 5493              		.loc 1 2003 0
 5494 02f8 1B04     		lsls	r3, r3, #16
2004:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 5495              		.loc 1 2004 0
 5496 02fa 43EA0223 		orr	r3, r3, r2, lsl #8
2005:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
 5497              		.loc 1 2005 0
 5498 02fe 18F8302C 		ldrb	r2, [r8, #-48]	@ zero_extendqisi2
 5499 0302 1343     		orrs	r3, r3, r2
2006:bluetooth_rxtx.c **** 				goto rx_flush;
 5500              		.loc 1 2006 0
 5501 0304 9842     		cmp	r0, r3
 5502 0306 8AD0     		beq	.L569
 5503              	.LVL623:
 5504              	.L556:
 5505              	.LBE102:
ARM GAS  /tmp/ccyBazZt.s 			page 156


2028:bluetooth_rxtx.c **** 
 5506              		.loc 1 2028 0
 5507 0308 6120     		movs	r0, #97
 5508 030a FFF7FEFF 		bl	cc2400_strobe
 5509              	.LVL624:
2031:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 5510              		.loc 1 2031 0
 5511 030e DAF80030 		ldr	r3, [r10]
2032:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 5512              		.loc 1 2032 0
 5513 0312 464A     		ldr	r2, .L624
2031:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 5514              		.loc 1 2031 0
 5515 0314 23F00103 		bic	r3, r3, #1
 5516 0318 CAF80030 		str	r3, [r10]
 5517              	.L571:
2032:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 5518              		.loc 1 2032 0
 5519 031c 1368     		ldr	r3, [r2]
 5520 031e 5907     		lsls	r1, r3, #29
 5521 0320 37D4     		bmi	.L572
2037:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 5522              		.loc 1 2037 0
 5523 0322 40F63541 		movw	r1, #3125
 5524 0326 424B     		ldr	r3, .L624+4
 5525 0328 424A     		ldr	r2, .L624+8
 5526 032a 1B68     		ldr	r3, [r3]
 5527 032c 1268     		ldr	r2, [r2]
 5528 032e C3F31303 		ubfx	r3, r3, #0, #20
 5529 0332 01FB0323 		mla	r3, r1, r3, r2
 5530              	.LVL625:
2038:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 5531              		.loc 1 2038 0
 5532 0336 A96C     		ldr	r1, [r5, #72]
2041:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
 5533              		.loc 1 2041 0
 5534 0338 2A7D     		ldrb	r2, [r5, #20]	@ zero_extendqisi2
2038:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 5535              		.loc 1 2038 0
 5536 033a 8B42     		cmp	r3, r1
2039:bluetooth_rxtx.c **** 		if  ( // timeout
 5537              		.loc 1 2039 0
 5538 033c 38BF     		it	cc
 5539 033e 03F14343 		addcc	r3, r3, #-1023410176
 5540              	.LVL626:
2040:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 5541              		.loc 1 2040 0
 5542 0342 A2F10202 		sub	r2, r2, #2
2039:bluetooth_rxtx.c **** 		if  ( // timeout
 5543              		.loc 1 2039 0
 5544 0346 38BF     		it	cc
 5545 0348 03F5A003 		addcc	r3, r3, #5242880
 5546              	.LVL627:
2040:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 5547              		.loc 1 2040 0
 5548 034c 012A     		cmp	r2, #1
 5549 034e 03D8     		bhi	.L574
ARM GAS  /tmp/ccyBazZt.s 			page 157


2042:bluetooth_rxtx.c **** 			// jam finished
 5550              		.loc 1 2042 0
 5551 0350 394A     		ldr	r2, .L624+12
 5552 0352 5B1A     		subs	r3, r3, r1
 5553              	.LVL628:
 5554 0354 9342     		cmp	r3, r2
 5555 0356 02D8     		bhi	.L575
 5556              	.L574:
2044:bluetooth_rxtx.c **** 			)
 5557              		.loc 1 2044 0
 5558 0358 236C     		ldr	r3, [r4, #64]
 5559 035a 012B     		cmp	r3, #1
 5560 035c 33D1     		bne	.L576
 5561              	.L575:
2047:bluetooth_rxtx.c **** 			le_jam_count = 0;
 5562              		.loc 1 2047 0
 5563 035e FFF7FEFF 		bl	reset_le
 5564              	.LVL629:
2049:bluetooth_rxtx.c **** 
 5565              		.loc 1 2049 0
 5566 0362 4FF48072 		mov	r2, #256
2048:bluetooth_rxtx.c **** 			TXLED_CLR;
 5567              		.loc 1 2048 0
 5568 0366 0023     		movs	r3, #0
2049:bluetooth_rxtx.c **** 
 5569              		.loc 1 2049 0
 5570 0368 0099     		ldr	r1, [sp]
2048:bluetooth_rxtx.c **** 			TXLED_CLR;
 5571              		.loc 1 2048 0
 5572 036a 2364     		str	r3, [r4, #64]
2049:bluetooth_rxtx.c **** 
 5573              		.loc 1 2049 0
 5574 036c 0A60     		str	r2, [r1]
2051:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 5575              		.loc 1 2051 0
 5576 036e E27C     		ldrb	r2, [r4, #19]	@ zero_extendqisi2
 5577 0370 012A     		cmp	r2, #1
 5578 0372 11D1     		bne	.L577
2052:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
 5579              		.loc 1 2052 0
 5580 0374 E374     		strb	r3, [r4, #19]
2053:bluetooth_rxtx.c **** 				goto cleanup;
 5581              		.loc 1 2053 0
 5582 0376 A374     		strb	r3, [r4, #18]
 5583              	.L585:
 5584              	.LBE104:
2103:bluetooth_rxtx.c **** 
 5585              		.loc 1 2103 0
 5586 0378 4FF08072 		mov	r2, #16777216
 5587 037c 2F4B     		ldr	r3, .L624+16
 5588 037e 1A60     		str	r2, [r3]
2106:bluetooth_rxtx.c **** 	dio_ssp_stop();
 5589              		.loc 1 2106 0
 5590 0380 FFF7FEFF 		bl	cc2400_idle
 5591              	.LVL630:
2107:bluetooth_rxtx.c **** 	cs_trigger_disable();
 5592              		.loc 1 2107 0
ARM GAS  /tmp/ccyBazZt.s 			page 158


 5593 0384 FFF7FEFF 		bl	dio_ssp_stop
 5594              	.LVL631:
2108:bluetooth_rxtx.c **** }
 5595              		.loc 1 2108 0
 5596 0388 FFF7FEFF 		bl	cs_trigger_disable
 5597              	.LVL632:
2109:bluetooth_rxtx.c **** 
 5598              		.loc 1 2109 0
 5599 038c 13B0     		add	sp, sp, #76
 5600              		.cfi_remember_state
 5601              		.cfi_def_cfa_offset 36
 5602              		@ sp needed
 5603 038e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 5604              	.L572:
 5605              		.cfi_restore_state
 5606              	.LBB105:
 5607              	.LBB103:
2033:bluetooth_rxtx.c **** 		}
 5608              		.loc 1 2033 0
 5609 0392 2B4B     		ldr	r3, .L624+20
 5610 0394 1B68     		ldr	r3, [r3]
 5611 0396 C1E7     		b	.L571
 5612              	.L577:
 5613              	.LBE103:
2058:bluetooth_rxtx.c **** 				goto cleanup;
 5614              		.loc 1 2058 0
 5615 0398 B9F10A0F 		cmp	r9, #10
 5616 039c ECD0     		beq	.L585
2061:bluetooth_rxtx.c **** 
 5617              		.loc 1 2061 0
 5618 039e 0123     		movs	r3, #1
2063:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 5619              		.loc 1 2063 0
 5620 03a0 6420     		movs	r0, #100
2061:bluetooth_rxtx.c **** 
 5621              		.loc 1 2061 0
 5622 03a2 2B75     		strb	r3, [r5, #20]
2063:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 5623              		.loc 1 2063 0
 5624 03a4 FFF7FEFF 		bl	cc2400_strobe
 5625              	.LVL633:
 5626              	.L579:
2064:bluetooth_rxtx.c **** 
 5627              		.loc 1 2064 0 discriminator 1
 5628 03a8 FFF7FEFF 		bl	cc2400_status
 5629              	.LVL634:
 5630 03ac 4207     		lsls	r2, r0, #29
 5631 03ae FBD4     		bmi	.L579
2067:bluetooth_rxtx.c **** 			restart_jamming = 1;
 5632              		.loc 1 2067 0
 5633 03b0 B5F85030 		ldrh	r3, [r5, #80]
 5634 03b4 9BB2     		uxth	r3, r3
 5635 03b6 03B3     		cbz	r3, .L587
2067:bluetooth_rxtx.c **** 			restart_jamming = 1;
 5636              		.loc 1 2067 0 is_stmt 0 discriminator 1
 5637 03b8 B5F85030 		ldrh	r3, [r5, #80]
 5638 03bc 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccyBazZt.s 			page 159


 5639              	.L580:
2067:bluetooth_rxtx.c **** 			restart_jamming = 1;
 5640              		.loc 1 2067 0 discriminator 4
 5641 03be A5F84C30 		strh	r3, [r5, #76]	@ movhi
2068:bluetooth_rxtx.c **** 		}
 5642              		.loc 1 2068 0 is_stmt 1 discriminator 4
 5643 03c2 0123     		movs	r3, #1
 5644 03c4 6364     		str	r3, [r4, #68]
 5645              	.L576:
2071:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
 5646              		.loc 1 2071 0
 5647 03c6 E988     		ldrh	r1, [r5, #6]
 5648 03c8 2C20     		movs	r0, #44
 5649 03ca FFF7FEFF 		bl	cc2400_set
 5650              	.LVL635:
2072:bluetooth_rxtx.c **** 
 5651              		.loc 1 2072 0
 5652 03ce A988     		ldrh	r1, [r5, #4]
 5653 03d0 2D20     		movs	r0, #45
 5654 03d2 FFF7FEFF 		bl	cc2400_set
 5655              	.LVL636:
2074:bluetooth_rxtx.c **** 			hop();
 5656              		.loc 1 2074 0
 5657 03d6 E37A     		ldrb	r3, [r4, #11]	@ zero_extendqisi2
 5658 03d8 0BB1     		cbz	r3, .L581
2075:bluetooth_rxtx.c **** 
 5659              		.loc 1 2075 0
 5660 03da FFF7FEFF 		bl	hop
 5661              	.LVL637:
 5662              	.L581:
2078:bluetooth_rxtx.c **** 			le_jam();
 5663              		.loc 1 2078 0
 5664 03de 236C     		ldr	r3, [r4, #64]
 5665 03e0 002B     		cmp	r3, #0
 5666 03e2 0DDD     		ble	.L582
2079:bluetooth_rxtx.c **** 			--le_jam_count;
 5667              		.loc 1 2079 0
 5668 03e4 FFF7FEFF 		bl	le_jam
 5669              	.LVL638:
2080:bluetooth_rxtx.c **** 		} else {
 5670              		.loc 1 2080 0
 5671 03e8 236C     		ldr	r3, [r4, #64]
 5672 03ea 013B     		subs	r3, r3, #1
 5673 03ec 2364     		str	r3, [r4, #64]
 5674              	.L583:
2096:bluetooth_rxtx.c **** 		rx_err = 0;
 5675              		.loc 1 2096 0
 5676 03ee 0023     		movs	r3, #0
2097:bluetooth_rxtx.c **** 	}
 5677              		.loc 1 2097 0
 5678 03f0 144A     		ldr	r2, .L624+24
2096:bluetooth_rxtx.c **** 		rx_err = 0;
 5679              		.loc 1 2096 0
 5680 03f2 CBF80030 		str	r3, [fp]
2097:bluetooth_rxtx.c **** 	}
 5681              		.loc 1 2097 0
 5682 03f6 1360     		str	r3, [r2]
ARM GAS  /tmp/ccyBazZt.s 			page 160


 5683 03f8 23E6     		b	.L547
 5684              	.L587:
2067:bluetooth_rxtx.c **** 			restart_jamming = 1;
 5685              		.loc 1 2067 0
 5686 03fa 40F66213 		movw	r3, #2402
 5687 03fe DEE7     		b	.L580
 5688              	.L582:
2083:bluetooth_rxtx.c **** 			dio_ssp_start();
 5689              		.loc 1 2083 0
 5690 0400 FFF7FEFF 		bl	dma_init_le
 5691              	.LVL639:
2084:bluetooth_rxtx.c **** 
 5692              		.loc 1 2084 0
 5693 0404 FFF7FEFF 		bl	dio_ssp_start
 5694              	.LVL640:
2086:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
 5695              		.loc 1 2086 0
 5696 0408 636C     		ldr	r3, [r4, #68]
 5697 040a 3BB1     		cbz	r3, .L584
2087:bluetooth_rxtx.c **** 				restart_jamming = 0;
 5698              		.loc 1 2087 0
 5699 040c 2868     		ldr	r0, [r5]
 5700 040e FFF7FEFF 		bl	rbit
 5701              	.LVL641:
 5702 0412 FFF7FEFF 		bl	cc2400_rx_sync
 5703              	.LVL642:
2088:bluetooth_rxtx.c **** 			} else {
 5704              		.loc 1 2088 0
 5705 0416 0023     		movs	r3, #0
 5706 0418 6364     		str	r3, [r4, #68]
 5707 041a E8E7     		b	.L583
 5708              	.L584:
2091:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 5709              		.loc 1 2091 0 discriminator 1
 5710 041c FFF7FEFF 		bl	cc2400_status
 5711              	.LVL643:
 5712 0420 4307     		lsls	r3, r0, #29
 5713 0422 FBD5     		bpl	.L584
2092:bluetooth_rxtx.c **** 			}
 5714              		.loc 1 2092 0
 5715 0424 6220     		movs	r0, #98
 5716 0426 FFF7FEFF 		bl	cc2400_strobe
 5717              	.LVL644:
 5718 042a E0E7     		b	.L583
 5719              	.L625:
 5720              		.align	2
 5721              	.L624:
 5722 042c 0C000340 		.word	1073938444
 5723 0430 00000000 		.word	clkn
 5724 0434 08400040 		.word	1073758216
 5725 0438 80F0FA02 		.word	50000000
 5726 043c 80E100E0 		.word	-536813184
 5727 0440 08000340 		.word	1073938440
 5728 0444 00000000 		.word	rx_err
 5729              	.LBE105:
 5730              		.cfi_endproc
 5731              	.LFE25:
ARM GAS  /tmp/ccyBazZt.s 			page 161


 5733              		.global	__aeabi_i2d
 5734              		.global	__aeabi_dadd
 5735              		.global	__aeabi_ddiv
 5736              		.global	__aeabi_d2uiz
 5737              		.global	__aeabi_dmul
 5738              		.global	__aeabi_dsub
 5739              		.section	.text.promisc_recover_hop_interval,"ax",%progbits
 5740              		.align	1
 5741              		.global	promisc_recover_hop_interval
 5742              		.syntax unified
 5743              		.thumb
 5744              		.thumb_func
 5745              		.fpu softvfp
 5747              	promisc_recover_hop_interval:
 5748              	.LFB30:
2257:bluetooth_rxtx.c **** 
2258:bluetooth_rxtx.c **** // divide, rounding to the nearest integer: round up at 0.5.
2259:bluetooth_rxtx.c **** 
2260:bluetooth_rxtx.c **** 
2261:bluetooth_rxtx.c **** //sopan
2262:bluetooth_rxtx.c **** void promisc_recover_hop_interval(u8 *packet) {
 5749              		.loc 1 2262 0
 5750              		.cfi_startproc
 5751              		@ args = 0, pretend = 0, frame = 88
 5752              		@ frame_needed = 0, uses_anonymous_args = 0
 5753              	.LVL645:
 5754 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 5755              		.cfi_def_cfa_offset 36
 5756              		.cfi_offset 4, -36
 5757              		.cfi_offset 5, -32
 5758              		.cfi_offset 6, -28
 5759              		.cfi_offset 7, -24
 5760              		.cfi_offset 8, -20
 5761              		.cfi_offset 9, -16
 5762              		.cfi_offset 10, -12
 5763              		.cfi_offset 11, -8
 5764              		.cfi_offset 14, -4
 5765 0004 97B0     		sub	sp, sp, #92
 5766              		.cfi_def_cfa_offset 128
 5767              	.LVL646:
2263:bluetooth_rxtx.c **** 
2264:bluetooth_rxtx.c ****     	// for hop interval
2265:bluetooth_rxtx.c ****     	static u32 prev_clk = 0;
2266:bluetooth_rxtx.c ****     	static u32 seq[18];
2267:bluetooth_rxtx.c **** 	static uint16_t count, sindex = 0;
2268:bluetooth_rxtx.c **** 	static uint8_t calc = 1;
2269:bluetooth_rxtx.c **** 	static int interval = 0;
2270:bluetooth_rxtx.c ****     	static uint8_t step, match = 0;
2271:bluetooth_rxtx.c **** 
2272:bluetooth_rxtx.c ****     	// for hop increment
2273:bluetooth_rxtx.c ****     	static u32 first_ts = 0;
2274:bluetooth_rxtx.c ****     	u8 hops = 0;
2275:bluetooth_rxtx.c ****     	u32 diff = 0;
2276:bluetooth_rxtx.c ****     	u32 channels_hopped = 0;
2277:bluetooth_rxtx.c ****     	time_array1[0] = 0;
 5768              		.loc 1 2277 0
 5769 0006 0021     		movs	r1, #0
ARM GAS  /tmp/ccyBazZt.s 			page 162


 5770 0008 D24E     		ldr	r6, .L718
2278:bluetooth_rxtx.c **** 
2279:bluetooth_rxtx.c ****     // for increment
2280:bluetooth_rxtx.c ****     
2281:bluetooth_rxtx.c ****     if(count > 8){
 5771              		.loc 1 2281 0
 5772 000a B6F86830 		ldrh	r3, [r6, #104]
2277:bluetooth_rxtx.c **** 
 5773              		.loc 1 2277 0
 5774 000e A6F84810 		strh	r1, [r6, #72]	@ movhi
 5775              		.loc 1 2281 0
 5776 0012 082B     		cmp	r3, #8
 5777 0014 06D9     		bls	.L627
2282:bluetooth_rxtx.c ****         count = 0;
2283:bluetooth_rxtx.c ****         memset(seq, 0, sizeof seq);    
 5778              		.loc 1 2283 0
 5779 0016 4822     		movs	r2, #72
 5780 0018 06F16C00 		add	r0, r6, #108
 5781              	.LVL647:
2282:bluetooth_rxtx.c ****         count = 0;
 5782              		.loc 1 2282 0
 5783 001c A6F86810 		strh	r1, [r6, #104]	@ movhi
 5784              		.loc 1 2283 0
 5785 0020 FFF7FEFF 		bl	memset
 5786              	.LVL648:
 5787              	.L627:
2284:bluetooth_rxtx.c ****     }
2285:bluetooth_rxtx.c **** 
2286:bluetooth_rxtx.c **** 	u32 cur_clk = CLK100NS;
 5788              		.loc 1 2286 0
 5789 0024 40F63541 		movw	r1, #3125
 5790 0028 CB4C     		ldr	r4, .L718+4
 5791 002a CC4A     		ldr	r2, .L718+8
 5792 002c 2368     		ldr	r3, [r4]
 5793 002e 1268     		ldr	r2, [r2]
 5794 0030 C3F31303 		ubfx	r3, r3, #0, #20
 5795 0034 01FB0323 		mla	r3, r1, r3, r2
2287:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
 5796              		.loc 1 2287 0
 5797 0038 D6F8B450 		ldr	r5, [r6, #180]
2286:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
 5798              		.loc 1 2286 0
 5799 003c 0193     		str	r3, [sp, #4]
 5800              	.LVL649:
 5801              		.loc 1 2287 0
 5802 003e AB42     		cmp	r3, r5
2288:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
 5803              		.loc 1 2288 0
 5804 0040 3FBF     		itttt	cc
 5805 0042 03F14343 		addcc	r3, r3, #-1023410176
 5806              	.LVL650:
 5807 0046 A3F56513 		subcc	r3, r3, #3751936
 5808 004a A3F5A253 		subcc	r3, r3, #5184
 5809 004e 0193     		strcc	r3, [sp, #4]
 5810              	.LVL651:
2289:bluetooth_rxtx.c **** 	u32 clk_diff = cur_clk - prev_clk;
 5811              		.loc 1 2289 0
ARM GAS  /tmp/ccyBazZt.s 			page 163


 5812 0050 019B     		ldr	r3, [sp, #4]
 5813 0052 5D1B     		subs	r5, r3, r5
 5814              	.LVL652:
2290:bluetooth_rxtx.c **** 
2291:bluetooth_rxtx.c **** 	static u16 obsv_hop_interval; // observed hop interval
2292:bluetooth_rxtx.c ****     u16 hop_diff;
2293:bluetooth_rxtx.c **** 
2294:bluetooth_rxtx.c **** 
2295:bluetooth_rxtx.c **** 	if (clk_diff < 6 * LE_BASECLK)
 5815              		.loc 1 2295 0
 5816 0054 C24B     		ldr	r3, .L718+12
 5817 0056 9D42     		cmp	r5, r3
 5818 0058 40F2C480 		bls	.L626
2296:bluetooth_rxtx.c **** 		return;
2297:bluetooth_rxtx.c **** 	
2298:bluetooth_rxtx.c ****     if(match == 0){
 5819              		.loc 1 2298 0
 5820 005c 96F8B830 		ldrb	r3, [r6, #184]	@ zero_extendqisi2
 5821 0060 43B9     		cbnz	r3, .L630
2299:bluetooth_rxtx.c **** 	    seq[count] = (clk_diff/10000);
 5822              		.loc 1 2299 0
 5823 0062 42F21072 		movw	r2, #10000
 5824 0066 B5FBF2F2 		udiv	r2, r5, r2
 5825 006a B6F86830 		ldrh	r3, [r6, #104]
 5826 006e 06EB8303 		add	r3, r6, r3, lsl #2
 5827 0072 DA66     		str	r2, [r3, #108]
 5828              	.L630:
2300:bluetooth_rxtx.c ****     }
2301:bluetooth_rxtx.c **** 	if(calc == 0){
 5829              		.loc 1 2301 0
 5830 0074 BB4F     		ldr	r7, .L718+16
 5831 0076 97F87280 		ldrb	r8, [r7, #114]	@ zero_extendqisi2
 5832 007a B8F1000F 		cmp	r8, #0
 5833 007e 39D1     		bne	.L632
 5834              	.LBB106:
2302:bluetooth_rxtx.c **** 		++sindex;
2303:bluetooth_rxtx.c ****         hop_diff = abs(seq[sindex] - (clk_diff/10000));
 5835              		.loc 1 2303 0
 5836 0080 42F21079 		movw	r9, #10000
 5837 0084 B5FBF9F9 		udiv	r9, r5, r9
2302:bluetooth_rxtx.c **** 		++sindex;
 5838              		.loc 1 2302 0
 5839 0088 B6F8BA30 		ldrh	r3, [r6, #186]
 5840 008c 0133     		adds	r3, r3, #1
 5841 008e 9BB2     		uxth	r3, r3
 5842 0090 A6F8BA30 		strh	r3, [r6, #186]	@ movhi
 5843              		.loc 1 2303 0
 5844 0094 06EB8303 		add	r3, r6, r3, lsl #2
 5845 0098 D86E     		ldr	r0, [r3, #108]
 5846 009a A0EB0900 		sub	r0, r0, r9
 5847 009e FFF7FEFF 		bl	abs
 5848              	.LVL653:
2304:bluetooth_rxtx.c ****         interval += (clk_diff/10000);
 5849              		.loc 1 2304 0
 5850 00a2 D6F8BC20 		ldr	r2, [r6, #188]
2305:bluetooth_rxtx.c **** 		if(hop_diff <= 10){		
 5851              		.loc 1 2305 0
ARM GAS  /tmp/ccyBazZt.s 			page 164


 5852 00a6 80B2     		uxth	r0, r0
2304:bluetooth_rxtx.c ****         interval += (clk_diff/10000);
 5853              		.loc 1 2304 0
 5854 00a8 4A44     		add	r2, r2, r9
 5855              		.loc 1 2305 0
 5856 00aa 0A28     		cmp	r0, #10
2304:bluetooth_rxtx.c ****         interval += (clk_diff/10000);
 5857              		.loc 1 2304 0
 5858 00ac C6F8BC20 		str	r2, [r6, #188]
 5859              		.loc 1 2305 0
 5860 00b0 00F29B80 		bhi	.L633
2306:bluetooth_rxtx.c ****             if(step < 1){
 5861              		.loc 1 2306 0
 5862 00b4 96F8C030 		ldrb	r3, [r6, #192]	@ zero_extendqisi2
 5863 00b8 2BB9     		cbnz	r3, .L634
2307:bluetooth_rxtx.c ****                 time_array1[sindex] = interval;
 5864              		.loc 1 2307 0
 5865 00ba B6F8BA10 		ldrh	r1, [r6, #186]
 5866 00be 06EB4101 		add	r1, r6, r1, lsl #1
 5867 00c2 A1F84820 		strh	r2, [r1, #72]	@ movhi
 5868              	.L634:
2308:bluetooth_rxtx.c ****             }
2309:bluetooth_rxtx.c **** 			if(sindex == eindex){
 5869              		.loc 1 2309 0
 5870 00c6 B6F8BA10 		ldrh	r1, [r6, #186]
 5871 00ca B6F8C220 		ldrh	r2, [r6, #194]
 5872 00ce 9142     		cmp	r1, r2
 5873 00d0 10D1     		bne	.L632
2310:bluetooth_rxtx.c ****                 match = 1;
 5874              		.loc 1 2310 0
 5875 00d2 0122     		movs	r2, #1
 5876 00d4 86F8B820 		strb	r2, [r6, #184]
2311:bluetooth_rxtx.c ****                 sindex = 0;
 5877              		.loc 1 2311 0
 5878 00d8 0022     		movs	r2, #0
2312:bluetooth_rxtx.c ****                 count = 0;
2313:bluetooth_rxtx.c ****                 step = step + 1;
 5879              		.loc 1 2313 0
 5880 00da 0133     		adds	r3, r3, #1
 5881 00dc DBB2     		uxtb	r3, r3
2314:bluetooth_rxtx.c ****                 if(step >= 3){
 5882              		.loc 1 2314 0
 5883 00de 022B     		cmp	r3, #2
2311:bluetooth_rxtx.c ****                 sindex = 0;
 5884              		.loc 1 2311 0
 5885 00e0 A6F8BA20 		strh	r2, [r6, #186]	@ movhi
2312:bluetooth_rxtx.c ****                 count = 0;
 5886              		.loc 1 2312 0
 5887 00e4 A6F86820 		strh	r2, [r6, #104]	@ movhi
2313:bluetooth_rxtx.c ****                 if(step >= 3){
 5888              		.loc 1 2313 0
 5889 00e8 86F8C030 		strb	r3, [r6, #192]
 5890              		.loc 1 2314 0
 5891 00ec 39D9     		bls	.L638
2315:bluetooth_rxtx.c ****                     calc = 2;
 5892              		.loc 1 2315 0
 5893 00ee 0223     		movs	r3, #2
ARM GAS  /tmp/ccyBazZt.s 			page 165


 5894 00f0 87F87230 		strb	r3, [r7, #114]
 5895              	.LVL654:
 5896              	.L632:
 5897              	.LBE106:
2316:bluetooth_rxtx.c ****                 }
2317:bluetooth_rxtx.c **** 			}
2318:bluetooth_rxtx.c ****         }
2319:bluetooth_rxtx.c **** 
2320:bluetooth_rxtx.c **** 		else{
2321:bluetooth_rxtx.c **** 			interval = 0;
2322:bluetooth_rxtx.c ****             sindex = 0;
2323:bluetooth_rxtx.c ****             memset(seq, 0, sizeof seq);
2324:bluetooth_rxtx.c ****             memset(time_array1, 0, sizeof time_array1);        
2325:bluetooth_rxtx.c **** 			calc = 1;
2326:bluetooth_rxtx.c ****             count = 1;
2327:bluetooth_rxtx.c ****             step = 0;
2328:bluetooth_rxtx.c ****             match = 0;
2329:bluetooth_rxtx.c ****             seq[count] = (clk_diff/10000);
2330:bluetooth_rxtx.c **** 			}
2331:bluetooth_rxtx.c **** 	}
2332:bluetooth_rxtx.c **** 
2333:bluetooth_rxtx.c **** 	if((count > 1) && (calc == 1)){
 5898              		.loc 1 2333 0
 5899 00f4 B6F86830 		ldrh	r3, [r6, #104]
 5900 00f8 012B     		cmp	r3, #1
 5901 00fa 32D9     		bls	.L638
 5902              		.loc 1 2333 0 is_stmt 0 discriminator 1
 5903 00fc 97F87280 		ldrb	r8, [r7, #114]	@ zero_extendqisi2
 5904 0100 B8F1010F 		cmp	r8, #1
 5905 0104 2DD1     		bne	.L638
 5906              	.LBB107:
2334:bluetooth_rxtx.c ****         hop_diff = abs(seq[1] - (clk_diff/10000));
 5907              		.loc 1 2334 0 is_stmt 1
 5908 0106 42F21073 		movw	r3, #10000
 5909 010a B5FBF3F5 		udiv	r5, r5, r3
 5910              	.LVL655:
 5911 010e 306F     		ldr	r0, [r6, #112]
 5912 0110 401B     		subs	r0, r0, r5
 5913 0112 FFF7FEFF 		bl	abs
 5914              	.LVL656:
2335:bluetooth_rxtx.c **** 		if(hop_diff <= 10){
 5915              		.loc 1 2335 0
 5916 0116 80B2     		uxth	r0, r0
 5917 0118 0A28     		cmp	r0, #10
 5918 011a 22D8     		bhi	.L638
2336:bluetooth_rxtx.c **** 			interval += (clk_diff/10000);
2337:bluetooth_rxtx.c **** 			calc = 0;
 5919              		.loc 1 2337 0
 5920 011c 0022     		movs	r2, #0
2336:bluetooth_rxtx.c **** 			interval += (clk_diff/10000);
 5921              		.loc 1 2336 0
 5922 011e D6F8BC30 		ldr	r3, [r6, #188]
 5923              		.loc 1 2337 0
 5924 0122 87F87220 		strb	r2, [r7, #114]
2336:bluetooth_rxtx.c **** 			interval += (clk_diff/10000);
 5925              		.loc 1 2336 0
 5926 0126 1D44     		add	r5, r5, r3
ARM GAS  /tmp/ccyBazZt.s 			page 166


2338:bluetooth_rxtx.c **** 			sindex = 1;
2339:bluetooth_rxtx.c **** 			eindex = count - 1;
 5927              		.loc 1 2339 0
 5928 0128 B6F86830 		ldrh	r3, [r6, #104]
2336:bluetooth_rxtx.c **** 			interval += (clk_diff/10000);
 5929              		.loc 1 2336 0
 5930 012c C6F8BC50 		str	r5, [r6, #188]
 5931              		.loc 1 2339 0
 5932 0130 013B     		subs	r3, r3, #1
 5933 0132 9BB2     		uxth	r3, r3
2340:bluetooth_rxtx.c ****             if(sindex == eindex){
 5934              		.loc 1 2340 0
 5935 0134 012B     		cmp	r3, #1
2338:bluetooth_rxtx.c **** 			sindex = 1;
 5936              		.loc 1 2338 0
 5937 0136 A6F8BA80 		strh	r8, [r6, #186]	@ movhi
2339:bluetooth_rxtx.c ****             if(sindex == eindex){
 5938              		.loc 1 2339 0
 5939 013a A6F8C230 		strh	r3, [r6, #194]	@ movhi
 5940              		.loc 1 2340 0
 5941 013e 0AD1     		bne	.L639
2341:bluetooth_rxtx.c ****                 match = 1;
 5942              		.loc 1 2341 0
 5943 0140 86F8B830 		strb	r3, [r6, #184]
2342:bluetooth_rxtx.c ****                 sindex = 0;
2343:bluetooth_rxtx.c ****                 count = 0;
2344:bluetooth_rxtx.c ****                 step = step + 1;
 5944              		.loc 1 2344 0
 5945 0144 96F8C030 		ldrb	r3, [r6, #192]	@ zero_extendqisi2
2342:bluetooth_rxtx.c ****                 sindex = 0;
 5946              		.loc 1 2342 0
 5947 0148 A6F8BA20 		strh	r2, [r6, #186]	@ movhi
 5948              		.loc 1 2344 0
 5949 014c 0133     		adds	r3, r3, #1
2343:bluetooth_rxtx.c ****                 step = step + 1;
 5950              		.loc 1 2343 0
 5951 014e A6F86820 		strh	r2, [r6, #104]	@ movhi
 5952              		.loc 1 2344 0
 5953 0152 86F8C030 		strb	r3, [r6, #192]
 5954              	.L639:
2345:bluetooth_rxtx.c **** 			}
2346:bluetooth_rxtx.c ****             time_array1[sindex] = interval;
 5955              		.loc 1 2346 0
 5956 0156 B6F8BA30 		ldrh	r3, [r6, #186]
 5957 015a 06EB4303 		add	r3, r6, r3, lsl #1
 5958 015e A3F84850 		strh	r5, [r3, #72]	@ movhi
 5959              	.LVL657:
 5960              	.L638:
 5961              	.LBE107:
2347:bluetooth_rxtx.c **** 
2348:bluetooth_rxtx.c **** 		}
2349:bluetooth_rxtx.c **** 	}
2350:bluetooth_rxtx.c **** 
2351:bluetooth_rxtx.c ****     if(calc == 2){
 5962              		.loc 1 2351 0
 5963 0162 97F87230 		ldrb	r3, [r7, #114]	@ zero_extendqisi2
 5964 0166 97F87350 		ldrb	r5, [r7, #115]	@ zero_extendqisi2
ARM GAS  /tmp/ccyBazZt.s 			page 167


 5965 016a 022B     		cmp	r3, #2
 5966 016c 57D1     		bne	.L640
 5967              	.LBB108:
2352:bluetooth_rxtx.c ****         uint16_t val = DIVIDE_ROUND(interval,step);
 5968              		.loc 1 2352 0
 5969 016e 96F8C020 		ldrb	r2, [r6, #192]	@ zero_extendqisi2
 5970              	.LVL658:
 5971 0172 D6F8BC30 		ldr	r3, [r6, #188]
 5972 0176 03EB5200 		add	r0, r3, r2, lsr #1
 5973 017a 90FBF2F0 		sdiv	r0, r0, r2
2353:bluetooth_rxtx.c ****         obsv_hop_interval = DIVIDE_ROUND(val, 37);
 5974              		.loc 1 2353 0
 5975 017e 2523     		movs	r3, #37
 5976 0180 80B2     		uxth	r0, r0
 5977 0182 1230     		adds	r0, r0, #18
 5978 0184 90FBF3F0 		sdiv	r0, r0, r3
 5979 0188 A6F8C400 		strh	r0, [r6, #196]	@ movhi
2354:bluetooth_rxtx.c ****         //debug_printf("Hop interval: %d\n",obsv_hop_interval);
2355:bluetooth_rxtx.c ****         le.conn_interval = DIVIDE_ROUND(obsv_hop_interval, 1.25);
 5980              		.loc 1 2355 0
 5981 018c FFF7FEFF 		bl	__aeabi_i2d
 5982              	.LVL659:
 5983 0190 0022     		movs	r2, #0
 5984 0192 754B     		ldr	r3, .L718+20
 5985 0194 FFF7FEFF 		bl	__aeabi_dadd
 5986              	.LVL660:
 5987 0198 0022     		movs	r2, #0
 5988 019a 744B     		ldr	r3, .L718+24
 5989 019c FFF7FEFF 		bl	__aeabi_ddiv
 5990              	.LVL661:
 5991 01a0 FFF7FEFF 		bl	__aeabi_d2uiz
 5992              	.LVL662:
2356:bluetooth_rxtx.c ****         first_ts = CLK100NS; 
 5993              		.loc 1 2356 0
 5994 01a4 40F63541 		movw	r1, #3125
 5995 01a8 6C4A     		ldr	r2, .L718+8
 5996 01aa 2368     		ldr	r3, [r4]
 5997 01ac 1268     		ldr	r2, [r2]
 5998 01ae C3F31303 		ubfx	r3, r3, #0, #20
 5999 01b2 01FB0323 		mla	r3, r1, r3, r2
2355:bluetooth_rxtx.c ****         first_ts = CLK100NS; 
 6000              		.loc 1 2355 0
 6001 01b6 F883     		strh	r0, [r7, #30]	@ movhi
2357:bluetooth_rxtx.c ****         hop_direct_channel = btle_channel_index_to_phys(idx2);
 6002              		.loc 1 2357 0
 6003 01b8 2846     		mov	r0, r5
2356:bluetooth_rxtx.c ****         first_ts = CLK100NS; 
 6004              		.loc 1 2356 0
 6005 01ba C6F8C830 		str	r3, [r6, #200]
 6006              		.loc 1 2357 0
 6007 01be FFF7FEFF 		bl	btle_channel_index_to_phys
 6008              	.LVL663:
2358:bluetooth_rxtx.c **** 		hop_mode = HOP_DIRECT;
 6009              		.loc 1 2358 0
 6010 01c2 0423     		movs	r3, #4
2357:bluetooth_rxtx.c ****         hop_direct_channel = btle_channel_index_to_phys(idx2);
 6011              		.loc 1 2357 0
ARM GAS  /tmp/ccyBazZt.s 			page 168


 6012 01c4 B081     		strh	r0, [r6, #12]	@ movhi
 6013              		.loc 1 2358 0
 6014 01c6 B372     		strb	r3, [r6, #10]
2359:bluetooth_rxtx.c **** 	    do_hop = 1;
 6015              		.loc 1 2359 0
 6016 01c8 0123     		movs	r3, #1
 6017 01ca F372     		strb	r3, [r6, #11]
2360:bluetooth_rxtx.c ****         calc = 3;
 6018              		.loc 1 2360 0
 6019 01cc 0323     		movs	r3, #3
 6020 01ce 87F87230 		strb	r3, [r7, #114]
 6021              	.LVL664:
 6022              	.L641:
 6023              	.LBE108:
2361:bluetooth_rxtx.c ****     }
2362:bluetooth_rxtx.c **** 
2363:bluetooth_rxtx.c ****     // for increment
2364:bluetooth_rxtx.c **** 
2365:bluetooth_rxtx.c ****     else if (channel == btle_channel_index_to_phys(idx2) && calc == 3) {
2366:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
2367:bluetooth_rxtx.c **** 		if (second_ts < first_ts){
2368:bluetooth_rxtx.c **** 			second_ts += 3276800000;
2369:bluetooth_rxtx.c ****         }
2370:bluetooth_rxtx.c **** 
2371:bluetooth_rxtx.c ****         diff = (second_ts - first_ts);
2372:bluetooth_rxtx.c ****         time_array2[count1] = diff/10000;//
2373:bluetooth_rxtx.c **** 		channels_hopped = DIVIDE_ROUND(diff,le.conn_interval * LE_BASECLK);
2374:bluetooth_rxtx.c **** 
2375:bluetooth_rxtx.c **** 		if (channels_hopped > 37) {
2376:bluetooth_rxtx.c ****             first_ts = CLK100NS; 
2377:bluetooth_rxtx.c ****             hop_direct_channel = btle_channel_index_to_phys(idx3);
2378:bluetooth_rxtx.c **** 		    hop_mode = HOP_DIRECT;
2379:bluetooth_rxtx.c **** 	        do_hop = 1;
2380:bluetooth_rxtx.c ****             calc = 4;
2381:bluetooth_rxtx.c **** 		}
2382:bluetooth_rxtx.c **** 		do_hop = 1;
2383:bluetooth_rxtx.c **** 
2384:bluetooth_rxtx.c ****         ++count1;
2385:bluetooth_rxtx.c **** 	}
2386:bluetooth_rxtx.c ****     
2387:bluetooth_rxtx.c ****     else if(channel == btle_channel_index_to_phys(idx3) && calc == 4){
2388:bluetooth_rxtx.c ****         u32 second_ts2 = CLK100NS;
2389:bluetooth_rxtx.c **** 		if (second_ts2 < first_ts){
2390:bluetooth_rxtx.c **** 			second_ts2 += 3276800000;
2391:bluetooth_rxtx.c ****         }
2392:bluetooth_rxtx.c **** 
2393:bluetooth_rxtx.c ****         diff = (second_ts2 - first_ts);
2394:bluetooth_rxtx.c ****         time_array3[count2] = ((diff/10000)+ time_array2[0])%(37*obsv_hop_interval);
2395:bluetooth_rxtx.c **** 		channels_hopped = DIVIDE_ROUND(diff,le.conn_interval * LE_BASECLK);
2396:bluetooth_rxtx.c **** 
2397:bluetooth_rxtx.c **** 		if (channels_hopped > 37) {
2398:bluetooth_rxtx.c ****             calc = 5;
2399:bluetooth_rxtx.c **** 		}
2400:bluetooth_rxtx.c **** 		do_hop = 1;
2401:bluetooth_rxtx.c **** 
2402:bluetooth_rxtx.c ****         ++count2;
2403:bluetooth_rxtx.c ****     }
ARM GAS  /tmp/ccyBazZt.s 			page 169


2404:bluetooth_rxtx.c **** 
2405:bluetooth_rxtx.c ****     else if(calc == 5){
2406:bluetooth_rxtx.c **** 
2407:bluetooth_rxtx.c ****         static u8 index = 0; 
2408:bluetooth_rxtx.c ****         static u16 ch_hop[32];
2409:bluetooth_rxtx.c ****         static u16 diff = 0;
2410:bluetooth_rxtx.c ****         static u16 max_count = 1;
2411:bluetooth_rxtx.c ****         static u16 curr_count = 0;
2412:bluetooth_rxtx.c ****         static u16 max_val; 
2413:bluetooth_rxtx.c ****         static u16 val;
2414:bluetooth_rxtx.c ****         static u8 ta1, ta2, ta3 = 0;
2415:bluetooth_rxtx.c ****         static u8 i, j = 0;
2416:bluetooth_rxtx.c ****         static u8 hops,hops2 = 0;
2417:bluetooth_rxtx.c **** 
2418:bluetooth_rxtx.c ****         for( ta1 = 0; ta1 < eindex; ta1++){
2419:bluetooth_rxtx.c ****             for( ta2 = 0; ta2 < count1-1; ta2++){
2420:bluetooth_rxtx.c ****                 if(time_array1[ta1] > time_array2[ta2]){
2421:bluetooth_rxtx.c ****                     diff = (le.conn_interval*1.25*37) - time_array1[ta1] + time_array2[ta2];
2422:bluetooth_rxtx.c ****                 }
2423:bluetooth_rxtx.c ****                 else {
2424:bluetooth_rxtx.c ****                     diff = time_array2[ta2] - time_array1[ta1];
2425:bluetooth_rxtx.c ****                 }
2426:bluetooth_rxtx.c **** 
2427:bluetooth_rxtx.c ****                 u8 channels_hopped = DIVIDE_ROUND(diff,le.conn_interval*1.25);
2428:bluetooth_rxtx.c ****                 if((idx2 - idx1) > 0){
2429:bluetooth_rxtx.c ****                     hops = ((idx2 - idx1)*hop_interval_lut[channels_hopped])%37;
2430:bluetooth_rxtx.c ****                 }
2431:bluetooth_rxtx.c ****                 else{
2432:bluetooth_rxtx.c ****                     hops = ((37 + idx2 - idx1)*hop_interval_lut[channels_hopped])%37;
2433:bluetooth_rxtx.c ****                 }
2434:bluetooth_rxtx.c ****                 if ((hops > 4) && (hops < 17)){
2435:bluetooth_rxtx.c ****                 //added
2436:bluetooth_rxtx.c ****                     for( ta3 = 0; ta3 < count2 - 1; ta3++){
2437:bluetooth_rxtx.c ****                         if(time_array2[ta2] > time_array3[ta3]){
2438:bluetooth_rxtx.c ****                             diff = (le.conn_interval*1.25*37) - time_array2[ta2] + time_array3[ta3]
2439:bluetooth_rxtx.c ****                         }
2440:bluetooth_rxtx.c ****                         else {
2441:bluetooth_rxtx.c ****                             diff = time_array3[ta3] - time_array2[ta2];
2442:bluetooth_rxtx.c ****                         }
2443:bluetooth_rxtx.c ****                         u8 channels_hopped = DIVIDE_ROUND(diff,le.conn_interval*1.25);
2444:bluetooth_rxtx.c ****                         if((idx3 - idx2) > 0){
2445:bluetooth_rxtx.c ****                             hops2 = ((idx3 - idx2)*hop_interval_lut[channels_hopped])%37;
2446:bluetooth_rxtx.c ****                         }
2447:bluetooth_rxtx.c ****                         else{
2448:bluetooth_rxtx.c ****                             hops2 = ((37 + idx3 - idx2)*hop_interval_lut[channels_hopped])%37;
2449:bluetooth_rxtx.c ****                         }
2450:bluetooth_rxtx.c ****                         if (hops2 == hops){
2451:bluetooth_rxtx.c ****                               ch_hop[index] = hops;
2452:bluetooth_rxtx.c ****                               sync_count = ta3+1;
2453:bluetooth_rxtx.c ****                               index += 1;
2454:bluetooth_rxtx.c ****                         }
2455:bluetooth_rxtx.c ****                     }
2456:bluetooth_rxtx.c ****                 //added
2457:bluetooth_rxtx.c ****                      ch_hop[index] = hops;
2458:bluetooth_rxtx.c ****                      index += 1;
2459:bluetooth_rxtx.c ****                 }
2460:bluetooth_rxtx.c ****             }
ARM GAS  /tmp/ccyBazZt.s 			page 170


2461:bluetooth_rxtx.c ****         }
2462:bluetooth_rxtx.c **** 
2463:bluetooth_rxtx.c ****         for( j = 0; j< index; j++){
2464:bluetooth_rxtx.c ****             val = ch_hop[j];
2465:bluetooth_rxtx.c ****             for( i = j; i < index; i++){
2466:bluetooth_rxtx.c ****                 if(val == ch_hop[i]){
2467:bluetooth_rxtx.c ****                     curr_count++;
2468:bluetooth_rxtx.c ****                  }
2469:bluetooth_rxtx.c ****             }
2470:bluetooth_rxtx.c ****             if(curr_count > max_count){
2471:bluetooth_rxtx.c ****                 max_count = curr_count;
2472:bluetooth_rxtx.c ****                 max_val = val;
2473:bluetooth_rxtx.c ****             }
2474:bluetooth_rxtx.c ****             curr_count = 0;
2475:bluetooth_rxtx.c ****         }
2476:bluetooth_rxtx.c ****         le.channel_increment = max_val;
2477:bluetooth_rxtx.c ****         //debug_printf("Increment: %d Interval: %d %d out of %d\n",le.channel_increment,le.conn_int
2478:bluetooth_rxtx.c ****         calc = 6;
2479:bluetooth_rxtx.c ****     
2480:bluetooth_rxtx.c ****     }
2481:bluetooth_rxtx.c ****     else if(calc == 6){
2482:bluetooth_rxtx.c ****         //debug_printf("c3: %d c2: %d syc: %d\n",count3, count2-1, sync_count);
2483:bluetooth_rxtx.c ****         if(count3  == sync_count){
2484:bluetooth_rxtx.c **** 
2485:bluetooth_rxtx.c ****             le.interval_timer = le.conn_interval / 2;
2486:bluetooth_rxtx.c ****             le.conn_count = 0;
2487:bluetooth_rxtx.c ****             le.conn_epoch = 0;
2488:bluetooth_rxtx.c **** 	    le_promisc_state(3, &le.channel_increment, 1);    
2489:bluetooth_rxtx.c ****             le.channel_idx = (idx3 + le.channel_increment) % 37;
2490:bluetooth_rxtx.c ****             le.link_state = LINK_CONNECTED;
2491:bluetooth_rxtx.c ****             le.crc_verify = 0;
2492:bluetooth_rxtx.c ****             hop_mode = HOP_BTLE;
2493:bluetooth_rxtx.c **** 	    send_clock = 1;
2494:bluetooth_rxtx.c ****             packet_cb = connection_follow_cb;
2495:bluetooth_rxtx.c ****             le_promisc_state(2, &le.conn_interval, 2);
2496:bluetooth_rxtx.c **** 	    le_promisc_state(4, &le.channel_idx, 1);    
2497:bluetooth_rxtx.c ****             return;
2498:bluetooth_rxtx.c ****         }
2499:bluetooth_rxtx.c ****     }
2500:bluetooth_rxtx.c **** 
2501:bluetooth_rxtx.c ****     // for increment
2502:bluetooth_rxtx.c **** 	
2503:bluetooth_rxtx.c **** 	++count;
 6024              		.loc 1 2503 0
 6025 01d2 604B     		ldr	r3, .L718
 6026 01d4 B3F86820 		ldrh	r2, [r3, #104]
 6027 01d8 0132     		adds	r2, r2, #1
 6028 01da A3F86820 		strh	r2, [r3, #104]	@ movhi
2504:bluetooth_rxtx.c **** 	prev_clk = cur_clk;
 6029              		.loc 1 2504 0
 6030 01de 019A     		ldr	r2, [sp, #4]
 6031 01e0 C3F8B420 		str	r2, [r3, #180]
 6032              	.L626:
2505:bluetooth_rxtx.c **** 
2506:bluetooth_rxtx.c **** }
 6033              		.loc 1 2506 0
 6034 01e4 17B0     		add	sp, sp, #92
ARM GAS  /tmp/ccyBazZt.s 			page 171


 6035              		.cfi_remember_state
 6036              		.cfi_def_cfa_offset 36
 6037              		@ sp needed
 6038 01e6 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 6039              	.LVL665:
 6040              	.L633:
 6041              		.cfi_restore_state
 6042              	.LBB109:
2323:bluetooth_rxtx.c ****             memset(time_array1, 0, sizeof time_array1);        
 6043              		.loc 1 2323 0
 6044 01ea 4822     		movs	r2, #72
 6045 01ec 4146     		mov	r1, r8
 6046 01ee 6048     		ldr	r0, .L718+28
 6047              	.LVL666:
2321:bluetooth_rxtx.c ****             sindex = 0;
 6048              		.loc 1 2321 0
 6049 01f0 C6F8BC80 		str	r8, [r6, #188]
2322:bluetooth_rxtx.c ****             memset(seq, 0, sizeof seq);
 6050              		.loc 1 2322 0
 6051 01f4 A6F8BA80 		strh	r8, [r6, #186]	@ movhi
2323:bluetooth_rxtx.c ****             memset(time_array1, 0, sizeof time_array1);        
 6052              		.loc 1 2323 0
 6053 01f8 FFF7FEFF 		bl	memset
 6054              	.LVL667:
2324:bluetooth_rxtx.c **** 			calc = 1;
 6055              		.loc 1 2324 0
 6056 01fc 2022     		movs	r2, #32
 6057 01fe 4146     		mov	r1, r8
 6058 0200 5C48     		ldr	r0, .L718+32
 6059 0202 FFF7FEFF 		bl	memset
 6060              	.LVL668:
2325:bluetooth_rxtx.c ****             count = 1;
 6061              		.loc 1 2325 0
 6062 0206 0123     		movs	r3, #1
2327:bluetooth_rxtx.c ****             match = 0;
 6063              		.loc 1 2327 0
 6064 0208 86F8C080 		strb	r8, [r6, #192]
2325:bluetooth_rxtx.c ****             count = 1;
 6065              		.loc 1 2325 0
 6066 020c 87F87230 		strb	r3, [r7, #114]
2326:bluetooth_rxtx.c ****             step = 0;
 6067              		.loc 1 2326 0
 6068 0210 A6F86830 		strh	r3, [r6, #104]	@ movhi
2328:bluetooth_rxtx.c ****             seq[count] = (clk_diff/10000);
 6069              		.loc 1 2328 0
 6070 0214 86F8B880 		strb	r8, [r6, #184]
2329:bluetooth_rxtx.c **** 			}
 6071              		.loc 1 2329 0
 6072 0218 C6F87090 		str	r9, [r6, #112]
 6073 021c 6AE7     		b	.L632
 6074              	.LVL669:
 6075              	.L640:
 6076              	.LBE109:
2365:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 6077              		.loc 1 2365 0
 6078 021e 2846     		mov	r0, r5
 6079 0220 FFF7FEFF 		bl	btle_channel_index_to_phys
ARM GAS  /tmp/ccyBazZt.s 			page 172


 6080              	.LVL670:
 6081 0224 B7F84C30 		ldrh	r3, [r7, #76]
 6082 0228 9BB2     		uxth	r3, r3
 6083 022a 9842     		cmp	r0, r3
 6084 022c 49D1     		bne	.L642
2365:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 6085              		.loc 1 2365 0 is_stmt 0 discriminator 1
 6086 022e 97F87230 		ldrb	r3, [r7, #114]	@ zero_extendqisi2
 6087 0232 032B     		cmp	r3, #3
 6088 0234 45D1     		bne	.L642
 6089              	.LBB110:
2366:bluetooth_rxtx.c **** 		if (second_ts < first_ts){
 6090              		.loc 1 2366 0 is_stmt 1
 6091 0236 40F63541 		movw	r1, #3125
 6092 023a 484A     		ldr	r2, .L718+8
 6093 023c 2368     		ldr	r3, [r4]
 6094 023e 1268     		ldr	r2, [r2]
 6095 0240 C3F31303 		ubfx	r3, r3, #0, #20
 6096 0244 01FB0323 		mla	r3, r1, r3, r2
 6097              	.LVL671:
2372:bluetooth_rxtx.c **** 		channels_hopped = DIVIDE_ROUND(diff,le.conn_interval * LE_BASECLK);
 6098              		.loc 1 2372 0
 6099 0248 42F21071 		movw	r1, #10000
2367:bluetooth_rxtx.c **** 			second_ts += 3276800000;
 6100              		.loc 1 2367 0
 6101 024c D6F8C820 		ldr	r2, [r6, #200]
 6102 0250 9342     		cmp	r3, r2
2368:bluetooth_rxtx.c ****         }
 6103              		.loc 1 2368 0
 6104 0252 3CBF     		itt	cc
 6105 0254 03F14343 		addcc	r3, r3, #-1023410176
 6106              	.LVL672:
 6107 0258 03F5A003 		addcc	r3, r3, #5242880
 6108              	.LVL673:
2371:bluetooth_rxtx.c ****         time_array2[count1] = diff/10000;//
 6109              		.loc 1 2371 0
 6110 025c 9B1A     		subs	r3, r3, r2
 6111              	.LVL674:
2372:bluetooth_rxtx.c **** 		channels_hopped = DIVIDE_ROUND(diff,le.conn_interval * LE_BASECLK);
 6112              		.loc 1 2372 0
 6113 025e B3FBF1F1 		udiv	r1, r3, r1
 6114 0262 96F8EC20 		ldrb	r2, [r6, #236]	@ zero_extendqisi2
 6115 0266 06EB4202 		add	r2, r6, r2, lsl #1
 6116 026a A2F8CC10 		strh	r1, [r2, #204]	@ movhi
2373:bluetooth_rxtx.c **** 
 6117              		.loc 1 2373 0
 6118 026e 41F66A02 		movw	r2, #6250
 6119 0272 F98B     		ldrh	r1, [r7, #30]
 6120              	.LVL675:
 6121 0274 02FB0133 		mla	r3, r2, r1, r3
 6122              	.LVL676:
 6123 0278 43F2D402 		movw	r2, #12500
 6124 027c 4A43     		muls	r2, r1, r2
 6125 027e B3FBF2F3 		udiv	r3, r3, r2
 6126              	.LVL677:
2375:bluetooth_rxtx.c ****             first_ts = CLK100NS; 
 6127              		.loc 1 2375 0
ARM GAS  /tmp/ccyBazZt.s 			page 173


 6128 0282 252B     		cmp	r3, #37
 6129 0284 15D9     		bls	.L644
2376:bluetooth_rxtx.c ****             hop_direct_channel = btle_channel_index_to_phys(idx3);
 6130              		.loc 1 2376 0
 6131 0286 40F63541 		movw	r1, #3125
 6132 028a 344A     		ldr	r2, .L718+8
 6133 028c 2368     		ldr	r3, [r4]
 6134              	.LVL678:
 6135 028e 1268     		ldr	r2, [r2]
 6136 0290 C3F31303 		ubfx	r3, r3, #0, #20
 6137 0294 01FB0323 		mla	r3, r1, r3, r2
2377:bluetooth_rxtx.c **** 		    hop_mode = HOP_DIRECT;
 6138              		.loc 1 2377 0
 6139 0298 97F87100 		ldrb	r0, [r7, #113]	@ zero_extendqisi2
2376:bluetooth_rxtx.c ****             hop_direct_channel = btle_channel_index_to_phys(idx3);
 6140              		.loc 1 2376 0
 6141 029c C6F8C830 		str	r3, [r6, #200]
2377:bluetooth_rxtx.c **** 		    hop_mode = HOP_DIRECT;
 6142              		.loc 1 2377 0
 6143 02a0 FFF7FEFF 		bl	btle_channel_index_to_phys
 6144              	.LVL679:
2378:bluetooth_rxtx.c **** 	        do_hop = 1;
 6145              		.loc 1 2378 0
 6146 02a4 0423     		movs	r3, #4
2379:bluetooth_rxtx.c ****             calc = 4;
 6147              		.loc 1 2379 0
 6148 02a6 0122     		movs	r2, #1
2377:bluetooth_rxtx.c **** 		    hop_mode = HOP_DIRECT;
 6149              		.loc 1 2377 0
 6150 02a8 B081     		strh	r0, [r6, #12]	@ movhi
2380:bluetooth_rxtx.c **** 		}
 6151              		.loc 1 2380 0
 6152 02aa 87F87230 		strb	r3, [r7, #114]
2378:bluetooth_rxtx.c **** 	        do_hop = 1;
 6153              		.loc 1 2378 0
 6154 02ae B372     		strb	r3, [r6, #10]
2379:bluetooth_rxtx.c ****             calc = 4;
 6155              		.loc 1 2379 0
 6156 02b0 F272     		strb	r2, [r6, #11]
 6157              	.L644:
2382:bluetooth_rxtx.c **** 
 6158              		.loc 1 2382 0
 6159 02b2 0123     		movs	r3, #1
 6160 02b4 F372     		strb	r3, [r6, #11]
2384:bluetooth_rxtx.c **** 	}
 6161              		.loc 1 2384 0
 6162 02b6 96F8EC30 		ldrb	r3, [r6, #236]	@ zero_extendqisi2
 6163 02ba 0133     		adds	r3, r3, #1
 6164 02bc 86F8EC30 		strb	r3, [r6, #236]
 6165              	.LBE110:
2365:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 6166              		.loc 1 2365 0
 6167 02c0 87E7     		b	.L641
 6168              	.LVL680:
 6169              	.L642:
2387:bluetooth_rxtx.c ****         u32 second_ts2 = CLK100NS;
 6170              		.loc 1 2387 0
ARM GAS  /tmp/ccyBazZt.s 			page 174


 6171 02c2 97F87100 		ldrb	r0, [r7, #113]	@ zero_extendqisi2
 6172 02c6 FFF7FEFF 		bl	btle_channel_index_to_phys
 6173              	.LVL681:
 6174 02ca B7F84C30 		ldrh	r3, [r7, #76]
 6175 02ce 9BB2     		uxth	r3, r3
 6176 02d0 9842     		cmp	r0, r3
 6177 02d2 51D1     		bne	.L645
2387:bluetooth_rxtx.c ****         u32 second_ts2 = CLK100NS;
 6178              		.loc 1 2387 0 is_stmt 0 discriminator 1
 6179 02d4 97F87230 		ldrb	r3, [r7, #114]	@ zero_extendqisi2
 6180 02d8 042B     		cmp	r3, #4
 6181 02da 4DD1     		bne	.L645
 6182              	.LBB111:
2388:bluetooth_rxtx.c **** 		if (second_ts2 < first_ts){
 6183              		.loc 1 2388 0 is_stmt 1
 6184 02dc 40F63541 		movw	r1, #3125
 6185 02e0 1E4A     		ldr	r2, .L718+8
 6186 02e2 2368     		ldr	r3, [r4]
 6187 02e4 1268     		ldr	r2, [r2]
 6188 02e6 C3F31303 		ubfx	r3, r3, #0, #20
 6189 02ea 01FB0323 		mla	r3, r1, r3, r2
 6190              	.LVL682:
2389:bluetooth_rxtx.c **** 			second_ts2 += 3276800000;
 6191              		.loc 1 2389 0
 6192 02ee D6F8C820 		ldr	r2, [r6, #200]
2394:bluetooth_rxtx.c **** 		channels_hopped = DIVIDE_ROUND(diff,le.conn_interval * LE_BASECLK);
 6193              		.loc 1 2394 0
 6194 02f2 B6F8CC00 		ldrh	r0, [r6, #204]
2389:bluetooth_rxtx.c **** 			second_ts2 += 3276800000;
 6195              		.loc 1 2389 0
 6196 02f6 9342     		cmp	r3, r2
2390:bluetooth_rxtx.c ****         }
 6197              		.loc 1 2390 0
 6198 02f8 3CBF     		itt	cc
 6199 02fa 03F14343 		addcc	r3, r3, #-1023410176
 6200              	.LVL683:
 6201 02fe 03F5A003 		addcc	r3, r3, #5242880
 6202              	.LVL684:
2393:bluetooth_rxtx.c ****         time_array3[count2] = ((diff/10000)+ time_array2[0])%(37*obsv_hop_interval);
 6203              		.loc 1 2393 0
 6204 0302 9B1A     		subs	r3, r3, r2
 6205              	.LVL685:
2394:bluetooth_rxtx.c **** 		channels_hopped = DIVIDE_ROUND(diff,le.conn_interval * LE_BASECLK);
 6206              		.loc 1 2394 0
 6207 0304 42F21072 		movw	r2, #10000
 6208 0308 B3FBF2F2 		udiv	r2, r3, r2
 6209 030c 0244     		add	r2, r2, r0
 6210 030e 2520     		movs	r0, #37
 6211 0310 B6F8C440 		ldrh	r4, [r6, #196]
 6212 0314 96F83D10 		ldrb	r1, [r6, #61]	@ zero_extendqisi2
 6213 0318 6043     		muls	r0, r4, r0
 6214 031a B2FBF0F4 		udiv	r4, r2, r0
 6215 031e 00FB1422 		mls	r2, r0, r4, r2
 6216 0322 06EB4105 		add	r5, r6, r1, lsl #1
 6217 0326 A5F8EE20 		strh	r2, [r5, #238]	@ movhi
2395:bluetooth_rxtx.c **** 
 6218              		.loc 1 2395 0
ARM GAS  /tmp/ccyBazZt.s 			page 175


 6219 032a 41F66A02 		movw	r2, #6250
 6220 032e F88B     		ldrh	r0, [r7, #30]
 6221              	.LVL686:
 6222 0330 02FB0033 		mla	r3, r2, r0, r3
 6223              	.LVL687:
 6224 0334 43F2D402 		movw	r2, #12500
 6225 0338 4243     		muls	r2, r0, r2
 6226 033a B3FBF2F3 		udiv	r3, r3, r2
 6227              	.LVL688:
2397:bluetooth_rxtx.c ****             calc = 5;
 6228              		.loc 1 2397 0
 6229 033e 252B     		cmp	r3, #37
2398:bluetooth_rxtx.c **** 		}
 6230              		.loc 1 2398 0
 6231 0340 84BF     		itt	hi
 6232 0342 0523     		movhi	r3, #5
 6233              	.LVL689:
 6234 0344 87F87230 		strbhi	r3, [r7, #114]
2400:bluetooth_rxtx.c **** 
 6235              		.loc 1 2400 0
 6236 0348 0123     		movs	r3, #1
2402:bluetooth_rxtx.c ****     }
 6237              		.loc 1 2402 0
 6238 034a 1944     		add	r1, r1, r3
2400:bluetooth_rxtx.c **** 
 6239              		.loc 1 2400 0
 6240 034c F372     		strb	r3, [r6, #11]
2402:bluetooth_rxtx.c ****     }
 6241              		.loc 1 2402 0
 6242 034e 86F83D10 		strb	r1, [r6, #61]
 6243              	.LBE111:
2387:bluetooth_rxtx.c ****         u32 second_ts2 = CLK100NS;
 6244              		.loc 1 2387 0
 6245 0352 3EE7     		b	.L641
 6246              	.L719:
 6247              		.align	2
 6248              	.L718:
 6249 0354 00000000 		.word	.LANCHOR1
 6250 0358 00000000 		.word	clkn
 6251 035c 08400040 		.word	1073758216
 6252 0360 F7240100 		.word	74999
 6253 0364 00000000 		.word	.LANCHOR0
 6254 0368 0000E43F 		.word	1071906816
 6255 036c 0000F43F 		.word	1072955392
 6256 0370 6C000000 		.word	.LANCHOR1+108
 6257 0374 48000000 		.word	.LANCHOR1+72
 6258              	.LVL690:
 6259              	.L645:
2405:bluetooth_rxtx.c **** 
 6260              		.loc 1 2405 0
 6261 0378 97F87230 		ldrb	r3, [r7, #114]	@ zero_extendqisi2
 6262 037c 052B     		cmp	r3, #5
 6263 037e 40F0A581 		bne	.L648
 6264              	.LBB112:
2418:bluetooth_rxtx.c ****             for( ta2 = 0; ta2 < count1-1; ta2++){
 6265              		.loc 1 2418 0
 6266 0382 0025     		movs	r5, #0
ARM GAS  /tmp/ccyBazZt.s 			page 176


 6267 0384 B6F8C230 		ldrh	r3, [r6, #194]
 6268 0388 96F80F21 		ldrb	r2, [r6, #271]	@ zero_extendqisi2
 6269 038c 1093     		str	r3, [sp, #64]
2419:bluetooth_rxtx.c ****                 if(time_array1[ta1] > time_array2[ta2]){
 6270              		.loc 1 2419 0
 6271 038e 96F8EC30 		ldrb	r3, [r6, #236]	@ zero_extendqisi2
2418:bluetooth_rxtx.c ****             for( ta2 = 0; ta2 < count1-1; ta2++){
 6272              		.loc 1 2418 0
 6273 0392 AE46     		mov	lr, r5
2419:bluetooth_rxtx.c ****                 if(time_array1[ta1] > time_array2[ta2]){
 6274              		.loc 1 2419 0
 6275 0394 013B     		subs	r3, r3, #1
 6276 0396 1193     		str	r3, [sp, #68]
 6277              	.LBB113:
2421:bluetooth_rxtx.c ****                 }
 6278              		.loc 1 2421 0
 6279 0398 FB8B     		ldrh	r3, [r7, #30]
 6280 039a 96F810A1 		ldrb	r10, [r6, #272]	@ zero_extendqisi2
 6281 039e 0893     		str	r3, [sp, #32]
 6282 03a0 97F87330 		ldrb	r3, [r7, #115]	@ zero_extendqisi2
 6283 03a4 B6F81241 		ldrh	r4, [r6, #274]
2428:bluetooth_rxtx.c ****                     hops = ((idx2 - idx1)*hop_interval_lut[channels_hopped])%37;
 6284              		.loc 1 2428 0
 6285 03a8 991A     		subs	r1, r3, r2
 6286 03aa 0991     		str	r1, [sp, #36]
2432:bluetooth_rxtx.c ****                 }
 6287              		.loc 1 2432 0
 6288 03ac 03F12501 		add	r1, r3, #37
 6289 03b0 8A1A     		subs	r2, r1, r2
 6290 03b2 97F87110 		ldrb	r1, [r7, #113]	@ zero_extendqisi2
 6291              	.LBE113:
2418:bluetooth_rxtx.c ****             for( ta2 = 0; ta2 < count1-1; ta2++){
 6292              		.loc 1 2418 0
 6293 03b6 2F46     		mov	r7, r5
 6294              	.LBB118:
 6295              	.LBB114:
2444:bluetooth_rxtx.c ****                             hops2 = ((idx3 - idx2)*hop_interval_lut[channels_hopped])%37;
 6296              		.loc 1 2444 0
 6297 03b8 C81A     		subs	r0, r1, r3
2448:bluetooth_rxtx.c ****                         }
 6298              		.loc 1 2448 0
 6299 03ba 2531     		adds	r1, r1, #37
 6300 03bc CB1A     		subs	r3, r1, r3
2444:bluetooth_rxtx.c ****                             hops2 = ((idx3 - idx2)*hop_interval_lut[channels_hopped])%37;
 6301              		.loc 1 2444 0
 6302 03be 0C90     		str	r0, [sp, #48]
 6303              	.LBE114:
 6304              	.LBE118:
2418:bluetooth_rxtx.c ****             for( ta2 = 0; ta2 < count1-1; ta2++){
 6305              		.loc 1 2418 0
 6306 03c0 2946     		mov	r1, r5
 6307 03c2 2846     		mov	r0, r5
 6308              	.LBB119:
2432:bluetooth_rxtx.c ****                 }
 6309              		.loc 1 2432 0
 6310 03c4 1292     		str	r2, [sp, #72]
 6311              	.LBB115:
ARM GAS  /tmp/ccyBazZt.s 			page 177


2448:bluetooth_rxtx.c ****                         }
 6312              		.loc 1 2448 0
 6313 03c6 1493     		str	r3, [sp, #80]
 6314              	.LBE115:
2436:bluetooth_rxtx.c ****                         if(time_array2[ta2] > time_array3[ta3]){
 6315              		.loc 1 2436 0
 6316 03c8 96F83D20 		ldrb	r2, [r6, #61]	@ zero_extendqisi2
 6317 03cc 96F81631 		ldrb	r3, [r6, #278]	@ zero_extendqisi2
 6318 03d0 013A     		subs	r2, r2, #1
 6319 03d2 0E93     		str	r3, [sp, #56]
 6320 03d4 96F81731 		ldrb	r3, [r6, #279]	@ zero_extendqisi2
 6321 03d8 1392     		str	r2, [sp, #76]
 6322 03da 96F81481 		ldrb	r8, [r6, #276]	@ zero_extendqisi2
 6323 03de 96F81121 		ldrb	r2, [r6, #273]	@ zero_extendqisi2
 6324 03e2 96F81591 		ldrb	r9, [r6, #277]	@ zero_extendqisi2
 6325              	.LBE119:
2418:bluetooth_rxtx.c ****             for( ta2 = 0; ta2 < count1-1; ta2++){
 6326              		.loc 1 2418 0
 6327 03e6 86F80E51 		strb	r5, [r6, #270]
 6328 03ea 0493     		str	r3, [sp, #16]
 6329 03ec 0F95     		str	r5, [sp, #60]
 6330 03ee 0D95     		str	r5, [sp, #52]
 6331 03f0 0A95     		str	r5, [sp, #40]
 6332              	.L649:
2418:bluetooth_rxtx.c ****             for( ta2 = 0; ta2 < count1-1; ta2++){
 6333              		.loc 1 2418 0 is_stmt 0 discriminator 1
 6334 03f2 109B     		ldr	r3, [sp, #64]
 6335 03f4 9D42     		cmp	r5, r3
 6336 03f6 80F0E980 		bcs	.L663
 6337 03fa 0023     		movs	r3, #0
 6338 03fc 0593     		str	r3, [sp, #20]
 6339              	.LBB120:
2420:bluetooth_rxtx.c ****                     diff = (le.conn_interval*1.25*37) - time_array1[ta1] + time_array2[ta2];
 6340              		.loc 1 2420 0 is_stmt 1 discriminator 1
 6341 03fe AC4B     		ldr	r3, .L720
2432:bluetooth_rxtx.c ****                 }
 6342              		.loc 1 2432 0 discriminator 1
 6343 0400 2526     		movs	r6, #37
2420:bluetooth_rxtx.c ****                     diff = (le.conn_interval*1.25*37) - time_array1[ta1] + time_array2[ta2];
 6344              		.loc 1 2420 0 discriminator 1
 6345 0402 03EB4503 		add	r3, r3, r5, lsl #1
 6346 0406 1593     		str	r3, [sp, #84]
 6347 0408 75E0     		b	.L664
 6348              	.L662:
2420:bluetooth_rxtx.c ****                     diff = (le.conn_interval*1.25*37) - time_array1[ta1] + time_array2[ta2];
 6349              		.loc 1 2420 0 is_stmt 0
 6350 040a 159B     		ldr	r3, [sp, #84]
 6351 040c B3F84840 		ldrh	r4, [r3, #72]
 6352 0410 A74B     		ldr	r3, .L720
 6353 0412 03EB4202 		add	r2, r3, r2, lsl #1
 6354 0416 B2F8CCB0 		ldrh	fp, [r2, #204]
 6355 041a 5C45     		cmp	r4, fp
 6356 041c 74D9     		bls	.L650
2421:bluetooth_rxtx.c ****                 }
 6357              		.loc 1 2421 0 is_stmt 1
 6358 041e 0898     		ldr	r0, [sp, #32]
 6359 0420 FFF7FEFF 		bl	__aeabi_i2d
ARM GAS  /tmp/ccyBazZt.s 			page 178


 6360              	.LVL691:
 6361 0424 0022     		movs	r2, #0
 6362 0426 A34B     		ldr	r3, .L720+4
 6363 0428 FFF7FEFF 		bl	__aeabi_dmul
 6364              	.LVL692:
 6365 042c 0022     		movs	r2, #0
 6366 042e A24B     		ldr	r3, .L720+8
 6367 0430 FFF7FEFF 		bl	__aeabi_dmul
 6368              	.LVL693:
 6369 0434 CDE90201 		strd	r0, [sp, #8]
 6370 0438 2046     		mov	r0, r4
 6371 043a FFF7FEFF 		bl	__aeabi_i2d
 6372              	.LVL694:
 6373 043e 0246     		mov	r2, r0
 6374 0440 0B46     		mov	r3, r1
 6375 0442 DDE90201 		ldrd	r0, [sp, #8]
 6376 0446 FFF7FEFF 		bl	__aeabi_dsub
 6377              	.LVL695:
 6378 044a CDE90201 		strd	r0, [sp, #8]
 6379 044e 5846     		mov	r0, fp
 6380 0450 FFF7FEFF 		bl	__aeabi_i2d
 6381              	.LVL696:
 6382 0454 0246     		mov	r2, r0
 6383 0456 0B46     		mov	r3, r1
 6384 0458 DDE90201 		ldrd	r0, [sp, #8]
 6385 045c FFF7FEFF 		bl	__aeabi_dadd
 6386              	.LVL697:
 6387 0460 FFF7FEFF 		bl	__aeabi_d2uiz
 6388              	.LVL698:
 6389 0464 84B2     		uxth	r4, r0
 6390              	.L651:
2427:bluetooth_rxtx.c ****                 if((idx2 - idx1) > 0){
 6391              		.loc 1 2427 0
 6392 0466 0898     		ldr	r0, [sp, #32]
 6393 0468 FFF7FEFF 		bl	__aeabi_i2d
 6394              	.LVL699:
 6395 046c 0022     		movs	r2, #0
 6396 046e 914B     		ldr	r3, .L720+4
 6397 0470 FFF7FEFF 		bl	__aeabi_dmul
 6398              	.LVL700:
 6399 0474 0022     		movs	r2, #0
 6400 0476 914B     		ldr	r3, .L720+12
 6401 0478 CDE90201 		strd	r0, [sp, #8]
 6402 047c FFF7FEFF 		bl	__aeabi_dmul
 6403              	.LVL701:
 6404 0480 CDE90601 		strd	r0, [sp, #24]
 6405 0484 2046     		mov	r0, r4
 6406 0486 FFF7FEFF 		bl	__aeabi_i2d
 6407              	.LVL702:
 6408 048a DDE90623 		ldrd	r2, [sp, #24]
 6409 048e FFF7FEFF 		bl	__aeabi_dadd
 6410              	.LVL703:
 6411 0492 DDE90223 		ldrd	r2, [sp, #8]
 6412 0496 FFF7FEFF 		bl	__aeabi_ddiv
 6413              	.LVL704:
 6414 049a FFF7FEFF 		bl	__aeabi_d2uiz
 6415              	.LVL705:
ARM GAS  /tmp/ccyBazZt.s 			page 179


2428:bluetooth_rxtx.c ****                     hops = ((idx2 - idx1)*hop_interval_lut[channels_hopped])%37;
 6416              		.loc 1 2428 0
 6417 049e 099B     		ldr	r3, [sp, #36]
2427:bluetooth_rxtx.c ****                 if((idx2 - idx1) > 0){
 6418              		.loc 1 2427 0
 6419 04a0 C0B2     		uxtb	r0, r0
 6420              	.LVL706:
2428:bluetooth_rxtx.c ****                     hops = ((idx2 - idx1)*hop_interval_lut[channels_hopped])%37;
 6421              		.loc 1 2428 0
 6422 04a2 002B     		cmp	r3, #0
2429:bluetooth_rxtx.c ****                 }
 6423              		.loc 1 2429 0
 6424 04a4 864B     		ldr	r3, .L720+16
 6425 04a6 C8BF     		it	gt
 6426 04a8 099A     		ldrgt	r2, [sp, #36]
 6427 04aa 1844     		add	r0, r0, r3
 6428              	.LVL707:
2432:bluetooth_rxtx.c ****                 }
 6429              		.loc 1 2432 0
 6430 04ac D8BF     		it	le
 6431 04ae 129A     		ldrle	r2, [sp, #72]
2429:bluetooth_rxtx.c ****                 }
 6432              		.loc 1 2429 0
 6433 04b0 90F87C38 		ldrb	r3, [r0, #2172]	@ zero_extendqisi2
2432:bluetooth_rxtx.c ****                 }
 6434              		.loc 1 2432 0
 6435 04b4 5343     		muls	r3, r2, r3
 6436 04b6 93FBF6FA 		sdiv	r10, r3, r6
 6437 04ba 06FB1A3A 		mls	r10, r6, r10, r3
 6438 04be 5FFA8AFA 		uxtb	r10, r10
2434:bluetooth_rxtx.c ****                 //added
 6439              		.loc 1 2434 0
 6440 04c2 AAF10503 		sub	r3, r10, #5
 6441 04c6 0B2B     		cmp	r3, #11
 6442 04c8 10D8     		bhi	.L654
 6443 04ca 0027     		movs	r7, #0
 6444              	.LVL708:
 6445              	.L655:
2436:bluetooth_rxtx.c ****                         if(time_array2[ta2] > time_array3[ta3]){
 6446              		.loc 1 2436 0 discriminator 1
 6447 04cc 139A     		ldr	r2, [sp, #76]
 6448 04ce FBB2     		uxtb	r3, r7
 6449 04d0 9342     		cmp	r3, r2
 6450 04d2 0493     		str	r3, [sp, #16]
 6451              	.LBB116:
2437:bluetooth_rxtx.c ****                             diff = (le.conn_interval*1.25*37) - time_array2[ta2] + time_array3[ta3]
 6452              		.loc 1 2437 0 discriminator 1
 6453 04d4 764B     		ldr	r3, .L720
 6454              	.LBE116:
2436:bluetooth_rxtx.c ****                         if(time_array2[ta2] > time_array3[ta3]){
 6455              		.loc 1 2436 0 discriminator 1
 6456 04d6 1BDB     		blt	.L661
2458:bluetooth_rxtx.c ****                 }
 6457              		.loc 1 2458 0
 6458 04d8 0127     		movs	r7, #1
2457:bluetooth_rxtx.c ****                      index += 1;
 6459              		.loc 1 2457 0
ARM GAS  /tmp/ccyBazZt.s 			page 180


 6460 04da 03EB4903 		add	r3, r3, r9, lsl #1
 6461 04de A3F818A1 		strh	r10, [r3, #280]	@ movhi
2458:bluetooth_rxtx.c ****                 }
 6462              		.loc 1 2458 0
 6463 04e2 09F10103 		add	r3, r9, #1
 6464 04e6 5FFA83F9 		uxtb	r9, r3
 6465 04ea 0A97     		str	r7, [sp, #40]
 6466              	.L654:
 6467 04ec 0121     		movs	r1, #1
 6468 04ee 8E46     		mov	lr, r1
 6469 04f0 059B     		ldr	r3, [sp, #20]
 6470 04f2 0133     		adds	r3, r3, #1
 6471 04f4 0593     		str	r3, [sp, #20]
 6472              	.L664:
 6473 04f6 9DF81420 		ldrb	r2, [sp, #20]	@ zero_extendqisi2
 6474              	.LBE120:
2419:bluetooth_rxtx.c ****                 if(time_array1[ta1] > time_array2[ta2]){
 6475              		.loc 1 2419 0 discriminator 1
 6476 04fa 119B     		ldr	r3, [sp, #68]
 6477 04fc 9A42     		cmp	r2, r3
 6478 04fe 84DB     		blt	.L662
 6479 0500 0135     		adds	r5, r5, #1
 6480 0502 EDB2     		uxtb	r5, r5
 6481 0504 0120     		movs	r0, #1
 6482 0506 74E7     		b	.L649
 6483              	.L650:
 6484              	.LBB121:
2424:bluetooth_rxtx.c ****                 }
 6485              		.loc 1 2424 0
 6486 0508 ABEB0404 		sub	r4, fp, r4
 6487 050c A4B2     		uxth	r4, r4
 6488 050e AAE7     		b	.L651
 6489              	.L661:
 6490              	.LBB117:
2437:bluetooth_rxtx.c ****                             diff = (le.conn_interval*1.25*37) - time_array2[ta2] + time_array3[ta3]
 6491              		.loc 1 2437 0
 6492 0510 049A     		ldr	r2, [sp, #16]
 6493 0512 03EB4203 		add	r3, r3, r2, lsl #1
 6494 0516 B3F8EE40 		ldrh	r4, [r3, #238]
 6495 051a A345     		cmp	fp, r4
 6496 051c 52D9     		bls	.L656
2438:bluetooth_rxtx.c ****                         }
 6497              		.loc 1 2438 0
 6498 051e DDE90201 		ldrd	r0, [sp, #8]
 6499 0522 0022     		movs	r2, #0
 6500 0524 644B     		ldr	r3, .L720+8
 6501 0526 FFF7FEFF 		bl	__aeabi_dmul
 6502              	.LVL709:
 6503 052a CDE90A01 		strd	r0, [sp, #40]
 6504 052e 5846     		mov	r0, fp
 6505 0530 FFF7FEFF 		bl	__aeabi_i2d
 6506              	.LVL710:
 6507 0534 0246     		mov	r2, r0
 6508 0536 0B46     		mov	r3, r1
 6509 0538 DDE90A01 		ldrd	r0, [sp, #40]
 6510 053c FFF7FEFF 		bl	__aeabi_dsub
 6511              	.LVL711:
ARM GAS  /tmp/ccyBazZt.s 			page 181


 6512 0540 CDE90A01 		strd	r0, [sp, #40]
 6513 0544 2046     		mov	r0, r4
 6514 0546 FFF7FEFF 		bl	__aeabi_i2d
 6515              	.LVL712:
 6516 054a 0246     		mov	r2, r0
 6517 054c 0B46     		mov	r3, r1
 6518 054e DDE90A01 		ldrd	r0, [sp, #40]
 6519 0552 FFF7FEFF 		bl	__aeabi_dadd
 6520              	.LVL713:
 6521 0556 FFF7FEFF 		bl	__aeabi_d2uiz
 6522              	.LVL714:
 6523 055a 84B2     		uxth	r4, r0
 6524              	.L657:
2443:bluetooth_rxtx.c ****                         if((idx3 - idx2) > 0){
 6525              		.loc 1 2443 0
 6526 055c 2046     		mov	r0, r4
 6527 055e FFF7FEFF 		bl	__aeabi_i2d
 6528              	.LVL715:
 6529 0562 DDE90623 		ldrd	r2, [sp, #24]
 6530 0566 FFF7FEFF 		bl	__aeabi_dadd
 6531              	.LVL716:
 6532 056a DDE90223 		ldrd	r2, [sp, #8]
 6533 056e FFF7FEFF 		bl	__aeabi_ddiv
 6534              	.LVL717:
 6535 0572 FFF7FEFF 		bl	__aeabi_d2uiz
 6536              	.LVL718:
2444:bluetooth_rxtx.c ****                             hops2 = ((idx3 - idx2)*hop_interval_lut[channels_hopped])%37;
 6537              		.loc 1 2444 0
 6538 0576 0C9B     		ldr	r3, [sp, #48]
2443:bluetooth_rxtx.c ****                         if((idx3 - idx2) > 0){
 6539              		.loc 1 2443 0
 6540 0578 C0B2     		uxtb	r0, r0
 6541              	.LVL719:
2444:bluetooth_rxtx.c ****                             hops2 = ((idx3 - idx2)*hop_interval_lut[channels_hopped])%37;
 6542              		.loc 1 2444 0
 6543 057a 002B     		cmp	r3, #0
2445:bluetooth_rxtx.c ****                         }
 6544              		.loc 1 2445 0
 6545 057c 504B     		ldr	r3, .L720+16
 6546 057e C8BF     		it	gt
 6547 0580 0C9A     		ldrgt	r2, [sp, #48]
 6548 0582 1844     		add	r0, r0, r3
 6549              	.LVL720:
2448:bluetooth_rxtx.c ****                         }
 6550              		.loc 1 2448 0
 6551 0584 D8BF     		it	le
 6552 0586 149A     		ldrle	r2, [sp, #80]
2445:bluetooth_rxtx.c ****                         }
 6553              		.loc 1 2445 0
 6554 0588 90F87C38 		ldrb	r3, [r0, #2172]	@ zero_extendqisi2
2448:bluetooth_rxtx.c ****                         }
 6555              		.loc 1 2448 0
 6556 058c 5343     		muls	r3, r2, r3
 6557 058e 93FBF6F2 		sdiv	r2, r3, r6
 6558 0592 06FB1233 		mls	r3, r6, r2, r3
 6559 0596 5FFA83F8 		uxtb	r8, r3
2450:bluetooth_rxtx.c ****                               ch_hop[index] = hops;
ARM GAS  /tmp/ccyBazZt.s 			page 182


 6560              		.loc 1 2450 0
 6561 059a D045     		cmp	r8, r10
 6562 059c 0ED1     		bne	.L660
2451:bluetooth_rxtx.c ****                               sync_count = ta3+1;
 6563              		.loc 1 2451 0
 6564 059e 444B     		ldr	r3, .L720
 6565 05a0 03EB4903 		add	r3, r3, r9, lsl #1
 6566 05a4 A3F81881 		strh	r8, [r3, #280]	@ movhi
 6567 05a8 049B     		ldr	r3, [sp, #16]
 6568 05aa 0133     		adds	r3, r3, #1
 6569 05ac DBB2     		uxtb	r3, r3
 6570 05ae 0E93     		str	r3, [sp, #56]
2453:bluetooth_rxtx.c ****                         }
 6571              		.loc 1 2453 0
 6572 05b0 09F10103 		add	r3, r9, #1
 6573 05b4 5FFA83F9 		uxtb	r9, r3
 6574 05b8 0123     		movs	r3, #1
 6575 05ba 0F93     		str	r3, [sp, #60]
 6576              	.L660:
 6577 05bc 0123     		movs	r3, #1
 6578 05be 0137     		adds	r7, r7, #1
 6579 05c0 0D93     		str	r3, [sp, #52]
 6580 05c2 83E7     		b	.L655
 6581              	.LVL721:
 6582              	.L656:
2441:bluetooth_rxtx.c ****                         }
 6583              		.loc 1 2441 0
 6584 05c4 A4EB0B04 		sub	r4, r4, fp
 6585 05c8 A4B2     		uxth	r4, r4
 6586 05ca C7E7     		b	.L657
 6587              	.L663:
 6588 05cc 0A9E     		ldr	r6, [sp, #40]
 6589 05ce 384B     		ldr	r3, .L720
 6590 05d0 0EB1     		cbz	r6, .L665
 6591 05d2 83F81591 		strb	r9, [r3, #277]
 6592              	.L665:
 6593 05d6 09B1     		cbz	r1, .L666
 6594 05d8 A3F81241 		strh	r4, [r3, #274]	@ movhi
 6595              	.L666:
 6596 05dc 0D99     		ldr	r1, [sp, #52]
 6597 05de 09B1     		cbz	r1, .L667
 6598 05e0 83F81481 		strb	r8, [r3, #276]
 6599              	.L667:
 6600 05e4 0F99     		ldr	r1, [sp, #60]
 6601 05e6 19B1     		cbz	r1, .L668
 6602 05e8 9DF83810 		ldrb	r1, [sp, #56]	@ zero_extendqisi2
 6603 05ec 83F81611 		strb	r1, [r3, #278]
 6604              	.L668:
 6605 05f0 1FB1     		cbz	r7, .L669
 6606 05f2 9DF81010 		ldrb	r1, [sp, #16]	@ zero_extendqisi2
 6607 05f6 83F81711 		strb	r1, [r3, #279]
 6608              	.L669:
 6609 05fa BEF1000F 		cmp	lr, #0
 6610 05fe 01D0     		beq	.L670
 6611 0600 83F810A1 		strb	r10, [r3, #272]
 6612              	.L670:
 6613 0604 18B1     		cbz	r0, .L671
ARM GAS  /tmp/ccyBazZt.s 			page 183


 6614 0606 83F81121 		strb	r2, [r3, #273]
 6615 060a 83F80E51 		strb	r5, [r3, #270]
 6616              	.L671:
 6617              	.LBE117:
 6618              	.LBE121:
2463:bluetooth_rxtx.c ****             val = ch_hop[j];
 6619              		.loc 1 2463 0
 6620 060e 0022     		movs	r2, #0
 6621 0610 9646     		mov	lr, r2
 6622 0612 9246     		mov	r10, r2
 6623 0614 1546     		mov	r5, r2
 6624 0616 2B48     		ldr	r0, .L720+20
 6625 0618 93F815C1 		ldrb	ip, [r3, #277]	@ zero_extendqisi2
 6626 061c B0F87440 		ldrh	r4, [r0, #116]
 6627 0620 B3F85A71 		ldrh	r7, [r3, #346]
 6628 0624 B3F85C11 		ldrh	r1, [r3, #348]
 6629 0628 93F85E81 		ldrb	r8, [r3, #350]	@ zero_extendqisi2
2464:bluetooth_rxtx.c ****             for( i = j; i < index; i++){
 6630              		.loc 1 2464 0
 6631 062c DFF898B0 		ldr	fp, .L720+24
2463:bluetooth_rxtx.c ****             val = ch_hop[j];
 6632              		.loc 1 2463 0
 6633 0630 83F85821 		strb	r2, [r3, #344]
 6634              	.L672:
 6635 0634 D6B2     		uxtb	r6, r2
2463:bluetooth_rxtx.c ****             val = ch_hop[j];
 6636              		.loc 1 2463 0 is_stmt 0 discriminator 1
 6637 0636 B445     		cmp	ip, r6
 6638 0638 18D8     		bhi	.L677
 6639 063a 1DB1     		cbz	r5, .L678
 6640 063c A3F85C11 		strh	r1, [r3, #348]	@ movhi
 6641 0640 83F85E81 		strb	r8, [r3, #350]
 6642              	.L678:
 6643 0644 BAF1000F 		cmp	r10, #0
 6644 0648 01D0     		beq	.L679
 6645 064a A0F87440 		strh	r4, [r0, #116]	@ movhi
 6646              	.L679:
 6647 064e BEF1000F 		cmp	lr, #0
 6648 0652 01D0     		beq	.L680
 6649 0654 A3F85A71 		strh	r7, [r3, #346]	@ movhi
 6650              	.L680:
 6651 0658 0DB1     		cbz	r5, .L681
 6652 065a 83F85861 		strb	r6, [r3, #344]
 6653              	.L681:
2476:bluetooth_rxtx.c ****         //debug_printf("Increment: %d Interval: %d %d out of %d\n",le.channel_increment,le.conn_int
 6654              		.loc 1 2476 0 is_stmt 1
 6655 065e B3F85A31 		ldrh	r3, [r3, #346]
 6656 0662 8375     		strb	r3, [r0, #22]
2478:bluetooth_rxtx.c ****     
 6657              		.loc 1 2478 0
 6658 0664 0623     		movs	r3, #6
 6659 0666 80F87230 		strb	r3, [r0, #114]
 6660              	.LBE112:
 6661 066a B2E5     		b	.L641
 6662              	.L677:
 6663              	.LBB122:
2465:bluetooth_rxtx.c ****                 if(val == ch_hop[i]){
ARM GAS  /tmp/ccyBazZt.s 			page 184


 6664              		.loc 1 2465 0
 6665 066c 0025     		movs	r5, #0
2464:bluetooth_rxtx.c ****             for( i = j; i < index; i++){
 6666              		.loc 1 2464 0
 6667 066e 3BF81280 		ldrh	r8, [fp, r2, lsl #1]
 6668              	.L673:
2465:bluetooth_rxtx.c ****                 if(val == ch_hop[i]){
 6669              		.loc 1 2465 0 discriminator 1
 6670 0672 06EB0509 		add	r9, r6, r5
 6671 0676 5FFA89F9 		uxtb	r9, r9
 6672 067a E145     		cmp	r9, ip
 6673 067c 0ED3     		bcc	.L675
2470:bluetooth_rxtx.c ****                 max_count = curr_count;
 6674              		.loc 1 2470 0
 6675 067e 8C42     		cmp	r4, r1
 6676 0680 26BF     		itte	cs
 6677 0682 B846     		movcs	r8, r7
 6678 0684 2146     		movcs	r1, r4
 6679 0686 4FF0010E 		movcc	lr, #1
2474:bluetooth_rxtx.c ****         }
 6680              		.loc 1 2474 0
 6681 068a 4746     		mov	r7, r8
 6682 068c 0C46     		mov	r4, r1
 6683 068e 38BF     		it	cc
 6684 0690 F246     		movcc	r10, lr
 6685 0692 0132     		adds	r2, r2, #1
 6686 0694 0125     		movs	r5, #1
 6687 0696 E046     		mov	r8, ip
 6688 0698 0021     		movs	r1, #0
 6689 069a CBE7     		b	.L672
 6690              	.L675:
2466:bluetooth_rxtx.c ****                     curr_count++;
 6691              		.loc 1 2466 0
 6692 069c 05EB0209 		add	r9, r5, r2
 6693 06a0 3BF81990 		ldrh	r9, [fp, r9, lsl #1]
 6694 06a4 0135     		adds	r5, r5, #1
 6695 06a6 C145     		cmp	r9, r8
2467:bluetooth_rxtx.c ****                  }
 6696              		.loc 1 2467 0
 6697 06a8 04BF     		itt	eq
 6698 06aa 0131     		addeq	r1, r1, #1
 6699 06ac 89B2     		uxtheq	r1, r1
 6700 06ae E0E7     		b	.L673
 6701              	.L721:
 6702              		.align	2
 6703              	.L720:
 6704 06b0 00000000 		.word	.LANCHOR1
 6705 06b4 0000F43F 		.word	1072955392
 6706 06b8 00804240 		.word	1078099968
 6707 06bc 0000E03F 		.word	1071644672
 6708 06c0 00000000 		.word	.LANCHOR2
 6709 06c4 00000000 		.word	.LANCHOR0
 6710 06c8 18010000 		.word	.LANCHOR1+280
 6711              	.L648:
 6712              	.LBE122:
2481:bluetooth_rxtx.c ****         //debug_printf("c3: %d c2: %d syc: %d\n",count3, count2-1, sync_count);
 6713              		.loc 1 2481 0
ARM GAS  /tmp/ccyBazZt.s 			page 185


 6714 06cc 062B     		cmp	r3, #6
 6715 06ce 7FF480AD 		bne	.L641
2483:bluetooth_rxtx.c **** 
 6716              		.loc 1 2483 0
 6717 06d2 96F83C20 		ldrb	r2, [r6, #60]	@ zero_extendqisi2
 6718 06d6 96F81631 		ldrb	r3, [r6, #278]	@ zero_extendqisi2
 6719 06da 9A42     		cmp	r2, r3
 6720 06dc 7FF479AD 		bne	.L641
2486:bluetooth_rxtx.c ****             le.conn_epoch = 0;
 6721              		.loc 1 2486 0
 6722 06e0 0024     		movs	r4, #0
2485:bluetooth_rxtx.c ****             le.conn_count = 0;
 6723              		.loc 1 2485 0
 6724 06e2 FB8B     		ldrh	r3, [r7, #30]
2488:bluetooth_rxtx.c ****             le.channel_idx = (idx3 + le.channel_increment) % 37;
 6725              		.loc 1 2488 0
 6726 06e4 0122     		movs	r2, #1
2485:bluetooth_rxtx.c ****             le.conn_count = 0;
 6727              		.loc 1 2485 0
 6728 06e6 5B08     		lsrs	r3, r3, #1
2488:bluetooth_rxtx.c ****             le.channel_idx = (idx3 + le.channel_increment) % 37;
 6729              		.loc 1 2488 0
 6730 06e8 1349     		ldr	r1, .L722
 6731 06ea 0320     		movs	r0, #3
2485:bluetooth_rxtx.c ****             le.conn_count = 0;
 6732              		.loc 1 2485 0
 6733 06ec BB83     		strh	r3, [r7, #28]	@ movhi
2487:bluetooth_rxtx.c **** 	    le_promisc_state(3, &le.channel_increment, 1);    
 6734              		.loc 1 2487 0
 6735 06ee BC61     		str	r4, [r7, #24]
2486:bluetooth_rxtx.c ****             le.conn_epoch = 0;
 6736              		.loc 1 2486 0
 6737 06f0 3C84     		strh	r4, [r7, #32]	@ movhi
2488:bluetooth_rxtx.c ****             le.channel_idx = (idx3 + le.channel_increment) % 37;
 6738              		.loc 1 2488 0
 6739 06f2 FFF7FEFF 		bl	le_promisc_state
 6740              	.LVL722:
2489:bluetooth_rxtx.c ****             le.link_state = LINK_CONNECTED;
 6741              		.loc 1 2489 0
 6742 06f6 2521     		movs	r1, #37
 6743 06f8 BA7D     		ldrb	r2, [r7, #22]	@ zero_extendqisi2
 6744 06fa 97F87130 		ldrb	r3, [r7, #113]	@ zero_extendqisi2
2491:bluetooth_rxtx.c ****             hop_mode = HOP_BTLE;
 6745              		.loc 1 2491 0
 6746 06fe 3C61     		str	r4, [r7, #16]
2489:bluetooth_rxtx.c ****             le.link_state = LINK_CONNECTED;
 6747              		.loc 1 2489 0
 6748 0700 1344     		add	r3, r3, r2
 6749 0702 93FBF1F2 		sdiv	r2, r3, r1
 6750 0706 01FB1233 		mls	r3, r1, r2, r3
 6751 070a 7B75     		strb	r3, [r7, #21]
2490:bluetooth_rxtx.c ****             le.crc_verify = 0;
 6752              		.loc 1 2490 0
 6753 070c 0323     		movs	r3, #3
2495:bluetooth_rxtx.c **** 	    le_promisc_state(4, &le.channel_idx, 1);    
 6754              		.loc 1 2495 0
 6755 070e 0222     		movs	r2, #2
ARM GAS  /tmp/ccyBazZt.s 			page 186


2493:bluetooth_rxtx.c ****             packet_cb = connection_follow_cb;
 6756              		.loc 1 2493 0
 6757 0710 0124     		movs	r4, #1
2490:bluetooth_rxtx.c ****             le.crc_verify = 0;
 6758              		.loc 1 2490 0
 6759 0712 3B75     		strb	r3, [r7, #20]
2492:bluetooth_rxtx.c **** 	    send_clock = 1;
 6760              		.loc 1 2492 0
 6761 0714 B372     		strb	r3, [r6, #10]
2494:bluetooth_rxtx.c ****             le_promisc_state(2, &le.conn_interval, 2);
 6762              		.loc 1 2494 0
 6763 0716 094B     		ldr	r3, .L722+4
2495:bluetooth_rxtx.c **** 	    le_promisc_state(4, &le.channel_idx, 1);    
 6764              		.loc 1 2495 0
 6765 0718 1046     		mov	r0, r2
 6766 071a 0949     		ldr	r1, .L722+8
2493:bluetooth_rxtx.c ****             packet_cb = connection_follow_cb;
 6767              		.loc 1 2493 0
 6768 071c 86F83540 		strb	r4, [r6, #53]
2494:bluetooth_rxtx.c ****             le_promisc_state(2, &le.conn_interval, 2);
 6769              		.loc 1 2494 0
 6770 0720 B361     		str	r3, [r6, #24]
2495:bluetooth_rxtx.c **** 	    le_promisc_state(4, &le.channel_idx, 1);    
 6771              		.loc 1 2495 0
 6772 0722 FFF7FEFF 		bl	le_promisc_state
 6773              	.LVL723:
2496:bluetooth_rxtx.c ****             return;
 6774              		.loc 1 2496 0
 6775 0726 2246     		mov	r2, r4
 6776 0728 0420     		movs	r0, #4
 6777 072a 0649     		ldr	r1, .L722+12
 6778              		.loc 1 2506 0
 6779 072c 17B0     		add	sp, sp, #92
 6780              		.cfi_def_cfa_offset 36
 6781              		@ sp needed
 6782 072e BDE8F04F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 6783              		.cfi_restore 14
 6784              		.cfi_restore 11
 6785              		.cfi_restore 10
 6786              		.cfi_restore 9
 6787              		.cfi_restore 8
 6788              		.cfi_restore 7
 6789              		.cfi_restore 6
 6790              		.cfi_restore 5
 6791              		.cfi_restore 4
 6792              		.cfi_def_cfa_offset 0
 6793              	.LVL724:
2496:bluetooth_rxtx.c ****             return;
 6794              		.loc 1 2496 0
 6795 0732 FFF7FEBF 		b	le_promisc_state
 6796              	.LVL725:
 6797              	.L723:
 6798 0736 00BF     		.align	2
 6799              	.L722:
 6800 0738 16000000 		.word	.LANCHOR0+22
 6801 073c 00000000 		.word	connection_follow_cb
 6802 0740 1E000000 		.word	.LANCHOR0+30
ARM GAS  /tmp/ccyBazZt.s 			page 187


 6803 0744 15000000 		.word	.LANCHOR0+21
 6804              		.cfi_endproc
 6805              	.LFE30:
 6807              		.section	.text.promisc_follow_cb,"ax",%progbits
 6808              		.align	1
 6809              		.global	promisc_follow_cb
 6810              		.syntax unified
 6811              		.thumb
 6812              		.thumb_func
 6813              		.fpu softvfp
 6815              	promisc_follow_cb:
 6816              	.LFB31:
2507:bluetooth_rxtx.c **** 
2508:bluetooth_rxtx.c **** 
2509:bluetooth_rxtx.c **** //sopan
2510:bluetooth_rxtx.c **** void promisc_follow_cb(u8 *packet) {
 6817              		.loc 1 2510 0
 6818              		.cfi_startproc
 6819              		@ args = 0, pretend = 0, frame = 0
 6820              		@ frame_needed = 0, uses_anonymous_args = 0
 6821              	.LVL726:
 6822 0000 70B5     		push	{r4, r5, r6, lr}
 6823              		.cfi_def_cfa_offset 16
 6824              		.cfi_offset 4, -16
 6825              		.cfi_offset 5, -12
 6826              		.cfi_offset 6, -8
 6827              		.cfi_offset 14, -4
2511:bluetooth_rxtx.c ****     //debug_printf("promisc_follow_cb\n");
2512:bluetooth_rxtx.c **** 	int i;
2513:bluetooth_rxtx.c **** 
2514:bluetooth_rxtx.c **** 	// get the CRCInit
2515:bluetooth_rxtx.c **** 	if (!le.crc_verify && packet[4] == 0x01 && packet[5] == 0x00) {
 6828              		.loc 1 2515 0
 6829 0002 174D     		ldr	r5, .L728
 6830 0004 2C69     		ldr	r4, [r5, #16]
 6831 0006 54BB     		cbnz	r4, .L724
 6832              		.loc 1 2515 0 is_stmt 0 discriminator 1
 6833 0008 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 6834 000a 012B     		cmp	r3, #1
 6835 000c 27D1     		bne	.L724
 6836              		.loc 1 2515 0 discriminator 2
 6837 000e 4379     		ldrb	r3, [r0, #5]	@ zero_extendqisi2
 6838 0010 2BBB     		cbnz	r3, .L724
 6839              	.LVL727:
 6840              	.LBB126:
 6841              	.LBB127:
 6842              	.LBB128:
2516:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 6843              		.loc 1 2516 0 is_stmt 1
 6844 0012 C379     		ldrb	r3, [r0, #7]	@ zero_extendqisi2
 6845 0014 027A     		ldrb	r2, [r0, #8]	@ zero_extendqisi2
 6846 0016 8679     		ldrb	r6, [r0, #6]	@ zero_extendqisi2
 6847 0018 1B02     		lsls	r3, r3, #8
 6848 001a 43EA0243 		orr	r3, r3, r2, lsl #16
2517:bluetooth_rxtx.c **** 
2518:bluetooth_rxtx.c **** 		le.crc_init = btle_reverse_crc(crc, packet + 4, 2);
 6849              		.loc 1 2518 0
ARM GAS  /tmp/ccyBazZt.s 			page 188


 6850 001e 011D     		adds	r1, r0, #4
 6851 0020 0222     		movs	r2, #2
 6852 0022 43EA0600 		orr	r0, r3, r6
 6853              	.LVL728:
 6854 0026 FFF7FEFF 		bl	btle_reverse_crc
 6855              	.LVL729:
 6856 002a 2246     		mov	r2, r4
 6857 002c A860     		str	r0, [r5, #8]
 6858              	.LVL730:
 6859              	.L726:
2519:bluetooth_rxtx.c **** 		le.crc_init_reversed = 0;
2520:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
2521:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 6860              		.loc 1 2521 0
 6861 002e 20FA04F3 		lsr	r3, r0, r4
 6862 0032 C4F11701 		rsb	r1, r4, #23
 6863 0036 03F00103 		and	r3, r3, #1
2520:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 6864              		.loc 1 2520 0
 6865 003a 0134     		adds	r4, r4, #1
 6866              	.LVL731:
 6867              		.loc 1 2521 0
 6868 003c 8B40     		lsls	r3, r3, r1
2520:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 6869              		.loc 1 2520 0
 6870 003e 182C     		cmp	r4, #24
 6871              		.loc 1 2521 0
 6872 0040 42EA0302 		orr	r2, r2, r3
2520:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 6873              		.loc 1 2520 0
 6874 0044 F3D1     		bne	.L726
2522:bluetooth_rxtx.c **** 		le.crc_verify = 1;
 6875              		.loc 1 2522 0
 6876 0046 0120     		movs	r0, #1
 6877 0048 EA60     		str	r2, [r5, #12]
2523:bluetooth_rxtx.c **** 		packet_cb = promisc_recover_hop_interval;
 6878              		.loc 1 2523 0
 6879 004a 064B     		ldr	r3, .L728+4
 6880 004c 064A     		ldr	r2, .L728+8
2522:bluetooth_rxtx.c **** 		le.crc_verify = 1;
 6881              		.loc 1 2522 0
 6882 004e 2861     		str	r0, [r5, #16]
 6883              		.loc 1 2523 0
 6884 0050 9A61     		str	r2, [r3, #24]
2524:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 6885              		.loc 1 2524 0
 6886 0052 0649     		ldr	r1, .L728+12
 6887 0054 0322     		movs	r2, #3
 6888              	.LBE128:
 6889              	.LBE127:
 6890              	.LBE126:
2525:bluetooth_rxtx.c **** 	}
2526:bluetooth_rxtx.c **** }
 6891              		.loc 1 2526 0
 6892 0056 BDE87040 		pop	{r4, r5, r6, lr}
 6893              		.cfi_remember_state
 6894              		.cfi_restore 14
ARM GAS  /tmp/ccyBazZt.s 			page 189


 6895              		.cfi_restore 6
 6896              		.cfi_restore 5
 6897              		.cfi_restore 4
 6898              		.cfi_def_cfa_offset 0
 6899              	.LVL732:
 6900              	.LBB131:
 6901              	.LBB130:
 6902              	.LBB129:
2524:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 6903              		.loc 1 2524 0
 6904 005a FFF7FEBF 		b	le_promisc_state
 6905              	.LVL733:
 6906              	.L724:
 6907              		.cfi_restore_state
 6908 005e 70BD     		pop	{r4, r5, r6, pc}
 6909              	.L729:
 6910              		.align	2
 6911              	.L728:
 6912 0060 00000000 		.word	.LANCHOR0
 6913 0064 00000000 		.word	.LANCHOR1
 6914 0068 00000000 		.word	promisc_recover_hop_interval
 6915 006c 08000000 		.word	.LANCHOR0+8
 6916              	.LBE129:
 6917              	.LBE130:
 6918              	.LBE131:
 6919              		.cfi_endproc
 6920              	.LFE31:
 6922              		.section	.text.see_aa,"ax",%progbits
 6923              		.align	1
 6924              		.global	see_aa
 6925              		.syntax unified
 6926              		.thumb
 6927              		.thumb_func
 6928              		.fpu softvfp
 6930              	see_aa:
 6931              	.LFB32:
2527:bluetooth_rxtx.c **** 
2528:bluetooth_rxtx.c **** // called when we see an AA, add it to the list
2529:bluetooth_rxtx.c **** void see_aa(u32 aa) {
 6932              		.loc 1 2529 0
 6933              		.cfi_startproc
 6934              		@ args = 0, pretend = 0, frame = 0
 6935              		@ frame_needed = 0, uses_anonymous_args = 0
 6936              	.LVL734:
 6937 0000 30B5     		push	{r4, r5, lr}
 6938              		.cfi_def_cfa_offset 12
 6939              		.cfi_offset 4, -12
 6940              		.cfi_offset 5, -8
 6941              		.cfi_offset 14, -4
 6942              	.LVL735:
2530:bluetooth_rxtx.c ****     //debug_printf("see_aa\n");
2531:bluetooth_rxtx.c **** 	int i, max = -1, killme = -1;
2532:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
2533:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 6943              		.loc 1 2533 0
 6944 0002 1349     		ldr	r1, .L739
2532:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
ARM GAS  /tmp/ccyBazZt.s 			page 190


 6945              		.loc 1 2532 0
 6946 0004 0023     		movs	r3, #0
 6947 0006 0A46     		mov	r2, r1
 6948              	.LVL736:
 6949              	.L733:
 6950              		.loc 1 2533 0
 6951 0008 51F83350 		ldr	r5, [r1, r3, lsl #3]
 6952 000c 01EBC304 		add	r4, r1, r3, lsl #3
 6953 0010 8542     		cmp	r5, r0
 6954 0012 03D1     		bne	.L731
2534:bluetooth_rxtx.c **** 			++le_promisc.active_aa[i].count;
 6955              		.loc 1 2534 0
 6956 0014 6368     		ldr	r3, [r4, #4]
 6957              	.LVL737:
 6958 0016 0133     		adds	r3, r3, #1
 6959 0018 6360     		str	r3, [r4, #4]
2535:bluetooth_rxtx.c **** 			return;
 6960              		.loc 1 2535 0
 6961 001a 30BD     		pop	{r4, r5, pc}
 6962              	.LVL738:
 6963              	.L731:
2532:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 6964              		.loc 1 2532 0 discriminator 2
 6965 001c 0133     		adds	r3, r3, #1
 6966              	.LVL739:
 6967 001e 202B     		cmp	r3, #32
 6968 0020 F2D1     		bne	.L733
 6969 0022 4FF0FF31 		mov	r1, #-1
 6970 0026 0023     		movs	r3, #0
 6971              	.LVL740:
 6972 0028 0C46     		mov	r4, r1
 6973              	.L735:
 6974              	.LVL741:
 6975              	.LBB134:
 6976              	.LBB135:
2536:bluetooth_rxtx.c **** 		}
2537:bluetooth_rxtx.c **** 
2538:bluetooth_rxtx.c **** 	// evict someone
2539:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
2540:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 6977              		.loc 1 2540 0
 6978 002a 02EBC305 		add	r5, r2, r3, lsl #3
 6979 002e 6D68     		ldr	r5, [r5, #4]
 6980 0030 A542     		cmp	r5, r4
 6981 0032 01DB     		blt	.L736
 6982 0034 002C     		cmp	r4, #0
 6983 0036 01DA     		bge	.L734
 6984              	.L736:
 6985 0038 1946     		mov	r1, r3
 6986 003a 2C46     		mov	r4, r5
 6987              	.LVL742:
 6988              	.L734:
2539:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 6989              		.loc 1 2539 0
 6990 003c 0133     		adds	r3, r3, #1
 6991              	.LVL743:
 6992 003e 202B     		cmp	r3, #32
ARM GAS  /tmp/ccyBazZt.s 			page 191


 6993 0040 F3D1     		bne	.L735
2541:bluetooth_rxtx.c **** 			killme = i;
2542:bluetooth_rxtx.c **** 			max = le_promisc.active_aa[i].count;
2543:bluetooth_rxtx.c **** 		}
2544:bluetooth_rxtx.c **** 
2545:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].aa = aa;
2546:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].count = 1;
 6994              		.loc 1 2546 0
 6995 0042 0123     		movs	r3, #1
 6996              	.LVL744:
2545:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].count = 1;
 6997              		.loc 1 2545 0
 6998 0044 42F83100 		str	r0, [r2, r1, lsl #3]
 6999              		.loc 1 2546 0
 7000 0048 02EBC102 		add	r2, r2, r1, lsl #3
 7001 004c 5360     		str	r3, [r2, #4]
 7002 004e 30BD     		pop	{r4, r5, pc}
 7003              	.LVL745:
 7004              	.L740:
 7005              		.align	2
 7006              	.L739:
 7007 0050 00000000 		.word	le_promisc
 7008              	.LBE135:
 7009              	.LBE134:
 7010              		.cfi_endproc
 7011              	.LFE32:
 7013              		.section	.text.cb_le_promisc,"ax",%progbits
 7014              		.align	1
 7015              		.global	cb_le_promisc
 7016              		.syntax unified
 7017              		.thumb
 7018              		.thumb_func
 7019              		.fpu softvfp
 7021              	cb_le_promisc:
 7022              	.LFB33:
2547:bluetooth_rxtx.c **** }
2548:bluetooth_rxtx.c **** 
2549:bluetooth_rxtx.c **** /* le promiscuous mode */
2550:bluetooth_rxtx.c **** int cb_le_promisc(char *unpacked) {
 7023              		.loc 1 2550 0
 7024              		.cfi_startproc
 7025              		@ args = 0, pretend = 0, frame = 80
 7026              		@ frame_needed = 0, uses_anonymous_args = 0
 7027              	.LVL746:
 7028 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 7029              		.cfi_def_cfa_offset 32
 7030              		.cfi_offset 4, -32
 7031              		.cfi_offset 5, -28
 7032              		.cfi_offset 6, -24
 7033              		.cfi_offset 7, -20
 7034              		.cfi_offset 8, -16
 7035              		.cfi_offset 9, -12
 7036              		.cfi_offset 10, -8
 7037              		.cfi_offset 14, -4
 7038 0004 94B0     		sub	sp, sp, #80
 7039              		.cfi_def_cfa_offset 112
2551:bluetooth_rxtx.c ****     
ARM GAS  /tmp/ccyBazZt.s 			page 192


2552:bluetooth_rxtx.c **** 	int i, j, k;
2553:bluetooth_rxtx.c **** 	int idx;
2554:bluetooth_rxtx.c **** 	// empty data PDU: 01 00
2555:bluetooth_rxtx.c **** 	char desired[4][16] = {
 7040              		.loc 1 2555 0
 7041 0006 4022     		movs	r2, #64
2550:bluetooth_rxtx.c ****     
 7042              		.loc 1 2550 0
 7043 0008 0746     		mov	r7, r0
 7044              		.loc 1 2555 0
 7045 000a 0021     		movs	r1, #0
 7046 000c 04A8     		add	r0, sp, #16
 7047              	.LVL747:
2556:bluetooth_rxtx.c **** 		{ 1, 0, 0, 0, 0, 0, 0, 0,
2557:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2558:bluetooth_rxtx.c **** 		{ 1, 0, 0, 1, 0, 0, 0, 0,
2559:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2560:bluetooth_rxtx.c **** 		{ 1, 0, 1, 0, 0, 0, 0, 0,
2561:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2562:bluetooth_rxtx.c **** 		{ 1, 0, 1, 1, 0, 0, 0, 0,
2563:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2564:bluetooth_rxtx.c **** 	};
2565:bluetooth_rxtx.c **** 
2566:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
2567:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel)];
 7048              		.loc 1 2567 0
 7049 000e DFF8B081 		ldr	r8, .L769+20
2555:bluetooth_rxtx.c **** 		{ 1, 0, 0, 0, 0, 0, 0, 0,
 7050              		.loc 1 2555 0
 7051 0012 FFF7FEFF 		bl	memset
 7052              	.LVL748:
 7053 0016 0123     		movs	r3, #1
 7054 0018 0024     		movs	r4, #0
 7055 001a 4646     		mov	r6, r8
 7056              		.loc 1 2567 0
 7057 001c 634D     		ldr	r5, .L769
2555:bluetooth_rxtx.c **** 		{ 1, 0, 0, 0, 0, 0, 0, 0,
 7058              		.loc 1 2555 0
 7059 001e 8DF81030 		strb	r3, [sp, #16]
 7060 0022 8DF82030 		strb	r3, [sp, #32]
 7061 0026 8DF82330 		strb	r3, [sp, #35]
 7062 002a 8DF83030 		strb	r3, [sp, #48]
 7063 002e 8DF83230 		strb	r3, [sp, #50]
 7064 0032 8DF84030 		strb	r3, [sp, #64]
 7065 0036 8DF84230 		strb	r3, [sp, #66]
 7066 003a 8DF84330 		strb	r3, [sp, #67]
 7067              	.LVL749:
 7068              	.L743:
 7069              		.loc 1 2567 0
 7070 003e B8F84C00 		ldrh	r0, [r8, #76]
 7071 0042 80B2     		uxth	r0, r0
 7072 0044 FFF7FEFF 		bl	btle_channel_index
 7073              	.LVL750:
2568:bluetooth_rxtx.c **** 
2569:bluetooth_rxtx.c **** 		// whiten the desired data
2570:bluetooth_rxtx.c **** 		for (j = 0; j < (int)sizeof(desired[i]); ++j) {
 7074              		.loc 1 2570 0
ARM GAS  /tmp/ccyBazZt.s 			page 193


 7075 0048 0022     		movs	r2, #0
2571:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
2572:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 7076              		.loc 1 2572 0
 7077 004a 4FF07F0E 		mov	lr, #127
 7078 004e 04A9     		add	r1, sp, #16
2567:bluetooth_rxtx.c **** 
 7079              		.loc 1 2567 0
 7080 0050 2B5C     		ldrb	r3, [r5, r0]	@ zero_extendqisi2
 7081              	.LVL751:
 7082 0052 0819     		adds	r0, r1, r4
 7083              	.LVL752:
 7084              	.L742:
2571:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7085              		.loc 1 2571 0 discriminator 3
 7086 0054 05EB030C 		add	ip, r5, r3
 7087 0058 815C     		ldrb	r1, [r0, r2]	@ zero_extendqisi2
 7088 005a 9CF828C0 		ldrb	ip, [ip, #40]	@ zero_extendqisi2
 7089              		.loc 1 2572 0 discriminator 3
 7090 005e 0133     		adds	r3, r3, #1
 7091              	.LVL753:
2571:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7092              		.loc 1 2571 0 discriminator 3
 7093 0060 81EA0C01 		eor	r1, r1, ip
 7094 0064 8154     		strb	r1, [r0, r2]
 7095              		.loc 1 2572 0 discriminator 3
 7096 0066 B3FBFEF1 		udiv	r1, r3, lr
2570:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7097              		.loc 1 2570 0 discriminator 3
 7098 006a 0132     		adds	r2, r2, #1
 7099              	.LVL754:
 7100              		.loc 1 2572 0 discriminator 3
 7101 006c C1EBC111 		rsb	r1, r1, r1, lsl #7
2570:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7102              		.loc 1 2570 0 discriminator 3
 7103 0070 102A     		cmp	r2, #16
 7104              		.loc 1 2572 0 discriminator 3
 7105 0072 A3EB0103 		sub	r3, r3, r1
 7106              	.LVL755:
2570:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 7107              		.loc 1 2570 0 discriminator 3
 7108 0076 EDD1     		bne	.L742
 7109 0078 1034     		adds	r4, r4, #16
2566:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel)];
 7110              		.loc 1 2566 0 discriminator 2
 7111 007a 402C     		cmp	r4, #64
 7112 007c DFD1     		bne	.L743
 7113 007e 2024     		movs	r4, #32
 7114              	.LBB136:
 7115              	.LBB137:
 7116              	.LBB138:
2573:bluetooth_rxtx.c **** 		}
2574:bluetooth_rxtx.c **** 	}
2575:bluetooth_rxtx.c **** 
2576:bluetooth_rxtx.c **** 	// then look for that bitsream in our receive buffer
2577:bluetooth_rxtx.c **** 	for (i = 32; i < (DMA_SIZE*8*2 - 32 - 16); i++) {
2578:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
ARM GAS  /tmp/ccyBazZt.s 			page 194


2579:bluetooth_rxtx.c **** 		int matching = -1;
2580:bluetooth_rxtx.c **** 
2581:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
2582:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
2583:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
2584:bluetooth_rxtx.c **** 					ok[j] = 0;
2585:bluetooth_rxtx.c **** 					break;
2586:bluetooth_rxtx.c **** 				}
2587:bluetooth_rxtx.c **** 			}
2588:bluetooth_rxtx.c **** 		}
2589:bluetooth_rxtx.c **** 
2590:bluetooth_rxtx.c **** 		// see if any match
2591:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
2592:bluetooth_rxtx.c **** 			if (ok[j]) {
2593:bluetooth_rxtx.c **** 				matching = j;
2594:bluetooth_rxtx.c **** 				break;
2595:bluetooth_rxtx.c **** 			}
2596:bluetooth_rxtx.c **** 		}
2597:bluetooth_rxtx.c **** 
2598:bluetooth_rxtx.c **** 		// skip if no match
2599:bluetooth_rxtx.c **** 		if (matching < 0)
2600:bluetooth_rxtx.c **** 			continue;
2601:bluetooth_rxtx.c **** 
2602:bluetooth_rxtx.c **** 		// found a match! unwhiten it and send it home
2603:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel)];
2604:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
2605:bluetooth_rxtx.c **** 			u8 byte = 0;
2606:bluetooth_rxtx.c **** 			for (k = 0; k < 8; k++) {
2607:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
2608:bluetooth_rxtx.c **** 				if (offset >= DMA_SIZE*8*2) break;
2609:bluetooth_rxtx.c **** 				int bit = unpacked[offset];
2610:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
2611:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
2612:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 7117              		.loc 1 2612 0
 7118 0080 4FF07F08 		mov	r8, #127
 7119              	.LVL756:
 7120              	.L756:
 7121              	.LBE138:
 7122              	.LBE137:
2578:bluetooth_rxtx.c **** 		int matching = -1;
 7123              		.loc 1 2578 0
 7124 0084 4A4B     		ldr	r3, .L769+4
 7125 0086 EE46     		mov	lr, sp
 7126 0088 0FCB     		ldm	r3, {r0, r1, r2, r3}
 7127 008a 8DE80F00 		stm	sp, {r0, r1, r2, r3}
 7128              	.LVL757:
2581:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 7129              		.loc 1 2581 0
 7130 008e 0023     		movs	r3, #0
2584:bluetooth_rxtx.c **** 					break;
 7131              		.loc 1 2584 0
 7132 0090 9C46     		mov	ip, r3
2583:bluetooth_rxtx.c **** 					ok[j] = 0;
 7133              		.loc 1 2583 0
 7134 0092 3819     		adds	r0, r7, r4
 7135              	.LVL758:
ARM GAS  /tmp/ccyBazZt.s 			page 195


 7136              	.L744:
 7137 0094 04AA     		add	r2, sp, #16
 7138 0096 02EB0311 		add	r1, r2, r3, lsl #4
 7139              	.LBE136:
 7140 009a 0022     		movs	r2, #0
 7141 009c 02E0     		b	.L747
 7142              	.LVL759:
 7143              	.L745:
 7144              	.LBB144:
2582:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 7145              		.loc 1 2582 0 discriminator 2
 7146 009e 0132     		adds	r2, r2, #1
 7147              	.LVL760:
 7148 00a0 102A     		cmp	r2, #16
 7149 00a2 07D0     		beq	.L746
 7150              	.LVL761:
 7151              	.L747:
2583:bluetooth_rxtx.c **** 					ok[j] = 0;
 7152              		.loc 1 2583 0
 7153 00a4 10F802A0 		ldrb	r10, [r0, r2]	@ zero_extendqisi2
 7154 00a8 11F80290 		ldrb	r9, [r1, r2]	@ zero_extendqisi2
 7155 00ac CA45     		cmp	r10, r9
 7156 00ae F6D0     		beq	.L745
2584:bluetooth_rxtx.c **** 					break;
 7157              		.loc 1 2584 0
 7158 00b0 4EF823C0 		str	ip, [lr, r3, lsl #2]
 7159              	.L746:
2581:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 7160              		.loc 1 2581 0 discriminator 2
 7161 00b4 0133     		adds	r3, r3, #1
 7162              	.LVL762:
 7163 00b6 042B     		cmp	r3, #4
 7164 00b8 ECD1     		bne	.L744
 7165 00ba 0023     		movs	r3, #0
 7166              	.LVL763:
 7167              	.L750:
2592:bluetooth_rxtx.c **** 				matching = j;
 7168              		.loc 1 2592 0
 7169 00bc 5EF82320 		ldr	r2, [lr, r3, lsl #2]
 7170 00c0 002A     		cmp	r2, #0
 7171 00c2 69D1     		bne	.L749
 7172              	.LVL764:
2591:bluetooth_rxtx.c **** 			if (ok[j]) {
 7173              		.loc 1 2591 0 discriminator 2
 7174 00c4 0133     		adds	r3, r3, #1
 7175              	.LVL765:
 7176 00c6 042B     		cmp	r3, #4
 7177 00c8 F8D1     		bne	.L750
 7178              	.LVL766:
 7179              	.L760:
 7180              	.LBE144:
2577:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 7181              		.loc 1 2577 0 discriminator 2
 7182 00ca 0134     		adds	r4, r4, #1
 7183              	.LVL767:
 7184 00cc B4F53C7F 		cmp	r4, #752
 7185 00d0 D8D1     		bne	.L756
ARM GAS  /tmp/ccyBazZt.s 			page 196


 7186 00d2 0024     		movs	r4, #0
 7187              	.LVL768:
2613:bluetooth_rxtx.c **** 				}
2614:bluetooth_rxtx.c **** 				byte |= bit << k;
2615:bluetooth_rxtx.c **** 			}
2616:bluetooth_rxtx.c **** 			idle_rxbuf[j] = byte;
2617:bluetooth_rxtx.c **** 		}
2618:bluetooth_rxtx.c **** 
2619:bluetooth_rxtx.c **** 		u32 aa = (idle_rxbuf[3] << 24) |
2620:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
2621:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
2622:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
2623:bluetooth_rxtx.c **** 		see_aa(aa);
2624:bluetooth_rxtx.c **** 
2625:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t*)idle_rxbuf);
2626:bluetooth_rxtx.c **** 
2627:bluetooth_rxtx.c **** 	}
2628:bluetooth_rxtx.c **** 
2629:bluetooth_rxtx.c **** 	// once we see an AA 5 times, start following it
2630:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i) {
2631:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 7188              		.loc 1 2631 0
 7189 00d4 374D     		ldr	r5, .L769+8
2632:bluetooth_rxtx.c **** 			le_set_access_address(le_promisc.active_aa[i].aa);
2633:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
 7190              		.loc 1 2633 0
 7191 00d6 384F     		ldr	r7, .L769+12
 7192              	.LVL769:
 7193 00d8 DFF8E880 		ldr	r8, .L769+24
 7194              	.L758:
2631:bluetooth_rxtx.c **** 			le_set_access_address(le_promisc.active_aa[i].aa);
 7195              		.loc 1 2631 0
 7196 00dc 6319     		adds	r3, r4, r5
 7197 00de 5B68     		ldr	r3, [r3, #4]
 7198 00e0 032B     		cmp	r3, #3
 7199 00e2 0EDD     		ble	.L757
2632:bluetooth_rxtx.c **** 			le_set_access_address(le_promisc.active_aa[i].aa);
 7200              		.loc 1 2632 0
 7201 00e4 6059     		ldr	r0, [r4, r5]
 7202 00e6 FFF7FEFF 		bl	le_set_access_address
 7203              	.LVL770:
2634:bluetooth_rxtx.c ****             //debug_printf("calling promisc_follow_cb\n");
2635:bluetooth_rxtx.c **** 			packet_cb = promisc_follow_cb;
 7204              		.loc 1 2635 0
 7205 00ea 344B     		ldr	r3, .L769+16
2636:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 7206              		.loc 1 2636 0
 7207 00ec 0020     		movs	r0, #0
2635:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 7208              		.loc 1 2635 0
 7209 00ee BB61     		str	r3, [r7, #24]
2637:bluetooth_rxtx.c ****             le.target_set = 1;
 7210              		.loc 1 2637 0
 7211 00f0 0123     		movs	r3, #1
2638:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
 7212              		.loc 1 2638 0
 7213 00f2 0422     		movs	r2, #4
ARM GAS  /tmp/ccyBazZt.s 			page 197


 7214 00f4 3249     		ldr	r1, .L769+20
2633:bluetooth_rxtx.c ****             //debug_printf("calling promisc_follow_cb\n");
 7215              		.loc 1 2633 0
 7216 00f6 C7F83080 		str	r8, [r7, #48]
2636:bluetooth_rxtx.c ****             le.target_set = 1;
 7217              		.loc 1 2636 0
 7218 00fa 3061     		str	r0, [r6, #16]
2637:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
 7219              		.loc 1 2637 0
 7220 00fc 7364     		str	r3, [r6, #68]
 7221              		.loc 1 2638 0
 7222 00fe FFF7FEFF 		bl	le_promisc_state
 7223              	.LVL771:
 7224              	.L757:
 7225 0102 0834     		adds	r4, r4, #8
2630:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 7226              		.loc 1 2630 0 discriminator 2
 7227 0104 B4F5807F 		cmp	r4, #256
 7228 0108 E8D1     		bne	.L758
2639:bluetooth_rxtx.c **** 			// quit using the old stuff and switch to sync mode
2640:bluetooth_rxtx.c **** 		}
2641:bluetooth_rxtx.c **** 	}
2642:bluetooth_rxtx.c **** 	return 1;
2643:bluetooth_rxtx.c **** }
 7229              		.loc 1 2643 0
 7230 010a 0120     		movs	r0, #1
 7231 010c 14B0     		add	sp, sp, #80
 7232              		.cfi_remember_state
 7233              		.cfi_def_cfa_offset 32
 7234              		@ sp needed
 7235 010e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 7236              	.LVL772:
 7237              	.L754:
 7238              		.cfi_restore_state
 7239              	.LBB145:
 7240              	.LBB142:
 7241              	.LBB139:
2609:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 7242              		.loc 1 2609 0
 7243 0112 00EB0C03 		add	r3, r0, ip
 7244 0116 3B44     		add	r3, r3, r7
2610:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 7245              		.loc 1 2610 0
 7246 0118 032A     		cmp	r2, #3
2609:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 7247              		.loc 1 2609 0
 7248 011a 13F8203C 		ldrb	r3, [r3, #-32]	@ zero_extendqisi2
 7249              	.LVL773:
2610:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 7250              		.loc 1 2610 0
 7251 011e 0CDD     		ble	.L753
2611:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 7252              		.loc 1 2611 0
 7253 0120 05EB010A 		add	r10, r5, r1
 7254 0124 9AF828A0 		ldrb	r10, [r10, #40]	@ zero_extendqisi2
2612:bluetooth_rxtx.c **** 				}
 7255              		.loc 1 2612 0
ARM GAS  /tmp/ccyBazZt.s 			page 198


 7256 0128 0131     		adds	r1, r1, #1
 7257              	.LVL774:
2611:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 7258              		.loc 1 2611 0
 7259 012a 83EA0A03 		eor	r3, r3, r10
 7260              	.LVL775:
2612:bluetooth_rxtx.c **** 				}
 7261              		.loc 1 2612 0
 7262 012e B1FBF8FA 		udiv	r10, r1, r8
 7263 0132 CAEBCA1A 		rsb	r10, r10, r10, lsl #7
 7264 0136 A1EB0A01 		sub	r1, r1, r10
 7265              	.LVL776:
 7266              	.L753:
2614:bluetooth_rxtx.c **** 			}
 7267              		.loc 1 2614 0 discriminator 2
 7268 013a 8340     		lsls	r3, r3, r0
 7269              	.LVL777:
 7270              	.LBE139:
2606:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 7271              		.loc 1 2606 0 discriminator 2
 7272 013c 0130     		adds	r0, r0, #1
 7273              	.LVL778:
 7274              	.LBB140:
2614:bluetooth_rxtx.c **** 			}
 7275              		.loc 1 2614 0 discriminator 2
 7276 013e 43EA0E03 		orr	r3, r3, lr
 7277              	.LBE140:
2606:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 7278              		.loc 1 2606 0 discriminator 2
 7279 0142 0828     		cmp	r0, #8
 7280              	.LBB141:
2614:bluetooth_rxtx.c **** 			}
 7281              		.loc 1 2614 0 discriminator 2
 7282 0144 5FFA83FE 		uxtb	lr, r3
 7283              	.LVL779:
 7284              	.LBE141:
2606:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 7285              		.loc 1 2606 0 discriminator 2
 7286 0148 E3D1     		bne	.L754
2616:bluetooth_rxtx.c **** 		}
 7287              		.loc 1 2616 0 discriminator 2
 7288 014a D9F80030 		ldr	r3, [r9]
 7289 014e 03F802E0 		strb	lr, [r3, r2]
 7290              	.LBE142:
2604:bluetooth_rxtx.c **** 			u8 byte = 0;
 7291              		.loc 1 2604 0 discriminator 2
 7292 0152 0132     		adds	r2, r2, #1
 7293              	.LVL780:
 7294 0154 0A2A     		cmp	r2, #10
 7295 0156 05D0     		beq	.L755
 7296              	.LVL781:
 7297              	.L759:
 7298 0158 4FF0000E 		mov	lr, #0
 7299 015c 04EBC20C 		add	ip, r4, r2, lsl #3
 7300 0160 7046     		mov	r0, lr
 7301 0162 D6E7     		b	.L754
 7302              	.LVL782:
ARM GAS  /tmp/ccyBazZt.s 			page 199


 7303              	.L755:
2619:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 7304              		.loc 1 2619 0
 7305 0164 D9F80030 		ldr	r3, [r9]
 7306 0168 D978     		ldrb	r1, [r3, #3]	@ zero_extendqisi2
 7307              	.LVL783:
2620:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 7308              		.loc 1 2620 0
 7309 016a D9F80030 		ldr	r3, [r9]
 7310 016e 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
2621:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 7311              		.loc 1 2621 0
 7312 0170 D9F80020 		ldr	r2, [r9]
 7313              	.LVL784:
2620:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 7314              		.loc 1 2620 0
 7315 0174 1B04     		lsls	r3, r3, #16
2621:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 7316              		.loc 1 2621 0
 7317 0176 5078     		ldrb	r0, [r2, #1]	@ zero_extendqisi2
 7318              	.LVL785:
2622:bluetooth_rxtx.c **** 		see_aa(aa);
 7319              		.loc 1 2622 0
 7320 0178 D9F80020 		ldr	r2, [r9]
2619:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 7321              		.loc 1 2619 0
 7322 017c 43EA0163 		orr	r3, r3, r1, lsl #24
2622:bluetooth_rxtx.c **** 		see_aa(aa);
 7323              		.loc 1 2622 0
 7324 0180 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7325              	.LVL786:
2621:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 7326              		.loc 1 2621 0
 7327 0182 1343     		orrs	r3, r3, r2
2623:bluetooth_rxtx.c **** 
 7328              		.loc 1 2623 0
 7329 0184 43EA0020 		orr	r0, r3, r0, lsl #8
 7330 0188 FFF7FEFF 		bl	see_aa
 7331              	.LVL787:
2625:bluetooth_rxtx.c **** 
 7332              		.loc 1 2625 0
 7333 018c D9F80010 		ldr	r1, [r9]
 7334 0190 0120     		movs	r0, #1
 7335 0192 FFF7FEFF 		bl	enqueue
 7336              	.LVL788:
 7337 0196 98E7     		b	.L760
 7338              	.LVL789:
 7339              	.L749:
2603:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 7340              		.loc 1 2603 0
 7341 0198 B6F84C00 		ldrh	r0, [r6, #76]
 7342              	.LBB143:
2616:bluetooth_rxtx.c **** 		}
 7343              		.loc 1 2616 0
 7344 019c DFF82890 		ldr	r9, .L769+28
 7345              	.LBE143:
2603:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
ARM GAS  /tmp/ccyBazZt.s 			page 200


 7346              		.loc 1 2603 0
 7347 01a0 80B2     		uxth	r0, r0
 7348 01a2 FFF7FEFF 		bl	btle_channel_index
 7349              	.LVL790:
2604:bluetooth_rxtx.c **** 			u8 byte = 0;
 7350              		.loc 1 2604 0
 7351 01a6 0022     		movs	r2, #0
2603:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 7352              		.loc 1 2603 0
 7353 01a8 295C     		ldrb	r1, [r5, r0]	@ zero_extendqisi2
 7354              	.LVL791:
 7355 01aa D5E7     		b	.L759
 7356              	.L770:
 7357              		.align	2
 7358              	.L769:
 7359 01ac 00000000 		.word	.LANCHOR2
 7360 01b0 A4080000 		.word	.LANCHOR2+2212
 7361 01b4 00000000 		.word	le_promisc
 7362 01b8 00000000 		.word	.LANCHOR1
 7363 01bc 00000000 		.word	promisc_follow_cb
 7364 01c0 00000000 		.word	.LANCHOR0
 7365 01c4 00000000 		.word	cb_follow_le
 7366 01c8 00000000 		.word	idle_rxbuf
 7367              	.LBE145:
 7368              		.cfi_endproc
 7369              	.LFE33:
 7371              		.section	.text.bt_promisc_le,"ax",%progbits
 7372              		.align	1
 7373              		.global	bt_promisc_le
 7374              		.syntax unified
 7375              		.thumb
 7376              		.thumb_func
 7377              		.fpu softvfp
 7379              	bt_promisc_le:
 7380              	.LFB34:
2644:bluetooth_rxtx.c **** 
2645:bluetooth_rxtx.c **** void bt_promisc_le() {
 7381              		.loc 1 2645 0
 7382              		.cfi_startproc
 7383              		@ args = 0, pretend = 0, frame = 0
 7384              		@ frame_needed = 0, uses_anonymous_args = 0
 7385 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 7386              		.cfi_def_cfa_offset 24
 7387              		.cfi_offset 4, -24
 7388              		.cfi_offset 5, -20
 7389              		.cfi_offset 6, -16
 7390              		.cfi_offset 7, -12
 7391              		.cfi_offset 8, -8
 7392              		.cfi_offset 14, -4
2646:bluetooth_rxtx.c **** 
2647:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_PROMISC_LE) {
 7393              		.loc 1 2647 0
 7394 0004 1A4E     		ldr	r6, .L781
2648:bluetooth_rxtx.c **** 		reset_le_promisc();
2649:bluetooth_rxtx.c **** 		// jump to a random data channel and turn up the squelch
2650:bluetooth_rxtx.c **** 		if ((channel & 1) == 1){
2651:bluetooth_rxtx.c **** 			le.crc_init_reversed = 0xa71541;
ARM GAS  /tmp/ccyBazZt.s 			page 201


 7395              		.loc 1 2651 0
 7396 0006 DFF87880 		ldr	r8, .L781+16
 7397 000a 3746     		mov	r7, r6
 7398              	.L772:
2647:bluetooth_rxtx.c **** 		reset_le_promisc();
 7399              		.loc 1 2647 0
 7400 000c B37C     		ldrb	r3, [r6, #18]	@ zero_extendqisi2
 7401 000e 0A2B     		cmp	r3, #10
 7402 0010 01D0     		beq	.L776
 7403              	.L771:
 7404 0012 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 7405              	.L776:
2650:bluetooth_rxtx.c **** 			le.crc_init_reversed = 0xa71541;
 7406              		.loc 1 2650 0
 7407 0016 174C     		ldr	r4, .L781+4
2648:bluetooth_rxtx.c **** 		reset_le_promisc();
 7408              		.loc 1 2648 0
 7409 0018 FFF7FEFF 		bl	reset_le_promisc
 7410              	.LVL792:
2650:bluetooth_rxtx.c **** 			le.crc_init_reversed = 0xa71541;
 7411              		.loc 1 2650 0
 7412 001c B4F84C30 		ldrh	r3, [r4, #76]
 7413 0020 DB07     		lsls	r3, r3, #31
 7414 0022 07D5     		bpl	.L773
2652:bluetooth_rxtx.c **** 			channel = btle_channel_index_to_phys(idx1);// sopan
 7415              		.loc 1 2652 0
 7416 0024 96F80F01 		ldrb	r0, [r6, #271]	@ zero_extendqisi2
2651:bluetooth_rxtx.c **** 			channel = btle_channel_index_to_phys(idx1);// sopan
 7417              		.loc 1 2651 0
 7418 0028 C4F80C80 		str	r8, [r4, #12]
 7419              		.loc 1 2652 0
 7420 002c FFF7FEFF 		bl	btle_channel_index_to_phys
 7421              	.LVL793:
 7422 0030 A4F84C00 		strh	r0, [r4, #76]	@ movhi
 7423              	.L773:
2653:bluetooth_rxtx.c ****                		//debug_printf("Channel: %d\n", channel);
2654:bluetooth_rxtx.c ****             	}
2655:bluetooth_rxtx.c **** 
2656:bluetooth_rxtx.c **** 		if (!le.target_set) {
 7424              		.loc 1 2656 0
 7425 0034 636C     		ldr	r3, [r4, #68]
 7426 0036 4BB9     		cbnz	r3, .L774
2657:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set(channel);
 7427              		.loc 1 2657 0
 7428 0038 B4F84C00 		ldrh	r0, [r4, #76]
 7429 003c 80B2     		uxth	r0, r0
 7430 003e FFF7FEFF 		bl	cs_threshold_calc_and_set
 7431              	.LVL794:
2658:bluetooth_rxtx.c **** 			data_cb = cb_le_promisc;
 7432              		.loc 1 2658 0
 7433 0042 0D4B     		ldr	r3, .L781+8
2659:bluetooth_rxtx.c **** 			bt_generic_le(MODE_BT_PROMISC_LE);
 7434              		.loc 1 2659 0
 7435 0044 0A20     		movs	r0, #10
2658:bluetooth_rxtx.c **** 			data_cb = cb_le_promisc;
 7436              		.loc 1 2658 0
 7437 0046 3B63     		str	r3, [r7, #48]
ARM GAS  /tmp/ccyBazZt.s 			page 202


 7438              		.loc 1 2659 0
 7439 0048 FFF7FEFF 		bl	bt_generic_le
 7440              	.LVL795:
 7441              	.L774:
2660:bluetooth_rxtx.c **** 		}
2661:bluetooth_rxtx.c **** 
2662:bluetooth_rxtx.c **** 		// could have got mode change in middle of above
2663:bluetooth_rxtx.c **** 		if (requested_mode != MODE_BT_PROMISC_LE)
 7442              		.loc 1 2663 0
 7443 004c BD7C     		ldrb	r5, [r7, #18]	@ zero_extendqisi2
 7444 004e EDB2     		uxtb	r5, r5
 7445 0050 0A2D     		cmp	r5, #10
 7446 0052 DED1     		bne	.L771
2664:bluetooth_rxtx.c **** 			break;
2665:bluetooth_rxtx.c **** 		le_promisc_state(0, &le.access_address, 4);
 7447              		.loc 1 2665 0
 7448 0054 0422     		movs	r2, #4
 7449 0056 0749     		ldr	r1, .L781+4
 7450 0058 0020     		movs	r0, #0
 7451 005a FFF7FEFF 		bl	le_promisc_state
 7452              	.LVL796:
2666:bluetooth_rxtx.c **** 		packet_cb = promisc_follow_cb;
 7453              		.loc 1 2666 0
 7454 005e 074B     		ldr	r3, .L781+12
2667:bluetooth_rxtx.c **** 		le.crc_verify = 0;
2668:bluetooth_rxtx.c **** 		bt_le_sync(MODE_BT_PROMISC_LE);
 7455              		.loc 1 2668 0
 7456 0060 2846     		mov	r0, r5
2666:bluetooth_rxtx.c **** 		packet_cb = promisc_follow_cb;
 7457              		.loc 1 2666 0
 7458 0062 BB61     		str	r3, [r7, #24]
2667:bluetooth_rxtx.c **** 		le.crc_verify = 0;
 7459              		.loc 1 2667 0
 7460 0064 0023     		movs	r3, #0
 7461 0066 2361     		str	r3, [r4, #16]
 7462              		.loc 1 2668 0
 7463 0068 FFF7FEFF 		bl	bt_le_sync
 7464              	.LVL797:
 7465 006c CEE7     		b	.L772
 7466              	.L782:
 7467 006e 00BF     		.align	2
 7468              	.L781:
 7469 0070 00000000 		.word	.LANCHOR1
 7470 0074 00000000 		.word	.LANCHOR0
 7471 0078 00000000 		.word	cb_le_promisc
 7472 007c 00000000 		.word	promisc_follow_cb
 7473 0080 4115A700 		.word	10949953
 7474              		.cfi_endproc
 7475              	.LFE34:
 7477              		.section	.text.bt_transmit_le,"ax",%progbits
 7478              		.align	1
 7479              		.global	bt_transmit_le
 7480              		.syntax unified
 7481              		.thumb
 7482              		.thumb_func
 7483              		.fpu softvfp
 7485              	bt_transmit_le:
ARM GAS  /tmp/ccyBazZt.s 			page 203


 7486              	.LFB35:
2669:bluetooth_rxtx.c **** 	}
2670:bluetooth_rxtx.c **** }
2671:bluetooth_rxtx.c **** 
2672:bluetooth_rxtx.c **** void bt_transmit_le(){
 7487              		.loc 1 2672 0
 7488              		.cfi_startproc
 7489              		@ args = 0, pretend = 0, frame = 16
 7490              		@ frame_needed = 0, uses_anonymous_args = 0
 7491 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 7492              		.cfi_def_cfa_offset 36
 7493              		.cfi_offset 4, -36
 7494              		.cfi_offset 5, -32
 7495              		.cfi_offset 6, -28
 7496              		.cfi_offset 7, -24
 7497              		.cfi_offset 8, -20
 7498              		.cfi_offset 9, -16
 7499              		.cfi_offset 10, -12
 7500              		.cfi_offset 11, -8
 7501              		.cfi_offset 14, -4
 7502 0004 85B0     		sub	sp, sp, #20
 7503              		.cfi_def_cfa_offset 56
2673:bluetooth_rxtx.c **** 	
2674:bluetooth_rxtx.c **** 	clkn_start();
 7504              		.loc 1 2674 0
 7505 0006 FFF7FEFF 		bl	clkn_start
 7506              	.LVL798:
2675:bluetooth_rxtx.c **** 
2676:bluetooth_rxtx.c **** 	uint8_t data[2] = {0x00,0x00};
 7507              		.loc 1 2676 0
 7508 000a 0023     		movs	r3, #0
2677:bluetooth_rxtx.c **** 	uint8_t len = 2;
2678:bluetooth_rxtx.c **** 
2679:bluetooth_rxtx.c **** 	unsigned i, j;
2680:bluetooth_rxtx.c **** 	int bit;
2681:bluetooth_rxtx.c **** 	u8 txbuf[2];
2682:bluetooth_rxtx.c **** 	u8 byte;
2683:bluetooth_rxtx.c **** 	uint32_t sync = rbit(le.access_address);
 7509              		.loc 1 2683 0
 7510 000c 684C     		ldr	r4, .L809
2676:bluetooth_rxtx.c **** 	uint8_t len = 2;
 7511              		.loc 1 2676 0
 7512 000e 8DF80830 		strb	r3, [sp, #8]
 7513              		.loc 1 2683 0
 7514 0012 2068     		ldr	r0, [r4]
2676:bluetooth_rxtx.c **** 	uint8_t len = 2;
 7515              		.loc 1 2676 0
 7516 0014 8DF80930 		strb	r3, [sp, #9]
 7517              	.LVL799:
 7518              		.loc 1 2683 0
 7519 0018 FFF7FEFF 		bl	rbit
 7520              	.LVL800:
2684:bluetooth_rxtx.c **** 
2685:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
2686:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_TRANSMIT_LE) {
 7521              		.loc 1 2686 0
 7522 001c 654E     		ldr	r6, .L809+4
ARM GAS  /tmp/ccyBazZt.s 			page 204


2685:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_TRANSMIT_LE) {
 7523              		.loc 1 2685 0
 7524 001e 4FF08072 		mov	r2, #16777216
2683:bluetooth_rxtx.c **** 
 7525              		.loc 1 2683 0
 7526 0022 8046     		mov	r8, r0
 7527              	.LVL801:
 7528 0024 3746     		mov	r7, r6
2685:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_TRANSMIT_LE) {
 7529              		.loc 1 2685 0
 7530 0026 644B     		ldr	r3, .L809+8
 7531 0028 1A60     		str	r2, [r3]
 7532              	.LBB146:
2687:bluetooth_rxtx.c **** 		if (do_hop)
2688:bluetooth_rxtx.c **** 			hop();
2689:bluetooth_rxtx.c **** 		
2690:bluetooth_rxtx.c **** 		if(do_transmit){
2691:bluetooth_rxtx.c **** 			//do_transmit = 0;
2692:bluetooth_rxtx.c **** 			//debug_printf("do_transmit = %d\n", do_transmit);
2693:bluetooth_rxtx.c **** 			int idx = whitening_index[btle_channel_index(channel)];
2694:bluetooth_rxtx.c **** 			for (i = 0; i < len; ++i) {
2695:bluetooth_rxtx.c **** 				byte = data[i];
2696:bluetooth_rxtx.c **** 				txbuf[i] = 0;
2697:bluetooth_rxtx.c **** 				for (j = 0; j < 8; ++j) {
2698:bluetooth_rxtx.c **** 					bit = (byte & 1) ^ whitening[idx];
2699:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
2700:bluetooth_rxtx.c **** 					byte >>= 1;
2701:bluetooth_rxtx.c **** 					txbuf[i] |= bit << (7 - j);
2702:bluetooth_rxtx.c **** 				}
2703:bluetooth_rxtx.c **** 			}
2704:bluetooth_rxtx.c **** 
2705:bluetooth_rxtx.c **** 			
2706:bluetooth_rxtx.c **** 			// Bluetooth-like modulation
2707:bluetooth_rxtx.c **** 			cc2400_set(MANAND,  0x7fff);
2708:bluetooth_rxtx.c **** 			cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
2709:bluetooth_rxtx.c **** 			cc2400_set(MDMTST0, 0x134b);    // no PRNG
2710:bluetooth_rxtx.c **** 
2711:bluetooth_rxtx.c **** 			cc2400_set(GRMDM,   0x0ce1);
2712:bluetooth_rxtx.c **** 			// 0 00 01 1 001 11 0 00 0 1
2713:bluetooth_rxtx.c **** 			//      |  | |   |  +--------> CRC off
2714:bluetooth_rxtx.c **** 			//      |  | |   +-----------> sync word: all 32 bits of SYNC_WORD
2715:bluetooth_rxtx.c **** 			//      |  | +---------------> 1 preamble byte of 01010101
2716:bluetooth_rxtx.c **** 			//      |  +-----------------> packet mode
2717:bluetooth_rxtx.c **** 			//      +--------------------> buffered mode
2718:bluetooth_rxtx.c **** 
2719:bluetooth_rxtx.c **** 			cc2400_set(FSDIV,   channel);
2720:bluetooth_rxtx.c **** 			cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
2721:bluetooth_rxtx.c **** 			cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
2722:bluetooth_rxtx.c **** 			cc2400_set(INT,     0x0014);    // FIFO_THRESHOLD: 20 bytes
2723:bluetooth_rxtx.c **** 
2724:bluetooth_rxtx.c **** 			// set sync word to bit-reversed AA
2725:bluetooth_rxtx.c **** 
2726:bluetooth_rxtx.c **** 			cc2400_set(SYNCL,   sync & 0xffff);
2727:bluetooth_rxtx.c **** 			cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 7533              		.loc 1 2727 0
 7534 002a 030C     		lsrs	r3, r0, #16
 7535 002c 0193     		str	r3, [sp, #4]
ARM GAS  /tmp/ccyBazZt.s 			page 205


 7536              	.LVL802:
 7537              	.L786:
 7538              	.LBE146:
2686:bluetooth_rxtx.c **** 		if (do_hop)
 7539              		.loc 1 2686 0
 7540 002e B37C     		ldrb	r3, [r6, #18]	@ zero_extendqisi2
 7541 0030 112B     		cmp	r3, #17
 7542 0032 06D0     		beq	.L794
2728:bluetooth_rxtx.c **** 
2729:bluetooth_rxtx.c **** 			// turn on the radio
2730:bluetooth_rxtx.c **** 			while (!(cc2400_status() & XOSC16M_STABLE));
2731:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
2732:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
2733:bluetooth_rxtx.c **** 			TXLED_SET;
2734:bluetooth_rxtx.c **** 		#ifdef UBERTOOTH_ONE
2735:bluetooth_rxtx.c **** 			PAEN_SET;
2736:bluetooth_rxtx.c **** 		#endif
2737:bluetooth_rxtx.c **** 			while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
2738:bluetooth_rxtx.c **** 			debug_printf("channel: %d	%d\n", channel, CLK100NS);
2739:bluetooth_rxtx.c **** 			// copy the packet to the FIFO and strobe STX
2740:bluetooth_rxtx.c **** 			cc2400_fifo_write(len, txbuf);
2741:bluetooth_rxtx.c **** 			cc2400_strobe(STX);
2742:bluetooth_rxtx.c **** 
2743:bluetooth_rxtx.c **** 			while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
2744:bluetooth_rxtx.c **** 			TXLED_CLR;
2745:bluetooth_rxtx.c **** 
2746:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
2747:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
2748:bluetooth_rxtx.c **** 
2749:bluetooth_rxtx.c **** 		#ifdef UBERTOOTH_ONE
2750:bluetooth_rxtx.c **** 			PAEN_CLR;
2751:bluetooth_rxtx.c **** 			#endif
2752:bluetooth_rxtx.c **** 			do_transmit = 0;
2753:bluetooth_rxtx.c **** 			do_hop = 1;
2754:bluetooth_rxtx.c **** 		}
2755:bluetooth_rxtx.c **** 	}
2756:bluetooth_rxtx.c **** 	// disable USB interrupts
2757:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 7543              		.loc 1 2757 0
 7544 0034 4FF08072 		mov	r2, #16777216
 7545 0038 604B     		ldr	r3, .L809+12
 7546 003a 1A60     		str	r2, [r3]
2758:bluetooth_rxtx.c **** }
 7547              		.loc 1 2758 0
 7548 003c 05B0     		add	sp, sp, #20
 7549              		.cfi_remember_state
 7550              		.cfi_def_cfa_offset 36
 7551              		@ sp needed
 7552 003e BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 7553              	.LVL803:
 7554              	.L794:
 7555              		.cfi_restore_state
2687:bluetooth_rxtx.c **** 			hop();
 7556              		.loc 1 2687 0
 7557 0042 F37A     		ldrb	r3, [r6, #11]	@ zero_extendqisi2
 7558 0044 0BB1     		cbz	r3, .L785
2688:bluetooth_rxtx.c **** 		
ARM GAS  /tmp/ccyBazZt.s 			page 206


 7559              		.loc 1 2688 0
 7560 0046 FFF7FEFF 		bl	hop
 7561              	.LVL804:
 7562              	.L785:
2690:bluetooth_rxtx.c **** 			//do_transmit = 0;
 7563              		.loc 1 2690 0
 7564 004a 97F82C30 		ldrb	r3, [r7, #44]	@ zero_extendqisi2
 7565 004e 002B     		cmp	r3, #0
 7566 0050 EDD0     		beq	.L786
 7567              	.LBB147:
2693:bluetooth_rxtx.c **** 			for (i = 0; i < len; ++i) {
 7568              		.loc 1 2693 0
 7569 0052 B4F84C00 		ldrh	r0, [r4, #76]
2694:bluetooth_rxtx.c **** 				byte = data[i];
 7570              		.loc 1 2694 0
 7571 0056 0025     		movs	r5, #0
2693:bluetooth_rxtx.c **** 			for (i = 0; i < len; ++i) {
 7572              		.loc 1 2693 0
 7573 0058 80B2     		uxth	r0, r0
 7574 005a FFF7FEFF 		bl	btle_channel_index
 7575              	.LVL805:
2699:bluetooth_rxtx.c **** 					byte >>= 1;
 7576              		.loc 1 2699 0
 7577 005e 4FF07F0A 		mov	r10, #127
2693:bluetooth_rxtx.c **** 			for (i = 0; i < len; ++i) {
 7578              		.loc 1 2693 0
 7579 0062 5749     		ldr	r1, .L809+16
 7580 0064 0DF10B0E 		add	lr, sp, #11
 7581 0068 0B5C     		ldrb	r3, [r1, r0]	@ zero_extendqisi2
 7582              	.LVL806:
 7583              	.L788:
2695:bluetooth_rxtx.c **** 				txbuf[i] = 0;
 7584              		.loc 1 2695 0
 7585 006a 02AA     		add	r2, sp, #8
 7586 006c 12F80590 		ldrb	r9, [r2, r5]	@ zero_extendqisi2
 7587              	.LVL807:
2696:bluetooth_rxtx.c **** 				for (j = 0; j < 8; ++j) {
 7588              		.loc 1 2696 0
 7589 0070 4FF00002 		mov	r2, #0
 7590 0074 0720     		movs	r0, #7
 7591 0076 4FF0000C 		mov	ip, #0
 7592 007a 8EF80120 		strb	r2, [lr, #1]
 7593              	.LVL808:
 7594              	.L787:
2698:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 7595              		.loc 1 2698 0 discriminator 3
 7596 007e CA18     		adds	r2, r1, r3
 7597 0080 92F82820 		ldrb	r2, [r2, #40]	@ zero_extendqisi2
 7598 0084 09F0010B 		and	fp, r9, #1
 7599 0088 8BEA0202 		eor	r2, fp, r2
 7600              	.LVL809:
2699:bluetooth_rxtx.c **** 					byte >>= 1;
 7601              		.loc 1 2699 0 discriminator 3
 7602 008c 03F1010B 		add	fp, r3, #1
 7603 0090 BBFBFAF3 		udiv	r3, fp, r10
 7604              	.LVL810:
2701:bluetooth_rxtx.c **** 				}
ARM GAS  /tmp/ccyBazZt.s 			page 207


 7605              		.loc 1 2701 0 discriminator 3
 7606 0094 8240     		lsls	r2, r2, r0
 7607              	.LVL811:
2699:bluetooth_rxtx.c **** 					byte >>= 1;
 7608              		.loc 1 2699 0 discriminator 3
 7609 0096 C3EBC313 		rsb	r3, r3, r3, lsl #7
2701:bluetooth_rxtx.c **** 				}
 7610              		.loc 1 2701 0 discriminator 3
 7611 009a 42EA0C02 		orr	r2, r2, ip
2697:bluetooth_rxtx.c **** 					bit = (byte & 1) ^ whitening[idx];
 7612              		.loc 1 2697 0 discriminator 3
 7613 009e 10F1FF30 		adds	r0, r0, #-1
 7614              	.LVL812:
2699:bluetooth_rxtx.c **** 					byte >>= 1;
 7615              		.loc 1 2699 0 discriminator 3
 7616 00a2 ABEB0303 		sub	r3, fp, r3
 7617              	.LVL813:
2700:bluetooth_rxtx.c **** 					txbuf[i] |= bit << (7 - j);
 7618              		.loc 1 2700 0 discriminator 3
 7619 00a6 4FEA5909 		lsr	r9, r9, #1
 7620              	.LVL814:
2701:bluetooth_rxtx.c **** 				}
 7621              		.loc 1 2701 0 discriminator 3
 7622 00aa 5FFA82FC 		uxtb	ip, r2
 7623              	.LVL815:
2697:bluetooth_rxtx.c **** 					bit = (byte & 1) ^ whitening[idx];
 7624              		.loc 1 2697 0 discriminator 3
 7625 00ae E6D2     		bcs	.L787
2694:bluetooth_rxtx.c **** 				byte = data[i];
 7626              		.loc 1 2694 0 discriminator 2
 7627 00b0 0135     		adds	r5, r5, #1
 7628              	.LVL816:
 7629 00b2 022D     		cmp	r5, #2
 7630 00b4 0EF801CF 		strb	ip, [lr, #1]!
 7631 00b8 D7D1     		bne	.L788
2707:bluetooth_rxtx.c **** 			cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 7632              		.loc 1 2707 0
 7633 00ba 47F6FF71 		movw	r1, #32767
 7634 00be 0D20     		movs	r0, #13
 7635 00c0 FFF7FEFF 		bl	cc2400_set
 7636              	.LVL817:
2708:bluetooth_rxtx.c **** 			cc2400_set(MDMTST0, 0x134b);    // no PRNG
 7637              		.loc 1 2708 0
 7638 00c4 42F62231 		movw	r1, #11042
 7639 00c8 1220     		movs	r0, #18
 7640 00ca FFF7FEFF 		bl	cc2400_set
 7641              	.LVL818:
2709:bluetooth_rxtx.c **** 
 7642              		.loc 1 2709 0
 7643 00ce 41F24B31 		movw	r1, #4939
 7644 00d2 1420     		movs	r0, #20
 7645 00d4 FFF7FEFF 		bl	cc2400_set
 7646              	.LVL819:
2711:bluetooth_rxtx.c **** 			// 0 00 01 1 001 11 0 00 0 1
 7647              		.loc 1 2711 0
 7648 00d8 40F6E141 		movw	r1, #3297
 7649 00dc 2020     		movs	r0, #32
ARM GAS  /tmp/ccyBazZt.s 			page 208


 7650 00de FFF7FEFF 		bl	cc2400_set
 7651              	.LVL820:
2719:bluetooth_rxtx.c **** 			cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 7652              		.loc 1 2719 0
 7653 00e2 B4F84C10 		ldrh	r1, [r4, #76]
 7654 00e6 2846     		mov	r0, r5
 7655 00e8 89B2     		uxth	r1, r1
 7656 00ea FFF7FEFF 		bl	cc2400_set
 7657              	.LVL821:
2720:bluetooth_rxtx.c **** 			cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 7658              		.loc 1 2720 0
 7659 00ee 0B21     		movs	r1, #11
 7660 00f0 0520     		movs	r0, #5
 7661 00f2 FFF7FEFF 		bl	cc2400_set
 7662              	.LVL822:
2721:bluetooth_rxtx.c **** 			cc2400_set(INT,     0x0014);    // FIFO_THRESHOLD: 20 bytes
 7663              		.loc 1 2721 0
 7664 00f6 4021     		movs	r1, #64
 7665 00f8 0320     		movs	r0, #3
 7666 00fa FFF7FEFF 		bl	cc2400_set
 7667              	.LVL823:
2722:bluetooth_rxtx.c **** 
 7668              		.loc 1 2722 0
 7669 00fe 1421     		movs	r1, #20
 7670 0100 2320     		movs	r0, #35
 7671 0102 FFF7FEFF 		bl	cc2400_set
 7672              	.LVL824:
2726:bluetooth_rxtx.c **** 			cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 7673              		.loc 1 2726 0
 7674 0106 1FFA88F1 		uxth	r1, r8
 7675 010a 2C20     		movs	r0, #44
 7676 010c FFF7FEFF 		bl	cc2400_set
 7677              	.LVL825:
2727:bluetooth_rxtx.c **** 
 7678              		.loc 1 2727 0
 7679 0110 0199     		ldr	r1, [sp, #4]
 7680 0112 2D20     		movs	r0, #45
 7681 0114 FFF7FEFF 		bl	cc2400_set
 7682              	.LVL826:
 7683              	.L789:
2730:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 7684              		.loc 1 2730 0 discriminator 1
 7685 0118 FFF7FEFF 		bl	cc2400_status
 7686              	.LVL827:
 7687 011c 4206     		lsls	r2, r0, #25
 7688 011e FBD5     		bpl	.L789
2731:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 7689              		.loc 1 2731 0
 7690 0120 6120     		movs	r0, #97
 7691 0122 FFF7FEFF 		bl	cc2400_strobe
 7692              	.LVL828:
 7693              	.L790:
2732:bluetooth_rxtx.c **** 			TXLED_SET;
 7694              		.loc 1 2732 0 discriminator 1
 7695 0126 FFF7FEFF 		bl	cc2400_status
 7696              	.LVL829:
 7697 012a 4307     		lsls	r3, r0, #29
ARM GAS  /tmp/ccyBazZt.s 			page 209


 7698 012c FBD5     		bpl	.L790
2733:bluetooth_rxtx.c **** 		#ifdef UBERTOOTH_ONE
 7699              		.loc 1 2733 0
 7700 012e 4FF48073 		mov	r3, #256
 7701 0132 244A     		ldr	r2, .L809+20
 7702 0134 1360     		str	r3, [r2]
2735:bluetooth_rxtx.c **** 		#endif
 7703              		.loc 1 2735 0
 7704 0136 8022     		movs	r2, #128
 7705 0138 234B     		ldr	r3, .L809+24
 7706 013a 1A60     		str	r2, [r3]
 7707              	.L791:
2737:bluetooth_rxtx.c **** 			debug_printf("channel: %d	%d\n", channel, CLK100NS);
 7708              		.loc 1 2737 0 discriminator 1
 7709 013c 0E20     		movs	r0, #14
 7710 013e FFF7FEFF 		bl	cc2400_get
 7711              	.LVL830:
 7712 0142 00F01F00 		and	r0, r0, #31
 7713 0146 0F28     		cmp	r0, #15
 7714 0148 F8D1     		bne	.L791
2738:bluetooth_rxtx.c **** 			// copy the packet to the FIFO and strobe STX
 7715              		.loc 1 2738 0
 7716 014a 40F63540 		movw	r0, #3125
 7717 014e 1F4B     		ldr	r3, .L809+28
 7718 0150 1F4A     		ldr	r2, .L809+32
 7719 0152 B4F84C10 		ldrh	r1, [r4, #76]
 7720 0156 1B68     		ldr	r3, [r3]
 7721 0158 1268     		ldr	r2, [r2]
 7722 015a C3F31303 		ubfx	r3, r3, #0, #20
 7723 015e 00FB0322 		mla	r2, r0, r3, r2
 7724 0162 89B2     		uxth	r1, r1
 7725 0164 1B48     		ldr	r0, .L809+36
 7726 0166 FFF7FEFF 		bl	debug_printf
 7727              	.LVL831:
2740:bluetooth_rxtx.c **** 			cc2400_strobe(STX);
 7728              		.loc 1 2740 0
 7729 016a 0220     		movs	r0, #2
 7730 016c 03A9     		add	r1, sp, #12
 7731 016e FFF7FEFF 		bl	cc2400_fifo_write
 7732              	.LVL832:
2741:bluetooth_rxtx.c **** 
 7733              		.loc 1 2741 0
 7734 0172 6320     		movs	r0, #99
 7735 0174 FFF7FEFF 		bl	cc2400_strobe
 7736              	.LVL833:
 7737              	.L792:
2743:bluetooth_rxtx.c **** 			TXLED_CLR;
 7738              		.loc 1 2743 0 discriminator 1
 7739 0178 0E20     		movs	r0, #14
 7740 017a FFF7FEFF 		bl	cc2400_get
 7741              	.LVL834:
 7742 017e 00F01F00 		and	r0, r0, #31
 7743 0182 0F28     		cmp	r0, #15
 7744 0184 F8D1     		bne	.L792
2744:bluetooth_rxtx.c **** 
 7745              		.loc 1 2744 0
 7746 0186 4FF48072 		mov	r2, #256
ARM GAS  /tmp/ccyBazZt.s 			page 210


 7747 018a 134B     		ldr	r3, .L809+40
2746:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 7748              		.loc 1 2746 0
 7749 018c 6420     		movs	r0, #100
2744:bluetooth_rxtx.c **** 
 7750              		.loc 1 2744 0
 7751 018e 1A60     		str	r2, [r3]
2746:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 7752              		.loc 1 2746 0
 7753 0190 FFF7FEFF 		bl	cc2400_strobe
 7754              	.LVL835:
 7755              	.L793:
2747:bluetooth_rxtx.c **** 
 7756              		.loc 1 2747 0 discriminator 1
 7757 0194 FFF7FEFF 		bl	cc2400_status
 7758              	.LVL836:
 7759 0198 10F00400 		ands	r0, r0, #4
 7760 019c FAD1     		bne	.L793
2750:bluetooth_rxtx.c **** 			#endif
 7761              		.loc 1 2750 0
 7762 019e 8022     		movs	r2, #128
 7763 01a0 0E4B     		ldr	r3, .L809+44
 7764 01a2 1A60     		str	r2, [r3]
2753:bluetooth_rxtx.c **** 		}
 7765              		.loc 1 2753 0
 7766 01a4 0123     		movs	r3, #1
2752:bluetooth_rxtx.c **** 			do_hop = 1;
 7767              		.loc 1 2752 0
 7768 01a6 87F82C00 		strb	r0, [r7, #44]
2753:bluetooth_rxtx.c **** 		}
 7769              		.loc 1 2753 0
 7770 01aa FB72     		strb	r3, [r7, #11]
 7771 01ac 3FE7     		b	.L786
 7772              	.L810:
 7773 01ae 00BF     		.align	2
 7774              	.L809:
 7775 01b0 00000000 		.word	.LANCHOR0
 7776 01b4 00000000 		.word	.LANCHOR1
 7777 01b8 00E100E0 		.word	-536813312
 7778 01bc 80E100E0 		.word	-536813184
 7779 01c0 00000000 		.word	.LANCHOR2
 7780 01c4 38C00920 		.word	537509944
 7781 01c8 58C00920 		.word	537509976
 7782 01cc 00000000 		.word	clkn
 7783 01d0 08400040 		.word	1073758216
 7784 01d4 5D000000 		.word	.LC10
 7785 01d8 3CC00920 		.word	537509948
 7786 01dc 5CC00920 		.word	537509980
 7787              	.LBE147:
 7788              		.cfi_endproc
 7789              	.LFE35:
 7791              		.section	.text.bt_slave_le,"ax",%progbits
 7792              		.align	1
 7793              		.global	bt_slave_le
 7794              		.syntax unified
 7795              		.thumb
 7796              		.thumb_func
ARM GAS  /tmp/ccyBazZt.s 			page 211


 7797              		.fpu softvfp
 7799              	bt_slave_le:
 7800              	.LFB36:
2759:bluetooth_rxtx.c **** 
2760:bluetooth_rxtx.c **** void bt_slave_le() {
 7801              		.loc 1 2760 0
 7802              		.cfi_startproc
 7803              		@ args = 0, pretend = 0, frame = 32
 7804              		@ frame_needed = 0, uses_anonymous_args = 0
 7805 0000 70B5     		push	{r4, r5, r6, lr}
 7806              		.cfi_def_cfa_offset 16
 7807              		.cfi_offset 4, -16
 7808              		.cfi_offset 5, -12
 7809              		.cfi_offset 6, -8
 7810              		.cfi_offset 14, -4
 7811 0002 88B0     		sub	sp, sp, #32
 7812              		.cfi_def_cfa_offset 48
2761:bluetooth_rxtx.c **** 	//debug_printf("Le adv\n");
2762:bluetooth_rxtx.c **** 	channel = btle_channel_index_to_phys(37);// for test
 7813              		.loc 1 2762 0
 7814 0004 2520     		movs	r0, #37
 7815 0006 FFF7FEFF 		bl	btle_channel_index_to_phys
 7816              	.LVL837:
2763:bluetooth_rxtx.c **** 	u32 calc_crc;
2764:bluetooth_rxtx.c **** 	int i;
2765:bluetooth_rxtx.c **** 	uint8_t adv_ind[26] = {0x00,0x15,0x31,0x56,0xAF,0x50,0xA0,0x00,0x02,0x01,0x06,0x07,0x09,0x63,0x61,
 7817              		.loc 1 2765 0
 7818 000a 01AA     		add	r2, sp, #4
 7819 000c 1546     		mov	r5, r2
2762:bluetooth_rxtx.c **** 	u32 calc_crc;
 7820              		.loc 1 2762 0
 7821 000e 194B     		ldr	r3, .L818
 7822 0010 A3F84C00 		strh	r0, [r3, #76]	@ movhi
 7823              		.loc 1 2765 0
 7824 0014 184B     		ldr	r3, .L818+4
 7825 0016 03F11806 		add	r6, r3, #24
 7826              	.L812:
 7827 001a 1446     		mov	r4, r2
 7828 001c 1868     		ldr	r0, [r3]	@ unaligned
 7829 001e 5968     		ldr	r1, [r3, #4]	@ unaligned
 7830 0020 0833     		adds	r3, r3, #8
 7831 0022 03C4     		stmia	r4!, {r0, r1}
 7832 0024 B342     		cmp	r3, r6
 7833 0026 2246     		mov	r2, r4
 7834 0028 F7D1     		bne	.L812
 7835 002a 1B88     		ldrh	r3, [r3]	@ unaligned
2766:bluetooth_rxtx.c **** 	uint8_t adv_ind_len = 26;
2767:bluetooth_rxtx.c **** /*
2768:bluetooth_rxtx.c **** 	if (le_adv_len > LE_ADV_MAX_LEN) {
2769:bluetooth_rxtx.c **** 		requested_mode = MODE_IDLE;
2770:bluetooth_rxtx.c **** 		return;
2771:bluetooth_rxtx.c **** 	}
2772:bluetooth_rxtx.c **** 
2773:bluetooth_rxtx.c **** 	adv_ind_len = 6 + le_adv_len;
2774:bluetooth_rxtx.c **** 	adv_ind[1] = adv_ind_len;
2775:bluetooth_rxtx.c **** 
2776:bluetooth_rxtx.c **** 	// copy the user-specified mac address
ARM GAS  /tmp/ccyBazZt.s 			page 212


2777:bluetooth_rxtx.c **** 	for (i = 0; i < 6; ++i)
2778:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
2779:bluetooth_rxtx.c **** 
2780:bluetooth_rxtx.c **** 	// copy in the adv data
2781:bluetooth_rxtx.c **** 	memcpy(adv_ind + 2 + 6, le_adv_data, le_adv_len);
2782:bluetooth_rxtx.c **** 
2783:bluetooth_rxtx.c **** 	// total: 2 + 6 + le_adv_len
2784:bluetooth_rxtx.c **** 	adv_ind_len += 2;
2785:bluetooth_rxtx.c **** 
2786:bluetooth_rxtx.c **** 	calc_crc = btle_calc_crc(le.crc_init_reversed, adv_ind, adv_ind_len);
2787:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len + 0] = (calc_crc >>  0) & 0xff;
2788:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len + 1] = (calc_crc >>  8) & 0xff;
2789:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len + 2] = (calc_crc >> 16) & 0xff;
2790:bluetooth_rxtx.c **** */
2791:bluetooth_rxtx.c **** 	clkn_start();
2792:bluetooth_rxtx.c **** 
2793:bluetooth_rxtx.c **** 	// enable USB interrupts due to busy waits
2794:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
2795:bluetooth_rxtx.c **** 
2796:bluetooth_rxtx.c **** 	// spam advertising packets
2797:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_SLAVE_LE) {
2798:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len, adv_ind);
 7836              		.loc 1 2798 0
 7837 002c 134E     		ldr	r6, .L818+8
2765:bluetooth_rxtx.c **** 	uint8_t adv_ind_len = 26;
 7838              		.loc 1 2765 0
 7839 002e 2380     		strh	r3, [r4]	@ unaligned
 7840              	.LVL838:
2791:bluetooth_rxtx.c **** 
 7841              		.loc 1 2791 0
 7842 0030 FFF7FEFF 		bl	clkn_start
 7843              	.LVL839:
2794:bluetooth_rxtx.c **** 
 7844              		.loc 1 2794 0
 7845 0034 4FF08072 		mov	r2, #16777216
 7846 0038 114B     		ldr	r3, .L818+12
 7847              	.LBB150:
 7848              	.LBB151:
 979:bluetooth_rxtx.c **** 	uint32_t stop_at = now + millis * 10000 / 3125; // millis -> clkn ticks
 7849              		.loc 1 979 0
 7850 003a 124C     		ldr	r4, .L818+16
 7851              	.LBE151:
 7852              	.LBE150:
2794:bluetooth_rxtx.c **** 
 7853              		.loc 1 2794 0
 7854 003c 1A60     		str	r2, [r3]
 7855              	.L813:
2797:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len, adv_ind);
 7856              		.loc 1 2797 0
 7857 003e 124B     		ldr	r3, .L818+20
 7858 0040 9B7C     		ldrb	r3, [r3, #18]	@ zero_extendqisi2
 7859 0042 0C2B     		cmp	r3, #12
 7860 0044 05D0     		beq	.L815
2799:bluetooth_rxtx.c **** 		msleep(100);
2800:bluetooth_rxtx.c **** 	}
2801:bluetooth_rxtx.c **** 
2802:bluetooth_rxtx.c **** 	// disable USB interrupts
ARM GAS  /tmp/ccyBazZt.s 			page 213


2803:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 7861              		.loc 1 2803 0
 7862 0046 4FF08072 		mov	r2, #16777216
 7863 004a 104B     		ldr	r3, .L818+24
 7864 004c 1A60     		str	r2, [r3]
2804:bluetooth_rxtx.c **** }
 7865              		.loc 1 2804 0
 7866 004e 08B0     		add	sp, sp, #32
 7867              		.cfi_remember_state
 7868              		.cfi_def_cfa_offset 16
 7869              		@ sp needed
 7870 0050 70BD     		pop	{r4, r5, r6, pc}
 7871              	.L815:
 7872              		.cfi_restore_state
2798:bluetooth_rxtx.c **** 		msleep(100);
 7873              		.loc 1 2798 0
 7874 0052 2A46     		mov	r2, r5
 7875 0054 1A21     		movs	r1, #26
 7876 0056 3046     		mov	r0, r6
 7877 0058 FFF7FEFF 		bl	le_transmit
 7878              	.LVL840:
 7879              	.LBB153:
 7880              	.LBB152:
 979:bluetooth_rxtx.c **** 	uint32_t stop_at = now + millis * 10000 / 3125; // millis -> clkn ticks
 7881              		.loc 1 979 0
 7882 005c 2368     		ldr	r3, [r4]
 7883              	.LVL841:
 7884 005e 23F07F43 		bic	r3, r3, #-16777216
 7885              	.LVL842:
 980:bluetooth_rxtx.c **** 
 7886              		.loc 1 980 0
 7887 0062 03F5A073 		add	r3, r3, #320
 7888              	.LVL843:
 7889              	.L814:
 987:bluetooth_rxtx.c **** 	}
 7890              		.loc 1 987 0
 7891 0066 2268     		ldr	r2, [r4]
 7892 0068 22F07F42 		bic	r2, r2, #-16777216
 7893 006c 9342     		cmp	r3, r2
 7894 006e FAD8     		bhi	.L814
 7895 0070 E5E7     		b	.L813
 7896              	.L819:
 7897 0072 00BF     		.align	2
 7898              	.L818:
 7899 0074 00000000 		.word	.LANCHOR0
 7900 0078 B4080000 		.word	.LANCHOR2+2228
 7901 007c D6BE898E 		.word	-1903575338
 7902 0080 00E100E0 		.word	-536813312
 7903 0084 00000000 		.word	clkn
 7904 0088 00000000 		.word	.LANCHOR1
 7905 008c 80E100E0 		.word	-536813184
 7906              	.LBE152:
 7907              	.LBE153:
 7908              		.cfi_endproc
 7909              	.LFE36:
 7911              		.section	.text.rx_generic_sync,"ax",%progbits
 7912              		.align	1
ARM GAS  /tmp/ccyBazZt.s 			page 214


 7913              		.global	rx_generic_sync
 7914              		.syntax unified
 7915              		.thumb
 7916              		.thumb_func
 7917              		.fpu softvfp
 7919              	rx_generic_sync:
 7920              	.LFB37:
2805:bluetooth_rxtx.c **** 
2806:bluetooth_rxtx.c **** void rx_generic_sync(void) {
 7921              		.loc 1 2806 0
 7922              		.cfi_startproc
 7923              		@ args = 0, pretend = 0, frame = 40
 7924              		@ frame_needed = 0, uses_anonymous_args = 0
 7925 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 7926              		.cfi_def_cfa_offset 20
 7927              		.cfi_offset 4, -20
 7928              		.cfi_offset 5, -16
 7929              		.cfi_offset 6, -12
 7930              		.cfi_offset 7, -8
 7931              		.cfi_offset 14, -4
 7932 0002 8BB0     		sub	sp, sp, #44
 7933              		.cfi_def_cfa_offset 64
 7934              	.LVL844:
2807:bluetooth_rxtx.c **** 	u8 len = 32;
2808:bluetooth_rxtx.c **** 	u8 buf[len+4];
2809:bluetooth_rxtx.c **** 	u16 reg_val;
2810:bluetooth_rxtx.c **** 
2811:bluetooth_rxtx.c **** 	/* Put syncword at start of buffer
2812:bluetooth_rxtx.c **** 	 * DGS: fix this later, we don't know number of syncword bytes, etc
2813:bluetooth_rxtx.c **** 	 */
2814:bluetooth_rxtx.c **** 	reg_val = cc2400_get(SYNCH);
 7935              		.loc 1 2814 0
 7936 0004 2D20     		movs	r0, #45
 7937 0006 FFF7FEFF 		bl	cc2400_get
 7938              	.LVL845:
2815:bluetooth_rxtx.c **** 	buf[0] = (reg_val >> 8) & 0xFF;
 7939              		.loc 1 2815 0
 7940 000a 030A     		lsrs	r3, r0, #8
2816:bluetooth_rxtx.c **** 	buf[1] = reg_val & 0xFF;
 7941              		.loc 1 2816 0
 7942 000c 8DF80500 		strb	r0, [sp, #5]
2817:bluetooth_rxtx.c **** 	reg_val = cc2400_get(SYNCL);
 7943              		.loc 1 2817 0
 7944 0010 2C20     		movs	r0, #44
 7945              	.LVL846:
2815:bluetooth_rxtx.c **** 	buf[0] = (reg_val >> 8) & 0xFF;
 7946              		.loc 1 2815 0
 7947 0012 8DF80430 		strb	r3, [sp, #4]
 7948              		.loc 1 2817 0
 7949 0016 FFF7FEFF 		bl	cc2400_get
 7950              	.LVL847:
2818:bluetooth_rxtx.c **** 	buf[2] = (reg_val >> 8) & 0xFF;
 7951              		.loc 1 2818 0
 7952 001a 030A     		lsrs	r3, r0, #8
 7953 001c 8DF80630 		strb	r3, [sp, #6]
2819:bluetooth_rxtx.c **** 	buf[3] = reg_val & 0xFF;
 7954              		.loc 1 2819 0
ARM GAS  /tmp/ccyBazZt.s 			page 215


 7955 0020 8DF80700 		strb	r0, [sp, #7]
2820:bluetooth_rxtx.c **** 
2821:bluetooth_rxtx.c **** 	usb_queue_init();
 7956              		.loc 1 2821 0
 7957 0024 FFF7FEFF 		bl	usb_queue_init
 7958              	.LVL848:
2822:bluetooth_rxtx.c **** 	clkn_start();
 7959              		.loc 1 2822 0
 7960 0028 FFF7FEFF 		bl	clkn_start
 7961              	.LVL849:
 7962              	.L821:
2823:bluetooth_rxtx.c **** 
2824:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 7963              		.loc 1 2824 0 discriminator 1
 7964 002c FFF7FEFF 		bl	cc2400_status
 7965              	.LVL850:
 7966 0030 4106     		lsls	r1, r0, #25
 7967 0032 FBD5     		bpl	.L821
2825:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 7968              		.loc 1 2825 0
 7969 0034 6120     		movs	r0, #97
 7970 0036 FFF7FEFF 		bl	cc2400_strobe
 7971              	.LVL851:
 7972              	.L822:
2826:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 7973              		.loc 1 2826 0 discriminator 1
 7974 003a FFF7FEFF 		bl	cc2400_status
 7975              	.LVL852:
 7976 003e 4207     		lsls	r2, r0, #29
 7977 0040 FBD5     		bpl	.L822
2827:bluetooth_rxtx.c **** 	RXLED_SET;
 7978              		.loc 1 2827 0
 7979 0042 1022     		movs	r2, #16
2828:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2829:bluetooth_rxtx.c **** 		PAEN_SET;
 7980              		.loc 1 2829 0
 7981 0044 8021     		movs	r1, #128
2827:bluetooth_rxtx.c **** 	RXLED_SET;
 7982              		.loc 1 2827 0
 7983 0046 134C     		ldr	r4, .L833
2830:bluetooth_rxtx.c **** 		HGM_SET;
2831:bluetooth_rxtx.c **** #endif
2832:bluetooth_rxtx.c **** 	while (1) {
2833:bluetooth_rxtx.c **** 		while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
2834:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
2835:bluetooth_rxtx.c **** 		USRLED_CLR;
 7984              		.loc 1 2835 0
 7985 0048 0225     		movs	r5, #2
2827:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 7986              		.loc 1 2827 0
 7987 004a 2260     		str	r2, [r4]
2829:bluetooth_rxtx.c **** 		HGM_SET;
 7988              		.loc 1 2829 0
 7989 004c 124A     		ldr	r2, .L833+4
 7990              		.loc 1 2835 0
 7991 004e 134F     		ldr	r7, .L833+8
2829:bluetooth_rxtx.c **** 		HGM_SET;
ARM GAS  /tmp/ccyBazZt.s 			page 216


 7992              		.loc 1 2829 0
 7993 0050 1160     		str	r1, [r2]
2830:bluetooth_rxtx.c **** 		HGM_SET;
 7994              		.loc 1 2830 0
 7995 0052 4FF48071 		mov	r1, #256
2836:bluetooth_rxtx.c **** 		while (!(cc2400_status() & SYNC_RECEIVED));
2837:bluetooth_rxtx.c **** 		USRLED_SET;
2838:bluetooth_rxtx.c **** 
2839:bluetooth_rxtx.c **** 		cc2400_fifo_read(len, buf+4);
2840:bluetooth_rxtx.c **** 		enqueue(BR_PACKET, buf);
2841:bluetooth_rxtx.c **** 		handle_usb(clkn);
 7996              		.loc 1 2841 0
 7997 0056 124E     		ldr	r6, .L833+12
2830:bluetooth_rxtx.c **** #endif
 7998              		.loc 1 2830 0
 7999 0058 1160     		str	r1, [r2]
 8000              	.L823:
2833:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 8001              		.loc 1 2833 0 discriminator 1
 8002 005a 0E20     		movs	r0, #14
 8003 005c FFF7FEFF 		bl	cc2400_get
 8004              	.LVL853:
 8005 0060 00F01F00 		and	r0, r0, #31
 8006 0064 0F28     		cmp	r0, #15
 8007 0066 F8D1     		bne	.L823
2834:bluetooth_rxtx.c **** 		USRLED_CLR;
 8008              		.loc 1 2834 0
 8009 0068 6220     		movs	r0, #98
 8010 006a FFF7FEFF 		bl	cc2400_strobe
 8011              	.LVL854:
2835:bluetooth_rxtx.c **** 		while (!(cc2400_status() & SYNC_RECEIVED));
 8012              		.loc 1 2835 0
 8013 006e 3D60     		str	r5, [r7]
 8014              	.L824:
2836:bluetooth_rxtx.c **** 		USRLED_SET;
 8015              		.loc 1 2836 0 discriminator 1
 8016 0070 FFF7FEFF 		bl	cc2400_status
 8017              	.LVL855:
 8018 0074 C306     		lsls	r3, r0, #27
 8019 0076 FBD5     		bpl	.L824
2839:bluetooth_rxtx.c **** 		enqueue(BR_PACKET, buf);
 8020              		.loc 1 2839 0
 8021 0078 02A9     		add	r1, sp, #8
2837:bluetooth_rxtx.c **** 
 8022              		.loc 1 2837 0
 8023 007a 2560     		str	r5, [r4]
2839:bluetooth_rxtx.c **** 		enqueue(BR_PACKET, buf);
 8024              		.loc 1 2839 0
 8025 007c 2020     		movs	r0, #32
 8026 007e FFF7FEFF 		bl	cc2400_fifo_read
 8027              	.LVL856:
2840:bluetooth_rxtx.c **** 		handle_usb(clkn);
 8028              		.loc 1 2840 0
 8029 0082 01A9     		add	r1, sp, #4
 8030              	.LVL857:
 8031 0084 0020     		movs	r0, #0
 8032 0086 FFF7FEFF 		bl	enqueue
ARM GAS  /tmp/ccyBazZt.s 			page 217


 8033              	.LVL858:
 8034              		.loc 1 2841 0
 8035 008a 3068     		ldr	r0, [r6]
 8036 008c FFF7FEFF 		bl	handle_usb
 8037              	.LVL859:
2833:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 8038              		.loc 1 2833 0
 8039 0090 E3E7     		b	.L823
 8040              	.L834:
 8041 0092 00BF     		.align	2
 8042              	.L833:
 8043 0094 38C00920 		.word	537509944
 8044 0098 58C00920 		.word	537509976
 8045 009c 3CC00920 		.word	537509948
 8046 00a0 00000000 		.word	clkn
 8047              		.cfi_endproc
 8048              	.LFE37:
 8050              		.section	.text.rx_generic,"ax",%progbits
 8051              		.align	1
 8052              		.global	rx_generic
 8053              		.syntax unified
 8054              		.thumb
 8055              		.thumb_func
 8056              		.fpu softvfp
 8058              	rx_generic:
 8059              	.LFB38:
2842:bluetooth_rxtx.c **** 	}
2843:bluetooth_rxtx.c **** }
2844:bluetooth_rxtx.c **** 
2845:bluetooth_rxtx.c **** void rx_generic(void) {
 8060              		.loc 1 2845 0
 8061              		.cfi_startproc
 8062              		@ args = 0, pretend = 0, frame = 0
 8063              		@ frame_needed = 0, uses_anonymous_args = 0
 8064 0000 08B5     		push	{r3, lr}
 8065              		.cfi_def_cfa_offset 8
 8066              		.cfi_offset 3, -8
 8067              		.cfi_offset 14, -4
2846:bluetooth_rxtx.c **** 	// Check for packet mode
2847:bluetooth_rxtx.c **** 	if(cc2400_get(GRMDM) && 0x0400) {
 8068              		.loc 1 2847 0
 8069 0002 2020     		movs	r0, #32
 8070 0004 FFF7FEFF 		bl	cc2400_get
 8071              	.LVL860:
 8072 0008 08B1     		cbz	r0, .L836
2848:bluetooth_rxtx.c **** 		rx_generic_sync();
 8073              		.loc 1 2848 0
 8074 000a FFF7FEFF 		bl	rx_generic_sync
 8075              	.LVL861:
 8076              	.L836:
2849:bluetooth_rxtx.c **** 	} else {
2850:bluetooth_rxtx.c **** 		modulation = MOD_NONE;
 8077              		.loc 1 2850 0
 8078 000e 0322     		movs	r2, #3
 8079 0010 024B     		ldr	r3, .L837
 8080 0012 1A70     		strb	r2, [r3]
2851:bluetooth_rxtx.c **** 		bt_stream_rx();
ARM GAS  /tmp/ccyBazZt.s 			page 218


2852:bluetooth_rxtx.c **** 	}
2853:bluetooth_rxtx.c **** }
 8081              		.loc 1 2853 0
 8082 0014 BDE80840 		pop	{r3, lr}
 8083              		.cfi_restore 14
 8084              		.cfi_restore 3
 8085              		.cfi_def_cfa_offset 0
2851:bluetooth_rxtx.c **** 		bt_stream_rx();
 8086              		.loc 1 2851 0
 8087 0018 FFF7FEBF 		b	bt_stream_rx
 8088              	.LVL862:
 8089              	.L838:
 8090              		.align	2
 8091              	.L837:
 8092 001c 00000000 		.word	.LANCHOR1
 8093              		.cfi_endproc
 8094              	.LFE38:
 8096              		.section	.text.tx_generic,"ax",%progbits
 8097              		.align	1
 8098              		.global	tx_generic
 8099              		.syntax unified
 8100              		.thumb
 8101              		.thumb_func
 8102              		.fpu softvfp
 8104              	tx_generic:
 8105              	.LFB39:
2854:bluetooth_rxtx.c **** 
2855:bluetooth_rxtx.c **** void tx_generic(void) {
 8106              		.loc 1 2855 0
 8107              		.cfi_startproc
 8108              		@ args = 0, pretend = 0, frame = 0
 8109              		@ frame_needed = 0, uses_anonymous_args = 0
 8110 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 8111              		.cfi_def_cfa_offset 24
 8112              		.cfi_offset 4, -24
 8113              		.cfi_offset 5, -20
 8114              		.cfi_offset 6, -16
 8115              		.cfi_offset 7, -12
 8116              		.cfi_offset 8, -8
 8117              		.cfi_offset 14, -4
2856:bluetooth_rxtx.c **** 	u16 synch, syncl;
2857:bluetooth_rxtx.c **** 	u8 prev_mode = mode;
2858:bluetooth_rxtx.c **** 
2859:bluetooth_rxtx.c **** 	mode = MODE_TX_GENERIC;
 8118              		.loc 1 2859 0
 8119 0004 1023     		movs	r3, #16
2857:bluetooth_rxtx.c **** 
 8120              		.loc 1 2857 0
 8121 0006 354D     		ldr	r5, .L852
2860:bluetooth_rxtx.c **** 
2861:bluetooth_rxtx.c **** 	// Save existing syncword
2862:bluetooth_rxtx.c **** 	synch = cc2400_get(SYNCH);
 8122              		.loc 1 2862 0
 8123 0008 2D20     		movs	r0, #45
2857:bluetooth_rxtx.c **** 
 8124              		.loc 1 2857 0
 8125 000a 6E7C     		ldrb	r6, [r5, #17]	@ zero_extendqisi2
ARM GAS  /tmp/ccyBazZt.s 			page 219


2859:bluetooth_rxtx.c **** 
 8126              		.loc 1 2859 0
 8127 000c 6B74     		strb	r3, [r5, #17]
 8128              		.loc 1 2862 0
 8129 000e FFF7FEFF 		bl	cc2400_get
 8130              	.LVL863:
 8131 0012 8046     		mov	r8, r0
2863:bluetooth_rxtx.c **** 	syncl = cc2400_get(SYNCL);
 8132              		.loc 1 2863 0
 8133 0014 2C20     		movs	r0, #44
 8134 0016 FFF7FEFF 		bl	cc2400_get
 8135              	.LVL864:
2864:bluetooth_rxtx.c **** 
2865:bluetooth_rxtx.c **** 	cc2400_set(SYNCH, tx_pkt.synch);
 8136              		.loc 1 2865 0
 8137 001a 314C     		ldr	r4, .L852+4
2863:bluetooth_rxtx.c **** 	syncl = cc2400_get(SYNCL);
 8138              		.loc 1 2863 0
 8139 001c 0746     		mov	r7, r0
 8140              		.loc 1 2865 0
 8141 001e 2188     		ldrh	r1, [r4]
 8142 0020 2D20     		movs	r0, #45
 8143 0022 FFF7FEFF 		bl	cc2400_set
 8144              	.LVL865:
2866:bluetooth_rxtx.c **** 	cc2400_set(SYNCL, tx_pkt.syncl);
 8145              		.loc 1 2866 0
 8146 0026 6188     		ldrh	r1, [r4, #2]
 8147 0028 2C20     		movs	r0, #44
 8148 002a FFF7FEFF 		bl	cc2400_set
 8149              	.LVL866:
2867:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0057);
 8150              		.loc 1 2867 0
 8151 002e 5721     		movs	r1, #87
 8152 0030 0320     		movs	r0, #3
 8153 0032 FFF7FEFF 		bl	cc2400_set
 8154              	.LVL867:
2868:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);
 8155              		.loc 1 2868 0
 8156 0036 41F24B31 		movw	r1, #4939
 8157 003a 1420     		movs	r0, #20
 8158 003c FFF7FEFF 		bl	cc2400_set
 8159              	.LVL868:
2869:bluetooth_rxtx.c **** 	cc2400_set(GRMDM, 0x0f61);
 8160              		.loc 1 2869 0
 8161 0040 40F66171 		movw	r1, #3937
 8162 0044 2020     		movs	r0, #32
 8163 0046 FFF7FEFF 		bl	cc2400_set
 8164              	.LVL869:
2870:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, tx_pkt.channel);
 8165              		.loc 1 2870 0
 8166 004a A188     		ldrh	r1, [r4, #4]
 8167 004c 0220     		movs	r0, #2
 8168 004e FFF7FEFF 		bl	cc2400_set
 8169              	.LVL870:
2871:bluetooth_rxtx.c **** 	cc2400_set(FREND, tx_pkt.pa_level);
 8170              		.loc 1 2871 0
 8171 0052 E179     		ldrb	r1, [r4, #7]	@ zero_extendqisi2
ARM GAS  /tmp/ccyBazZt.s 			page 220


 8172 0054 0520     		movs	r0, #5
2857:bluetooth_rxtx.c **** 
 8173              		.loc 1 2857 0
 8174 0056 F6B2     		uxtb	r6, r6
 8175              	.LVL871:
 8176              		.loc 1 2871 0
 8177 0058 FFF7FEFF 		bl	cc2400_set
 8178              	.LVL872:
 8179              	.L840:
2872:bluetooth_rxtx.c **** 
2873:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 8180              		.loc 1 2873 0 discriminator 1
 8181 005c FFF7FEFF 		bl	cc2400_status
 8182              	.LVL873:
 8183 0060 4106     		lsls	r1, r0, #25
 8184 0062 FBD5     		bpl	.L840
2874:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 8185              		.loc 1 2874 0
 8186 0064 6120     		movs	r0, #97
 8187 0066 FFF7FEFF 		bl	cc2400_strobe
 8188              	.LVL874:
 8189              	.L841:
2875:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 8190              		.loc 1 2875 0 discriminator 1
 8191 006a FFF7FEFF 		bl	cc2400_status
 8192              	.LVL875:
 8193 006e 4207     		lsls	r2, r0, #29
 8194 0070 FBD5     		bpl	.L841
2876:bluetooth_rxtx.c **** 	TXLED_SET;
 8195              		.loc 1 2876 0
 8196 0072 4FF48072 		mov	r2, #256
 8197 0076 1B4B     		ldr	r3, .L852+8
 8198 0078 1A60     		str	r2, [r3]
2877:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2878:bluetooth_rxtx.c **** 		PAEN_SET;
 8199              		.loc 1 2878 0
 8200 007a 8022     		movs	r2, #128
 8201 007c 1A62     		str	r2, [r3, #32]
 8202              	.L842:
2879:bluetooth_rxtx.c **** #endif
2880:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 8203              		.loc 1 2880 0 discriminator 1
 8204 007e 0E20     		movs	r0, #14
 8205 0080 FFF7FEFF 		bl	cc2400_get
 8206              	.LVL876:
 8207 0084 00F01F00 		and	r0, r0, #31
 8208 0088 0F28     		cmp	r0, #15
 8209 008a F8D1     		bne	.L842
2881:bluetooth_rxtx.c **** 
2882:bluetooth_rxtx.c **** 	cc2400_fifo_write(tx_pkt.length, tx_pkt.data);
 8210              		.loc 1 2882 0
 8211 008c A079     		ldrb	r0, [r4, #6]	@ zero_extendqisi2
 8212 008e 1649     		ldr	r1, .L852+12
 8213 0090 FFF7FEFF 		bl	cc2400_fifo_write
 8214              	.LVL877:
2883:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 8215              		.loc 1 2883 0
ARM GAS  /tmp/ccyBazZt.s 			page 221


 8216 0094 6320     		movs	r0, #99
 8217 0096 FFF7FEFF 		bl	cc2400_strobe
 8218              	.LVL878:
 8219              	.L843:
2884:bluetooth_rxtx.c **** 
2885:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 8220              		.loc 1 2885 0 discriminator 1
 8221 009a 0E20     		movs	r0, #14
 8222 009c FFF7FEFF 		bl	cc2400_get
 8223              	.LVL879:
 8224 00a0 00F01F00 		and	r0, r0, #31
 8225 00a4 0F28     		cmp	r0, #15
 8226 00a6 F8D1     		bne	.L843
2886:bluetooth_rxtx.c **** 	TXLED_CLR;
 8227              		.loc 1 2886 0
 8228 00a8 4FF48072 		mov	r2, #256
 8229 00ac 0F4B     		ldr	r3, .L852+16
2887:bluetooth_rxtx.c **** 
2888:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 8230              		.loc 1 2888 0
 8231 00ae 6420     		movs	r0, #100
2886:bluetooth_rxtx.c **** 	TXLED_CLR;
 8232              		.loc 1 2886 0
 8233 00b0 1A60     		str	r2, [r3]
 8234              		.loc 1 2888 0
 8235 00b2 FFF7FEFF 		bl	cc2400_strobe
 8236              	.LVL880:
 8237              	.L844:
2889:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 8238              		.loc 1 2889 0 discriminator 1
 8239 00b6 FFF7FEFF 		bl	cc2400_status
 8240              	.LVL881:
 8241 00ba 4307     		lsls	r3, r0, #29
 8242 00bc FBD4     		bmi	.L844
2890:bluetooth_rxtx.c **** 
2891:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2892:bluetooth_rxtx.c **** 	PAEN_CLR;
 8243              		.loc 1 2892 0
 8244 00be 8022     		movs	r2, #128
 8245 00c0 0B4B     		ldr	r3, .L852+20
2893:bluetooth_rxtx.c **** #endif
2894:bluetooth_rxtx.c **** 
2895:bluetooth_rxtx.c **** 	// Restore state
2896:bluetooth_rxtx.c **** 	cc2400_set(SYNCH, synch);
 8246              		.loc 1 2896 0
 8247 00c2 4146     		mov	r1, r8
2892:bluetooth_rxtx.c **** #endif
 8248              		.loc 1 2892 0
 8249 00c4 1A60     		str	r2, [r3]
 8250              		.loc 1 2896 0
 8251 00c6 2D20     		movs	r0, #45
 8252 00c8 FFF7FEFF 		bl	cc2400_set
 8253              	.LVL882:
2897:bluetooth_rxtx.c **** 	cc2400_set(SYNCL, syncl);
 8254              		.loc 1 2897 0
 8255 00cc 3946     		mov	r1, r7
 8256 00ce 2C20     		movs	r0, #44
ARM GAS  /tmp/ccyBazZt.s 			page 222


 8257 00d0 FFF7FEFF 		bl	cc2400_set
 8258              	.LVL883:
2898:bluetooth_rxtx.c **** 	requested_mode = prev_mode;
 8259              		.loc 1 2898 0
 8260 00d4 AE74     		strb	r6, [r5, #18]
 8261 00d6 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 8262              	.LVL884:
 8263              	.L853:
 8264 00da 00BF     		.align	2
 8265              	.L852:
 8266 00dc 00000000 		.word	.LANCHOR1
 8267 00e0 00000000 		.word	tx_pkt
 8268 00e4 38C00920 		.word	537509944
 8269 00e8 08000000 		.word	tx_pkt+8
 8270 00ec 3CC00920 		.word	537509948
 8271 00f0 5CC00920 		.word	537509980
 8272              		.cfi_endproc
 8273              	.LFE39:
 8275              		.section	.text.specan,"ax",%progbits
 8276              		.align	1
 8277              		.global	specan
 8278              		.syntax unified
 8279              		.thumb
 8280              		.thumb_func
 8281              		.fpu softvfp
 8283              	specan:
 8284              	.LFB40:
2899:bluetooth_rxtx.c **** }
2900:bluetooth_rxtx.c **** 
2901:bluetooth_rxtx.c **** /* spectrum analysis */
2902:bluetooth_rxtx.c **** void specan()
2903:bluetooth_rxtx.c **** {
 8285              		.loc 1 2903 0
 8286              		.cfi_startproc
 8287              		@ args = 0, pretend = 0, frame = 56
 8288              		@ frame_needed = 0, uses_anonymous_args = 0
 8289 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 8290              		.cfi_def_cfa_offset 32
 8291              		.cfi_offset 4, -32
 8292              		.cfi_offset 5, -28
 8293              		.cfi_offset 6, -24
 8294              		.cfi_offset 7, -20
 8295              		.cfi_offset 8, -16
 8296              		.cfi_offset 9, -12
 8297              		.cfi_offset 10, -8
 8298              		.cfi_offset 14, -4
 8299 0004 8EB0     		sub	sp, sp, #56
 8300              		.cfi_def_cfa_offset 88
 8301              	.LVL885:
2904:bluetooth_rxtx.c **** 	u16 f;
2905:bluetooth_rxtx.c **** 	u8 i = 0;
2906:bluetooth_rxtx.c **** 	u8 buf[DMA_SIZE];
2907:bluetooth_rxtx.c **** 
2908:bluetooth_rxtx.c **** 	RXLED_SET;
 8302              		.loc 1 2908 0
 8303 0006 1022     		movs	r2, #16
 8304 0008 3C4B     		ldr	r3, .L874
ARM GAS  /tmp/ccyBazZt.s 			page 223


 8305 000a 1A60     		str	r2, [r3]
2909:bluetooth_rxtx.c **** 
2910:bluetooth_rxtx.c **** 	usb_queue_init();
 8306              		.loc 1 2910 0
 8307 000c FFF7FEFF 		bl	usb_queue_init
 8308              	.LVL886:
2911:bluetooth_rxtx.c **** 	clkn_start();
 8309              		.loc 1 2911 0
 8310 0010 FFF7FEFF 		bl	clkn_start
 8311              	.LVL887:
2912:bluetooth_rxtx.c **** 
2913:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2914:bluetooth_rxtx.c **** 	PAEN_SET;
 8312              		.loc 1 2914 0
 8313 0014 8022     		movs	r2, #128
 8314 0016 3A4B     		ldr	r3, .L874+4
2915:bluetooth_rxtx.c **** 	//HGM_SET;
2916:bluetooth_rxtx.c **** #endif
2917:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 8315              		.loc 1 2917 0
 8316 0018 42F62231 		movw	r1, #11042
2914:bluetooth_rxtx.c **** 	//HGM_SET;
 8317              		.loc 1 2914 0
 8318 001c 1A60     		str	r2, [r3]
 8319              		.loc 1 2917 0
 8320 001e 1220     		movs	r0, #18
 8321 0020 FFF7FEFF 		bl	cc2400_set
 8322              	.LVL888:
2918:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 8323              		.loc 1 2918 0
 8324 0024 41F24B31 		movw	r1, #4939
 8325 0028 1420     		movs	r0, #20
 8326 002a FFF7FEFF 		bl	cc2400_set
 8327              	.LVL889:
2919:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 8328              		.loc 1 2919 0
 8329 002e 40F20111 		movw	r1, #257
 8330 0032 2020     		movs	r0, #32
 8331 0034 FFF7FEFF 		bl	cc2400_set
 8332              	.LVL890:
2920:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 8333              		.loc 1 2920 0
 8334 0038 2921     		movs	r1, #41
 8335 003a 0320     		movs	r0, #3
 8336 003c FFF7FEFF 		bl	cc2400_set
 8337              	.LVL891:
 8338              	.L855:
2921:bluetooth_rxtx.c **** 	//FIXME maybe set RSSI.RSSI_FILT
2922:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 8339              		.loc 1 2922 0 discriminator 1
 8340 0040 FFF7FEFF 		bl	cc2400_status
 8341              	.LVL892:
 8342 0044 4106     		lsls	r1, r0, #25
 8343 0046 FBD5     		bpl	.L855
 8344              	.L868:
2923:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 8345              		.loc 1 2923 0 discriminator 1
ARM GAS  /tmp/ccyBazZt.s 			page 224


 8346 0048 FFF7FEFF 		bl	cc2400_status
 8347              	.LVL893:
 8348 004c 10F00404 		ands	r4, r0, #4
 8349 0050 FAD1     		bne	.L868
2924:bluetooth_rxtx.c **** 
2925:bluetooth_rxtx.c **** 	while (requested_mode == MODE_SPECAN) {
 8350              		.loc 1 2925 0
 8351 0052 DFF8B490 		ldr	r9, .L874+12
2926:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 8352              		.loc 1 2926 0
 8353 0056 DFF8B480 		ldr	r8, .L874+16
 8354              	.LVL894:
 8355              	.L864:
2925:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 8356              		.loc 1 2925 0
 8357 005a 99F81230 		ldrb	r3, [r9, #18]	@ zero_extendqisi2
 8358 005e 042B     		cmp	r3, #4
 8359 0060 05D0     		beq	.L865
2927:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
2928:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
2929:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
2930:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
2931:bluetooth_rxtx.c **** 
2932:bluetooth_rxtx.c **** 			/* give the CC2400 time to acquire RSSI reading */
2933:bluetooth_rxtx.c **** 			volatile u32 j = 500; while (--j); //FIXME crude delay
2934:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
2935:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
2936:bluetooth_rxtx.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
2937:bluetooth_rxtx.c **** 			i++;
2938:bluetooth_rxtx.c **** 			if (i == 16) {
2939:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
2940:bluetooth_rxtx.c **** 				i = 0;
2941:bluetooth_rxtx.c **** 
2942:bluetooth_rxtx.c **** 				handle_usb(clkn);
2943:bluetooth_rxtx.c **** 			}
2944:bluetooth_rxtx.c **** 
2945:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
2946:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
2947:bluetooth_rxtx.c **** 		}
2948:bluetooth_rxtx.c **** 	}
2949:bluetooth_rxtx.c **** 	RXLED_CLR;
 8360              		.loc 1 2949 0
 8361 0062 1022     		movs	r2, #16
 8362 0064 274B     		ldr	r3, .L874+8
 8363 0066 1A60     		str	r2, [r3]
2950:bluetooth_rxtx.c **** }
 8364              		.loc 1 2950 0
 8365 0068 0EB0     		add	sp, sp, #56
 8366              		.cfi_remember_state
 8367              		.cfi_def_cfa_offset 32
 8368              		@ sp needed
 8369 006a BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 8370              	.LVL895:
 8371              	.L865:
 8372              		.cfi_restore_state
2926:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 8373              		.loc 1 2926 0
ARM GAS  /tmp/ccyBazZt.s 			page 225


 8374 006e B8F85250 		ldrh	r5, [r8, #82]
 8375              	.LBB154:
2942:bluetooth_rxtx.c **** 			}
 8376              		.loc 1 2942 0
 8377 0072 DFF89CA0 		ldr	r10, .L874+20
 8378              	.LBE154:
2926:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 8379              		.loc 1 2926 0
 8380 0076 ADB2     		uxth	r5, r5
 8381              	.LVL896:
 8382              	.L858:
2926:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 8383              		.loc 1 2926 0 is_stmt 0 discriminator 1
 8384 0078 B8F85430 		ldrh	r3, [r8, #84]
 8385 007c 9BB2     		uxth	r3, r3
 8386 007e AB42     		cmp	r3, r5
 8387 0080 EBDB     		blt	.L864
 8388              	.LBB155:
2927:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 8389              		.loc 1 2927 0 is_stmt 1
 8390 0082 691E     		subs	r1, r5, #1
 8391 0084 0220     		movs	r0, #2
 8392 0086 89B2     		uxth	r1, r1
 8393 0088 FFF7FEFF 		bl	cc2400_set
 8394              	.LVL897:
2928:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 8395              		.loc 1 2928 0
 8396 008c 6120     		movs	r0, #97
 8397 008e FFF7FEFF 		bl	cc2400_strobe
 8398              	.LVL898:
 8399              	.L859:
2929:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 8400              		.loc 1 2929 0 discriminator 1
 8401 0092 FFF7FEFF 		bl	cc2400_status
 8402              	.LVL899:
 8403 0096 4207     		lsls	r2, r0, #29
 8404 0098 FBD5     		bpl	.L859
2930:bluetooth_rxtx.c **** 
 8405              		.loc 1 2930 0
 8406 009a 6220     		movs	r0, #98
 8407 009c FFF7FEFF 		bl	cc2400_strobe
 8408              	.LVL900:
2933:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 8409              		.loc 1 2933 0
 8410 00a0 4FF4FA73 		mov	r3, #500
 8411 00a4 0093     		str	r3, [sp]
 8412              	.L860:
2933:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 8413              		.loc 1 2933 0 is_stmt 0 discriminator 2
 8414 00a6 009E     		ldr	r6, [sp]
 8415 00a8 013E     		subs	r6, r6, #1
 8416 00aa 0096     		str	r6, [sp]
 8417 00ac 002E     		cmp	r6, #0
 8418 00ae FAD1     		bne	.L860
2934:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 8419              		.loc 1 2934 0 is_stmt 1
 8420 00b0 04EB4407 		add	r7, r4, r4, lsl #1
ARM GAS  /tmp/ccyBazZt.s 			page 226


 8421 00b4 0EAB     		add	r3, sp, #56
 8422 00b6 1F44     		add	r7, r7, r3
2936:bluetooth_rxtx.c **** 			i++;
 8423              		.loc 1 2936 0
 8424 00b8 0620     		movs	r0, #6
2934:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 8425              		.loc 1 2934 0
 8426 00ba 2B0A     		lsrs	r3, r5, #8
 8427 00bc 07F8343C 		strb	r3, [r7, #-52]
2935:bluetooth_rxtx.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
 8428              		.loc 1 2935 0
 8429 00c0 07F8335C 		strb	r5, [r7, #-51]
2936:bluetooth_rxtx.c **** 			i++;
 8430              		.loc 1 2936 0
 8431 00c4 FFF7FEFF 		bl	cc2400_get
 8432              	.LVL901:
2937:bluetooth_rxtx.c **** 			if (i == 16) {
 8433              		.loc 1 2937 0
 8434 00c8 0134     		adds	r4, r4, #1
 8435              	.LVL902:
 8436 00ca E4B2     		uxtb	r4, r4
 8437              	.LVL903:
2936:bluetooth_rxtx.c **** 			i++;
 8438              		.loc 1 2936 0
 8439 00cc 000A     		lsrs	r0, r0, #8
2938:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
 8440              		.loc 1 2938 0
 8441 00ce 102C     		cmp	r4, #16
2936:bluetooth_rxtx.c **** 			i++;
 8442              		.loc 1 2936 0
 8443 00d0 07F8320C 		strb	r0, [r7, #-50]
2938:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
 8444              		.loc 1 2938 0
 8445 00d4 08D1     		bne	.L861
2939:bluetooth_rxtx.c **** 				i = 0;
 8446              		.loc 1 2939 0
 8447 00d6 01A9     		add	r1, sp, #4
 8448 00d8 0420     		movs	r0, #4
 8449 00da FFF7FEFF 		bl	enqueue
 8450              	.LVL904:
2942:bluetooth_rxtx.c **** 			}
 8451              		.loc 1 2942 0
 8452 00de DAF80000 		ldr	r0, [r10]
 8453 00e2 FFF7FEFF 		bl	handle_usb
 8454              	.LVL905:
2940:bluetooth_rxtx.c **** 
 8455              		.loc 1 2940 0
 8456 00e6 3446     		mov	r4, r6
 8457              	.LVL906:
 8458              	.L861:
2945:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 8459              		.loc 1 2945 0
 8460 00e8 6420     		movs	r0, #100
 8461 00ea FFF7FEFF 		bl	cc2400_strobe
 8462              	.LVL907:
 8463              	.L862:
2946:bluetooth_rxtx.c **** 		}
ARM GAS  /tmp/ccyBazZt.s 			page 227


 8464              		.loc 1 2946 0 discriminator 1
 8465 00ee FFF7FEFF 		bl	cc2400_status
 8466              	.LVL908:
 8467 00f2 4307     		lsls	r3, r0, #29
 8468 00f4 FBD4     		bmi	.L862
 8469              	.LBE155:
2926:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 8470              		.loc 1 2926 0 discriminator 2
 8471 00f6 0135     		adds	r5, r5, #1
 8472              	.LVL909:
 8473 00f8 ADB2     		uxth	r5, r5
 8474              	.LVL910:
 8475 00fa BDE7     		b	.L858
 8476              	.L875:
 8477              		.align	2
 8478              	.L874:
 8479 00fc 38C00920 		.word	537509944
 8480 0100 58C00920 		.word	537509976
 8481 0104 3CC00920 		.word	537509948
 8482 0108 00000000 		.word	.LANCHOR1
 8483 010c 00000000 		.word	.LANCHOR0
 8484 0110 00000000 		.word	clkn
 8485              		.cfi_endproc
 8486              	.LFE40:
 8488              		.section	.text.led_specan,"ax",%progbits
 8489              		.align	1
 8490              		.global	led_specan
 8491              		.syntax unified
 8492              		.thumb
 8493              		.thumb_func
 8494              		.fpu softvfp
 8496              	led_specan:
 8497              	.LFB41:
2951:bluetooth_rxtx.c **** 
2952:bluetooth_rxtx.c **** /* LED based spectrum analysis */
2953:bluetooth_rxtx.c **** void led_specan()
2954:bluetooth_rxtx.c **** {
 8498              		.loc 1 2954 0
 8499              		.cfi_startproc
 8500              		@ args = 0, pretend = 0, frame = 16
 8501              		@ frame_needed = 0, uses_anonymous_args = 0
 8502 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 8503              		.cfi_def_cfa_offset 20
 8504              		.cfi_offset 4, -20
 8505              		.cfi_offset 5, -16
 8506              		.cfi_offset 6, -12
 8507              		.cfi_offset 7, -8
 8508              		.cfi_offset 14, -4
 8509 0002 85B0     		sub	sp, sp, #20
 8510              		.cfi_def_cfa_offset 40
 8511              	.LVL911:
2955:bluetooth_rxtx.c **** 	int8_t lvl;
2956:bluetooth_rxtx.c **** 	u8 i = 0;
2957:bluetooth_rxtx.c **** 	u16 channels[3] = {2412, 2437, 2462};
 8512              		.loc 1 2957 0
 8513 0004 40F66C13 		movw	r3, #2412
 8514 0008 ADF80830 		strh	r3, [sp, #8]	@ movhi
ARM GAS  /tmp/ccyBazZt.s 			page 228


 8515 000c 40F68513 		movw	r3, #2437
 8516 0010 ADF80A30 		strh	r3, [sp, #10]	@ movhi
 8517 0014 40F69E13 		movw	r3, #2462
2958:bluetooth_rxtx.c **** 	//void (*set[3]) = {TXLED_SET, RXLED_SET, USRLED_SET};
2959:bluetooth_rxtx.c **** 	//void (*clr[3]) = {TXLED_CLR, RXLED_CLR, USRLED_CLR};
2960:bluetooth_rxtx.c **** 
2961:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2962:bluetooth_rxtx.c **** 	PAEN_SET;
 8518              		.loc 1 2962 0
 8519 0018 8022     		movs	r2, #128
2957:bluetooth_rxtx.c **** 	//void (*set[3]) = {TXLED_SET, RXLED_SET, USRLED_SET};
 8520              		.loc 1 2957 0
 8521 001a ADF80C30 		strh	r3, [sp, #12]	@ movhi
 8522              		.loc 1 2962 0
 8523 001e 3F4B     		ldr	r3, .L903
2963:bluetooth_rxtx.c **** 	//HGM_SET;
2964:bluetooth_rxtx.c **** #endif
2965:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 8524              		.loc 1 2965 0
 8525 0020 42F62231 		movw	r1, #11042
2962:bluetooth_rxtx.c **** 	//HGM_SET;
 8526              		.loc 1 2962 0
 8527 0024 1A60     		str	r2, [r3]
 8528              		.loc 1 2965 0
 8529 0026 1220     		movs	r0, #18
 8530 0028 FFF7FEFF 		bl	cc2400_set
 8531              	.LVL912:
2966:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 8532              		.loc 1 2966 0
 8533 002c 41F24B31 		movw	r1, #4939
 8534 0030 1420     		movs	r0, #20
 8535 0032 FFF7FEFF 		bl	cc2400_set
 8536              	.LVL913:
2967:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 8537              		.loc 1 2967 0
 8538 0036 40F20111 		movw	r1, #257
 8539 003a 2020     		movs	r0, #32
 8540 003c FFF7FEFF 		bl	cc2400_set
 8541              	.LVL914:
2968:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 8542              		.loc 1 2968 0
 8543 0040 2921     		movs	r1, #41
 8544 0042 0320     		movs	r0, #3
 8545 0044 FFF7FEFF 		bl	cc2400_set
 8546              	.LVL915:
2969:bluetooth_rxtx.c **** 	cc2400_set(RSSI,    0x00F1); // RSSI Sample over 2 symbols
 8547              		.loc 1 2969 0
 8548 0048 F121     		movs	r1, #241
 8549 004a 0620     		movs	r0, #6
 8550 004c FFF7FEFF 		bl	cc2400_set
 8551              	.LVL916:
 8552              	.L877:
2970:bluetooth_rxtx.c **** 
2971:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 8553              		.loc 1 2971 0 discriminator 1
 8554 0050 FFF7FEFF 		bl	cc2400_status
 8555              	.LVL917:
ARM GAS  /tmp/ccyBazZt.s 			page 229


 8556 0054 4106     		lsls	r1, r0, #25
 8557 0056 FBD5     		bpl	.L877
 8558              	.L895:
2972:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 8559              		.loc 1 2972 0 discriminator 1
 8560 0058 FFF7FEFF 		bl	cc2400_status
 8561              	.LVL918:
 8562 005c 10F00404 		ands	r4, r0, #4
 8563 0060 FAD1     		bne	.L895
2973:bluetooth_rxtx.c **** 
2974:bluetooth_rxtx.c **** 	while (requested_mode == MODE_LED_SPECAN) {
 8564              		.loc 1 2974 0
 8565 0062 2F4F     		ldr	r7, .L903+4
 8566              	.LBB156:
2975:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
2976:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
2977:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
2978:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
2979:bluetooth_rxtx.c **** 
2980:bluetooth_rxtx.c **** 		/* give the CC2400 time to acquire RSSI reading */
2981:bluetooth_rxtx.c **** 		volatile u32 j = 500; while (--j); //FIXME crude delay
2982:bluetooth_rxtx.c **** 		lvl = (int8_t)((cc2400_get(RSSI) >> 8) & 0xff);
2983:bluetooth_rxtx.c **** 		if (lvl > rssi_threshold) {
2984:bluetooth_rxtx.c **** 			switch (i) {
2985:bluetooth_rxtx.c **** 				case 0:
2986:bluetooth_rxtx.c **** 					TXLED_SET;
2987:bluetooth_rxtx.c **** 					break;
2988:bluetooth_rxtx.c **** 				case 1:
2989:bluetooth_rxtx.c **** 					RXLED_SET;
2990:bluetooth_rxtx.c **** 					break;
2991:bluetooth_rxtx.c **** 				case 2:
2992:bluetooth_rxtx.c **** 					USRLED_SET;
2993:bluetooth_rxtx.c **** 					break;
2994:bluetooth_rxtx.c **** 			}
2995:bluetooth_rxtx.c **** 		}
2996:bluetooth_rxtx.c **** 		else {
2997:bluetooth_rxtx.c **** 			switch (i) {
2998:bluetooth_rxtx.c **** 				case 0:
2999:bluetooth_rxtx.c **** 					TXLED_CLR;
3000:bluetooth_rxtx.c **** 					break;
3001:bluetooth_rxtx.c **** 				case 1:
3002:bluetooth_rxtx.c **** 					RXLED_CLR;
 8567              		.loc 1 3002 0
 8568 0064 2F4D     		ldr	r5, .L903+8
2989:bluetooth_rxtx.c **** 					break;
 8569              		.loc 1 2989 0
 8570 0066 304E     		ldr	r6, .L903+12
 8571              	.LVL919:
 8572              	.L891:
 8573              	.LBE156:
2974:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 8574              		.loc 1 2974 0
 8575 0068 BB7C     		ldrb	r3, [r7, #18]	@ zero_extendqisi2
 8576 006a 072B     		cmp	r3, #7
 8577 006c 01D0     		beq	.L892
3003:bluetooth_rxtx.c **** 					break;
3004:bluetooth_rxtx.c **** 				case 2:
ARM GAS  /tmp/ccyBazZt.s 			page 230


3005:bluetooth_rxtx.c **** 					USRLED_CLR;
3006:bluetooth_rxtx.c **** 					break;
3007:bluetooth_rxtx.c **** 			}
3008:bluetooth_rxtx.c **** 		}
3009:bluetooth_rxtx.c **** 
3010:bluetooth_rxtx.c **** 		i = (i+1) % 3;
3011:bluetooth_rxtx.c **** 
3012:bluetooth_rxtx.c **** 		handle_usb(clkn);
3013:bluetooth_rxtx.c **** 
3014:bluetooth_rxtx.c **** 		cc2400_strobe(SRFOFF);
3015:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
3016:bluetooth_rxtx.c **** 	}
3017:bluetooth_rxtx.c **** }
 8578              		.loc 1 3017 0
 8579 006e 05B0     		add	sp, sp, #20
 8580              		.cfi_remember_state
 8581              		.cfi_def_cfa_offset 20
 8582              		@ sp needed
 8583 0070 F0BD     		pop	{r4, r5, r6, r7, pc}
 8584              	.LVL920:
 8585              	.L892:
 8586              		.cfi_restore_state
 8587              	.LBB157:
2975:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 8588              		.loc 1 2975 0
 8589 0072 04AB     		add	r3, sp, #16
 8590 0074 03EB4403 		add	r3, r3, r4, lsl #1
 8591 0078 33F8081C 		ldrh	r1, [r3, #-8]
 8592 007c 0220     		movs	r0, #2
 8593 007e 0139     		subs	r1, r1, #1
 8594 0080 89B2     		uxth	r1, r1
 8595 0082 FFF7FEFF 		bl	cc2400_set
 8596              	.LVL921:
2976:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 8597              		.loc 1 2976 0
 8598 0086 6120     		movs	r0, #97
 8599 0088 FFF7FEFF 		bl	cc2400_strobe
 8600              	.LVL922:
 8601              	.L880:
2977:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 8602              		.loc 1 2977 0 discriminator 1
 8603 008c FFF7FEFF 		bl	cc2400_status
 8604              	.LVL923:
 8605 0090 4207     		lsls	r2, r0, #29
 8606 0092 FBD5     		bpl	.L880
2978:bluetooth_rxtx.c **** 
 8607              		.loc 1 2978 0
 8608 0094 6220     		movs	r0, #98
 8609 0096 FFF7FEFF 		bl	cc2400_strobe
 8610              	.LVL924:
2981:bluetooth_rxtx.c **** 		lvl = (int8_t)((cc2400_get(RSSI) >> 8) & 0xff);
 8611              		.loc 1 2981 0
 8612 009a 4FF4FA73 		mov	r3, #500
 8613 009e 0193     		str	r3, [sp, #4]
 8614              	.L881:
2981:bluetooth_rxtx.c **** 		lvl = (int8_t)((cc2400_get(RSSI) >> 8) & 0xff);
 8615              		.loc 1 2981 0 is_stmt 0 discriminator 2
ARM GAS  /tmp/ccyBazZt.s 			page 231


 8616 00a0 019B     		ldr	r3, [sp, #4]
 8617 00a2 013B     		subs	r3, r3, #1
 8618 00a4 0193     		str	r3, [sp, #4]
 8619 00a6 002B     		cmp	r3, #0
 8620 00a8 FAD1     		bne	.L881
2982:bluetooth_rxtx.c **** 		if (lvl > rssi_threshold) {
 8621              		.loc 1 2982 0 is_stmt 1
 8622 00aa 0620     		movs	r0, #6
 8623 00ac FFF7FEFF 		bl	cc2400_get
 8624              	.LVL925:
2983:bluetooth_rxtx.c **** 			switch (i) {
 8625              		.loc 1 2983 0
 8626 00b0 1E4B     		ldr	r3, .L903+16
 8627 00b2 40F30720 		sbfx	r0, r0, #8, #8
 8628              	.LVL926:
 8629 00b6 93F85630 		ldrb	r3, [r3, #86]	@ zero_extendqisi2
 8630 00ba 5BB2     		sxtb	r3, r3
 8631 00bc 9842     		cmp	r0, r3
 8632 00be 20DD     		ble	.L882
2984:bluetooth_rxtx.c **** 				case 0:
 8633              		.loc 1 2984 0
 8634 00c0 012C     		cmp	r4, #1
 8635 00c2 1AD0     		beq	.L884
 8636 00c4 15D3     		bcc	.L885
 8637 00c6 022C     		cmp	r4, #2
 8638 00c8 19D0     		beq	.L886
 8639              	.L883:
3010:bluetooth_rxtx.c **** 
 8640              		.loc 1 3010 0
 8641 00ca 0323     		movs	r3, #3
 8642 00cc 0134     		adds	r4, r4, #1
 8643              	.LVL927:
 8644 00ce 94FBF3F3 		sdiv	r3, r4, r3
 8645 00d2 03EB4303 		add	r3, r3, r3, lsl #1
 8646 00d6 E41A     		subs	r4, r4, r3
3012:bluetooth_rxtx.c **** 
 8647              		.loc 1 3012 0
 8648 00d8 154B     		ldr	r3, .L903+20
3010:bluetooth_rxtx.c **** 
 8649              		.loc 1 3010 0
 8650 00da E4B2     		uxtb	r4, r4
 8651              	.LVL928:
3012:bluetooth_rxtx.c **** 
 8652              		.loc 1 3012 0
 8653 00dc 1868     		ldr	r0, [r3]
 8654 00de FFF7FEFF 		bl	handle_usb
 8655              	.LVL929:
3014:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 8656              		.loc 1 3014 0
 8657 00e2 6420     		movs	r0, #100
 8658 00e4 FFF7FEFF 		bl	cc2400_strobe
 8659              	.LVL930:
 8660              	.L890:
3015:bluetooth_rxtx.c **** 	}
 8661              		.loc 1 3015 0 discriminator 1
 8662 00e8 FFF7FEFF 		bl	cc2400_status
 8663              	.LVL931:
ARM GAS  /tmp/ccyBazZt.s 			page 232


 8664 00ec 4307     		lsls	r3, r0, #29
 8665 00ee FBD4     		bmi	.L890
 8666 00f0 BAE7     		b	.L891
 8667              	.L885:
2986:bluetooth_rxtx.c **** 					break;
 8668              		.loc 1 2986 0
 8669 00f2 4FF48073 		mov	r3, #256
 8670              	.L902:
2989:bluetooth_rxtx.c **** 					break;
 8671              		.loc 1 2989 0
 8672 00f6 3360     		str	r3, [r6]
2990:bluetooth_rxtx.c **** 				case 2:
 8673              		.loc 1 2990 0
 8674 00f8 E7E7     		b	.L883
 8675              	.L884:
2989:bluetooth_rxtx.c **** 					break;
 8676              		.loc 1 2989 0
 8677 00fa 1023     		movs	r3, #16
 8678 00fc FBE7     		b	.L902
 8679              	.L886:
2992:bluetooth_rxtx.c **** 					break;
 8680              		.loc 1 2992 0
 8681 00fe 3460     		str	r4, [r6]
2993:bluetooth_rxtx.c **** 			}
 8682              		.loc 1 2993 0
 8683 0100 E3E7     		b	.L883
 8684              	.L882:
2997:bluetooth_rxtx.c **** 				case 0:
 8685              		.loc 1 2997 0
 8686 0102 012C     		cmp	r4, #1
 8687 0104 08D0     		beq	.L887
 8688 0106 03D3     		bcc	.L888
 8689 0108 022C     		cmp	r4, #2
 8690 010a DED1     		bne	.L883
3005:bluetooth_rxtx.c **** 					break;
 8691              		.loc 1 3005 0
 8692 010c 2C60     		str	r4, [r5]
3006:bluetooth_rxtx.c **** 			}
 8693              		.loc 1 3006 0
 8694 010e DCE7     		b	.L883
 8695              	.L888:
2999:bluetooth_rxtx.c **** 					break;
 8696              		.loc 1 2999 0
 8697 0110 4FF48073 		mov	r3, #256
 8698              	.L901:
3002:bluetooth_rxtx.c **** 					break;
 8699              		.loc 1 3002 0
 8700 0114 2B60     		str	r3, [r5]
3003:bluetooth_rxtx.c **** 				case 2:
 8701              		.loc 1 3003 0
 8702 0116 D8E7     		b	.L883
 8703              	.L887:
3002:bluetooth_rxtx.c **** 					break;
 8704              		.loc 1 3002 0
 8705 0118 1023     		movs	r3, #16
 8706 011a FBE7     		b	.L901
 8707              	.L904:
ARM GAS  /tmp/ccyBazZt.s 			page 233


 8708              		.align	2
 8709              	.L903:
 8710 011c 58C00920 		.word	537509976
 8711 0120 00000000 		.word	.LANCHOR1
 8712 0124 3CC00920 		.word	537509948
 8713 0128 38C00920 		.word	537509944
 8714 012c 00000000 		.word	.LANCHOR0
 8715 0130 00000000 		.word	clkn
 8716              	.LBE157:
 8717              		.cfi_endproc
 8718              	.LFE41:
 8720              		.section	.text.startup.main,"ax",%progbits
 8721              		.align	1
 8722              		.global	main
 8723              		.syntax unified
 8724              		.thumb
 8725              		.thumb_func
 8726              		.fpu softvfp
 8728              	main:
 8729              	.LFB42:
3018:bluetooth_rxtx.c **** 
3019:bluetooth_rxtx.c **** int main()
3020:bluetooth_rxtx.c **** {
 8730              		.loc 1 3020 0
 8731              		.cfi_startproc
 8732              		@ Volatile: function does not return.
 8733              		@ args = 0, pretend = 0, frame = 0
 8734              		@ frame_needed = 0, uses_anonymous_args = 0
 8735 0000 08B5     		push	{r3, lr}
 8736              		.cfi_def_cfa_offset 8
 8737              		.cfi_offset 3, -8
 8738              		.cfi_offset 14, -4
3021:bluetooth_rxtx.c **** 	ubertooth_init();
 8739              		.loc 1 3021 0
 8740 0002 FFF7FEFF 		bl	ubertooth_init
 8741              	.LVL932:
3022:bluetooth_rxtx.c **** 	clkn_init();
 8742              		.loc 1 3022 0
 8743 0006 FFF7FEFF 		bl	clkn_init
 8744              	.LVL933:
3023:bluetooth_rxtx.c **** 	ubertooth_usb_init(vendor_request_handler);
 8745              		.loc 1 3023 0
 8746 000a 4648     		ldr	r0, .L927
 8747 000c FFF7FEFF 		bl	ubertooth_usb_init
 8748              	.LVL934:
3024:bluetooth_rxtx.c **** 	cc2400_idle();
3025:bluetooth_rxtx.c **** 	dma_poweron();
3026:bluetooth_rxtx.c **** 
3027:bluetooth_rxtx.c **** 	debug_uart_init(0);
3028:bluetooth_rxtx.c **** 	debug_printf("\n\n****UBERTOOTH BOOT****\n%s\n", compile_info);
3029:bluetooth_rxtx.c **** 
3030:bluetooth_rxtx.c **** 	while (1) {
3031:bluetooth_rxtx.c **** 		handle_usb(clkn);
3032:bluetooth_rxtx.c **** 		if(requested_mode != mode) {
 8749              		.loc 1 3032 0
 8750 0010 454D     		ldr	r5, .L927+4
3024:bluetooth_rxtx.c **** 	cc2400_idle();
ARM GAS  /tmp/ccyBazZt.s 			page 234


 8751              		.loc 1 3024 0
 8752 0012 FFF7FEFF 		bl	cc2400_idle
 8753              	.LVL935:
3025:bluetooth_rxtx.c **** 
 8754              		.loc 1 3025 0
 8755 0016 FFF7FEFF 		bl	dma_poweron
 8756              	.LVL936:
3027:bluetooth_rxtx.c **** 	debug_printf("\n\n****UBERTOOTH BOOT****\n%s\n", compile_info);
 8757              		.loc 1 3027 0
 8758 001a 0020     		movs	r0, #0
 8759 001c FFF7FEFF 		bl	debug_uart_init
 8760              	.LVL937:
3028:bluetooth_rxtx.c **** 
 8761              		.loc 1 3028 0
 8762 0020 4249     		ldr	r1, .L927+8
 8763 0022 4348     		ldr	r0, .L927+12
 8764 0024 FFF7FEFF 		bl	debug_printf
 8765              	.LVL938:
 8766 0028 2C46     		mov	r4, r5
3031:bluetooth_rxtx.c **** 		if(requested_mode != mode) {
 8767              		.loc 1 3031 0
 8768 002a 424E     		ldr	r6, .L927+16
 8769              	.L906:
 8770 002c 3068     		ldr	r0, [r6]
 8771 002e FFF7FEFF 		bl	handle_usb
 8772              	.LVL939:
 8773              		.loc 1 3032 0
 8774 0032 AA7C     		ldrb	r2, [r5, #18]	@ zero_extendqisi2
 8775 0034 6B7C     		ldrb	r3, [r5, #17]	@ zero_extendqisi2
 8776 0036 9A42     		cmp	r2, r3
 8777 0038 F8D0     		beq	.L906
3033:bluetooth_rxtx.c **** 			switch (requested_mode) {
 8778              		.loc 1 3033 0
 8779 003a AB7C     		ldrb	r3, [r5, #18]	@ zero_extendqisi2
 8780 003c 112B     		cmp	r3, #17
 8781 003e F5D8     		bhi	.L906
 8782 0040 01A2     		adr	r2, .L909
 8783 0042 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 8784 0046 00BF     		.p2align 2
 8785              	.L909:
 8786 0048 1D010000 		.word	.L908+1
 8787 004c A7000000 		.word	.L910+1
 8788 0050 AB000000 		.word	.L911+1
 8789 0054 CB000000 		.word	.L912+1
 8790 0058 F5000000 		.word	.L913+1
 8791 005c D9000000 		.word	.L914+1
 8792 0060 E9000000 		.word	.L915+1
 8793 0064 FB000000 		.word	.L916+1
 8794 0068 B5000000 		.word	.L917+1
 8795 006c 2D000000 		.word	.L906+1
 8796 0070 B9000000 		.word	.L918+1
 8797 0074 91000000 		.word	.L919+1
 8798 0078 BF000000 		.word	.L920+1
 8799 007c 01010000 		.word	.L921+1
 8800 0080 9D000000 		.word	.L922+1
 8801 0084 0D010000 		.word	.L923+1
 8802 0088 17010000 		.word	.L924+1
ARM GAS  /tmp/ccyBazZt.s 			page 235


 8803 008c C5000000 		.word	.L925+1
 8804              		.p2align 1
 8805              	.L919:
3034:bluetooth_rxtx.c **** 				case MODE_RESET:
3035:bluetooth_rxtx.c **** 					/* Allow time for the USB command to return correctly */
3036:bluetooth_rxtx.c **** 					wait(1);
 8806              		.loc 1 3036 0
 8807 0090 0120     		movs	r0, #1
 8808 0092 FFF7FEFF 		bl	wait
 8809              	.LVL940:
3037:bluetooth_rxtx.c **** 					reset();
 8810              		.loc 1 3037 0
 8811 0096 FFF7FEFF 		bl	reset
 8812              	.LVL941:
3038:bluetooth_rxtx.c **** 					break;
 8813              		.loc 1 3038 0
 8814 009a C7E7     		b	.L906
 8815              	.L922:
3039:bluetooth_rxtx.c **** 				case MODE_AFH:
3040:bluetooth_rxtx.c **** 					mode = MODE_AFH;
 8816              		.loc 1 3040 0
 8817 009c 0E23     		movs	r3, #14
 8818              	.L926:
3041:bluetooth_rxtx.c **** 					bt_stream_rx();
3042:bluetooth_rxtx.c **** 					break;
3043:bluetooth_rxtx.c **** 				case MODE_RX_SYMBOLS:
3044:bluetooth_rxtx.c **** 					mode = MODE_RX_SYMBOLS;
 8819              		.loc 1 3044 0
 8820 009e 6374     		strb	r3, [r4, #17]
3045:bluetooth_rxtx.c **** 					bt_stream_rx();
 8821              		.loc 1 3045 0
 8822 00a0 FFF7FEFF 		bl	bt_stream_rx
 8823              	.LVL942:
3046:bluetooth_rxtx.c **** 					break;
 8824              		.loc 1 3046 0
 8825 00a4 C2E7     		b	.L906
 8826              	.L910:
3044:bluetooth_rxtx.c **** 					bt_stream_rx();
 8827              		.loc 1 3044 0
 8828 00a6 0123     		movs	r3, #1
 8829 00a8 F9E7     		b	.L926
 8830              	.L911:
3047:bluetooth_rxtx.c **** 				case MODE_TX_SYMBOLS:
3048:bluetooth_rxtx.c **** 					mode = MODE_TX_SYMBOLS;
 8831              		.loc 1 3048 0
 8832 00aa 0223     		movs	r3, #2
 8833 00ac 6374     		strb	r3, [r4, #17]
3049:bluetooth_rxtx.c **** 					br_transmit();
 8834              		.loc 1 3049 0
 8835 00ae FFF7FEFF 		bl	br_transmit
 8836              	.LVL943:
3050:bluetooth_rxtx.c **** 					break;
 8837              		.loc 1 3050 0
 8838 00b2 BBE7     		b	.L906
 8839              	.L917:
3051:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW:
3052:bluetooth_rxtx.c **** 					mode = MODE_BT_FOLLOW;
ARM GAS  /tmp/ccyBazZt.s 			page 236


 8840              		.loc 1 3052 0
 8841 00b4 0823     		movs	r3, #8
 8842 00b6 F2E7     		b	.L926
 8843              	.L918:
3053:bluetooth_rxtx.c **** 					bt_stream_rx();
3054:bluetooth_rxtx.c **** 					break;
3055:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW_LE:
3056:bluetooth_rxtx.c **** 					//mode = MODE_BT_FOLLOW_LE;
3057:bluetooth_rxtx.c **** 					//bt_follow_le();
3058:bluetooth_rxtx.c **** 					break;
3059:bluetooth_rxtx.c **** 				case MODE_BT_PROMISC_LE:
3060:bluetooth_rxtx.c **** 					bt_promisc_le();
 8844              		.loc 1 3060 0
 8845 00b8 FFF7FEFF 		bl	bt_promisc_le
 8846              	.LVL944:
3061:bluetooth_rxtx.c **** 					break;
 8847              		.loc 1 3061 0
 8848 00bc B6E7     		b	.L906
 8849              	.L920:
3062:bluetooth_rxtx.c **** 				case MODE_BT_SLAVE_LE:
3063:bluetooth_rxtx.c **** 					bt_slave_le();
 8850              		.loc 1 3063 0
 8851 00be FFF7FEFF 		bl	bt_slave_le
 8852              	.LVL945:
3064:bluetooth_rxtx.c **** 					break;
 8853              		.loc 1 3064 0
 8854 00c2 B3E7     		b	.L906
 8855              	.L925:
3065:bluetooth_rxtx.c **** 				case MODE_BT_TRANSMIT_LE:
3066:bluetooth_rxtx.c **** 					bt_transmit_le();
 8856              		.loc 1 3066 0
 8857 00c4 FFF7FEFF 		bl	bt_transmit_le
 8858              	.LVL946:
3067:bluetooth_rxtx.c **** 					break;
 8859              		.loc 1 3067 0
 8860 00c8 B0E7     		b	.L906
 8861              	.L912:
3068:bluetooth_rxtx.c **** 				case MODE_TX_TEST:
3069:bluetooth_rxtx.c **** 					mode = MODE_TX_TEST;
 8862              		.loc 1 3069 0
 8863 00ca 0323     		movs	r3, #3
3070:bluetooth_rxtx.c **** 					cc2400_txtest(&modulation, &channel);
 8864              		.loc 1 3070 0
 8865 00cc 1A49     		ldr	r1, .L927+20
 8866 00ce 2846     		mov	r0, r5
3069:bluetooth_rxtx.c **** 					cc2400_txtest(&modulation, &channel);
 8867              		.loc 1 3069 0
 8868 00d0 6374     		strb	r3, [r4, #17]
 8869              		.loc 1 3070 0
 8870 00d2 FFF7FEFF 		bl	cc2400_txtest
 8871              	.LVL947:
3071:bluetooth_rxtx.c **** 					break;
 8872              		.loc 1 3071 0
 8873 00d6 A9E7     		b	.L906
 8874              	.L914:
3072:bluetooth_rxtx.c **** 				case MODE_RANGE_TEST:
3073:bluetooth_rxtx.c **** 					mode = MODE_RANGE_TEST;
ARM GAS  /tmp/ccyBazZt.s 			page 237


 8875              		.loc 1 3073 0
 8876 00d8 0523     		movs	r3, #5
3074:bluetooth_rxtx.c **** 					cc2400_rangetest(&channel);
 8877              		.loc 1 3074 0
 8878 00da 1748     		ldr	r0, .L927+20
3073:bluetooth_rxtx.c **** 					cc2400_rangetest(&channel);
 8879              		.loc 1 3073 0
 8880 00dc 6374     		strb	r3, [r4, #17]
 8881              		.loc 1 3074 0
 8882 00de FFF7FEFF 		bl	cc2400_rangetest
 8883              	.LVL948:
3075:bluetooth_rxtx.c **** 					requested_mode = MODE_IDLE;
 8884              		.loc 1 3075 0
 8885 00e2 0023     		movs	r3, #0
 8886 00e4 A374     		strb	r3, [r4, #18]
3076:bluetooth_rxtx.c **** 					break;
 8887              		.loc 1 3076 0
 8888 00e6 A1E7     		b	.L906
 8889              	.L915:
3077:bluetooth_rxtx.c **** 				case MODE_REPEATER:
3078:bluetooth_rxtx.c **** 					mode = MODE_REPEATER;
 8890              		.loc 1 3078 0
 8891 00e8 0623     		movs	r3, #6
3079:bluetooth_rxtx.c **** 					cc2400_repeater(&channel);
 8892              		.loc 1 3079 0
 8893 00ea 1348     		ldr	r0, .L927+20
3078:bluetooth_rxtx.c **** 					cc2400_repeater(&channel);
 8894              		.loc 1 3078 0
 8895 00ec 6374     		strb	r3, [r4, #17]
 8896              		.loc 1 3079 0
 8897 00ee FFF7FEFF 		bl	cc2400_repeater
 8898              	.LVL949:
3080:bluetooth_rxtx.c **** 					break;
 8899              		.loc 1 3080 0
 8900 00f2 9BE7     		b	.L906
 8901              	.L913:
3081:bluetooth_rxtx.c **** 				case MODE_SPECAN:
3082:bluetooth_rxtx.c **** 					specan();
 8902              		.loc 1 3082 0
 8903 00f4 FFF7FEFF 		bl	specan
 8904              	.LVL950:
3083:bluetooth_rxtx.c **** 					break;
 8905              		.loc 1 3083 0
 8906 00f8 98E7     		b	.L906
 8907              	.L916:
3084:bluetooth_rxtx.c **** 				case MODE_LED_SPECAN:
3085:bluetooth_rxtx.c **** 					led_specan();
 8908              		.loc 1 3085 0
 8909 00fa FFF7FEFF 		bl	led_specan
 8910              	.LVL951:
3086:bluetooth_rxtx.c **** 					break;
 8911              		.loc 1 3086 0
 8912 00fe 95E7     		b	.L906
 8913              	.L921:
3087:bluetooth_rxtx.c **** 				case MODE_EGO:
3088:bluetooth_rxtx.c **** 					mode = MODE_EGO;
 8914              		.loc 1 3088 0
ARM GAS  /tmp/ccyBazZt.s 			page 238


 8915 0100 0D23     		movs	r3, #13
 8916 0102 6374     		strb	r3, [r4, #17]
3089:bluetooth_rxtx.c **** 					ego_main(ego_mode);
 8917              		.loc 1 3089 0
 8918 0104 207D     		ldrb	r0, [r4, #20]	@ zero_extendqisi2
 8919 0106 FFF7FEFF 		bl	ego_main
 8920              	.LVL952:
3090:bluetooth_rxtx.c **** 					break;
 8921              		.loc 1 3090 0
 8922 010a 8FE7     		b	.L906
 8923              	.L923:
3091:bluetooth_rxtx.c **** 				case MODE_RX_GENERIC:
3092:bluetooth_rxtx.c **** 					mode = MODE_RX_GENERIC;
 8924              		.loc 1 3092 0
 8925 010c 0F23     		movs	r3, #15
 8926 010e 6374     		strb	r3, [r4, #17]
3093:bluetooth_rxtx.c **** 					rx_generic();
 8927              		.loc 1 3093 0
 8928 0110 FFF7FEFF 		bl	rx_generic
 8929              	.LVL953:
3094:bluetooth_rxtx.c **** 					break;
 8930              		.loc 1 3094 0
 8931 0114 8AE7     		b	.L906
 8932              	.L924:
3095:bluetooth_rxtx.c **** 				case MODE_TX_GENERIC:
3096:bluetooth_rxtx.c **** 					tx_generic();
 8933              		.loc 1 3096 0
 8934 0116 FFF7FEFF 		bl	tx_generic
 8935              	.LVL954:
3097:bluetooth_rxtx.c **** 					break;
 8936              		.loc 1 3097 0
 8937 011a 87E7     		b	.L906
 8938              	.L908:
3098:bluetooth_rxtx.c **** 				case MODE_IDLE:
3099:bluetooth_rxtx.c **** 					cc2400_idle();
 8939              		.loc 1 3099 0
 8940 011c FFF7FEFF 		bl	cc2400_idle
 8941              	.LVL955:
3100:bluetooth_rxtx.c **** 					break;
 8942              		.loc 1 3100 0
 8943 0120 84E7     		b	.L906
 8944              	.L928:
 8945 0122 00BF     		.align	2
 8946              	.L927:
 8947 0124 00000000 		.word	vendor_request_handler
 8948 0128 00000000 		.word	.LANCHOR1
 8949 012c A7000000 		.word	.LANCHOR2+167
 8950 0130 6D000000 		.word	.LC11
 8951 0134 00000000 		.word	clkn
 8952 0138 4C000000 		.word	.LANCHOR0+76
 8953              		.cfi_endproc
 8954              	.LFE42:
 8956              		.comm	unpacked,800,1
 8957              		.global	packet_cb
 8958              		.global	data_cb
 8959              		.global	le_jam_count
 8960              		.comm	le_promisc,264,4
ARM GAS  /tmp/ccyBazZt.s 			page 239


 8961              		.comm	remapping,192,4
 8962              		.comm	pending_remapping,192,4
 8963              		.global	le
 8964              		.global	le_adv_len
 8965              		.global	le_adv_data
 8966              		.global	slave_mac_address
 8967              		.comm	tx_pkt,58,2
 8968              		.global	anchor_timestamp
 8969              		.global	tx_anchor
 8970              		.global	index1
 8971              		.comm	time1,2,2
 8972              		.global	idx3
 8973              		.global	idx2
 8974              		.global	idx1
 8975              		.global	rssi_threshold
 8976              		.global	high_freq
 8977              		.global	low_freq
 8978              		.global	modulation
 8979              		.global	ego_mode
 8980              		.global	jam_mode
 8981              		.global	requested_mode
 8982              		.global	mode
 8983              		.global	status
 8984              		.global	dma_discard
 8985              		.global	idle_buf_channel
 8986              		.global	idle_buf_clk100ns
 8987              		.global	idle_buf_clkn_high
 8988              		.global	cancel_follow
 8989              		.global	le_adv_channel
 8990              		.global	requested_channel
 8991              		.global	hop_timeout
 8992              		.global	hop_direct_channel
 8993              		.global	channel
 8994              		.global	do_hop
 8995              		.global	hop_mode
 8996              		.global	compile_info
 8997              		.comm	rr,5,1
 8998              		.comm	used_channels,1,1
 8999              		.comm	afh_map,10,1
 9000              		.comm	afh_enabled,1,1
 9001              		.comm	syncword,8,8
 9002              		.comm	target,16,8
 9003              		.comm	clkn_next_drift_fix,4,4
 9004              		.comm	clkn_last_drift_fix,4,4
 9005              		.comm	clk_drift_correction,2,2
 9006              		.comm	clk_drift_ppm,2,2
 9007              		.comm	clk100ns_offset,2,2
 9008              		.comm	clkn_offset,4,4
 9009              		.comm	last_hop,4,4
 9010              		.comm	clkn,4,4
 9011              		.comm	rx_err,4,4
 9012              		.comm	rx_tc,4,4
 9013              		.comm	idle_rxbuf,4,4
 9014              		.comm	active_rxbuf,4,4
 9015              		.comm	rxbuf2,50,1
 9016              		.comm	rxbuf1,50,1
 9017              		.comm	cs_trigger,1,1
ARM GAS  /tmp/ccyBazZt.s 			page 240


 9018              		.comm	cs_threshold_cur,1,1
 9019              		.comm	cs_threshold_req,1,1
 9020              		.comm	cs_no_squelch,1,1
 9021              		.comm	rssi_count,1,1
 9022              		.comm	rssi_min,1,1
 9023              		.comm	rssi_max,1,1
 9024              		.section	.rodata
 9025              		.align	2
 9026              		.set	.LANCHOR2,. + 0
 9029              	whitening_index:
 9030 0000 46       		.byte	70
 9031 0001 3E       		.byte	62
 9032 0002 78       		.byte	120
 9033 0003 6F       		.byte	111
 9034 0004 4D       		.byte	77
 9035 0005 2E       		.byte	46
 9036 0006 0F       		.byte	15
 9037 0007 65       		.byte	101
 9038 0008 42       		.byte	66
 9039 0009 27       		.byte	39
 9040 000a 1F       		.byte	31
 9041 000b 1A       		.byte	26
 9042 000c 50       		.byte	80
 9043 000d 53       		.byte	83
 9044 000e 7D       		.byte	125
 9045 000f 59       		.byte	89
 9046 0010 0A       		.byte	10
 9047 0011 23       		.byte	35
 9048 0012 08       		.byte	8
 9049 0013 36       		.byte	54
 9050 0014 7A       		.byte	122
 9051 0015 11       		.byte	17
 9052 0016 21       		.byte	33
 9053 0017 00       		.byte	0
 9054 0018 3A       		.byte	58
 9055 0019 73       		.byte	115
 9056 001a 06       		.byte	6
 9057 001b 5E       		.byte	94
 9058 001c 56       		.byte	86
 9059 001d 31       		.byte	49
 9060 001e 34       		.byte	52
 9061 001f 14       		.byte	20
 9062 0020 28       		.byte	40
 9063 0021 1B       		.byte	27
 9064 0022 54       		.byte	84
 9065 0023 5A       		.byte	90
 9066 0024 3F       		.byte	63
 9067 0025 70       		.byte	112
 9068 0026 2F       		.byte	47
 9069 0027 66       		.byte	102
 9072              	whitening:
 9073 0028 01       		.byte	1
 9074 0029 01       		.byte	1
 9075 002a 01       		.byte	1
 9076 002b 01       		.byte	1
 9077 002c 00       		.byte	0
 9078 002d 01       		.byte	1
ARM GAS  /tmp/ccyBazZt.s 			page 241


 9079 002e 00       		.byte	0
 9080 002f 01       		.byte	1
 9081 0030 00       		.byte	0
 9082 0031 01       		.byte	1
 9083 0032 00       		.byte	0
 9084 0033 00       		.byte	0
 9085 0034 00       		.byte	0
 9086 0035 00       		.byte	0
 9087 0036 01       		.byte	1
 9088 0037 00       		.byte	0
 9089 0038 01       		.byte	1
 9090 0039 01       		.byte	1
 9091 003a 00       		.byte	0
 9092 003b 01       		.byte	1
 9093 003c 01       		.byte	1
 9094 003d 01       		.byte	1
 9095 003e 01       		.byte	1
 9096 003f 00       		.byte	0
 9097 0040 00       		.byte	0
 9098 0041 01       		.byte	1
 9099 0042 01       		.byte	1
 9100 0043 01       		.byte	1
 9101 0044 00       		.byte	0
 9102 0045 00       		.byte	0
 9103 0046 01       		.byte	1
 9104 0047 00       		.byte	0
 9105 0048 01       		.byte	1
 9106 0049 00       		.byte	0
 9107 004a 01       		.byte	1
 9108 004b 01       		.byte	1
 9109 004c 00       		.byte	0
 9110 004d 00       		.byte	0
 9111 004e 01       		.byte	1
 9112 004f 01       		.byte	1
 9113 0050 00       		.byte	0
 9114 0051 00       		.byte	0
 9115 0052 00       		.byte	0
 9116 0053 00       		.byte	0
 9117 0054 00       		.byte	0
 9118 0055 01       		.byte	1
 9119 0056 01       		.byte	1
 9120 0057 00       		.byte	0
 9121 0058 01       		.byte	1
 9122 0059 01       		.byte	1
 9123 005a 00       		.byte	0
 9124 005b 01       		.byte	1
 9125 005c 00       		.byte	0
 9126 005d 01       		.byte	1
 9127 005e 01       		.byte	1
 9128 005f 01       		.byte	1
 9129 0060 00       		.byte	0
 9130 0061 01       		.byte	1
 9131 0062 00       		.byte	0
 9132 0063 00       		.byte	0
 9133 0064 00       		.byte	0
 9134 0065 01       		.byte	1
 9135 0066 01       		.byte	1
ARM GAS  /tmp/ccyBazZt.s 			page 242


 9136 0067 00       		.byte	0
 9137 0068 00       		.byte	0
 9138 0069 01       		.byte	1
 9139 006a 00       		.byte	0
 9140 006b 00       		.byte	0
 9141 006c 00       		.byte	0
 9142 006d 01       		.byte	1
 9143 006e 00       		.byte	0
 9144 006f 00       		.byte	0
 9145 0070 00       		.byte	0
 9146 0071 00       		.byte	0
 9147 0072 00       		.byte	0
 9148 0073 00       		.byte	0
 9149 0074 01       		.byte	1
 9150 0075 00       		.byte	0
 9151 0076 00       		.byte	0
 9152 0077 01       		.byte	1
 9153 0078 00       		.byte	0
 9154 0079 00       		.byte	0
 9155 007a 01       		.byte	1
 9156 007b 01       		.byte	1
 9157 007c 00       		.byte	0
 9158 007d 01       		.byte	1
 9159 007e 00       		.byte	0
 9160 007f 00       		.byte	0
 9161 0080 01       		.byte	1
 9162 0081 01       		.byte	1
 9163 0082 01       		.byte	1
 9164 0083 01       		.byte	1
 9165 0084 00       		.byte	0
 9166 0085 01       		.byte	1
 9167 0086 01       		.byte	1
 9168 0087 01       		.byte	1
 9169 0088 00       		.byte	0
 9170 0089 00       		.byte	0
 9171 008a 00       		.byte	0
 9172 008b 00       		.byte	0
 9173 008c 01       		.byte	1
 9174 008d 01       		.byte	1
 9175 008e 01       		.byte	1
 9176 008f 01       		.byte	1
 9177 0090 01       		.byte	1
 9178 0091 01       		.byte	1
 9179 0092 01       		.byte	1
 9180 0093 00       		.byte	0
 9181 0094 00       		.byte	0
 9182 0095 00       		.byte	0
 9183 0096 01       		.byte	1
 9184 0097 01       		.byte	1
 9185 0098 01       		.byte	1
 9186 0099 00       		.byte	0
 9187 009a 01       		.byte	1
 9188 009b 01       		.byte	1
 9189 009c 00       		.byte	0
 9190 009d 00       		.byte	0
 9191 009e 00       		.byte	0
 9192 009f 01       		.byte	1
ARM GAS  /tmp/ccyBazZt.s 			page 243


 9193 00a0 00       		.byte	0
 9194 00a1 01       		.byte	1
 9195 00a2 00       		.byte	0
 9196 00a3 00       		.byte	0
 9197 00a4 01       		.byte	1
 9198 00a5 00       		.byte	0
 9199 00a6 01       		.byte	1
 9202              	compile_info:
 9203 00a7 75626572 		.ascii	"ubertooth git- (lab-pc-1@labpc1-Precision-3630-Towe"
 9203      746F6F74 
 9203      68206769 
 9203      742D2028 
 9203      6C61622D 
 9204 00da 72292046 		.ascii	"r) Fri May  1 18:57:06 CDT 2020\000"
 9204      7269204D 
 9204      61792020 
 9204      31203138 
 9204      3A35373A 
 9205 00fa 0000     		.space	2
 9208              	whitening_word:
 9209 00fc 40B2BCC3 		.word	-1011043776
 9210 0100 1F374A5F 		.word	1598699295
 9211 0104 85F69C9A 		.word	-1700989307
 9212 0108 C1D6C544 		.word	1153816257
 9213 010c 2059DEE1 		.word	-505521888
 9214 0110 8F1BA5AF 		.word	-1348134001
 9215 0114 427B4ECD 		.word	-850494654
 9216 0118 60EB6222 		.word	576908128
 9217 011c 902CEFF0 		.word	-252760944
 9218 0120 C78DD257 		.word	1473416647
 9219 0124 A13DA766 		.word	1722236321
 9220 0128 B0753111 		.word	288454064
 9221 012c 8940B2BC 		.word	-1129168759
 9222 0130 C31F374A 		.word	1245126595
 9223 0134 5F85F69C 		.word	-1661565601
 9224 0138 9AC1D6C5 		.word	-975781478
 9225 013c 442059DE 		.word	-564584380
 9226 0140 E18F1BA5 		.word	-1524920351
 9227 0144 AF427B4E 		.word	1316700847
 9228 0148 CD60EB62 		.word	1659592909
 9229 014c 22902CEF 		.word	-282292190
 9230 0150 F0C78DD2 		.word	-762460176
 9231 0154 57A13DA7 		.word	-1489133225
 9232 0158 66B07531 		.word	829796454
 9233 015c D257A13D 		.word	1033983954
 9234 0160 A766B075 		.word	1974494887
 9235 0164 31114896 		.word	-1773661903
 9236 0168 77F8E346 		.word	1189345399
 9237 016c E9ABD09E 		.word	-1630491671
 9238 0170 5333D8BA 		.word	-1160236205
 9239 0174 980824CB 		.word	-886830952
 9240 0178 3BFC71A3 		.word	-1552810949
 9241 017c F45568CF 		.word	-815245836
 9242 0180 A9196C5D 		.word	1567365545
 9243 0184 4C0492E5 		.word	-443415476
 9244 0188 1DFEB851 		.word	1371078173
 9245 018c 1BA5AF42 		.word	1118807323
ARM GAS  /tmp/ccyBazZt.s 			page 244


 9246 0190 7B4ECD60 		.word	1624067707
 9247 0194 EB622290 		.word	-1876794645
 9248 0198 2CEFF0C7 		.word	-940511444
 9249 019c 8DD257A1 		.word	-1588079987
 9250 01a0 3DA766B0 		.word	-1335449795
 9251 01a4 75311148 		.word	1209086325
 9252 01a8 9677F8E3 		.word	-470255722
 9253 01ac 46E9ABD0 		.word	-794039994
 9254 01b0 9E5333D8 		.word	-667724898
 9255 01b4 BA980824 		.word	604543162
 9256 01b8 CB3BFC71 		.word	1912355787
 9257 01bc 6479873F 		.word	1065843044
 9258 01c0 6E94BE0A 		.word	180261998
 9259 01c4 ED393583 		.word	-2093663763
 9260 01c8 AD8B8940 		.word	1082756013
 9261 01cc B2BCC31F 		.word	532921522
 9262 01d0 374A5F85 		.word	-2057352649
 9263 01d4 F69C9AC1 		.word	-1046831882
 9264 01d8 D6C54420 		.word	541378006
 9265 01dc 59DEE18F 		.word	-1881022887
 9266 01e0 1BA5AF42 		.word	1118807323
 9267 01e4 7B4ECD60 		.word	1624067707
 9268 01e8 EB622290 		.word	-1876794645
 9269 01ec AD8B8940 		.word	1082756013
 9270 01f0 B2BCC31F 		.word	532921522
 9271 01f4 374A5F85 		.word	-2057352649
 9272 01f8 F69C9AC1 		.word	-1046831882
 9273 01fc D6C54420 		.word	541378006
 9274 0200 59DEE18F 		.word	-1881022887
 9275 0204 1BA5AF42 		.word	1118807323
 9276 0208 7B4ECD60 		.word	1624067707
 9277 020c EB622290 		.word	-1876794645
 9278 0210 2CEFF0C7 		.word	-940511444
 9279 0214 8DD257A1 		.word	-1588079987
 9280 0218 3DA766B0 		.word	-1335449795
 9281 021c F69C9AC1 		.word	-1046831882
 9282 0220 D6C54420 		.word	541378006
 9283 0224 59DEE18F 		.word	-1881022887
 9284 0228 1BA5AF42 		.word	1118807323
 9285 022c 7B4ECD60 		.word	1624067707
 9286 0230 EB622290 		.word	-1876794645
 9287 0234 2CEFF0C7 		.word	-940511444
 9288 0238 8DD257A1 		.word	-1588079987
 9289 023c 3DA766B0 		.word	-1335449795
 9290 0240 75311148 		.word	1209086325
 9291 0244 9677F8E3 		.word	-470255722
 9292 0248 46E9ABD0 		.word	-794039994
 9293 024c 3F6E94BE 		.word	-1097568705
 9294 0250 0AED3935 		.word	892988682
 9295 0254 83AD8B89 		.word	-1987334781
 9296 0258 40B2BCC3 		.word	-1011043776
 9297 025c 1F374A5F 		.word	1598699295
 9298 0260 85F69C9A 		.word	-1700989307
 9299 0264 C1D6C544 		.word	1153816257
 9300 0268 2059DEE1 		.word	-505521888
 9301 026c 8F1BA5AF 		.word	-1348134001
 9302 0270 427B4ECD 		.word	-850494654
ARM GAS  /tmp/ccyBazZt.s 			page 245


 9303 0274 60EB6222 		.word	576908128
 9304 0278 902CEFF0 		.word	-252760944
 9305 027c 0824CB3B 		.word	1003168776
 9306 0280 FC71A3F4 		.word	-190615044
 9307 0284 5568CFA9 		.word	-1446025131
 9308 0288 196C5D4C 		.word	1281190937
 9309 028c 0492E51D 		.word	501584388
 9310 0290 FEB851FA 		.word	-95307522
 9311 0294 2AB4E7D4 		.word	-723012566
 9312 0298 0CB62E26 		.word	640595468
 9313 029c 02C9F20E 		.word	250792194
 9314 02a0 7FDC287D 		.word	2099829887
 9315 02a4 15DA736A 		.word	1785977365
 9316 02a8 065B1713 		.word	320297734
 9317 02ac C1D6C544 		.word	1153816257
 9318 02b0 2059DEE1 		.word	-505521888
 9319 02b4 8F1BA5AF 		.word	-1348134001
 9320 02b8 427B4ECD 		.word	-850494654
 9321 02bc 60EB6222 		.word	576908128
 9322 02c0 902CEFF0 		.word	-252760944
 9323 02c4 C78DD257 		.word	1473416647
 9324 02c8 A13DA766 		.word	1722236321
 9325 02cc B0753111 		.word	288454064
 9326 02d0 489677F8 		.word	-126380472
 9327 02d4 E346E9AB 		.word	-1410775325
 9328 02d8 D09E5333 		.word	861118160
 9329 02dc 9AC1D6C5 		.word	-975781478
 9330 02e0 442059DE 		.word	-564584380
 9331 02e4 E18F1BA5 		.word	-1524920351
 9332 02e8 AF427B4E 		.word	1316700847
 9333 02ec CD60EB62 		.word	1659592909
 9334 02f0 22902CEF 		.word	-282292190
 9335 02f4 F0C78DD2 		.word	-762460176
 9336 02f8 57A13DA7 		.word	-1489133225
 9337 02fc 66B07531 		.word	829796454
 9338 0300 11489677 		.word	2006337553
 9339 0304 F8E346E9 		.word	-381230088
 9340 0308 ABD09E53 		.word	1402917035
 9341 030c 5333D8BA 		.word	-1160236205
 9342 0310 980824CB 		.word	-886830952
 9343 0314 3BFC71A3 		.word	-1552810949
 9344 0318 F45568CF 		.word	-815245836
 9345 031c A9196C5D 		.word	1567365545
 9346 0320 4C0492E5 		.word	-443415476
 9347 0324 1DFEB851 		.word	1371078173
 9348 0328 FA2AB4E7 		.word	-407622918
 9349 032c D40CB62E 		.word	783682772
 9350 0330 2602C9F2 		.word	-221707738
 9351 0334 0E7FDC28 		.word	685539086
 9352 0338 7D15DA73 		.word	1943672189
 9353 033c 2CEFF0C7 		.word	-940511444
 9354 0340 8DD257A1 		.word	-1588079987
 9355 0344 3DA766B0 		.word	-1335449795
 9356 0348 75311148 		.word	1209086325
 9357 034c 9677F8E3 		.word	-470255722
 9358 0350 46E9ABD0 		.word	-794039994
 9359 0354 9E5333D8 		.word	-667724898
ARM GAS  /tmp/ccyBazZt.s 			page 246


 9360 0358 BA980824 		.word	604543162
 9361 035c CB3BFC71 		.word	1912355787
 9362 0360 A3F45568 		.word	1750463651
 9363 0364 CFA9196C 		.word	1813621199
 9364 0368 5D4C0492 		.word	-1845212067
 9365 036c E51DFEB8 		.word	-1191305755
 9366 0370 51FA2AB4 		.word	-1272251823
 9367 0374 E7D40CB6 		.word	-1240673049
 9368 0378 2E2602C9 		.word	-922606034
 9369 037c F20E7FDC 		.word	-595652878
 9370 0380 287D15DA 		.word	-636125912
 9371 0384 736A065B 		.word	1527147123
 9372 0388 17138164 		.word	1686180631
 9373 038c 79873F6E 		.word	1849657209
 9374 0390 94BE0AED 		.word	-318062956
 9375 0394 393583AD 		.word	-1383910087
 9376 0398 8B8940B2 		.word	-1304393333
 9377 039c BE0AED39 		.word	971836094
 9378 03a0 3583AD8B 		.word	-1951562955
 9379 03a4 8940B2BC 		.word	-1129168759
 9380 03a8 C31F374A 		.word	1245126595
 9381 03ac 5F85F69C 		.word	-1661565601
 9382 03b0 9AC1D6C5 		.word	-975781478
 9383 03b4 442059DE 		.word	-564584380
 9384 03b8 E18F1BA5 		.word	-1524920351
 9385 03bc AF427B4E 		.word	1316700847
 9386 03c0 CD60EB62 		.word	1659592909
 9387 03c4 22902CEF 		.word	-282292190
 9388 03c8 F0C78DD2 		.word	-762460176
 9389 03cc 77F8E346 		.word	1189345399
 9390 03d0 E9ABD09E 		.word	-1630491671
 9391 03d4 5333D8BA 		.word	-1160236205
 9392 03d8 980824CB 		.word	-886830952
 9393 03dc 3BFC71A3 		.word	-1552810949
 9394 03e0 F45568CF 		.word	-815245836
 9395 03e4 A9196C5D 		.word	1567365545
 9396 03e8 4C0492E5 		.word	-443415476
 9397 03ec 1DFEB851 		.word	1371078173
 9398 03f0 FA2AB4E7 		.word	-407622918
 9399 03f4 D40CB62E 		.word	783682772
 9400 03f8 2602C9F2 		.word	-221707738
 9401 03fc D09E5333 		.word	861118160
 9402 0400 D8BA9808 		.word	144227032
 9403 0404 24CB3BFC 		.word	-63190236
 9404 0408 71A3F455 		.word	1442095985
 9405 040c 68CFA919 		.word	430559080
 9406 0410 6C5D4C04 		.word	72113516
 9407 0414 92E51DFE 		.word	-31595118
 9408 0418 B851FA2A 		.word	721047992
 9409 041c B4E7D40C 		.word	215279540
 9410 0420 B62E2602 		.word	36056758
 9411 0424 C9F20E7F 		.word	2131686089
 9412 0428 DC287D15 		.word	360523996
 9413 042c 196C5D4C 		.word	1281190937
 9414 0430 0492E51D 		.word	501584388
 9415 0434 FEB851FA 		.word	-95307522
 9416 0438 2AB4E7D4 		.word	-723012566
ARM GAS  /tmp/ccyBazZt.s 			page 247


 9417 043c 0CB62E26 		.word	640595468
 9418 0440 02C9F20E 		.word	250792194
 9419 0444 7FDC287D 		.word	2099829887
 9420 0448 15DA736A 		.word	1785977365
 9421 044c 065B1713 		.word	320297734
 9422 0450 81647987 		.word	-2022087551
 9423 0454 3F6E94BE 		.word	-1097568705
 9424 0458 0AED3935 		.word	892988682
 9425 045c 427B4ECD 		.word	-850494654
 9426 0460 60EB6222 		.word	576908128
 9427 0464 902CEFF0 		.word	-252760944
 9428 0468 C78DD257 		.word	1473416647
 9429 046c A13DA766 		.word	1722236321
 9430 0470 B0753111 		.word	288454064
 9431 0474 489677F8 		.word	-126380472
 9432 0478 E346E9AB 		.word	-1410775325
 9433 047c D09E5333 		.word	861118160
 9434 0480 D8BA9808 		.word	144227032
 9435 0484 24CB3BFC 		.word	-63190236
 9436 0488 71A3F455 		.word	1442095985
 9437 048c 8B8940B2 		.word	-1304393333
 9438 0490 BCC31F37 		.word	924828604
 9439 0494 4A5F85F6 		.word	-159031478
 9440 0498 9C9AC1D6 		.word	-691955044
 9441 049c C5442059 		.word	1495286981
 9442 04a0 DEE18F1B 		.word	462414302
 9443 04a4 A5AF427B 		.word	2067967909
 9444 04a8 4ECD60EB 		.word	-345977522
 9445 04ac 6222902C 		.word	747643490
 9446 04b0 EFF0C78D 		.word	-1916276497
 9447 04b4 D257A13D 		.word	1033983954
 9448 04b8 A766B075 		.word	1974494887
 9449 04bc F45568CF 		.word	-815245836
 9450 04c0 A9196C5D 		.word	1567365545
 9451 04c4 4C0492E5 		.word	-443415476
 9452 04c8 1DFEB851 		.word	1371078173
 9453 04cc FA2AB4E7 		.word	-407622918
 9454 04d0 D40CB62E 		.word	783682772
 9455 04d4 2602C9F2 		.word	-221707738
 9456 04d8 0E7FDC28 		.word	685539086
 9457 04dc 7D15DA73 		.word	1943672189
 9458 04e0 6A065B17 		.word	391841386
 9459 04e4 13816479 		.word	2036629779
 9460 04e8 873F6E94 		.word	-1804714105
 9461 04ec 3DA766B0 		.word	-1335449795
 9462 04f0 75311148 		.word	1209086325
 9463 04f4 9677F8E3 		.word	-470255722
 9464 04f8 46E9ABD0 		.word	-794039994
 9465 04fc 9E5333D8 		.word	-667724898
 9466 0500 BA980824 		.word	604543162
 9467 0504 CB3BFC71 		.word	1912355787
 9468 0508 A3F45568 		.word	1750463651
 9469 050c CFA9196C 		.word	1813621199
 9470 0510 5D4C0492 		.word	-1845212067
 9471 0514 E51DFEB8 		.word	-1191305755
 9472 0518 51FA2AB4 		.word	-1272251823
 9473 051c 66B07531 		.word	829796454
ARM GAS  /tmp/ccyBazZt.s 			page 248


 9474 0520 11489677 		.word	2006337553
 9475 0524 F8E346E9 		.word	-381230088
 9476 0528 ABD09E53 		.word	1402917035
 9477 052c 33D8BA98 		.word	-1732585421
 9478 0530 0824CB3B 		.word	1003168776
 9479 0534 FC71A3F4 		.word	-190615044
 9480 0538 5568CFA9 		.word	-1446025131
 9481 053c 196C5D4C 		.word	1281190937
 9482 0540 0492E51D 		.word	501584388
 9483 0544 FEB851FA 		.word	-95307522
 9484 0548 2AB4E7D4 		.word	-723012566
 9485 054c AF427B4E 		.word	1316700847
 9486 0550 CD60EB62 		.word	1659592909
 9487 0554 22902CEF 		.word	-282292190
 9488 0558 F0C78DD2 		.word	-762460176
 9489 055c 57A13DA7 		.word	-1489133225
 9490 0560 66B07531 		.word	829796454
 9491 0564 11489677 		.word	2006337553
 9492 0568 F8E346E9 		.word	-381230088
 9493 056c ABD09E53 		.word	1402917035
 9494 0570 33D8BA98 		.word	-1732585421
 9495 0574 0824CB3B 		.word	1003168776
 9496 0578 FC71A3F4 		.word	-190615044
 9497 057c 980824CB 		.word	-886830952
 9498 0580 3BFC71A3 		.word	-1552810949
 9499 0584 F45568CF 		.word	-815245836
 9500 0588 A9196C5D 		.word	1567365545
 9501 058c 4C0492E5 		.word	-443415476
 9502 0590 1DFEB851 		.word	1371078173
 9503 0594 FA2AB4E7 		.word	-407622918
 9504 0598 D40CB62E 		.word	783682772
 9505 059c 2602C9F2 		.word	-221707738
 9506 05a0 0E7FDC28 		.word	685539086
 9507 05a4 7D15DA73 		.word	1943672189
 9508 05a8 6A065B17 		.word	391841386
 9509 05ac 51FA2AB4 		.word	-1272251823
 9510 05b0 E7D40CB6 		.word	-1240673049
 9511 05b4 2E2602C9 		.word	-922606034
 9512 05b8 F20E7FDC 		.word	-595652878
 9513 05bc 287D15DA 		.word	-636125912
 9514 05c0 736A065B 		.word	1527147123
 9515 05c4 17138164 		.word	1686180631
 9516 05c8 79873F6E 		.word	1849657209
 9517 05cc 94BE0AED 		.word	-318062956
 9518 05d0 393583AD 		.word	-1383910087
 9519 05d4 8B8940B2 		.word	-1304393333
 9520 05d8 BCC31F37 		.word	924828604
 9521 05dc 0AED3935 		.word	892988682
 9522 05e0 83AD8B89 		.word	-1987334781
 9523 05e4 40B2BCC3 		.word	-1011043776
 9524 05e8 1F374A5F 		.word	1598699295
 9525 05ec 85F69C9A 		.word	-1700989307
 9526 05f0 C1D6C544 		.word	1153816257
 9527 05f4 2059DEE1 		.word	-505521888
 9528 05f8 8F1BA5AF 		.word	-1348134001
 9529 05fc 427B4ECD 		.word	-850494654
 9530 0600 60EB6222 		.word	576908128
ARM GAS  /tmp/ccyBazZt.s 			page 249


 9531 0604 902CEFF0 		.word	-252760944
 9532 0608 C78DD257 		.word	1473416647
 9533 060c C31F374A 		.word	1245126595
 9534 0610 5F85F69C 		.word	-1661565601
 9535 0614 9AC1D6C5 		.word	-975781478
 9536 0618 442059DE 		.word	-564584380
 9537 061c E18F1BA5 		.word	-1524920351
 9538 0620 AF427B4E 		.word	1316700847
 9539 0624 CD60EB62 		.word	1659592909
 9540 0628 22902CEF 		.word	-282292190
 9541 062c F0C78DD2 		.word	-762460176
 9542 0630 57A13DA7 		.word	-1489133225
 9543 0634 66B07531 		.word	829796454
 9544 0638 11489677 		.word	2006337553
 9545 063c BCC31F37 		.word	924828604
 9546 0640 4A5F85F6 		.word	-159031478
 9547 0644 9C9AC1D6 		.word	-691955044
 9548 0648 C5442059 		.word	1495286981
 9549 064c DEE18F1B 		.word	462414302
 9550 0650 A5AF427B 		.word	2067967909
 9551 0654 4ECD60EB 		.word	-345977522
 9552 0658 6222902C 		.word	747643490
 9553 065c EFF0C78D 		.word	-1916276497
 9554 0660 D257A13D 		.word	1033983954
 9555 0664 A766B075 		.word	1974494887
 9556 0668 31114896 		.word	-1773661903
 9557 066c 75311148 		.word	1209086325
 9558 0670 9677F8E3 		.word	-470255722
 9559 0674 46E9ABD0 		.word	-794039994
 9560 0678 9E5333D8 		.word	-667724898
 9561 067c BA980824 		.word	604543162
 9562 0680 CB3BFC71 		.word	1912355787
 9563 0684 A3F45568 		.word	1750463651
 9564 0688 CFA9196C 		.word	1813621199
 9565 068c 5D4C0492 		.word	-1845212067
 9566 0690 E51DFEB8 		.word	-1191305755
 9567 0694 51FA2AB4 		.word	-1272251823
 9568 0698 E7D40CB6 		.word	-1240673049
 9569 069c 2E2602C9 		.word	-922606034
 9570 06a0 F20E7FDC 		.word	-595652878
 9571 06a4 287D15DA 		.word	-636125912
 9572 06a8 736A065B 		.word	1527147123
 9573 06ac 17138164 		.word	1686180631
 9574 06b0 79873F6E 		.word	1849657209
 9575 06b4 94BE0AED 		.word	-318062956
 9576 06b8 393583AD 		.word	-1383910087
 9577 06bc 8B8940B2 		.word	-1304393333
 9578 06c0 BCC31F37 		.word	924828604
 9579 06c4 4A5F85F6 		.word	-159031478
 9580 06c8 9C9AC1D6 		.word	-691955044
 9581 06cc E7D40CB6 		.word	-1240673049
 9582 06d0 2E2602C9 		.word	-922606034
 9583 06d4 F20E7FDC 		.word	-595652878
 9584 06d8 287D15DA 		.word	-636125912
 9585 06dc 736A065B 		.word	1527147123
 9586 06e0 17138164 		.word	1686180631
 9587 06e4 79873F6E 		.word	1849657209
ARM GAS  /tmp/ccyBazZt.s 			page 250


 9588 06e8 94BE0AED 		.word	-318062956
 9589 06ec 393583AD 		.word	-1383910087
 9590 06f0 8B8940B2 		.word	-1304393333
 9591 06f4 BCC31F37 		.word	924828604
 9592 06f8 4A5F85F6 		.word	-159031478
 9593 06fc 60EB6222 		.word	576908128
 9594 0700 902CEFF0 		.word	-252760944
 9595 0704 C78DD257 		.word	1473416647
 9596 0708 A13DA766 		.word	1722236321
 9597 070c B0753111 		.word	288454064
 9598 0710 489677F8 		.word	-126380472
 9599 0714 E346E9AB 		.word	-1410775325
 9600 0718 D09E5333 		.word	861118160
 9601 071c D8BA9808 		.word	144227032
 9602 0720 24CB3BFC 		.word	-63190236
 9603 0724 71A3F455 		.word	1442095985
 9604 0728 68CFA919 		.word	430559080
 9605 072c A9196C5D 		.word	1567365545
 9606 0730 4C0492E5 		.word	-443415476
 9607 0734 1DFEB851 		.word	1371078173
 9608 0738 FA2AB4E7 		.word	-407622918
 9609 073c D40CB62E 		.word	783682772
 9610 0740 2602C9F2 		.word	-221707738
 9611 0744 0E7FDC28 		.word	685539086
 9612 0748 7D15DA73 		.word	1943672189
 9613 074c 6A065B17 		.word	391841386
 9614 0750 13816479 		.word	2036629779
 9615 0754 873F6E94 		.word	-1804714105
 9616 0758 BE0AED39 		.word	971836094
 9617 075c F20E7FDC 		.word	-595652878
 9618 0760 287D15DA 		.word	-636125912
 9619 0764 736A065B 		.word	1527147123
 9620 0768 17138164 		.word	1686180631
 9621 076c 79873F6E 		.word	1849657209
 9622 0770 94BE0AED 		.word	-318062956
 9623 0774 393583AD 		.word	-1383910087
 9624 0778 8B8940B2 		.word	-1304393333
 9625 077c BCC31F37 		.word	924828604
 9626 0780 4A5F85F6 		.word	-159031478
 9627 0784 9C9AC1D6 		.word	-691955044
 9628 0788 C5442059 		.word	1495286981
 9629 078c 3BFC71A3 		.word	-1552810949
 9630 0790 F45568CF 		.word	-815245836
 9631 0794 A9196C5D 		.word	1567365545
 9632 0798 4C0492E5 		.word	-443415476
 9633 079c 1DFEB851 		.word	1371078173
 9634 07a0 FA2AB4E7 		.word	-407622918
 9635 07a4 D40CB62E 		.word	783682772
 9636 07a8 2602C9F2 		.word	-221707738
 9637 07ac 0E7FDC28 		.word	685539086
 9638 07b0 7D15DA73 		.word	1943672189
 9639 07b4 6A065B17 		.word	391841386
 9640 07b8 13816479 		.word	2036629779
 9641 07bc 442059DE 		.word	-564584380
 9642 07c0 E18F1BA5 		.word	-1524920351
 9643 07c4 AF427B4E 		.word	1316700847
 9644 07c8 CD60EB62 		.word	1659592909
ARM GAS  /tmp/ccyBazZt.s 			page 251


 9645 07cc 22902CEF 		.word	-282292190
 9646 07d0 F0C78DD2 		.word	-762460176
 9647 07d4 57A13DA7 		.word	-1489133225
 9648 07d8 66B07531 		.word	829796454
 9649 07dc 11489677 		.word	2006337553
 9650 07e0 F8E346E9 		.word	-381230088
 9651 07e4 ABD09E53 		.word	1402917035
 9652 07e8 33D8BA98 		.word	-1732585421
 9653 07ec 8DD257A1 		.word	-1588079987
 9654 07f0 3DA766B0 		.word	-1335449795
 9655 07f4 75311148 		.word	1209086325
 9656 07f8 9677F8E3 		.word	-470255722
 9657 07fc 46E9ABD0 		.word	-794039994
 9658 0800 9E5333D8 		.word	-667724898
 9659 0804 BA980824 		.word	604543162
 9660 0808 CB3BFC71 		.word	1912355787
 9661 080c A3F45568 		.word	1750463651
 9662 0810 CFA9196C 		.word	1813621199
 9663 0814 5D4C0492 		.word	-1845212067
 9664 0818 E51DFEB8 		.word	-1191305755
 9665 081c D6C54420 		.word	541378006
 9666 0820 59DEE18F 		.word	-1881022887
 9667 0824 1BA5AF42 		.word	1118807323
 9668 0828 7B4ECD60 		.word	1624067707
 9669 082c EB622290 		.word	-1876794645
 9670 0830 2CEFF0C7 		.word	-940511444
 9671 0834 8DD257A1 		.word	-1588079987
 9672 0838 3DA766B0 		.word	-1335449795
 9673 083c 75311148 		.word	1209086325
 9674 0840 9677F8E3 		.word	-470255722
 9675 0844 46E9ABD0 		.word	-794039994
 9676 0848 9E5333D8 		.word	-667724898
 9677 084c 1F374A5F 		.word	1598699295
 9678 0850 85F69C9A 		.word	-1700989307
 9679 0854 C1D6C544 		.word	1153816257
 9680 0858 2059DEE1 		.word	-505521888
 9681 085c 8F1BA5AF 		.word	-1348134001
 9682 0860 427B4ECD 		.word	-850494654
 9683 0864 60EB6222 		.word	576908128
 9684 0868 902CEFF0 		.word	-252760944
 9685 086c C78DD257 		.word	1473416647
 9686 0870 A13DA766 		.word	1722236321
 9687 0874 B0753111 		.word	288454064
 9688 0878 489677F8 		.word	-126380472
 9691              	hop_interval_lut:
 9692 087c 00       		.byte	0
 9693 087d 01       		.byte	1
 9694 087e 13       		.byte	19
 9695 087f 19       		.byte	25
 9696 0880 1C       		.byte	28
 9697 0881 0F       		.byte	15
 9698 0882 1F       		.byte	31
 9699 0883 10       		.byte	16
 9700 0884 0E       		.byte	14
 9701 0885 21       		.byte	33
 9702 0886 1A       		.byte	26
 9703 0887 1B       		.byte	27
ARM GAS  /tmp/ccyBazZt.s 			page 252


 9704 0888 22       		.byte	34
 9705 0889 14       		.byte	20
 9706 088a 08       		.byte	8
 9707 088b 05       		.byte	5
 9708 088c 07       		.byte	7
 9709 088d 18       		.byte	24
 9710 088e 23       		.byte	35
 9711 088f 02       		.byte	2
 9712 0890 0D       		.byte	13
 9713 0891 1E       		.byte	30
 9714 0892 20       		.byte	32
 9715 0893 1D       		.byte	29
 9716 0894 11       		.byte	17
 9717 0895 03       		.byte	3
 9718 0896 0A       		.byte	10
 9719 0897 0B       		.byte	11
 9720 0898 04       		.byte	4
 9721 0899 17       		.byte	23
 9722 089a 15       		.byte	21
 9723 089b 06       		.byte	6
 9724 089c 16       		.byte	22
 9725 089d 09       		.byte	9
 9726 089e 0C       		.byte	12
 9727 089f 12       		.byte	18
 9728 08a0 24       		.byte	36
 9729 08a1 000000   		.space	3
 9730              	.LC0:
 9731 08a4 01000000 		.word	1
 9732 08a8 01000000 		.word	1
 9733 08ac 01000000 		.word	1
 9734 08b0 01000000 		.word	1
 9735              	.LC1:
 9736 08b4 00       		.byte	0
 9737 08b5 15       		.byte	21
 9738 08b6 31       		.byte	49
 9739 08b7 56       		.byte	86
 9740 08b8 AF       		.byte	-81
 9741 08b9 50       		.byte	80
 9742 08ba A0       		.byte	-96
 9743 08bb 00       		.byte	0
 9744 08bc 02       		.byte	2
 9745 08bd 01       		.byte	1
 9746 08be 06       		.byte	6
 9747 08bf 07       		.byte	7
 9748 08c0 09       		.byte	9
 9749 08c1 63       		.byte	99
 9750 08c2 61       		.byte	97
 9751 08c3 70       		.byte	112
 9752 08c4 6C       		.byte	108
 9753 08c5 65       		.byte	101
 9754 08c6 64       		.byte	100
 9755 08c7 03       		.byte	3
 9756 08c8 03       		.byte	3
 9757 08c9 00       		.byte	0
 9758 08ca 80       		.byte	-128
 9759 08cb 11       		.byte	17
 9760 08cc C0       		.byte	-64
ARM GAS  /tmp/ccyBazZt.s 			page 253


 9761 08cd CB       		.byte	-53
 9762              		.data
 9763              		.align	2
 9764              		.set	.LANCHOR0,. + 0
 9767              	le:
 9768 0000 D6BE898E 		.word	-1903575338
 9769 0004 7D6B     		.short	27517
 9770 0006 7191     		.short	-28303
 9771 0008 55555500 		.word	5592405
 9772 000c AAAAAA00 		.word	11184810
 9773 0010 00000000 		.word	0
 9774 0014 00       		.byte	0
 9775 0015 000000   		.space	3
 9776 0018 00000000 		.word	0
 9777 001c 00000000 		.space	24
 9777      00000000 
 9777      00000000 
 9777      00000000 
 9777      00000000 
 9778 0034 01000000 		.word	1
 9779 0038 00000000 		.space	12
 9779      00000000 
 9779      00000000 
 9780 0044 00000000 		.word	0
 9781 0048 00000000 		.word	0
 9784              	channel:
 9785 004c 6809     		.short	2408
 9788              	hop_timeout:
 9789 004e 9E00     		.short	158
 9792              	le_adv_channel:
 9793 0050 6209     		.short	2402
 9796              	low_freq:
 9797 0052 6009     		.short	2400
 9800              	high_freq:
 9801 0054 B309     		.short	2483
 9804              	rssi_threshold:
 9805 0056 E2       		.byte	-30
 9806 0057 00       		.space	1
 9809              	le_adv_len:
 9810 0058 03000000 		.word	3
 9813              	le_adv_data:
 9814 005c 02       		.byte	2
 9815 005d 01       		.byte	1
 9816 005e 05       		.byte	5
 9817 005f 00000000 		.space	18
 9817      00000000 
 9817      00000000 
 9817      00000000 
 9817      0000
 9820              	idx3:
 9821 0071 02       		.byte	2
 9824              	calc.5010:
 9825 0072 01       		.byte	1
 9828              	idx2:
 9829 0073 01       		.byte	1
 9832              	max_count.5031:
 9833 0074 0100     		.short	1
ARM GAS  /tmp/ccyBazZt.s 			page 254


 9834              		.bss
 9835              		.align	2
 9836              		.set	.LANCHOR1,. + 0
 9839              	modulation:
 9840 0000 00       		.space	1
 9843              	status:
 9844 0001 00       		.space	1
 9847              	idle_buf_clkn_high:
 9848 0002 00       		.space	1
 9849 0003 00       		.space	1
 9852              	idle_buf_clk100ns:
 9853 0004 00000000 		.space	4
 9856              	idle_buf_channel:
 9857 0008 0000     		.space	2
 9860              	hop_mode:
 9861 000a 00       		.space	1
 9864              	do_hop:
 9865 000b 00       		.space	1
 9868              	hop_direct_channel:
 9869 000c 0000     		.space	2
 9872              	requested_channel:
 9873 000e 0000     		.space	2
 9876              	dma_discard:
 9877 0010 00       		.space	1
 9880              	mode:
 9881 0011 00       		.space	1
 9884              	requested_mode:
 9885 0012 00       		.space	1
 9888              	jam_mode:
 9889 0013 00       		.space	1
 9892              	ego_mode:
 9893 0014 00       		.space	1
 9894 0015 000000   		.space	3
 9897              	packet_cb:
 9898 0018 00000000 		.space	4
 9901              	window_shift:
 9902 001c 00000000 		.space	4
 9905              	tx_anchor:
 9906 0020 00000000 		.space	4
 9909              	anchor_set:
 9910 0024 00       		.space	1
 9911 0025 000000   		.space	3
 9914              	cancel_follow:
 9915 0028 00000000 		.space	4
 9918              	do_transmit:
 9919 002c 00       		.space	1
 9920 002d 000000   		.space	3
 9923              	data_cb:
 9924 0030 00000000 		.space	4
 9927              	m.4985:
 9928 0034 00       		.space	1
 9931              	send_clock:
 9932 0035 00       		.space	1
 9933 0036 0000     		.space	2
 9936              	anchor_timestamp:
 9937 0038 00000000 		.space	4
 9940              	count3:
ARM GAS  /tmp/ccyBazZt.s 			page 255


 9941 003c 00       		.space	1
 9944              	count2:
 9945 003d 00       		.space	1
 9946 003e 0000     		.space	2
 9949              	le_jam_count:
 9950 0040 00000000 		.space	4
 9953              	restart_jamming.4908:
 9954 0044 00000000 		.space	4
 9957              	time_array1:
 9958 0048 00000000 		.space	32
 9958      00000000 
 9958      00000000 
 9958      00000000 
 9958      00000000 
 9961              	count.5008:
 9962 0068 0000     		.space	2
 9963 006a 0000     		.space	2
 9966              	seq.5007:
 9967 006c 00000000 		.space	72
 9967      00000000 
 9967      00000000 
 9967      00000000 
 9967      00000000 
 9970              	prev_clk.5006:
 9971 00b4 00000000 		.space	4
 9974              	match.5013:
 9975 00b8 00       		.space	1
 9976 00b9 00       		.space	1
 9979              	sindex.5009:
 9980 00ba 0000     		.space	2
 9983              	interval.5011:
 9984 00bc 00000000 		.space	4
 9987              	step.5012:
 9988 00c0 00       		.space	1
 9989 00c1 00       		.space	1
 9992              	eindex:
 9993 00c2 0000     		.space	2
 9996              	obsv_hop_interval.5020:
 9997 00c4 0000     		.space	2
 9998 00c6 0000     		.space	2
 10001              	first_ts.5014:
 10002 00c8 00000000 		.space	4
 10005              	time_array2:
 10006 00cc 00000000 		.space	32
 10006      00000000 
 10006      00000000 
 10006      00000000 
 10006      00000000 
 10009              	count1:
 10010 00ec 00       		.space	1
 10011 00ed 00       		.space	1
 10014              	time_array3:
 10015 00ee 00000000 		.space	32
 10015      00000000 
 10015      00000000 
 10015      00000000 
 10015      00000000 
ARM GAS  /tmp/ccyBazZt.s 			page 256


 10018              	ta1.5035:
 10019 010e 00       		.space	1
 10022              	idx1:
 10023 010f 00       		.space	1
 10026              	hops.5040:
 10027 0110 00       		.space	1
 10030              	ta2.5036:
 10031 0111 00       		.space	1
 10034              	diff.5030:
 10035 0112 0000     		.space	2
 10038              	hops2.5041:
 10039 0114 00       		.space	1
 10042              	index.5028:
 10043 0115 00       		.space	1
 10046              	sync_count:
 10047 0116 00       		.space	1
 10050              	ta3.5037:
 10051 0117 00       		.space	1
 10054              	ch_hop.5029:
 10055 0118 00000000 		.space	64
 10055      00000000 
 10055      00000000 
 10055      00000000 
 10055      00000000 
 10058              	j.5039:
 10059 0158 00       		.space	1
 10060 0159 00       		.space	1
 10063              	max_val.5033:
 10064 015a 0000     		.space	2
 10067              	curr_count.5032:
 10068 015c 0000     		.space	2
 10071              	i.5038:
 10072 015e 00       		.space	1
 10075              	slave_mac_address:
 10076 015f 00000000 		.space	6
 10076      0000
 10077 0165 00       		.space	1
 10080              	index1:
 10081 0166 0000     		.space	2
 10082              		.section	.rodata.str1.1,"aMS",%progbits,1
 10083              	.LC3:
 10084 0000 4920616D 		.ascii	"I am in cb\012\000"
 10084      20696E20 
 10084      63620A00 
 10085              	.LC4:
 10086 000c 6769742D 		.ascii	"git-\000"
 10086      00
 10087              	.LC5:
 10088 0011 41412073 		.ascii	"AA set\012\000"
 10088      65740A00 
 10089              	.LC6:
 10090 0019 486F7020 		.ascii	"Hop interval set\012\000"
 10090      696E7465 
 10090      7276616C 
 10090      20736574 
 10090      0A00
 10091              	.LC7:
ARM GAS  /tmp/ccyBazZt.s 			page 257


 10092 002b 486F7020 		.ascii	"Hop increment set\012\000"
 10092      696E6372 
 10092      656D656E 
 10092      74207365 
 10092      740A00
 10093              	.LC8:
 10094 003e 416E6368 		.ascii	"Anchor: %d\012\000"
 10094      6F723A20 
 10094      25640A00 
 10095              	.LC9:
 10096 004a 6368616E 		.ascii	"channel_a: %d,\011%d\012\000"
 10096      6E656C5F 
 10096      613A2025 
 10096      642C0925 
 10096      640A00
 10097              	.LC10:
 10098 005d 6368616E 		.ascii	"channel: %d\011%d\012\000"
 10098      6E656C3A 
 10098      20256409 
 10098      25640A00 
 10099              	.LC11:
 10100 006d 0A0A2A2A 		.ascii	"\012\012****UBERTOOTH BOOT****\012%s\012\000"
 10100      2A2A5542 
 10100      4552544F 
 10100      4F544820 
 10100      424F4F54 
 10101              		.text
 10102              	.Letext0:
 10103              		.file 2 "/usr/lib/gcc/arm-none-eabi/6.3.1/include/stddef.h"
 10104              		.file 3 "/usr/include/newlib/sys/lock.h"
 10105              		.file 4 "/usr/include/newlib/sys/_types.h"
 10106              		.file 5 "/usr/include/newlib/sys/reent.h"
 10107              		.file 6 "/usr/lib/gcc/arm-none-eabi/6.3.1/include/stdint-gcc.h"
 10108              		.file 7 "../../host/libubertooth/src/ubertooth_interface.h"
 10109              		.file 8 "../common/ubertooth.h"
 10110              		.file 9 "ubertooth_rssi.h"
 10111              		.file 10 "ubertooth_cs.h"
 10112              		.file 11 "ubertooth_dma.h"
 10113              		.file 12 "ubertooth_clock.h"
 10114              		.file 13 "bluetooth.h"
 10115              		.file 14 "bluetooth_le.h"
 10116              		.file 15 "ego.h"
 10117              		.file 16 "debug_uart.h"
 10118              		.file 17 "cc2400_rangetest.h"
 10119              		.file 18 "ubertooth_usb.h"
 10120              		.file 19 "/usr/include/newlib/string.h"
ARM GAS  /tmp/ccyBazZt.s 			page 258


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bluetooth_rxtx.c
     /tmp/ccyBazZt.s:16     .text.reverse8:0000000000000000 $t
     /tmp/ccyBazZt.s:22     .text.reverse8:0000000000000000 reverse8
     /tmp/ccyBazZt.s:71     .text.connection_follow_cb:0000000000000000 $t
     /tmp/ccyBazZt.s:78     .text.connection_follow_cb:0000000000000000 connection_follow_cb
     /tmp/ccyBazZt.s:91     .text.le_set_access_address:0000000000000000 $t
     /tmp/ccyBazZt.s:97     .text.le_set_access_address:0000000000000000 le_set_access_address
     /tmp/ccyBazZt.s:125    .text.le_set_access_address:0000000000000014 $d
     /tmp/ccyBazZt.s:130    .text.cc2400_rx:0000000000000000 $t
     /tmp/ccyBazZt.s:136    .text.cc2400_rx:0000000000000000 cc2400_rx
     /tmp/ccyBazZt.s:249    .text.cc2400_rx:000000000000009c $d
     /tmp/ccyBazZt.s:256    .text.cc2400_rx_sync:0000000000000000 $t
     /tmp/ccyBazZt.s:262    .text.cc2400_rx_sync:0000000000000000 cc2400_rx_sync
     /tmp/ccyBazZt.s:388    .text.cc2400_rx_sync:00000000000000a8 $d
     /tmp/ccyBazZt.s:395    .text.enqueue:0000000000000000 $t
     /tmp/ccyBazZt.s:401    .text.enqueue:0000000000000000 enqueue
     /tmp/ccyBazZt.s:510    .text.enqueue:0000000000000080 $d
                            *COM*:0000000000000004 clkn
                            *COM*:0000000000000001 rssi_min
                            *COM*:0000000000000001 rssi_max
                            *COM*:0000000000000001 rssi_count
     /tmp/ccyBazZt.s:520    .text.cc2400_idle:0000000000000000 $t
     /tmp/ccyBazZt.s:526    .text.cc2400_idle:0000000000000000 cc2400_idle
     /tmp/ccyBazZt.s:641    .text.cc2400_idle:000000000000009c $d
                            *COM*:0000000000000010 target
     /tmp/ccyBazZt.s:649    .text.cb_follow_le:0000000000000000 $t
     /tmp/ccyBazZt.s:656    .text.cb_follow_le:0000000000000000 cb_follow_le
     /tmp/ccyBazZt.s:883    .text.cb_follow_le:00000000000000fc $d
                            *COM*:0000000000000320 unpacked
                            *COM*:0000000000000004 idle_rxbuf
     /tmp/ccyBazZt.s:895    .text.vendor_request_handler:0000000000000000 $t
     /tmp/ccyBazZt.s:901    .text.vendor_request_handler:0000000000000000 vendor_request_handler
     /tmp/ccyBazZt.s:927    .text.vendor_request_handler:0000000000000012 $d
     /tmp/ccyBazZt.s:1005   .text.vendor_request_handler:00000000000000ae $t
     /tmp/ccyBazZt.s:1603   .text.vendor_request_handler:0000000000000370 $d
                            *COM*:0000000000000005 rr
                            *COM*:0000000000000001 cs_threshold_req
     /tmp/ccyBazZt.s:1621   .text.vendor_request_handler:00000000000003ac $t
     /tmp/ccyBazZt.s:2272   .text.vendor_request_handler:0000000000000654 $d
                            *COM*:0000000000000004 clkn_offset
                            *COM*:0000000000000002 clk100ns_offset
                            *COM*:000000000000000a afh_map
                            *COM*:0000000000000001 used_channels
                            *COM*:0000000000000001 afh_enabled
                            *COM*:0000000000000002 clk_drift_ppm
                            *COM*:0000000000000004 clkn_next_drift_fix
                            *COM*:0000000000000002 clk_drift_correction
                            *COM*:0000000000000004 clkn_last_drift_fix
                            *COM*:000000000000003a tx_pkt
     /tmp/ccyBazZt.s:2297   .text.vendor_request_handler:00000000000006ac $t
     /tmp/ccyBazZt.s:2464   .text.vendor_request_handler:0000000000000760 $d
     /tmp/ccyBazZt.s:2473   .text.enqueue_with_ts:0000000000000000 $t
     /tmp/ccyBazZt.s:2480   .text.enqueue_with_ts:0000000000000000 enqueue_with_ts
     /tmp/ccyBazZt.s:2554   .text.enqueue_with_ts:0000000000000050 $d
     /tmp/ccyBazZt.s:2560   .text.TIMER0_IRQHandler:0000000000000000 $t
     /tmp/ccyBazZt.s:2567   .text.TIMER0_IRQHandler:0000000000000000 TIMER0_IRQHandler
ARM GAS  /tmp/ccyBazZt.s 			page 259


     /tmp/ccyBazZt.s:2771   .text.TIMER0_IRQHandler:00000000000000f0 $d
                            *COM*:0000000000000004 last_hop
     /tmp/ccyBazZt.s:2784   .text.EINT3_IRQHandler:0000000000000000 $t
     /tmp/ccyBazZt.s:2791   .text.EINT3_IRQHandler:0000000000000000 EINT3_IRQHandler
     /tmp/ccyBazZt.s:2822   .text.EINT3_IRQHandler:0000000000000024 $d
                            *COM*:0000000000000001 cs_trigger
     /tmp/ccyBazZt.s:2830   .text.legacy_DMA_IRQHandler:0000000000000000 $t
     /tmp/ccyBazZt.s:2837   .text.legacy_DMA_IRQHandler:0000000000000000 legacy_DMA_IRQHandler
     /tmp/ccyBazZt.s:2967   .text.legacy_DMA_IRQHandler:00000000000000ac $d
                            *COM*:0000000000000004 active_rxbuf
                            *COM*:0000000000000004 rx_tc
                            *COM*:0000000000000004 rx_err
     /tmp/ccyBazZt.s:2986   .text.DMA_IRQHandler:0000000000000000 $t
     /tmp/ccyBazZt.s:2993   .text.DMA_IRQHandler:0000000000000000 DMA_IRQHandler
     /tmp/ccyBazZt.s:3056   .text.DMA_IRQHandler:0000000000000048 $d
     /tmp/ccyBazZt.s:3068   .text.le_transmit:0000000000000000 $t
     /tmp/ccyBazZt.s:3075   .text.le_transmit:0000000000000000 le_transmit
     /tmp/ccyBazZt.s:3309   .text.le_transmit:0000000000000150 $d
     /tmp/ccyBazZt.s:3318   .text.le_jam:0000000000000000 $t
     /tmp/ccyBazZt.s:3325   .text.le_jam:0000000000000000 le_jam
     /tmp/ccyBazZt.s:3409   .text.le_jam:0000000000000074 $d
     /tmp/ccyBazZt.s:3414   .text.hop:0000000000000000 $t
     /tmp/ccyBazZt.s:3421   .text.hop:0000000000000000 hop
     /tmp/ccyBazZt.s:3683   .text.hop:00000000000001b8 $d
     /tmp/ccyBazZt.s:3694   .text.bt_stream_rx:0000000000000000 $t
     /tmp/ccyBazZt.s:3701   .text.bt_stream_rx:0000000000000000 bt_stream_rx
     /tmp/ccyBazZt.s:3934   .text.bt_stream_rx:0000000000000140 $d
                            *COM*:0000000000000001 cs_no_squelch
                            *COM*:0000000000000001 cs_threshold_cur
     /tmp/ccyBazZt.s:3950   .text.br_transmit:0000000000000000 $t
     /tmp/ccyBazZt.s:3957   .text.br_transmit:0000000000000000 br_transmit
     /tmp/ccyBazZt.s:4392   .text.br_transmit:000000000000025c $d
     /tmp/ccyBazZt.s:4405   .text.reset_le:0000000000000000 $t
     /tmp/ccyBazZt.s:4412   .text.reset_le:0000000000000000 reset_le
     /tmp/ccyBazZt.s:4474   .text.reset_le:0000000000000040 $d
     /tmp/ccyBazZt.s:4483   .text.reset_le_promisc:0000000000000000 $t
     /tmp/ccyBazZt.s:4490   .text.reset_le_promisc:0000000000000000 reset_le_promisc
     /tmp/ccyBazZt.s:4514   .text.reset_le_promisc:000000000000001c $d
                            *COM*:0000000000000108 le_promisc
     /tmp/ccyBazZt.s:4519   .text.bt_generic_le:0000000000000000 $t
     /tmp/ccyBazZt.s:4526   .text.bt_generic_le:0000000000000000 bt_generic_le
     /tmp/ccyBazZt.s:4879   .text.bt_generic_le:00000000000001c4 $d
     /tmp/ccyBazZt.s:4898   .text.rearrange_channel:0000000000000000 $t
     /tmp/ccyBazZt.s:4905   .text.rearrange_channel:0000000000000000 rearrange_channel
     /tmp/ccyBazZt.s:4926   .text.rearrange_channel:000000000000000c $d
     /tmp/ccyBazZt.s:4931   .text.le_promisc_state:0000000000000000 $t
     /tmp/ccyBazZt.s:4938   .text.le_promisc_state:0000000000000000 le_promisc_state
     /tmp/ccyBazZt.s:4992   .text.bt_le_sync:0000000000000000 $t
     /tmp/ccyBazZt.s:4999   .text.bt_le_sync:0000000000000000 bt_le_sync
     /tmp/ccyBazZt.s:5453   .text.bt_le_sync:0000000000000294 $d
                            *COM*:0000000000000032 rxbuf1
     /tmp/ccyBazZt.s:5476   .text.bt_le_sync:00000000000002e0 $t
     /tmp/ccyBazZt.s:5722   .text.bt_le_sync:000000000000042c $d
     /tmp/ccyBazZt.s:5740   .text.promisc_recover_hop_interval:0000000000000000 $t
     /tmp/ccyBazZt.s:5747   .text.promisc_recover_hop_interval:0000000000000000 promisc_recover_hop_interval
     /tmp/ccyBazZt.s:6249   .text.promisc_recover_hop_interval:0000000000000354 $d
     /tmp/ccyBazZt.s:6261   .text.promisc_recover_hop_interval:0000000000000378 $t
ARM GAS  /tmp/ccyBazZt.s 			page 260


     /tmp/ccyBazZt.s:6704   .text.promisc_recover_hop_interval:00000000000006b0 $d
     /tmp/ccyBazZt.s:6714   .text.promisc_recover_hop_interval:00000000000006cc $t
     /tmp/ccyBazZt.s:6800   .text.promisc_recover_hop_interval:0000000000000738 $d
     /tmp/ccyBazZt.s:6808   .text.promisc_follow_cb:0000000000000000 $t
     /tmp/ccyBazZt.s:6815   .text.promisc_follow_cb:0000000000000000 promisc_follow_cb
     /tmp/ccyBazZt.s:6912   .text.promisc_follow_cb:0000000000000060 $d
     /tmp/ccyBazZt.s:6923   .text.see_aa:0000000000000000 $t
     /tmp/ccyBazZt.s:6930   .text.see_aa:0000000000000000 see_aa
     /tmp/ccyBazZt.s:7007   .text.see_aa:0000000000000050 $d
     /tmp/ccyBazZt.s:7014   .text.cb_le_promisc:0000000000000000 $t
     /tmp/ccyBazZt.s:7021   .text.cb_le_promisc:0000000000000000 cb_le_promisc
     /tmp/ccyBazZt.s:7359   .text.cb_le_promisc:00000000000001ac $d
     /tmp/ccyBazZt.s:7372   .text.bt_promisc_le:0000000000000000 $t
     /tmp/ccyBazZt.s:7379   .text.bt_promisc_le:0000000000000000 bt_promisc_le
     /tmp/ccyBazZt.s:7469   .text.bt_promisc_le:0000000000000070 $d
     /tmp/ccyBazZt.s:7478   .text.bt_transmit_le:0000000000000000 $t
     /tmp/ccyBazZt.s:7485   .text.bt_transmit_le:0000000000000000 bt_transmit_le
     /tmp/ccyBazZt.s:7775   .text.bt_transmit_le:00000000000001b0 $d
     /tmp/ccyBazZt.s:7792   .text.bt_slave_le:0000000000000000 $t
     /tmp/ccyBazZt.s:7799   .text.bt_slave_le:0000000000000000 bt_slave_le
     /tmp/ccyBazZt.s:7899   .text.bt_slave_le:0000000000000074 $d
     /tmp/ccyBazZt.s:7912   .text.rx_generic_sync:0000000000000000 $t
     /tmp/ccyBazZt.s:7919   .text.rx_generic_sync:0000000000000000 rx_generic_sync
     /tmp/ccyBazZt.s:8043   .text.rx_generic_sync:0000000000000094 $d
     /tmp/ccyBazZt.s:8051   .text.rx_generic:0000000000000000 $t
     /tmp/ccyBazZt.s:8058   .text.rx_generic:0000000000000000 rx_generic
     /tmp/ccyBazZt.s:8092   .text.rx_generic:000000000000001c $d
     /tmp/ccyBazZt.s:8097   .text.tx_generic:0000000000000000 $t
     /tmp/ccyBazZt.s:8104   .text.tx_generic:0000000000000000 tx_generic
     /tmp/ccyBazZt.s:8266   .text.tx_generic:00000000000000dc $d
     /tmp/ccyBazZt.s:8276   .text.specan:0000000000000000 $t
     /tmp/ccyBazZt.s:8283   .text.specan:0000000000000000 specan
     /tmp/ccyBazZt.s:8479   .text.specan:00000000000000fc $d
     /tmp/ccyBazZt.s:8489   .text.led_specan:0000000000000000 $t
     /tmp/ccyBazZt.s:8496   .text.led_specan:0000000000000000 led_specan
     /tmp/ccyBazZt.s:8710   .text.led_specan:000000000000011c $d
     /tmp/ccyBazZt.s:8721   .text.startup.main:0000000000000000 $t
     /tmp/ccyBazZt.s:8728   .text.startup.main:0000000000000000 main
     /tmp/ccyBazZt.s:8786   .text.startup.main:0000000000000048 $d
     /tmp/ccyBazZt.s:8804   .text.startup.main:0000000000000090 $t
     /tmp/ccyBazZt.s:8947   .text.startup.main:0000000000000124 $d
     /tmp/ccyBazZt.s:9897   .bss:0000000000000018 packet_cb
     /tmp/ccyBazZt.s:9923   .bss:0000000000000030 data_cb
     /tmp/ccyBazZt.s:9949   .bss:0000000000000040 le_jam_count
                            *COM*:00000000000000c0 remapping
                            *COM*:00000000000000c0 pending_remapping
     /tmp/ccyBazZt.s:9767   .data:0000000000000000 le
     /tmp/ccyBazZt.s:9809   .data:0000000000000058 le_adv_len
     /tmp/ccyBazZt.s:9813   .data:000000000000005c le_adv_data
     /tmp/ccyBazZt.s:10075  .bss:000000000000015f slave_mac_address
     /tmp/ccyBazZt.s:9936   .bss:0000000000000038 anchor_timestamp
     /tmp/ccyBazZt.s:9905   .bss:0000000000000020 tx_anchor
     /tmp/ccyBazZt.s:10080  .bss:0000000000000166 index1
                            *COM*:0000000000000002 time1
     /tmp/ccyBazZt.s:9820   .data:0000000000000071 idx3
     /tmp/ccyBazZt.s:9828   .data:0000000000000073 idx2
     /tmp/ccyBazZt.s:10022  .bss:000000000000010f idx1
ARM GAS  /tmp/ccyBazZt.s 			page 261


     /tmp/ccyBazZt.s:9804   .data:0000000000000056 rssi_threshold
     /tmp/ccyBazZt.s:9800   .data:0000000000000054 high_freq
     /tmp/ccyBazZt.s:9796   .data:0000000000000052 low_freq
     /tmp/ccyBazZt.s:9839   .bss:0000000000000000 modulation
     /tmp/ccyBazZt.s:9892   .bss:0000000000000014 ego_mode
     /tmp/ccyBazZt.s:9888   .bss:0000000000000013 jam_mode
     /tmp/ccyBazZt.s:9884   .bss:0000000000000012 requested_mode
     /tmp/ccyBazZt.s:9880   .bss:0000000000000011 mode
     /tmp/ccyBazZt.s:9843   .bss:0000000000000001 status
     /tmp/ccyBazZt.s:9876   .bss:0000000000000010 dma_discard
     /tmp/ccyBazZt.s:9856   .bss:0000000000000008 idle_buf_channel
     /tmp/ccyBazZt.s:9852   .bss:0000000000000004 idle_buf_clk100ns
     /tmp/ccyBazZt.s:9847   .bss:0000000000000002 idle_buf_clkn_high
     /tmp/ccyBazZt.s:9914   .bss:0000000000000028 cancel_follow
     /tmp/ccyBazZt.s:9792   .data:0000000000000050 le_adv_channel
     /tmp/ccyBazZt.s:9872   .bss:000000000000000e requested_channel
     /tmp/ccyBazZt.s:9788   .data:000000000000004e hop_timeout
     /tmp/ccyBazZt.s:9868   .bss:000000000000000c hop_direct_channel
     /tmp/ccyBazZt.s:9784   .data:000000000000004c channel
     /tmp/ccyBazZt.s:9864   .bss:000000000000000b do_hop
     /tmp/ccyBazZt.s:9860   .bss:000000000000000a hop_mode
     /tmp/ccyBazZt.s:9202   .rodata:00000000000000a7 compile_info
                            *COM*:0000000000000008 syncword
                            *COM*:0000000000000032 rxbuf2
     /tmp/ccyBazZt.s:9025   .rodata:0000000000000000 $d
     /tmp/ccyBazZt.s:9029   .rodata:0000000000000000 whitening_index
     /tmp/ccyBazZt.s:9072   .rodata:0000000000000028 whitening
     /tmp/ccyBazZt.s:9208   .rodata:00000000000000fc whitening_word
     /tmp/ccyBazZt.s:9691   .rodata:000000000000087c hop_interval_lut
     /tmp/ccyBazZt.s:9763   .data:0000000000000000 $d
     /tmp/ccyBazZt.s:9824   .data:0000000000000072 calc.5010
     /tmp/ccyBazZt.s:9832   .data:0000000000000074 max_count.5031
     /tmp/ccyBazZt.s:9835   .bss:0000000000000000 $d
     /tmp/ccyBazZt.s:9901   .bss:000000000000001c window_shift
     /tmp/ccyBazZt.s:9909   .bss:0000000000000024 anchor_set
     /tmp/ccyBazZt.s:9918   .bss:000000000000002c do_transmit
     /tmp/ccyBazZt.s:9927   .bss:0000000000000034 m.4985
     /tmp/ccyBazZt.s:9931   .bss:0000000000000035 send_clock
     /tmp/ccyBazZt.s:9940   .bss:000000000000003c count3
     /tmp/ccyBazZt.s:9944   .bss:000000000000003d count2
     /tmp/ccyBazZt.s:9953   .bss:0000000000000044 restart_jamming.4908
     /tmp/ccyBazZt.s:9957   .bss:0000000000000048 time_array1
     /tmp/ccyBazZt.s:9961   .bss:0000000000000068 count.5008
     /tmp/ccyBazZt.s:9966   .bss:000000000000006c seq.5007
     /tmp/ccyBazZt.s:9970   .bss:00000000000000b4 prev_clk.5006
     /tmp/ccyBazZt.s:9974   .bss:00000000000000b8 match.5013
     /tmp/ccyBazZt.s:9979   .bss:00000000000000ba sindex.5009
     /tmp/ccyBazZt.s:9983   .bss:00000000000000bc interval.5011
     /tmp/ccyBazZt.s:9987   .bss:00000000000000c0 step.5012
     /tmp/ccyBazZt.s:9992   .bss:00000000000000c2 eindex
     /tmp/ccyBazZt.s:9996   .bss:00000000000000c4 obsv_hop_interval.5020
     /tmp/ccyBazZt.s:10001  .bss:00000000000000c8 first_ts.5014
     /tmp/ccyBazZt.s:10005  .bss:00000000000000cc time_array2
     /tmp/ccyBazZt.s:10009  .bss:00000000000000ec count1
     /tmp/ccyBazZt.s:10014  .bss:00000000000000ee time_array3
     /tmp/ccyBazZt.s:10018  .bss:000000000000010e ta1.5035
     /tmp/ccyBazZt.s:10026  .bss:0000000000000110 hops.5040
ARM GAS  /tmp/ccyBazZt.s 			page 262


     /tmp/ccyBazZt.s:10030  .bss:0000000000000111 ta2.5036
     /tmp/ccyBazZt.s:10034  .bss:0000000000000112 diff.5030
     /tmp/ccyBazZt.s:10038  .bss:0000000000000114 hops2.5041
     /tmp/ccyBazZt.s:10042  .bss:0000000000000115 index.5028
     /tmp/ccyBazZt.s:10046  .bss:0000000000000116 sync_count
     /tmp/ccyBazZt.s:10050  .bss:0000000000000117 ta3.5037
     /tmp/ccyBazZt.s:10054  .bss:0000000000000118 ch_hop.5029
     /tmp/ccyBazZt.s:10058  .bss:0000000000000158 j.5039
     /tmp/ccyBazZt.s:10063  .bss:000000000000015a max_val.5033
     /tmp/ccyBazZt.s:10067  .bss:000000000000015c curr_count.5032
     /tmp/ccyBazZt.s:10071  .bss:000000000000015e i.5038
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
rbit
cc2400_set
cs_threshold_calc_and_set
clkn_start
cc2400_status
cc2400_strobe
usb_enqueue
memcpy
rssi_get_avg
clkn_stop
dio_ssp_stop
cs_reset
rssi_reset
debug_printf
btle_channel_index
btle_crcgen_lut
__aeabi_llsl
get_part_num
get_device_serial
cc2400_get
set_isp
strlen
precalc
bootloader_ctrl
usb_queue_init
dequeue
btle_next_hop
memset
le_DMA_IRQHandler
debug_dma_active
cc2400_fifo_write
next_hop
dio_ssp_init
dma_init_rx_symbols
dio_ssp_start
cs_trigger_enable
cs_trigger_disable
rssi_iir_update
handle_usb
rssi_add
dma_init_le
__aeabi_i2d
__aeabi_dadd
ARM GAS  /tmp/ccyBazZt.s 			page 263


__aeabi_ddiv
__aeabi_d2uiz
__aeabi_dmul
__aeabi_dsub
abs
btle_channel_index_to_phys
btle_reverse_crc
cc2400_fifo_read
ubertooth_init
clkn_init
ubertooth_usb_init
dma_poweron
debug_uart_init
wait
reset
cc2400_txtest
cc2400_rangetest
cc2400_repeater
ego_main
